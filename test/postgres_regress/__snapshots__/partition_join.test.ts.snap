// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`partition_join.sql > line 7 1`] = `
[
  "SET enable_partitionwise_join to true",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 33,
                  "sval": {
                    "sval": "true",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_partitionwise_join",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 12 1`] = `
[
  "CREATE TABLE prt1 (a int, b int, c varchar) PARTITION BY RANGE(a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 44,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 63,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 22 1`] = `
[
  "CREATE TABLE prt2 (a int, b int, c varchar) PARTITION BY RANGE(b)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 44,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 63,
                    "name": "b",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 33 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1, prt2 t2 WHERE t1.a = t2.b AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "prt2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 112,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 118,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 101,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 90,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 38 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT COUNT(*) FROM prt1 t1
  LEFT JOIN prt1 t2 ON t1.a = t2.a
  LEFT JOIN prt1 t3 ON t2.a = t3.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 41,
                              "relname": "prt1",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 72,
                                },
                              },
                              "location": 77,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 79,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 61,
                              "relname": "prt1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 107,
                            },
                          },
                          "location": 112,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 114,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 96,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 47 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1, t2 FROM prt1 t1 LEFT JOIN prt2 t2 ON t1.a = t2.b WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 68,
                            },
                          },
                          "location": 73,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 75,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 57,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 104,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 110,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 86,
                      },
                    },
                    "location": 91,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 93,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 52 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1 RIGHT JOIN prt2 t2 ON t1.a = t2.b WHERE t2.a = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                          "location": 90,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 92,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 74,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 121,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 127,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t2",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 103,
                      },
                    },
                    "location": 108,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 110,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 57 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT 50 phv, * FROM prt1 WHERE prt1.b = 0) t1 FULL JOIN (SELECT 75 phv, * FROM prt2 WHERE prt2.a = 0) t2 ON (t1.a = t2.b) WHERE t1.phv = t1.a OR t2.phv = t2.b ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 78,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "name": "phv",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 50,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 71,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 71,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 89,
                                    },
                                  },
                                  "location": 96,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 98,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 167,
                            },
                          },
                          "location": 172,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 174,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 137,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 122,
                                    "name": "phv",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 75,
                                        },
                                        "location": 122,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 130,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 130,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 148,
                                    },
                                  },
                                  "location": 155,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 157,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 226,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 232,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 186,
                            },
                          },
                          "location": 193,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 195,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 203,
                            },
                          },
                          "location": 210,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 212,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 200,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 62 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1, prt2 t2 WHERE t1.a = t2.b AND t1.a < 450 AND t2.b > 250 AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "prt2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 142,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 148,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 450,
                              },
                              "location": 101,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 109,
                            },
                          },
                          "location": 114,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 250,
                              },
                              "location": 116,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 124,
                            },
                          },
                          "location": 129,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 131,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 90,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 67 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1 WHERE a < 450) t1 LEFT JOIN (SELECT * FROM prt2 WHERE b > 250) t2 ON t1.a = t2.b WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 81,
                                    },
                                  },
                                  "location": 83,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 450,
                                      },
                                      "location": 85,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 144,
                            },
                          },
                          "location": 149,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 151,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 118,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 111,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 111,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 129,
                                    },
                                  },
                                  "location": 131,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 250,
                                      },
                                      "location": 133,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 180,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 186,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 162,
                      },
                    },
                    "location": 167,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 169,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 72 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1 WHERE a < 450) t1 FULL JOIN (SELECT * FROM prt2 WHERE b > 250) t2 ON t1.a = t2.b WHERE t1.b = 0 OR t2.a = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 81,
                                    },
                                  },
                                  "location": 83,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 450,
                                      },
                                      "location": 85,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 144,
                            },
                          },
                          "location": 149,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 151,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 118,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 111,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 111,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 129,
                                    },
                                  },
                                  "location": 131,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 250,
                                      },
                                      "location": 133,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 192,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 198,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 162,
                            },
                          },
                          "location": 167,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 169,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 174,
                            },
                          },
                          "location": 179,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 181,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 171,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 77 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt1 t1 WHERE t1.a IN (SELECT t2.b FROM prt2 t2 WHERE t2.a = 0) AND t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 123,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 56,
                          "subLinkType": "ANY_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 77,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 67,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 67,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 91,
                                    },
                                  },
                                  "location": 96,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 98,
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "testexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 105,
                            },
                          },
                          "location": 110,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 112,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 101,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 82 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT sum(t1.a), avg(t1.a), sum(t1.b), avg(t1.b) FROM prt1 t1 WHERE NOT EXISTS (SELECT 1 FROM prt2 t2 WHERE t1.a = t2.b)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 75,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 49,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 53,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 49,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 60,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 64,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 60,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 93,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 115,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 108,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 108,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 129,
                                    },
                                  },
                                  "location": 134,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 136,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "NOT_EXPR",
                    "location": 89,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 87 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT * FROM prt1 t1 LEFT JOIN LATERAL
			  (SELECT t2.a AS t2a, t3.a AS t3a, least(t1.a,t2.a,t3.b) FROM prt1 t2 JOIN prt2 t3 ON (t2.a = t3.b)) ss
			  ON t1.a = ss.t2a WHERE t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 176,
                            },
                          },
                          "location": 181,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "t2a",
                                  },
                                },
                              ],
                              "location": 183,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 126,
                                        "relname": "prt1",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 151,
                                          },
                                        },
                                        "location": 156,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 158,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 139,
                                        "relname": "prt2",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 73,
                                    "name": "t2a",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 73,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 86,
                                    "name": "t3a",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 86,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 99,
                                    "val": {
                                      "MinMaxExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 105,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 110,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t3",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 115,
                                            },
                                          },
                                        ],
                                        "location": 99,
                                        "op": "IS_LEAST",
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 196,
                      },
                    },
                    "location": 201,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 203,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 95 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, ss.t2a, ss.t2c FROM prt1 t1 LEFT JOIN LATERAL
			  (SELECT t2.a AS t2a, t3.a AS t3a, t2.b t2b, t2.c t2c, least(t1.a,t2.a,t3.b) FROM prt1 t2 JOIN prt2 t3 ON (t2.a = t3.b)) ss
			  ON t1.c = ss.t2c WHERE (t1.b + coalesce(ss.t2b, 0)) = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 53,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 215,
                            },
                          },
                          "location": 220,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "t2c",
                                  },
                                },
                              ],
                              "location": 222,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 165,
                                        "relname": "prt1",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 190,
                                          },
                                        },
                                        "location": 195,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 197,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 178,
                                        "relname": "prt2",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 92,
                                    "name": "t2a",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 92,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 105,
                                    "name": "t3a",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "name": "t2b",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 128,
                                    "name": "t2c",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 128,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 138,
                                    "val": {
                                      "MinMaxExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 144,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 149,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t3",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 154,
                                            },
                                          },
                                        ],
                                        "location": 138,
                                        "op": "IS_LEAST",
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 277,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "t2a",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 41,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "t2c",
                              },
                            },
                          ],
                          "location": 41,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 236,
                          },
                        },
                        "location": 241,
                        "name": [
                          {
                            "String": {
                              "sval": "+",
                            },
                          },
                        ],
                        "rexpr": {
                          "CoalesceExpr": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "ss",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t2b",
                                      },
                                    },
                                  ],
                                  "location": 252,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {},
                                  "location": 260,
                                },
                              },
                            ],
                            "location": 243,
                          },
                        },
                      },
                    },
                    "location": 264,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 266,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 104 1`] = `
[
  "SET enable_partitionwise_aggregate TO true",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 38,
                  "sval": {
                    "sval": "true",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_partitionwise_aggregate",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 107 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT a, b FROM prt1 FULL JOIN prt2 p2(b,a,c) USING(a,b)
  WHERE a BETWEEN 490 AND 510
  GROUP BY 1, 2 ORDER BY 1, 2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 37,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "p2",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                          },
                          "inh": true,
                          "location": 52,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                    },
                  },
                ],
                "groupClause": [
                  {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 119,
                    },
                  },
                  {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 122,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 133,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 136,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 30,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_BETWEEN",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 86,
                      },
                    },
                    "location": 88,
                    "name": [
                      {
                        "String": {
                          "sval": "BETWEEN",
                        },
                      },
                    ],
                    "rexpr": {
                      "List": {
                        "items": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 490,
                              },
                              "location": 96,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 510,
                              },
                              "location": 104,
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 115 1`] = `
[
  "RESET enable_partitionwise_aggregate",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_partitionwise_aggregate",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 121 1`] = `
[
  "CREATE TABLE prt1_e (a int, b int, c int) PARTITION BY RANGE(((a + b)/2))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 42,
              "partParams": [
                {
                  "PartitionElem": {
                    "expr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                            "location": 65,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 67,
                              },
                            },
                          },
                        },
                        "location": 69,
                        "name": [
                          {
                            "String": {
                              "sval": "/",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 70,
                          },
                        },
                      },
                    },
                    "location": 61,
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1_e",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 131 1`] = `
[
  "CREATE TABLE prt2_e (a int, b int, c int) PARTITION BY RANGE(((b + a)/2))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 42,
              "partParams": [
                {
                  "PartitionElem": {
                    "expr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                            "location": 65,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 67,
                              },
                            },
                          },
                        },
                        "location": 69,
                        "name": [
                          {
                            "String": {
                              "sval": "/",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 70,
                          },
                        },
                      },
                    },
                    "location": 61,
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_e",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 138 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_e t1, prt2_e t2 WHERE (t1.a + t1.b)/2 = (t2.b + t2.a)/2 AND t1.c = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1_e",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 66,
                      "relname": "prt2_e",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 138,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 144,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 83,
                                    },
                                  },
                                  "location": 88,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 90,
                                    },
                                  },
                                },
                              },
                              "location": 95,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 96,
                                },
                              },
                            },
                          },
                          "location": 98,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 101,
                                    },
                                  },
                                  "location": 106,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 108,
                                    },
                                  },
                                },
                              },
                              "location": 113,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 114,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 120,
                            },
                          },
                          "location": 125,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 127,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 116,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 145 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c, t3.a + t3.b, t3.c FROM prt1 t1, prt2 t2, prt1_e t3 WHERE t1.a = t2.b AND t1.a = (t3.a + t3.b)/2 AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 74,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 83,
                      "relname": "prt2",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t3",
                      },
                      "inh": true,
                      "location": 92,
                      "relname": "prt1_e",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 169,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 175,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                          "location": 56,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 58,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 64,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 64,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 108,
                            },
                          },
                          "location": 113,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 115,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 124,
                            },
                          },
                          "location": 129,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 132,
                                    },
                                  },
                                  "location": 137,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 139,
                                    },
                                  },
                                },
                              },
                              "location": 144,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 145,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 151,
                            },
                          },
                          "location": 156,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 158,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 120,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 149 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c, t3.a + t3.b, t3.c FROM (prt1 t1 LEFT JOIN prt2 t2 ON t1.a = t2.b) LEFT JOIN prt1_e t3 ON (t1.a = (t3.a + t3.b)/2) WHERE t1.b = 0 ORDER BY t1.a, t2.b, t3.a + t3.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 75,
                              "relname": "prt1",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 104,
                                },
                              },
                              "location": 109,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 111,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 93,
                              "relname": "prt2",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 141,
                            },
                          },
                          "location": 146,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 149,
                                    },
                                  },
                                  "location": 154,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 156,
                                    },
                                  },
                                },
                              },
                              "location": 161,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 162,
                                },
                              },
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 127,
                          "relname": "prt1_e",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 189,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 195,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 201,
                            },
                          },
                          "location": 206,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 208,
                            },
                          },
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                          "location": 56,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 58,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 64,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 64,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 171,
                      },
                    },
                    "location": 176,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 178,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 153 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c, t3.a + t3.b, t3.c FROM (prt1 t1 LEFT JOIN prt2 t2 ON t1.a = t2.b) RIGHT JOIN prt1_e t3 ON (t1.a = (t3.a + t3.b)/2) WHERE t3.c = 0 ORDER BY t1.a, t2.b, t3.a + t3.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 75,
                              "relname": "prt1",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 104,
                                },
                              },
                              "location": 109,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 111,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 93,
                              "relname": "prt2",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 142,
                            },
                          },
                          "location": 147,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 150,
                                    },
                                  },
                                  "location": 155,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 157,
                                    },
                                  },
                                },
                              },
                              "location": 162,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 163,
                                },
                              },
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 128,
                          "relname": "prt1_e",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 190,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 196,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 202,
                            },
                          },
                          "location": 207,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 209,
                            },
                          },
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                          "location": 56,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 58,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 64,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 64,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t3",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 172,
                      },
                    },
                    "location": 177,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 179,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 160 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT COUNT(*) FROM prt1 FULL JOIN prt2 p2(b,a,c) USING(a,b) FULL JOIN prt2 p3(b,a,c) USING (a, b)
  WHERE a BETWEEN 490 AND 510",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_FULL",
                          "larg": {
                            "RangeVar": {
                              "inh": true,
                              "location": 41,
                              "relname": "prt1",
                              "relpersistence": "p",
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "p2",
                                "colnames": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "c",
                                    },
                                  },
                                ],
                              },
                              "inh": true,
                              "location": 56,
                              "relname": "prt2",
                              "relpersistence": "p",
                            },
                          },
                          "usingClause": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "p3",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                          },
                          "inh": true,
                          "location": 92,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_BETWEEN",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 128,
                      },
                    },
                    "location": 130,
                    "name": [
                      {
                        "String": {
                          "sval": "BETWEEN",
                        },
                      },
                    ],
                    "rexpr": {
                      "List": {
                        "items": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 490,
                              },
                              "location": 138,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 510,
                              },
                              "location": 146,
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 169 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT COUNT(*) FROM prt1 FULL JOIN prt2 p2(b,a,c) USING(a,b) FULL JOIN prt2 p3(b,a,c) USING (a, b) FULL JOIN prt1 p4 (a,b,c) USING (a, b)
  WHERE a BETWEEN 490 AND 510",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_FULL",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_FULL",
                              "larg": {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 41,
                                  "relname": "prt1",
                                  "relpersistence": "p",
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "p2",
                                    "colnames": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                  },
                                  "inh": true,
                                  "location": 56,
                                  "relname": "prt2",
                                  "relpersistence": "p",
                                },
                              },
                              "usingClause": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "p3",
                                "colnames": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "c",
                                    },
                                  },
                                ],
                              },
                              "inh": true,
                              "location": 92,
                              "relname": "prt2",
                              "relpersistence": "p",
                            },
                          },
                          "usingClause": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "p4",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                          },
                          "inh": true,
                          "location": 130,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_BETWEEN",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 167,
                      },
                    },
                    "location": 169,
                    "name": [
                      {
                        "String": {
                          "sval": "BETWEEN",
                        },
                      },
                    ],
                    "rexpr": {
                      "List": {
                        "items": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 490,
                              },
                              "location": 177,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 510,
                              },
                              "location": 185,
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 177 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.phv, t2.b, t2.phv, t3.a + t3.b, t3.phv FROM ((SELECT 50 phv, * FROM prt1 WHERE prt1.b = 0) t1 FULL JOIN (SELECT 75 phv, * FROM prt2 WHERE prt2.a = 0) t2 ON (t1.a = t2.b)) FULL JOIN (SELECT 50 phv, * FROM prt1_e WHERE prt1_e.c = 0) t3 ON (t1.a = (t3.a + t3.b)/2) WHERE t1.a = t1.phv OR t2.b = t2.phv OR (t3.a + t3.b)/2 = t3.phv ORDER BY t1.a, t2.b, t3.a + t3.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_FULL",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 104,
                                        "relname": "prt1",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 89,
                                        "name": "phv",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 50,
                                            },
                                            "location": 89,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 97,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 97,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "prt1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 115,
                                        },
                                      },
                                      "location": 122,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {},
                                          "location": 124,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 193,
                                },
                              },
                              "location": 198,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 200,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 163,
                                        "relname": "prt2",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 148,
                                        "name": "phv",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 75,
                                            },
                                            "location": 148,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 156,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 156,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "prt2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 174,
                                        },
                                      },
                                      "location": 181,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {},
                                          "location": 183,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 274,
                            },
                          },
                          "location": 279,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 282,
                                    },
                                  },
                                  "location": 287,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 289,
                                    },
                                  },
                                },
                              },
                              "location": 294,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 295,
                                },
                              },
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 240,
                                    "relname": "prt1_e",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 225,
                                    "name": "phv",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 50,
                                        },
                                        "location": 225,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 233,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 233,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt1_e",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                      ],
                                      "location": 253,
                                    },
                                  },
                                  "location": 262,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 264,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 372,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 378,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 384,
                            },
                          },
                          "location": 389,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 391,
                            },
                          },
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "phv",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 41,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 41,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 47,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "phv",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 55,
                            },
                          },
                          "location": 60,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 68,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "phv",
                              },
                            },
                          ],
                          "location": 68,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 304,
                            },
                          },
                          "location": 309,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 311,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 321,
                            },
                          },
                          "location": 326,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 328,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 339,
                                    },
                                  },
                                  "location": 344,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 346,
                                    },
                                  },
                                },
                              },
                              "location": 351,
                              "name": [
                                {
                                  "String": {
                                    "sval": "/",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 352,
                                },
                              },
                            },
                          },
                          "location": 354,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 356,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 318,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 182 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt1 t1 WHERE t1.a IN (SELECT t1.b FROM prt2 t1, prt1_e t2 WHERE t1.a = 0 AND t1.b = (t2.a + t2.b)/2) AND t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 161,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 56,
                          "subLinkType": "ANY_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t1",
                                    },
                                    "inh": true,
                                    "location": 77,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 86,
                                    "relname": "prt1_e",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 67,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 67,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 102,
                                          },
                                        },
                                        "location": 107,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 109,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 115,
                                          },
                                        },
                                        "location": 120,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "t2",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "a",
                                                        },
                                                      },
                                                    ],
                                                    "location": 123,
                                                  },
                                                },
                                                "location": 128,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "+",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "t2",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "b",
                                                        },
                                                      },
                                                    ],
                                                    "location": 130,
                                                  },
                                                },
                                              },
                                            },
                                            "location": 135,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "/",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 136,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 111,
                                },
                              },
                            },
                          },
                          "testexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 143,
                            },
                          },
                          "location": 148,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 150,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 139,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 186 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt1 t1 WHERE t1.a IN (SELECT t1.b FROM prt2 t1 WHERE t1.b IN (SELECT (t1.a + t1.b)/2 FROM prt1_e t1 WHERE t1.c = 0)) AND t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 177,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 56,
                          "subLinkType": "ANY_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t1",
                                    },
                                    "inh": true,
                                    "location": 77,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 67,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 67,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "SubLink": {
                                  "location": 96,
                                  "subLinkType": "ANY_SUBLINK",
                                  "subselect": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t1",
                                            },
                                            "inh": true,
                                            "location": 128,
                                            "relname": "prt1_e",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 107,
                                            "val": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "A_Expr": {
                                                    "kind": "AEXPR_OP",
                                                    "lexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "t1",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "a",
                                                            },
                                                          },
                                                        ],
                                                        "location": 108,
                                                      },
                                                    },
                                                    "location": 113,
                                                    "name": [
                                                      {
                                                        "String": {
                                                          "sval": "+",
                                                        },
                                                      },
                                                    ],
                                                    "rexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "t1",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "b",
                                                            },
                                                          },
                                                        ],
                                                        "location": 115,
                                                      },
                                                    },
                                                  },
                                                },
                                                "location": 120,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "/",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 2,
                                                    },
                                                    "location": 121,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "c",
                                                  },
                                                },
                                              ],
                                              "location": 144,
                                            },
                                          },
                                          "location": 149,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 151,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                  "testexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 91,
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "testexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 51,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 159,
                            },
                          },
                          "location": 164,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 166,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 155,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 191 1`] = `
[
  "SET enable_hashjoin TO off",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 23,
                  "sval": {
                    "sval": "off",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_hashjoin",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 204 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t2.b FROM (SELECT * FROM prt1 WHERE a < 450) t1 LEFT JOIN (SELECT * FROM prt2 WHERE b > 250) t2 ON t1.a = t2.b WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 58,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 51,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 51,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 69,
                                    },
                                  },
                                  "location": 71,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 450,
                                      },
                                      "location": 73,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 132,
                            },
                          },
                          "location": 137,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 139,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 106,
                                    "relname": "prt2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 99,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 99,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 117,
                                    },
                                  },
                                  "location": 119,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 250,
                                      },
                                      "location": 121,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 168,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 174,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 150,
                      },
                    },
                    "location": 155,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 157,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 210 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t2.b FROM prt1 t1, prt2 t2 WHERE t1::text = t2::text AND t1.a = t2.b ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 43,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 52,
                      "relname": "prt2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 111,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "TypeCast": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                  ],
                                  "location": 66,
                                },
                              },
                              "location": 68,
                              "typeName": {
                                "location": 70,
                                "names": [
                                  {
                                    "String": {
                                      "sval": "text",
                                    },
                                  },
                                ],
                                "typemod": -1,
                              },
                            },
                          },
                          "location": 75,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "TypeCast": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                  ],
                                  "location": 77,
                                },
                              },
                              "location": 79,
                              "typeName": {
                                "location": 81,
                                "names": [
                                  {
                                    "String": {
                                      "sval": "text",
                                    },
                                  },
                                ],
                                "typemod": -1,
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 90,
                            },
                          },
                          "location": 95,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 97,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 86,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 214 1`] = `
[
  "RESET enable_hashjoin",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_hashjoin",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 220 1`] = `
[
  "CREATE TABLE prt1_m (a int, b int, c int) PARTITION BY RANGE(a, ((a + b)/2))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 42,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 61,
                    "name": "a",
                  },
                },
                {
                  "PartitionElem": {
                    "expr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 66,
                              },
                            },
                            "location": 68,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 70,
                              },
                            },
                          },
                        },
                        "location": 72,
                        "name": [
                          {
                            "String": {
                              "sval": "/",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 73,
                          },
                        },
                      },
                    },
                    "location": 64,
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1_m",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 227 1`] = `
[
  "CREATE TABLE prt2_m (a int, b int, c int) PARTITION BY RANGE(((b + a)/2), b)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 42,
              "partParams": [
                {
                  "PartitionElem": {
                    "expr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                            "location": 65,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 67,
                              },
                            },
                          },
                        },
                        "location": 69,
                        "name": [
                          {
                            "String": {
                              "sval": "/",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 70,
                          },
                        },
                      },
                    },
                    "location": 61,
                  },
                },
                {
                  "PartitionElem": {
                    "location": 74,
                    "name": "b",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_m",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 234 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1_m WHERE prt1_m.c = 0) t1 FULL JOIN (SELECT * FROM prt2_m WHERE prt2_m.c = 0) t2 ON (t1.a = (t2.b + t2.a)/2 AND t2.b = (t1.a + t1.b)/2) ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1_m",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt1_m",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                      ],
                                      "location": 83,
                                    },
                                  },
                                  "location": 92,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 94,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 159,
                                  },
                                },
                                "location": 164,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 167,
                                          },
                                        },
                                        "location": 172,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 174,
                                          },
                                        },
                                      },
                                    },
                                    "location": 179,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "/",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 180,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 186,
                                  },
                                },
                                "location": 191,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 194,
                                          },
                                        },
                                        "location": 199,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 201,
                                          },
                                        },
                                      },
                                    },
                                    "location": 206,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "/",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 207,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 182,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 125,
                                    "relname": "prt2_m",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt2_m",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                      ],
                                      "location": 138,
                                    },
                                  },
                                  "location": 147,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 149,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 219,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 225,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 241 1`] = `
[
  "CREATE TABLE plt1 (a int, b int, c text) PARTITION BY LIST(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 41,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 59,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 248 1`] = `
[
  "CREATE TABLE plt2 (a int, b int, c text) PARTITION BY LIST(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 41,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 59,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 258 1`] = `
[
  "CREATE TABLE plt1_e (a int, b int, c text) PARTITION BY LIST(ltrim(c, 'A'))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "expr": {
                      "FuncCall": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 67,
                            },
                          },
                          {
                            "A_Const": {
                              "location": 70,
                              "sval": {
                                "sval": "A",
                              },
                            },
                          },
                        ],
                        "funcformat": "COERCE_EXPLICIT_CALL",
                        "funcname": [
                          {
                            "String": {
                              "sval": "ltrim",
                            },
                          },
                        ],
                        "location": 61,
                      },
                    },
                    "location": 61,
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1_e",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 266 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT avg(t1.a), avg(t2.b), avg(t3.a + t3.b), t1.c, t2.c, t3.c FROM plt1 t1, plt2 t2, plt1_e t3 WHERE t1.b = t2.b AND t1.c = t2.c AND ltrim(t3.c, 'A') = t1.c GROUP BY t1.c, t2.c, t3.c ORDER BY t1.c, t2.c, t3.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 89,
                      "relname": "plt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 98,
                      "relname": "plt2",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t3",
                      },
                      "inh": true,
                      "location": 107,
                      "relname": "plt1_e",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 188,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 194,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t3",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 200,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 220,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 226,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 49,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                                "location": 58,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "+",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 60,
                                  },
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 49,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 67,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 67,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 73,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 73,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 79,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 79,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 123,
                            },
                          },
                          "location": 128,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 130,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 139,
                            },
                          },
                          "location": 144,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 146,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "FuncCall": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 161,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 167,
                                    "sval": {
                                      "sval": "A",
                                    },
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "ltrim",
                                  },
                                },
                              ],
                              "location": 155,
                            },
                          },
                          "location": 172,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 174,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 135,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 271 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1, prt2 t2 WHERE t1.a = t2.b AND t1.a = 1 AND t1.a = 2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "prt2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 101,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 107,
                            },
                          },
                          "location": 112,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 2,
                              },
                              "location": 114,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 90,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 274 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1 WHERE a = 1 AND a = 2) t1 LEFT JOIN prt2 t2 ON t1.a = t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                        "location": 83,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 85,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 87,
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 122,
                            },
                          },
                          "location": 127,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 111,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 277 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1 WHERE a = 1 AND a = 2) t1 RIGHT JOIN prt2 t2 ON t1.a = t2.b, prt1 t3 WHERE t2.b = t3.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                        "location": 83,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 85,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 87,
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 123,
                            },
                          },
                          "location": 128,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 130,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 112,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t3",
                      },
                      "inh": true,
                      "location": 136,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t2",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 150,
                      },
                    },
                    "location": 155,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t3",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 157,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 280 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1 WHERE a = 1 AND a = 2) t1 FULL JOIN prt2 t2 ON t1.a = t2.b WHERE t2.a = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                        "location": 83,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 85,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 87,
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 122,
                            },
                          },
                          "location": 127,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 111,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 158,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 164,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t2",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 140,
                      },
                    },
                    "location": 145,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 147,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 286 1`] = `
[
  "CREATE TABLE pht1 (a int, b int, c text) PARTITION BY HASH(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 41,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 59,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_HASH",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "pht1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 293 1`] = `
[
  "CREATE TABLE pht2 (a int, b int, c text) PARTITION BY HASH(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 41,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 59,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_HASH",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "pht2",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 303 1`] = `
[
  "CREATE TABLE pht1_e (a int, b int, c text) PARTITION BY HASH(ltrim(c, 'A'))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "expr": {
                      "FuncCall": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 67,
                            },
                          },
                          {
                            "A_Const": {
                              "location": 70,
                              "sval": {
                                "sval": "A",
                              },
                            },
                          },
                        ],
                        "funcformat": "COERCE_EXPLICIT_CALL",
                        "funcname": [
                          {
                            "String": {
                              "sval": "ltrim",
                            },
                          },
                        ],
                        "location": 61,
                      },
                    },
                    "location": 61,
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_HASH",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "pht1_e",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 311 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT avg(t1.a), avg(t2.b), avg(t3.a + t3.b), t1.c, t2.c, t3.c FROM pht1 t1, pht2 t2, pht1_e t3 WHERE t1.b = t2.b AND t1.c = t2.c AND ltrim(t3.c, 'A') = t1.c GROUP BY t1.c, t2.c, t3.c ORDER BY t1.c, t2.c, t3.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 89,
                      "relname": "pht1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 98,
                      "relname": "pht2",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t3",
                      },
                      "inh": true,
                      "location": 107,
                      "relname": "pht1_e",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 188,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 194,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t3",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 200,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 220,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 226,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 49,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                                "location": 58,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "+",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 60,
                                  },
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 49,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 67,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 67,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 73,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 73,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 79,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 79,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 123,
                            },
                          },
                          "location": 128,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 130,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 139,
                            },
                          },
                          "location": 144,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 146,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "FuncCall": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 161,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 167,
                                    "sval": {
                                      "sval": "A",
                                    },
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "ltrim",
                                  },
                                },
                              ],
                              "location": 155,
                            },
                          },
                          "location": 172,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 174,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 135,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 316 1`] = `
[
  "ALTER TABLE prt1 DETACH PARTITION prt1_p3",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 34,
                        "relname": "prt1_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 327 1`] = `
[
  "ALTER TABLE plt1 DETACH PARTITION plt1_p3",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 34,
                        "relname": "plt1_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 334 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT avg(t1.a), avg(t2.b), t1.c, t2.c FROM plt1 t1 RIGHT JOIN plt2 t2 ON t1.c = t2.c WHERE t1.a % 25 = 0 GROUP BY t1.c, t2.c ORDER BY t1.c, t2.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 65,
                          "relname": "plt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                          "location": 100,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 102,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 84,
                          "relname": "plt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 136,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 142,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 156,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 162,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "avg",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 49,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 49,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 55,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 113,
                          },
                        },
                        "location": 118,
                        "name": [
                          {
                            "String": {
                              "sval": "%",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 25,
                            },
                            "location": 120,
                          },
                        },
                      },
                    },
                    "location": 123,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 125,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 339 1`] = `
[
  "CREATE TABLE prt1_l (a int, b int, c varchar) PARTITION BY RANGE(a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 46,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 65,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1_l",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 350 1`] = `
[
  "CREATE TABLE prt2_l (a int, b int, c varchar) PARTITION BY RANGE(b)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 46,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 65,
                    "name": "b",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_l",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 362 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_l t1, prt2_l t2 WHERE t1.a = t2.b AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1_l",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 66,
                      "relname": "prt2_l",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 116,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 122,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 82,
                            },
                          },
                          "location": 87,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 89,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 98,
                            },
                          },
                          "location": 103,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 105,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 94,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 367 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_l t1 LEFT JOIN prt2_l t2 ON t1.a = t2.b AND t1.c = t2.c WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_l",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                                "location": 93,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 95,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 104,
                                  },
                                },
                                "location": 109,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 111,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 100,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 75,
                          "relname": "prt2_l",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 140,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 146,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 122,
                      },
                    },
                    "location": 127,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 129,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 372 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_l t1 RIGHT JOIN prt2_l t2 ON t1.a = t2.b AND t1.c = t2.c WHERE t2.a = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_l",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                                "location": 94,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 96,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 105,
                                  },
                                },
                                "location": 110,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 112,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 101,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 76,
                          "relname": "prt2_l",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 141,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 147,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t2",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 123,
                      },
                    },
                    "location": 128,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 130,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 377 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1_l WHERE prt1_l.b = 0) t1 FULL JOIN (SELECT * FROM prt2_l WHERE prt2_l.a = 0) t2 ON (t1.a = t2.b AND t1.c = t2.c) ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1_l",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt1_l",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 83,
                                    },
                                  },
                                  "location": 92,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 94,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 159,
                                  },
                                },
                                "location": 164,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 166,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 175,
                                  },
                                },
                                "location": 180,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 182,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 171,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 125,
                                    "relname": "prt2_l",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt2_l",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 138,
                                    },
                                  },
                                  "location": 147,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 149,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 197,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 203,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 382 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT * FROM prt1_l t1 LEFT JOIN LATERAL
			  (SELECT t2.a AS t2a, t2.c AS t2c, t2.b AS t2b, t3.b AS t3b, least(t1.a,t2.a,t3.b) FROM prt1_l t2 JOIN prt2_l t3 ON (t2.a = t3.b AND t2.c = t3.c)) ss
			  ON t1.a = ss.t2a AND t1.c = ss.t2c WHERE t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "prt1_l",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 224,
                                  },
                                },
                                "location": 229,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "t2a",
                                        },
                                      },
                                    ],
                                    "location": 231,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 242,
                                  },
                                },
                                "location": 247,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "t2c",
                                        },
                                      },
                                    ],
                                    "location": 249,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 238,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 154,
                                        "relname": "prt1_l",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 183,
                                                },
                                              },
                                              "location": 188,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t3",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 190,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 199,
                                                },
                                              },
                                              "location": 204,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t3",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 206,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 195,
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 169,
                                        "relname": "prt2_l",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 75,
                                    "name": "t2a",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 75,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 88,
                                    "name": "t2c",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 88,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 101,
                                    "name": "t2b",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 101,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 114,
                                    "name": "t3b",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 114,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 127,
                                    "val": {
                                      "MinMaxExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 133,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 138,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t3",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 143,
                                            },
                                          },
                                        ],
                                        "location": 127,
                                        "op": "IS_LEAST",
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 280,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 262,
                      },
                    },
                    "location": 267,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 269,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 391 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT * FROM prt1_l WHERE a = 1 AND a = 2) t1 RIGHT JOIN prt2_l t2 ON t1.a = t2.b AND t1.b = t2.a AND t1.c = t2.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "prt1_l",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 83,
                                          },
                                        },
                                        "location": 85,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 87,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 93,
                                          },
                                        },
                                        "location": 95,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 97,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 89,
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 127,
                                  },
                                },
                                "location": 132,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 134,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 143,
                                  },
                                },
                                "location": 148,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 150,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 159,
                                  },
                                },
                                "location": 164,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 166,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 139,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 114,
                          "relname": "prt2_l",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 398 1`] = `
[
  "EXPLAIN (COSTS OFF)
DELETE FROM prt1_l
WHERE EXISTS (
  SELECT 1
    FROM int4_tbl,
         LATERAL (SELECT int4_tbl.f1 FROM int8_tbl LIMIT 2) ss
    WHERE prt1_l.c IS NULL)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "DeleteStmt": {
                "relation": {
                  "inh": true,
                  "location": 32,
                  "relname": "prt1_l",
                  "relpersistence": "p",
                },
                "whereClause": {
                  "SubLink": {
                    "location": 45,
                    "subLinkType": "EXISTS_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 74,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 126,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitCount": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 141,
                                    },
                                  },
                                  "limitOption": "LIMIT_OPTION_COUNT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 109,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "int4_tbl",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 109,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 63,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 63,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "NullTest": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "prt1_l",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "c",
                                    },
                                  },
                                ],
                                "location": 157,
                              },
                            },
                            "location": 166,
                            "nulltesttype": "IS_NULL",
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 409 1`] = `
[
  "CREATE TABLE prt1_n (a int, b int, c varchar) PARTITION BY RANGE(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 46,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 65,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1_n",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 415 1`] = `
[
  "CREATE TABLE prt2_n (a int, b int, c text) PARTITION BY LIST(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 61,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_n",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 421 1`] = `
[
  "CREATE TABLE prt3_n (a int, b int, c text) PARTITION BY LIST(c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 61,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt3_n",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 428 1`] = `
[
  "CREATE TABLE prt4_n (a int, b int, c text) PARTITION BY RANGE(a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 62,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt4_n",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 436 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1, prt4_n t2 WHERE t1.a = t2.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "prt4_n",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 80,
                      },
                    },
                    "location": 85,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t2",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 87,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 439 1`] = `
[
  "SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1, prt4_n t2, prt2 t3 WHERE t1.a = t2.a and t1.a = t3.b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                  },
                  "inh": true,
                  "location": 35,
                  "relname": "prt1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t2",
                  },
                  "inh": true,
                  "location": 44,
                  "relname": "prt4_n",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t3",
                  },
                  "inh": true,
                  "location": 55,
                  "relname": "prt2",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 25,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 25,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 69,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 85,
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 92,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 81,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 443 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1 t1 LEFT JOIN prt2 t2 ON (t1.a < t2.b)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                          "location": 90,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 92,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 73,
                          "relname": "prt2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 448 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_m t1, prt2_m t2 WHERE t1.a = (t2.b + t2.a)/2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 55,
                      "relname": "prt1_m",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 66,
                      "relname": "prt2_m",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 82,
                      },
                    },
                    "location": 87,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 90,
                              },
                            },
                            "location": 95,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 97,
                              },
                            },
                          },
                        },
                        "location": 102,
                        "name": [
                          {
                            "String": {
                              "sval": "/",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 103,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 453 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_m t1 LEFT JOIN prt2_m t2 ON t1.a = t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_m",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                          "location": 93,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 75,
                          "relname": "prt2_m",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 457 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_m t1 LEFT JOIN prt2_m t2 ON t1.c = t2.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_m",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                          "location": 93,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 75,
                          "relname": "prt2_m",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 462 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_n t1 LEFT JOIN prt2_n t2 ON (t1.c = t2.c)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_n",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 89,
                            },
                          },
                          "location": 94,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 96,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 75,
                          "relname": "prt2_n",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 467 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_n t1 JOIN prt2_n t2 ON (t1.c = t2.c) JOIN plt1 t3 ON (t1.c = t3.c)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 55,
                              "relname": "prt1_n",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 84,
                                },
                              },
                              "location": 89,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 91,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 70,
                              "relname": "prt2_n",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 114,
                            },
                          },
                          "location": 119,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 121,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 102,
                          "relname": "plt1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 472 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_n t1 FULL JOIN prt1 t2 ON (t1.c = t2.c)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_n",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 87,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 75,
                          "relname": "prt1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 479 1`] = `
[
  "create temp table prtx1 (a integer, b integer, c integer)
  partition by range (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 60,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 80,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "prtx1",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 36,
                  "typeName": {
                    "location": 38,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 47,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 498 1`] = `
[
  "explain (costs off)
select * from prtx1
where not exists (select 1 from prtx2
                  where prtx2.a=prtx1.a and prtx2.b=prtx1.b and prtx2.c=123)
  and a<20 and c=120",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "prtx1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 50,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 72,
                                          "relname": "prtx2",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 65,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 65,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 102,
                                                },
                                              },
                                              "location": 109,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 110,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 122,
                                                },
                                              },
                                              "location": 129,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 130,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 142,
                                                },
                                              },
                                              "location": 149,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 123,
                                                  },
                                                  "location": 150,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 46,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 161,
                            },
                          },
                          "location": 162,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 20,
                              },
                              "location": 163,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 170,
                            },
                          },
                          "location": 171,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 120,
                              },
                              "location": 172,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 157,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 504 1`] = `
[
  "select * from prtx1
where not exists (select 1 from prtx2
                  where prtx2.a=prtx1.a and prtx2.b=prtx1.b and prtx2.c=123)
  and a<20 and c=120",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "prtx1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "BoolExpr": {
                      "args": [
                        {
                          "SubLink": {
                            "location": 30,
                            "subLinkType": "EXISTS_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 52,
                                      "relname": "prtx2",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 45,
                                      "val": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 45,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 82,
                                            },
                                          },
                                          "location": 89,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 90,
                                            },
                                          },
                                        },
                                      },
                                      {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 102,
                                            },
                                          },
                                          "location": 109,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 110,
                                            },
                                          },
                                        },
                                      },
                                      {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "c",
                                                  },
                                                },
                                              ],
                                              "location": 122,
                                            },
                                          },
                                          "location": 129,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 123,
                                              },
                                              "location": 130,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "boolop": "AND_EXPR",
                                    "location": 98,
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "NOT_EXPR",
                      "location": 26,
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 141,
                        },
                      },
                      "location": 142,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 143,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 150,
                        },
                      },
                      "location": 151,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 120,
                          },
                          "location": 152,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 137,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 509 1`] = `
[
  "explain (costs off)
select * from prtx1
where not exists (select 1 from prtx2
                  where prtx2.a=prtx1.a and (prtx2.b=prtx1.b+1 or prtx2.c=99))
  and a<20 and c=91",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "prtx1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 50,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 72,
                                          "relname": "prtx2",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 65,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 65,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 102,
                                                },
                                              },
                                              "location": 109,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "prtx1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 110,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "BoolExpr": {
                                              "args": [
                                                {
                                                  "A_Expr": {
                                                    "kind": "AEXPR_OP",
                                                    "lexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "prtx2",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "b",
                                                            },
                                                          },
                                                        ],
                                                        "location": 123,
                                                      },
                                                    },
                                                    "location": 130,
                                                    "name": [
                                                      {
                                                        "String": {
                                                          "sval": "=",
                                                        },
                                                      },
                                                    ],
                                                    "rexpr": {
                                                      "A_Expr": {
                                                        "kind": "AEXPR_OP",
                                                        "lexpr": {
                                                          "ColumnRef": {
                                                            "fields": [
                                                              {
                                                                "String": {
                                                                  "sval": "prtx1",
                                                                },
                                                              },
                                                              {
                                                                "String": {
                                                                  "sval": "b",
                                                                },
                                                              },
                                                            ],
                                                            "location": 131,
                                                          },
                                                        },
                                                        "location": 138,
                                                        "name": [
                                                          {
                                                            "String": {
                                                              "sval": "+",
                                                            },
                                                          },
                                                        ],
                                                        "rexpr": {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 1,
                                                            },
                                                            "location": 139,
                                                          },
                                                        },
                                                      },
                                                    },
                                                  },
                                                },
                                                {
                                                  "A_Expr": {
                                                    "kind": "AEXPR_OP",
                                                    "lexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "prtx2",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "c",
                                                            },
                                                          },
                                                        ],
                                                        "location": 144,
                                                      },
                                                    },
                                                    "location": 151,
                                                    "name": [
                                                      {
                                                        "String": {
                                                          "sval": "=",
                                                        },
                                                      },
                                                    ],
                                                    "rexpr": {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 99,
                                                        },
                                                        "location": 152,
                                                      },
                                                    },
                                                  },
                                                },
                                              ],
                                              "boolop": "OR_EXPR",
                                              "location": 141,
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 46,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 163,
                            },
                          },
                          "location": 164,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 20,
                              },
                              "location": 165,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 172,
                            },
                          },
                          "location": 173,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 91,
                              },
                              "location": 174,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 159,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 515 1`] = `
[
  "select * from prtx1
where not exists (select 1 from prtx2
                  where prtx2.a=prtx1.a and (prtx2.b=prtx1.b+1 or prtx2.c=99))
  and a<20 and c=91",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "prtx1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "BoolExpr": {
                      "args": [
                        {
                          "SubLink": {
                            "location": 30,
                            "subLinkType": "EXISTS_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 52,
                                      "relname": "prtx2",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 45,
                                      "val": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 45,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 82,
                                            },
                                          },
                                          "location": 89,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "prtx1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 90,
                                            },
                                          },
                                        },
                                      },
                                      {
                                        "BoolExpr": {
                                          "args": [
                                            {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "prtx2",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "b",
                                                        },
                                                      },
                                                    ],
                                                    "location": 103,
                                                  },
                                                },
                                                "location": 110,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Expr": {
                                                    "kind": "AEXPR_OP",
                                                    "lexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "prtx1",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "b",
                                                            },
                                                          },
                                                        ],
                                                        "location": 111,
                                                      },
                                                    },
                                                    "location": 118,
                                                    "name": [
                                                      {
                                                        "String": {
                                                          "sval": "+",
                                                        },
                                                      },
                                                    ],
                                                    "rexpr": {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 1,
                                                        },
                                                        "location": 119,
                                                      },
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                            {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "prtx2",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "c",
                                                        },
                                                      },
                                                    ],
                                                    "location": 124,
                                                  },
                                                },
                                                "location": 131,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 99,
                                                    },
                                                    "location": 132,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                          "boolop": "OR_EXPR",
                                          "location": 121,
                                        },
                                      },
                                    ],
                                    "boolop": "AND_EXPR",
                                    "location": 98,
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "NOT_EXPR",
                      "location": 26,
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 143,
                        },
                      },
                      "location": 144,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 145,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 152,
                        },
                      },
                      "location": 153,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 91,
                          },
                          "location": 154,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 139,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 525 1`] = `
[
  "CREATE TABLE prt1_adv (a int, b int, c varchar) PARTITION BY RANGE (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 48,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 68,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt1_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 533 1`] = `
[
  "CREATE TABLE prt2_adv (a int, b int, c varchar) PARTITION BY RANGE (b)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 48,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 68,
                    "name": "b",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 544 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_adv t1 INNER JOIN prt2_adv t2 ON (t1.a = t2.b) WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 101,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 78,
                          "relname": "prt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 131,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 137,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 113,
                      },
                    },
                    "location": 118,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 120,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 549 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt1_adv t1 WHERE EXISTS (SELECT 1 FROM prt2_adv t2 WHERE t1.a = t2.b) AND t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt1_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 130,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 55,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 77,
                                    "relname": "prt2_adv",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 70,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 95,
                                    },
                                  },
                                  "location": 100,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 102,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 112,
                            },
                          },
                          "location": 117,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 119,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 108,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 554 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_adv t1 LEFT JOIN prt2_adv t2 ON (t1.a = t2.b) WHERE t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 93,
                            },
                          },
                          "location": 98,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "prt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 130,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 136,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 112,
                      },
                    },
                    "location": 117,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 119,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 559 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt1_adv t1 WHERE NOT EXISTS (SELECT 1 FROM prt2_adv t2 WHERE t1.a = t2.b) AND t1.b = 0 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt1_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 134,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 59,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "t2",
                                          },
                                          "inh": true,
                                          "location": 81,
                                          "relname": "prt2_adv",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 74,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 74,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 99,
                                          },
                                        },
                                        "location": 104,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 106,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 55,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 116,
                            },
                          },
                          "location": 121,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 123,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 112,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 564 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM (SELECT 175 phv, * FROM prt1_adv WHERE prt1_adv.b = 0) t1 FULL JOIN (SELECT 425 phv, * FROM prt2_adv WHERE prt2_adv.a = 0) t2 ON (t1.a = t2.b) WHERE t1.phv = t1.a OR t2.phv = t2.b ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 79,
                                    "relname": "prt1_adv",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "name": "phv",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 175,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 72,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 72,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt1_adv",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 94,
                                    },
                                  },
                                  "location": 105,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 107,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 185,
                            },
                          },
                          "location": 190,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 192,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 147,
                                    "relname": "prt2_adv",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 131,
                                    "name": "phv",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 425,
                                        },
                                        "location": 131,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 140,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 140,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "prt2_adv",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 162,
                                    },
                                  },
                                  "location": 173,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 175,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 244,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 250,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 204,
                            },
                          },
                          "location": 211,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 213,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "phv",
                                  },
                                },
                              ],
                              "location": 221,
                            },
                          },
                          "location": 228,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 230,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 218,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 569 1`] = `
[
  "CREATE TABLE prt2_adv_extra PARTITION OF prt2_adv FOR VALUES FROM (500) TO (MAXVALUE)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 41,
                  "relname": "prt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "location": 61,
              "lowerdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 500,
                    },
                    "location": 67,
                  },
                },
              ],
              "strategy": "r",
              "upperdatums": [
                {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "maxvalue",
                        },
                      },
                    ],
                    "location": 76,
                  },
                },
              ],
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_adv_extra",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 590 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.b, t1.c, t2.a, t2.c FROM prt2_adv t1 LEFT JOIN prt1_adv t2 ON (t1.b = t2.a) WHERE t1.a = 0 ORDER BY t1.b, t2.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt2_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 93,
                            },
                          },
                          "location": 98,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 130,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 136,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 112,
                      },
                    },
                    "location": 117,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 119,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 600 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM prt2_adv t1 WHERE NOT EXISTS (SELECT 1 FROM prt1_adv t2 WHERE t1.b = t2.a) AND t1.a = 0 ORDER BY t1.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "prt2_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 134,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 59,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "t2",
                                          },
                                          "inh": true,
                                          "location": 81,
                                          "relname": "prt1_adv",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 74,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 74,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 99,
                                          },
                                        },
                                        "location": 104,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 106,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 55,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 116,
                            },
                          },
                          "location": 121,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 123,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 112,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 609 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.b, t1.c, t2.a, t2.c, t3.a, t3.c FROM prt2_adv t1 LEFT JOIN prt1_adv t2 ON (t1.b = t2.a) INNER JOIN prt1_adv t3 ON (t1.b = t3.a) WHERE t1.a = 0 ORDER BY t1.b, t2.a, t3.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 67,
                              "relname": "prt2_adv",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 105,
                                },
                              },
                              "location": 110,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 112,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 89,
                              "relname": "prt1_adv",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                          "location": 150,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 152,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 129,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 182,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 188,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 194,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 57,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 164,
                      },
                    },
                    "location": 169,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 171,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 613 1`] = `
[
  "DROP TABLE prt2_adv_extra",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "prt2_adv_extra",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 617 1`] = `
[
  "ALTER TABLE prt2_adv DETACH PARTITION prt2_adv_p3",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt2_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 619 1`] = `
[
  "CREATE TABLE prt2_adv_p3_1 PARTITION OF prt2_adv FOR VALUES FROM (350) TO (375)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 40,
                  "relname": "prt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "location": 60,
              "lowerdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 350,
                    },
                    "location": 66,
                  },
                },
              ],
              "strategy": "r",
              "upperdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 375,
                    },
                    "location": 75,
                  },
                },
              ],
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_adv_p3_1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 644 1`] = `
[
  "DROP TABLE prt2_adv_p3_1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "prt2_adv_p3_1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 649 1`] = `
[
  "ALTER TABLE prt1_adv DETACH PARTITION prt1_adv_p1",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt1_adv_p1",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 651 1`] = `
[
  "ALTER TABLE prt1_adv ATTACH PARTITION prt1_adv_p1 DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "is_default": true,
                        "location": 50,
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt1_adv_p1",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 662 1`] = `
[
  "ALTER TABLE prt1_adv ATTACH PARTITION prt1_adv_p3 FOR VALUES FROM (300) TO (400)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "location": 61,
                        "lowerdatums": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 300,
                              },
                              "location": 67,
                            },
                          },
                        ],
                        "strategy": "r",
                        "upperdatums": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 400,
                              },
                              "location": 76,
                            },
                          },
                        ],
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt1_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 666 1`] = `
[
  "ALTER TABLE prt2_adv ATTACH PARTITION prt2_adv_p3 FOR VALUES FROM (350) TO (500)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "location": 61,
                        "lowerdatums": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 350,
                              },
                              "location": 67,
                            },
                          },
                        ],
                        "strategy": "r",
                        "upperdatums": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 500,
                              },
                              "location": 76,
                            },
                          },
                        ],
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt2_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 676 1`] = `
[
  "ALTER TABLE prt2_adv ATTACH PARTITION prt2_adv_p3 DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "is_default": true,
                        "location": 50,
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "prt2_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "prt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 684 1`] = `
[
  "DROP TABLE prt1_adv_p3",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "prt1_adv_p3",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 687 1`] = `
[
  "DROP TABLE prt2_adv_p3",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "prt2_adv_p3",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 690 1`] = `
[
  "CREATE TABLE prt3_adv (a int, b int, c varchar) PARTITION BY RANGE (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 48,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 68,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt3_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 698 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c, t3.a, t3.c FROM prt1_adv t1 LEFT JOIN prt2_adv t2 ON (t1.a = t2.b) LEFT JOIN prt3_adv t3 ON (t1.a = t3.a) WHERE t1.b = 0 ORDER BY t1.a, t2.b, t3.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 67,
                              "relname": "prt1_adv",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 105,
                                },
                              },
                              "location": 110,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 112,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 89,
                              "relname": "prt2_adv",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 144,
                            },
                          },
                          "location": 149,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 151,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 128,
                          "relname": "prt3_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 181,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 187,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 193,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 57,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 163,
                      },
                    },
                    "location": 168,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 170,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 702 1`] = `
[
  "DROP TABLE prt1_adv",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "prt1_adv",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 722 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_adv t1 INNER JOIN prt2_adv t2 ON (t1.a = t2.b) WHERE t1.a < 300 AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 101,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 78,
                          "relname": "prt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 146,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 152,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                          "location": 118,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 300,
                              },
                              "location": 120,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                          "location": 133,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 135,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 124,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 730 1`] = `
[
  "CREATE TABLE prt2_adv_default PARTITION OF prt2_adv DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "prt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "is_default": true,
              "location": 52,
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "prt2_adv_default",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 733 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.b, t2.c FROM prt1_adv t1 INNER JOIN prt2_adv t2 ON (t1.a = t2.b) WHERE t1.a >= 100 AND t1.a < 300 AND t1.b = 0 ORDER BY t1.a, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "prt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 101,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 78,
                          "relname": "prt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 162,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 168,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                          "location": 118,
                          "name": [
                            {
                              "String": {
                                "sval": ">=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 100,
                              },
                              "location": 121,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                          "location": 134,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 300,
                              },
                              "location": 136,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 144,
                            },
                          },
                          "location": 149,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 151,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 125,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 742 1`] = `
[
  "CREATE TABLE plt1_adv (a int, b int, c text) PARTITION BY LIST (c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 45,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 64,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 749 1`] = `
[
  "CREATE TABLE plt2_adv (a int, b int, c text) PARTITION BY LIST (c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 45,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 64,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 757 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt1_adv t1 INNER JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 94,
                                  },
                                },
                                "location": 99,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 101,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 110,
                                  },
                                },
                                "location": 115,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 117,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 106,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 78,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 148,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 129,
                      },
                    },
                    "location": 134,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 136,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 762 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM plt1_adv t1 WHERE EXISTS (SELECT 1 FROM plt2_adv t2 WHERE t1.a = t2.a AND t1.c = t2.c) AND t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "plt1_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 147,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 55,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 77,
                                    "relname": "plt2_adv",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 70,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 95,
                                          },
                                        },
                                        "location": 100,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 102,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                            ],
                                            "location": 111,
                                          },
                                        },
                                        "location": 116,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                            ],
                                            "location": 118,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 107,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                          "location": 133,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 135,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 124,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 767 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt1_adv t1 LEFT JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                                "location": 98,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 100,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                "location": 114,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 116,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 105,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 147,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 128,
                      },
                    },
                    "location": 133,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 135,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 772 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM plt1_adv t1 WHERE NOT EXISTS (SELECT 1 FROM plt2_adv t2 WHERE t1.a = t2.a AND t1.c = t2.c) AND t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "plt1_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 151,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 59,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "t2",
                                          },
                                          "inh": true,
                                          "location": 81,
                                          "relname": "plt2_adv",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 74,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 74,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 99,
                                                },
                                              },
                                              "location": 104,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 106,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 115,
                                                },
                                              },
                                              "location": 120,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 122,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 111,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 55,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 132,
                            },
                          },
                          "location": 137,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 139,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 128,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 777 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt1_adv t1 FULL JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE coalesce(t1.b, 0) < 10 AND coalesce(t2.b, 0) < 10 ORDER BY t1.a, t2.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                                "location": 98,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 100,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                "location": 114,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 116,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 105,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 187,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 193,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "CoalesceExpr": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 137,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 143,
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                          "location": 146,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 148,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "CoalesceExpr": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 164,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 170,
                                  },
                                },
                              ],
                              "location": 155,
                            },
                          },
                          "location": 173,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 175,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 151,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 782 1`] = `
[
  "CREATE TABLE plt2_adv_extra PARTITION OF plt2_adv FOR VALUES IN ('0000')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 41,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "location": 65,
                    "sval": {
                      "sval": "0000",
                    },
                  },
                },
              ],
              "location": 61,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_extra",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 803 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt2_adv t1 LEFT JOIN plt1_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                                "location": 98,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 100,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                "location": 114,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 116,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 105,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 147,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 128,
                      },
                    },
                    "location": 133,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 135,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 813 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.* FROM plt2_adv t1 WHERE NOT EXISTS (SELECT 1 FROM plt1_adv t2 WHERE t1.a = t2.a AND t1.c = t2.c) AND t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "plt2_adv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 151,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 59,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "t2",
                                          },
                                          "inh": true,
                                          "location": 81,
                                          "relname": "plt1_adv",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 74,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 74,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 99,
                                                },
                                              },
                                              "location": 104,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 106,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 115,
                                                },
                                              },
                                              "location": 120,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t2",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                  ],
                                                  "location": 122,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 111,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 55,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 132,
                            },
                          },
                          "location": 137,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 139,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 128,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 821 1`] = `
[
  "DROP TABLE plt2_adv_extra",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_extra",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 825 1`] = `
[
  "ALTER TABLE plt2_adv DETACH PARTITION plt2_adv_p2",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p2",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 827 1`] = `
[
  "CREATE TABLE plt2_adv_p2_1 PARTITION OF plt2_adv FOR VALUES IN ('0004')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 40,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "location": 64,
                    "sval": {
                      "sval": "0004",
                    },
                  },
                },
              ],
              "location": 60,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_p2_1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 852 1`] = `
[
  "DROP TABLE plt2_adv_p2_1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p2_1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 855 1`] = `
[
  "ALTER TABLE plt2_adv ATTACH PARTITION plt2_adv_p2 FOR VALUES IN ('0004', '0006')",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "listdatums": [
                          {
                            "A_Const": {
                              "location": 65,
                              "sval": {
                                "sval": "0004",
                              },
                            },
                          },
                          {
                            "A_Const": {
                              "location": 73,
                              "sval": {
                                "sval": "0006",
                              },
                            },
                          },
                        ],
                        "location": 61,
                        "strategy": "l",
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p2",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 858 1`] = `
[
  "ALTER TABLE plt1_adv DETACH PARTITION plt1_adv_p1",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt1_adv_p1",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 860 1`] = `
[
  "CREATE TABLE plt1_adv_p1_null PARTITION OF plt1_adv FOR VALUES IN (NULL, '0001', '0003')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "plt1_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "isnull": true,
                    "location": 67,
                  },
                },
                {
                  "A_Const": {
                    "location": 73,
                    "sval": {
                      "sval": "0001",
                    },
                  },
                },
                {
                  "A_Const": {
                    "location": 81,
                    "sval": {
                      "sval": "0003",
                    },
                  },
                },
              ],
              "location": 63,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1_adv_p1_null",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 865 1`] = `
[
  "ALTER TABLE plt2_adv DETACH PARTITION plt2_adv_p3",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 867 1`] = `
[
  "CREATE TABLE plt2_adv_p3_null PARTITION OF plt2_adv FOR VALUES IN (NULL, '0007', '0009')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "isnull": true,
                    "location": 67,
                  },
                },
                {
                  "A_Const": {
                    "location": 73,
                    "sval": {
                      "sval": "0007",
                    },
                  },
                },
                {
                  "A_Const": {
                    "location": 81,
                    "sval": {
                      "sval": "0009",
                    },
                  },
                },
              ],
              "location": 63,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_p3_null",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 897 1`] = `
[
  "DROP TABLE plt1_adv_p1_null",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt1_adv_p1_null",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 899 1`] = `
[
  "ALTER TABLE plt1_adv ATTACH PARTITION plt1_adv_p1 FOR VALUES IN ('0001', '0003')",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "listdatums": [
                          {
                            "A_Const": {
                              "location": 65,
                              "sval": {
                                "sval": "0001",
                              },
                            },
                          },
                          {
                            "A_Const": {
                              "location": 73,
                              "sval": {
                                "sval": "0003",
                              },
                            },
                          },
                        ],
                        "location": 61,
                        "strategy": "l",
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt1_adv_p1",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 902 1`] = `
[
  "CREATE TABLE plt1_adv_extra PARTITION OF plt1_adv FOR VALUES IN (NULL)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 41,
                  "relname": "plt1_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "isnull": true,
                    "location": 65,
                  },
                },
              ],
              "location": 61,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1_adv_extra",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 906 1`] = `
[
  "DROP TABLE plt2_adv_p3_null",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p3_null",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 908 1`] = `
[
  "ALTER TABLE plt2_adv ATTACH PARTITION plt2_adv_p3 FOR VALUES IN ('0007', '0009')",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "listdatums": [
                          {
                            "A_Const": {
                              "location": 65,
                              "sval": {
                                "sval": "0007",
                              },
                            },
                          },
                          {
                            "A_Const": {
                              "location": 73,
                              "sval": {
                                "sval": "0009",
                              },
                            },
                          },
                        ],
                        "location": 61,
                        "strategy": "l",
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p3",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 948 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c, t3.a, t3.c FROM plt1_adv t1 LEFT JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) LEFT JOIN plt1_adv t3 ON (t1.a = t3.a AND t1.c = t3.c) WHERE t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 67,
                              "relname": "plt1_adv",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                    "location": 110,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 112,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 121,
                                      },
                                    },
                                    "location": 126,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 128,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 117,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 89,
                              "relname": "plt2_adv",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 160,
                                  },
                                },
                                "location": 165,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 167,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 176,
                                  },
                                },
                                "location": 181,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 183,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 172,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 144,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 57,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 195,
                      },
                    },
                    "location": 200,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 202,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 952 1`] = `
[
  "DROP TABLE plt1_adv_extra",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt1_adv_extra",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 958 1`] = `
[
  "ALTER TABLE plt1_adv ATTACH PARTITION plt1_adv_p1 DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "is_default": true,
                        "location": 50,
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt1_adv_p1",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt1_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 962 1`] = `
[
  "DROP TABLE plt2_adv_p3",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p3",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 974 1`] = `
[
  "CREATE TABLE plt2_adv_p2_ext PARTITION OF plt2_adv FOR VALUES IN ('0004', '0005', '0006')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 42,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "location": 66,
                    "sval": {
                      "sval": "0004",
                    },
                  },
                },
                {
                  "A_Const": {
                    "location": 74,
                    "sval": {
                      "sval": "0005",
                    },
                  },
                },
                {
                  "A_Const": {
                    "location": 82,
                    "sval": {
                      "sval": "0006",
                    },
                  },
                },
              ],
              "location": 62,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_p2_ext",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 983 1`] = `
[
  "ALTER TABLE plt2_adv DETACH PARTITION plt2_adv_p2_ext",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p2_ext",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_DetachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 985 1`] = `
[
  "ALTER TABLE plt2_adv ATTACH PARTITION plt2_adv_p2_ext DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "PartitionCmd": {
                      "bound": {
                        "is_default": true,
                        "location": 54,
                      },
                      "name": {
                        "inh": true,
                        "location": 38,
                        "relname": "plt2_adv_p2_ext",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AttachPartition",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "plt2_adv",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 993 1`] = `
[
  "DROP TABLE plt2_adv_p2_ext",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p2_ext",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 998 1`] = `
[
  "CREATE TABLE plt3_adv (a int, b int, c text) PARTITION BY LIST (c)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 45,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 64,
                    "name": "c",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt3_adv",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1005 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c, t3.a, t3.c FROM plt1_adv t1 LEFT JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) LEFT JOIN plt3_adv t3 ON (t1.a = t3.a AND t1.c = t3.c) WHERE t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 67,
                              "relname": "plt1_adv",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                    "location": 110,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 112,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 121,
                                      },
                                    },
                                    "location": 126,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                        ],
                                        "location": 128,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 117,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 89,
                              "relname": "plt2_adv",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 160,
                                  },
                                },
                                "location": 165,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 167,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 176,
                                  },
                                },
                                "location": 181,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 183,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 172,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 144,
                          "relname": "plt3_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 57,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 195,
                      },
                    },
                    "location": 200,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 202,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1011 1`] = `
[
  "DROP TABLE plt2_adv_p1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1013 1`] = `
[
  "CREATE TABLE plt2_adv_p1_null PARTITION OF plt2_adv FOR VALUES IN (NULL, '0001', '0003')",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "isnull": true,
                    "location": 67,
                  },
                },
                {
                  "A_Const": {
                    "location": 73,
                    "sval": {
                      "sval": "0001",
                    },
                  },
                },
                {
                  "A_Const": {
                    "location": 81,
                    "sval": {
                      "sval": "0003",
                    },
                  },
                },
              ],
              "location": 63,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_p1_null",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1022 1`] = `
[
  "DROP TABLE plt2_adv_p1_null",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt2_adv_p1_null",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1032 1`] = `
[
  "DROP TABLE plt1_adv",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "plt1_adv",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1055 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt1_adv t1 INNER JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE t1.c IN ('0003', '0004', '0005') AND t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 94,
                                  },
                                },
                                "location": 99,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 101,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 110,
                                  },
                                },
                                "location": 115,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 117,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 106,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 78,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 185,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_IN",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                          "location": 134,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 138,
                                    "sval": {
                                      "sval": "0003",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 146,
                                    "sval": {
                                      "sval": "0004",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 154,
                                    "sval": {
                                      "sval": "0005",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 166,
                            },
                          },
                          "location": 171,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 173,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 162,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1059 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c FROM plt1_adv t1 LEFT JOIN plt2_adv t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE t1.c IS NULL AND t1.b < 10 ORDER BY t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "plt1_adv",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                                "location": 98,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 100,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                "location": 114,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 116,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 105,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 77,
                          "relname": "plt2_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 164,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "NullTest": {
                          "arg": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                          "location": 133,
                          "nulltesttype": "IS_NULL",
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                          "location": 150,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 152,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 141,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1063 1`] = `
[
  "CREATE TABLE plt1_adv_default PARTITION OF plt1_adv DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "plt1_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "is_default": true,
              "location": 52,
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt1_adv_default",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1066 1`] = `
[
  "CREATE TABLE plt2_adv_default PARTITION OF plt2_adv DEFAULT",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "plt2_adv",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "is_default": true,
              "location": 52,
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "plt2_adv_default",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1103 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.a, t1.c, t2.a, t2.c, t3.a, t3.c FROM (plt1_adv t1 LEFT JOIN plt2_adv t2 ON (t1.c = t2.c)) FULL JOIN plt3_adv t3 ON (t1.c = t3.c) WHERE coalesce(t1.a, 0) % 5 != 3 AND coalesce(t1.a, 0) % 5 != 4 ORDER BY t1.c, t1.a, t2.a, t3.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 68,
                              "relname": "plt1_adv",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 106,
                                },
                              },
                              "location": 111,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 113,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 90,
                              "relname": "plt2_adv",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 146,
                            },
                          },
                          "location": 151,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 153,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 130,
                          "relname": "plt3_adv",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 232,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 238,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 244,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 250,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 57,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "CoalesceExpr": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 174,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 180,
                                      },
                                    },
                                  ],
                                  "location": 165,
                                },
                              },
                              "location": 183,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 185,
                                },
                              },
                            },
                          },
                          "location": 187,
                          "name": [
                            {
                              "String": {
                                "sval": "<>",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 3,
                              },
                              "location": 190,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "CoalesceExpr": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 205,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 211,
                                      },
                                    },
                                  ],
                                  "location": 196,
                                },
                              },
                              "location": 214,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 216,
                                },
                              },
                            },
                          },
                          "location": 218,
                          "name": [
                            {
                              "String": {
                                "sval": "<>",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 4,
                              },
                              "location": 221,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 192,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1113 1`] = `
[
  "CREATE TABLE alpha (a double precision, b int, c text) PARTITION BY RANGE (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 55,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 75,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "alpha",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 20,
                  "typeName": {
                    "location": 22,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 47,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1126 1`] = `
[
  "CREATE TABLE beta (a double precision, b int, c text) PARTITION BY RANGE (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 54,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 74,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "beta",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 19,
                  "typeName": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 46,
                  "typeName": {
                    "location": 48,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1143 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.*, t2.* FROM alpha t1 INNER JOIN beta t2 ON (t1.a = t2.a AND t1.b = t2.b) WHERE t1.b >= 125 AND t1.b < 225 ORDER BY t1.a, t1.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "alpha",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                                "location": 80,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 91,
                                  },
                                },
                                "location": 96,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 98,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 87,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "beta",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 146,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 152,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 110,
                            },
                          },
                          "location": 115,
                          "name": [
                            {
                              "String": {
                                "sval": ">=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 125,
                              },
                              "location": 118,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 126,
                            },
                          },
                          "location": 131,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 225,
                              },
                              "location": 133,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 122,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1147 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.*, t2.* FROM alpha t1 INNER JOIN beta t2 ON (t1.a = t2.a AND t1.c = t2.c) WHERE ((t1.b >= 100 AND t1.b < 110) OR (t1.b >= 200 AND t1.b < 210)) AND ((t2.b >= 100 AND t2.b < 110) OR (t2.b >= 200 AND t2.b < 210)) AND t1.c IN ('0004', '0009') ORDER BY t1.a, t1.b, t2.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "alpha",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                                "location": 80,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 91,
                                  },
                                },
                                "location": 96,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 98,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 87,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "beta",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 278,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 284,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 290,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 112,
                                        },
                                      },
                                      "location": 117,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 100,
                                          },
                                          "location": 120,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 128,
                                        },
                                      },
                                      "location": 133,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 110,
                                          },
                                          "location": 135,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 124,
                              },
                            },
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 144,
                                        },
                                      },
                                      "location": 149,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 200,
                                          },
                                          "location": 152,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 160,
                                        },
                                      },
                                      "location": 165,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 210,
                                          },
                                          "location": 167,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 156,
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 140,
                        },
                      },
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 179,
                                        },
                                      },
                                      "location": 184,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 100,
                                          },
                                          "location": 187,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 195,
                                        },
                                      },
                                      "location": 200,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 110,
                                          },
                                          "location": 202,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 191,
                              },
                            },
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 211,
                                        },
                                      },
                                      "location": 216,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 200,
                                          },
                                          "location": 219,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 227,
                                        },
                                      },
                                      "location": 232,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 210,
                                          },
                                          "location": 234,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 223,
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 207,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_IN",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 244,
                            },
                          },
                          "location": 249,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 253,
                                    "sval": {
                                      "sval": "0004",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 261,
                                    "sval": {
                                      "sval": "0009",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 173,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1151 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT t1.*, t2.* FROM alpha t1 INNER JOIN beta t2 ON (t1.a = t2.a AND t1.b = t2.b AND t1.c = t2.c) WHERE ((t1.b >= 100 AND t1.b < 110) OR (t1.b >= 200 AND t1.b < 210)) AND ((t2.b >= 100 AND t2.b < 110) OR (t2.b >= 200 AND t2.b < 210)) AND t1.c IN ('0004', '0009') ORDER BY t1.a, t1.b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "alpha",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                                "location": 80,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 91,
                                  },
                                },
                                "location": 96,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 98,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 107,
                                  },
                                },
                                "location": 112,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                    ],
                                    "location": 114,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 87,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "beta",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 294,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 300,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 128,
                                        },
                                      },
                                      "location": 133,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 100,
                                          },
                                          "location": 136,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 144,
                                        },
                                      },
                                      "location": 149,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 110,
                                          },
                                          "location": 151,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 140,
                              },
                            },
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 160,
                                        },
                                      },
                                      "location": 165,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 200,
                                          },
                                          "location": 168,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 176,
                                        },
                                      },
                                      "location": 181,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 210,
                                          },
                                          "location": 183,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 172,
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 156,
                        },
                      },
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 195,
                                        },
                                      },
                                      "location": 200,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 100,
                                          },
                                          "location": 203,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 211,
                                        },
                                      },
                                      "location": 216,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 110,
                                          },
                                          "location": 218,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 207,
                              },
                            },
                            {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 227,
                                        },
                                      },
                                      "location": 232,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 200,
                                          },
                                          "location": 235,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 243,
                                        },
                                      },
                                      "location": 248,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 210,
                                          },
                                          "location": 250,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 239,
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 223,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_IN",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 260,
                            },
                          },
                          "location": 265,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 269,
                                    "sval": {
                                      "sval": "0004",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 277,
                                    "sval": {
                                      "sval": "0009",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 189,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1156 1`] = `
[
  "CREATE TABLE fract_t (id BIGINT, PRIMARY KEY (id)) PARTITION BY RANGE (id)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 51,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 71,
                    "name": "id",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "fract_t",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "id",
                      },
                    },
                  ],
                  "location": 33,
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1161 1`] = `
[
  "INSERT INTO fract_t (id) (SELECT generate_series(0, 1999))",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 21,
                  "name": "id",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fract_t",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {},
                                "location": 49,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1999,
                                },
                                "location": 52,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "generate_series",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1165 1`] = `
[
  "SET max_parallel_workers_per_gather = 0",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "ival": {},
                  "location": 38,
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "max_parallel_workers_per_gather",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1168 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT x.id, y.id FROM fract_t x LEFT JOIN fract_t y USING (id) ORDER BY x.id ASC LIMIT 10",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "fract_t",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "y",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "fract_t",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitCount": {
                  "A_Const": {
                    "ival": {
                      "ival": 10,
                    },
                    "location": 108,
                  },
                },
                "limitOption": "LIMIT_OPTION_COUNT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 93,
                        },
                      },
                      "sortby_dir": "SORTBY_ASC",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1171 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT x.id, y.id FROM fract_t x LEFT JOIN fract_t y USING (id) ORDER BY x.id DESC LIMIT 10",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "fract_t",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "y",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "fract_t",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitCount": {
                  "A_Const": {
                    "ival": {
                      "ival": 10,
                    },
                    "location": 109,
                  },
                },
                "limitOption": "LIMIT_OPTION_COUNT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 93,
                        },
                      },
                      "sortby_dir": "SORTBY_DESC",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1175 1`] = `
[
  "DROP TABLE fract_t",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "fract_t",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`partition_join.sql > line 1177 1`] = `
[
  "RESET max_parallel_workers_per_gather",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "max_parallel_workers_per_gather",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
