// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`with.sql > line 6 1`] = `
[
  "WITH q1(x,y) AS (SELECT 1,2)
SELECT * FROM q1, q1 AS q2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 43,
                  "relname": "q1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "q2",
                  },
                  "inh": true,
                  "location": 47,
                  "relname": "q1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 36,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 36,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "q1",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 24,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 24,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 26,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 26,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 10 1`] = `
[
  "SELECT count(*) FROM (
  WITH q1(x) AS (SELECT random() FROM generate_series(1, 5))
    SELECT * FROM q1
  UNION
    SELECT * FROM q1
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "larg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 102,
                              "relname": "q1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 95,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 95,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_UNION",
                      "rarg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 131,
                              "relname": "q1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 124,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 124,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "withClause": {
                        "ctes": [
                          {
                            "CommonTableExpr": {
                              "aliascolnames": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "ctematerialized": "CTEMaterializeDefault",
                              "ctename": "q1",
                              "ctequery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeFunction": {
                                        "functions": [
                                          {
                                            "List": {
                                              "items": [
                                                {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 1,
                                                          },
                                                          "location": 77,
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 5,
                                                          },
                                                          "location": 80,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "generate_series",
                                                        },
                                                      },
                                                    ],
                                                    "location": 61,
                                                  },
                                                },
                                                {},
                                              ],
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 47,
                                        "val": {
                                          "FuncCall": {
                                            "funcformat": "COERCE_EXPLICIT_CALL",
                                            "funcname": [
                                              {
                                                "String": {
                                                  "sval": "random",
                                                },
                                              },
                                            ],
                                            "location": 47,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                              "location": 30,
                            },
                          },
                        ],
                        "location": 25,
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 20 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    VALUES (1)
UNION ALL
    SELECT n+1 FROM t WHERE n < 100
)
SELECT sum(n) FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 107,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 95,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "n",
                                },
                              },
                            ],
                            "location": 99,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 95,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 37,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 70,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                    "location": 62,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 78,
                                },
                              },
                              "location": 80,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 100,
                                  },
                                  "location": 82,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 27 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    SELECT (VALUES(1))
UNION ALL
    SELECT n+1 FROM t WHERE n < 5
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 108,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 101,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 101,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "SubLink": {
                                    "location": 36,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "valuesLists": [
                                          {
                                            "List": {
                                              "items": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 44,
                                                  },
                                                },
                                              ],
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 78,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 69,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 69,
                                      },
                                    },
                                    "location": 70,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 71,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 86,
                                },
                              },
                              "location": 88,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 90,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 35 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    VALUES (1::money)
UNION
    SELECT n+1::money FROM t WHERE n < 100::money
)
SELECT sum(n) FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 124,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 112,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "n",
                                },
                              },
                            ],
                            "location": 116,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 112,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "TypeCast": {
                                      "arg": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 37,
                                        },
                                      },
                                      "location": 38,
                                      "typeName": {
                                        "location": 40,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "money",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 80,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 64,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 64,
                                      },
                                    },
                                    "location": 65,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "TypeCast": {
                                        "arg": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 66,
                                          },
                                        },
                                        "location": 67,
                                        "typeName": {
                                          "location": 69,
                                          "names": [
                                            {
                                              "String": {
                                                "sval": "money",
                                              },
                                            },
                                          ],
                                          "typemod": -1,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 88,
                                },
                              },
                              "location": 90,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "TypeCast": {
                                  "arg": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 100,
                                      },
                                      "location": 92,
                                    },
                                  },
                                  "location": 95,
                                  "typeName": {
                                    "location": 97,
                                    "names": [
                                      {
                                        "String": {
                                          "sval": "money",
                                        },
                                      },
                                    ],
                                    "typemod": -1,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 43 1`] = `
[
  "CREATE RECURSIVE VIEW nums (n) AS
    VALUES (1)
UNION ALL
    SELECT n+1 FROM nums WHERE n < 5",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "aliases": [
              {
                "String": {
                  "sval": "n",
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": -1,
                      "relname": "nums",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": -1,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "n",
                              },
                            },
                          ],
                          "location": -1,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "nums",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 46,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 79,
                                    "relname": "nums",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 70,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "n",
                                                },
                                              },
                                            ],
                                            "location": 70,
                                          },
                                        },
                                        "location": 71,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 72,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "n",
                                          },
                                        },
                                      ],
                                      "location": 90,
                                    },
                                  },
                                  "location": 92,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 5,
                                      },
                                      "location": 94,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": -1,
                      },
                    },
                  ],
                  "location": -1,
                  "recursive": true,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 22,
              "relname": "nums",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 48 1`] = `
[
  "SELECT * FROM nums",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "nums",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 50 1`] = `
[
  "CREATE OR REPLACE RECURSIVE VIEW nums (n) AS
    VALUES (1)
UNION ALL
    SELECT n+1 FROM nums WHERE n < 6",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "aliases": [
              {
                "String": {
                  "sval": "n",
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": -1,
                      "relname": "nums",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": -1,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "n",
                              },
                            },
                          ],
                          "location": -1,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "nums",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 57,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 90,
                                    "relname": "nums",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 81,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "n",
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                        "location": 82,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 83,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "n",
                                          },
                                        },
                                      ],
                                      "location": 101,
                                    },
                                  },
                                  "location": 103,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 6,
                                      },
                                      "location": 105,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": -1,
                      },
                    },
                  ],
                  "location": -1,
                  "recursive": true,
                },
              },
            },
            "replace": true,
            "view": {
              "inh": true,
              "location": 33,
              "relname": "nums",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 58 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    SELECT 1
UNION
    SELECT 10-n FROM t)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 82,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 75,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 75,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 36,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 65,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 10,
                                        },
                                        "location": 55,
                                      },
                                    },
                                    "location": 57,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "-",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 58,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 65 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    VALUES (1)
UNION ALL
    SELECT n+1 FROM t)
SELECT * FROM t LIMIT 10",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 87,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 10,
                },
                "location": 95,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 80,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 80,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 37,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 70,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                    "location": 62,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 72 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    SELECT 1
UNION
    SELECT n+1 FROM t)
SELECT * FROM t LIMIT 10",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 81,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 10,
                },
                "location": 89,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 74,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 74,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 36,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 55,
                                      },
                                    },
                                    "location": 56,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 57,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 79 1`] = `
[
  "WITH q AS (SELECT 'foo' AS x)
SELECT x, pg_typeof(x) FROM q",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 58,
                  "relname": "q",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 37,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 37,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 40,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 50,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_typeof",
                          },
                        },
                      ],
                      "location": 40,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "q",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 18,
                              "name": "x",
                              "val": {
                                "A_Const": {
                                  "location": 18,
                                  "sval": {
                                    "sval": "foo",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 82 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    SELECT 'foo'
UNION ALL
    SELECT n || ' bar' FROM t WHERE length(n) < 20
)
SELECT n, pg_typeof(n) FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 133,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 112,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "n",
                          },
                        },
                      ],
                      "location": 112,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 115,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "n",
                                },
                              },
                            ],
                            "location": 125,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_typeof",
                          },
                        },
                      ],
                      "location": 115,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "A_Const": {
                                    "location": 36,
                                    "sval": {
                                      "sval": "foo",
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 80,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 63,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                    "location": 65,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "location": 68,
                                        "sval": {
                                          "sval": " bar",
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 95,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "length",
                                      },
                                    },
                                  ],
                                  "location": 88,
                                },
                              },
                              "location": 98,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 20,
                                  },
                                  "location": 100,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 91 1`] = `
[
  "WITH RECURSIVE t(n) AS (
    SELECT '7'
UNION ALL
    SELECT n+1 FROM t WHERE n < 10
)
SELECT n, pg_typeof(n) FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 115,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 94,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "n",
                          },
                        },
                      ],
                      "location": 94,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 97,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "n",
                                },
                              },
                            ],
                            "location": 107,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_typeof",
                          },
                        },
                      ],
                      "location": 97,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "A_Const": {
                                    "location": 36,
                                    "sval": {
                                      "sval": "7",
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 70,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                    "location": 62,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 78,
                                },
                              },
                              "location": 80,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 82,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 100 1`] = `
[
  "WITH RECURSIVE w1(c1) AS
 (WITH w2(c2) AS
  (WITH w3(c3) AS
   (WITH w4(c4) AS
    (WITH w5(c5) AS
     (WITH RECURSIVE w6(c6) AS
      (WITH w6(c6) AS
       (WITH w8(c8) AS
        (SELECT 1)
        SELECT * FROM w8)
       SELECT * FROM w6)
      SELECT * FROM w6)
     SELECT * FROM w5)
    SELECT * FROM w4)
   SELECT * FROM w3)
  SELECT * FROM w2)
SELECT * FROM w1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 369,
                  "relname": "w1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 362,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 362,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "c1",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "w1",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 351,
                              "relname": "w2",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 344,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 344,
                                },
                              },
                            },
                          },
                        ],
                        "withClause": {
                          "ctes": [
                            {
                              "CommonTableExpr": {
                                "aliascolnames": [
                                  {
                                    "String": {
                                      "sval": "c2",
                                    },
                                  },
                                ],
                                "ctematerialized": "CTEMaterializeDefault",
                                "ctename": "w2",
                                "ctequery": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 331,
                                          "relname": "w3",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 324,
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "A_Star": {},
                                                },
                                              ],
                                              "location": 324,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "withClause": {
                                      "ctes": [
                                        {
                                          "CommonTableExpr": {
                                            "aliascolnames": [
                                              {
                                                "String": {
                                                  "sval": "c3",
                                                },
                                              },
                                            ],
                                            "ctematerialized": "CTEMaterializeDefault",
                                            "ctename": "w3",
                                            "ctequery": {
                                              "SelectStmt": {
                                                "fromClause": [
                                                  {
                                                    "RangeVar": {
                                                      "inh": true,
                                                      "location": 310,
                                                      "relname": "w4",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 303,
                                                      "val": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "A_Star": {},
                                                            },
                                                          ],
                                                          "location": 303,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                                "withClause": {
                                                  "ctes": [
                                                    {
                                                      "CommonTableExpr": {
                                                        "aliascolnames": [
                                                          {
                                                            "String": {
                                                              "sval": "c4",
                                                            },
                                                          },
                                                        ],
                                                        "ctematerialized": "CTEMaterializeDefault",
                                                        "ctename": "w4",
                                                        "ctequery": {
                                                          "SelectStmt": {
                                                            "fromClause": [
                                                              {
                                                                "RangeVar": {
                                                                  "inh": true,
                                                                  "location": 288,
                                                                  "relname": "w5",
                                                                  "relpersistence": "p",
                                                                },
                                                              },
                                                            ],
                                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                                            "op": "SETOP_NONE",
                                                            "targetList": [
                                                              {
                                                                "ResTarget": {
                                                                  "location": 281,
                                                                  "val": {
                                                                    "ColumnRef": {
                                                                      "fields": [
                                                                        {
                                                                          "A_Star": {},
                                                                        },
                                                                      ],
                                                                      "location": 281,
                                                                    },
                                                                  },
                                                                },
                                                              },
                                                            ],
                                                            "withClause": {
                                                              "ctes": [
                                                                {
                                                                  "CommonTableExpr": {
                                                                    "aliascolnames": [
                                                                      {
                                                                        "String": {
                                                                          "sval": "c5",
                                                                        },
                                                                      },
                                                                    ],
                                                                    "ctematerialized": "CTEMaterializeDefault",
                                                                    "ctename": "w5",
                                                                    "ctequery": {
                                                                      "SelectStmt": {
                                                                        "fromClause": [
                                                                          {
                                                                            "RangeVar": {
                                                                              "inh": true,
                                                                              "location": 265,
                                                                              "relname": "w6",
                                                                              "relpersistence": "p",
                                                                            },
                                                                          },
                                                                        ],
                                                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                        "op": "SETOP_NONE",
                                                                        "targetList": [
                                                                          {
                                                                            "ResTarget": {
                                                                              "location": 258,
                                                                              "val": {
                                                                                "ColumnRef": {
                                                                                  "fields": [
                                                                                    {
                                                                                      "A_Star": {},
                                                                                    },
                                                                                  ],
                                                                                  "location": 258,
                                                                                },
                                                                              },
                                                                            },
                                                                          },
                                                                        ],
                                                                        "withClause": {
                                                                          "ctes": [
                                                                            {
                                                                              "CommonTableExpr": {
                                                                                "aliascolnames": [
                                                                                  {
                                                                                    "String": {
                                                                                      "sval": "c6",
                                                                                    },
                                                                                  },
                                                                                ],
                                                                                "ctematerialized": "CTEMaterializeDefault",
                                                                                "ctename": "w6",
                                                                                "ctequery": {
                                                                                  "SelectStmt": {
                                                                                    "fromClause": [
                                                                                      {
                                                                                        "RangeVar": {
                                                                                          "inh": true,
                                                                                          "location": 241,
                                                                                          "relname": "w6",
                                                                                          "relpersistence": "p",
                                                                                        },
                                                                                      },
                                                                                    ],
                                                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                    "op": "SETOP_NONE",
                                                                                    "targetList": [
                                                                                      {
                                                                                        "ResTarget": {
                                                                                          "location": 234,
                                                                                          "val": {
                                                                                            "ColumnRef": {
                                                                                              "fields": [
                                                                                                {
                                                                                                  "A_Star": {},
                                                                                                },
                                                                                              ],
                                                                                              "location": 234,
                                                                                            },
                                                                                          },
                                                                                        },
                                                                                      },
                                                                                    ],
                                                                                    "withClause": {
                                                                                      "ctes": [
                                                                                        {
                                                                                          "CommonTableExpr": {
                                                                                            "aliascolnames": [
                                                                                              {
                                                                                                "String": {
                                                                                                  "sval": "c6",
                                                                                                },
                                                                                              },
                                                                                            ],
                                                                                            "ctematerialized": "CTEMaterializeDefault",
                                                                                            "ctename": "w6",
                                                                                            "ctequery": {
                                                                                              "SelectStmt": {
                                                                                                "fromClause": [
                                                                                                  {
                                                                                                    "RangeVar": {
                                                                                                      "inh": true,
                                                                                                      "location": 216,
                                                                                                      "relname": "w8",
                                                                                                      "relpersistence": "p",
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                                "op": "SETOP_NONE",
                                                                                                "targetList": [
                                                                                                  {
                                                                                                    "ResTarget": {
                                                                                                      "location": 209,
                                                                                                      "val": {
                                                                                                        "ColumnRef": {
                                                                                                          "fields": [
                                                                                                            {
                                                                                                              "A_Star": {},
                                                                                                            },
                                                                                                          ],
                                                                                                          "location": 209,
                                                                                                        },
                                                                                                      },
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                                "withClause": {
                                                                                                  "ctes": [
                                                                                                    {
                                                                                                      "CommonTableExpr": {
                                                                                                        "aliascolnames": [
                                                                                                          {
                                                                                                            "String": {
                                                                                                              "sval": "c8",
                                                                                                            },
                                                                                                          },
                                                                                                        ],
                                                                                                        "ctematerialized": "CTEMaterializeDefault",
                                                                                                        "ctename": "w8",
                                                                                                        "ctequery": {
                                                                                                          "SelectStmt": {
                                                                                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                                            "op": "SETOP_NONE",
                                                                                                            "targetList": [
                                                                                                              {
                                                                                                                "ResTarget": {
                                                                                                                  "location": 191,
                                                                                                                  "val": {
                                                                                                                    "A_Const": {
                                                                                                                      "ival": {
                                                                                                                        "ival": 1,
                                                                                                                      },
                                                                                                                      "location": 191,
                                                                                                                    },
                                                                                                                  },
                                                                                                                },
                                                                                                              },
                                                                                                            ],
                                                                                                          },
                                                                                                        },
                                                                                                        "location": 165,
                                                                                                      },
                                                                                                    },
                                                                                                  ],
                                                                                                  "location": 160,
                                                                                                },
                                                                                              },
                                                                                            },
                                                                                            "location": 142,
                                                                                          },
                                                                                        },
                                                                                      ],
                                                                                      "location": 137,
                                                                                    },
                                                                                  },
                                                                                },
                                                                                "location": 120,
                                                                              },
                                                                            },
                                                                          ],
                                                                          "location": 105,
                                                                          "recursive": true,
                                                                        },
                                                                      },
                                                                    },
                                                                    "location": 89,
                                                                  },
                                                                },
                                                              ],
                                                              "location": 84,
                                                            },
                                                          },
                                                        },
                                                        "location": 69,
                                                      },
                                                    },
                                                  ],
                                                  "location": 64,
                                                },
                                              },
                                            },
                                            "location": 50,
                                          },
                                        },
                                      ],
                                      "location": 45,
                                    },
                                  },
                                },
                                "location": 32,
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 118 1`] = `
[
  "WITH RECURSIVE outermost(x) AS (
 SELECT 1
 UNION (WITH innermost1 AS (
  SELECT 2
  UNION (WITH innermost2 AS (
   SELECT 3
   UNION (WITH innermost3 AS (
    SELECT 4
    UNION (WITH innermost4 AS (
     SELECT 5
     UNION (WITH innermost5 AS (
      SELECT 6
      UNION (WITH innermost6 AS
       (SELECT 7)
       SELECT * FROM innermost6))
      SELECT * FROM innermost5))
     SELECT * FROM innermost4))
    SELECT * FROM innermost3))
   SELECT * FROM innermost2))
  SELECT * FROM outermost
  UNION SELECT * FROM innermost1)
 )
 SELECT * FROM outermost ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 551,
                  "relname": "outermost",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 570,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 544,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 544,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "outermost",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 41,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 41,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 489,
                                  "relname": "outermost",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 482,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 482,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 521,
                                  "relname": "innermost1",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 514,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 514,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "innermost1",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "larg": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 81,
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 2,
                                                  },
                                                  "location": 81,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_UNION",
                                      "rarg": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 460,
                                              "relname": "innermost2",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 453,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "A_Star": {},
                                                    },
                                                  ],
                                                  "location": 453,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "withClause": {
                                          "ctes": [
                                            {
                                              "CommonTableExpr": {
                                                "ctematerialized": "CTEMaterializeDefault",
                                                "ctename": "innermost2",
                                                "ctequery": {
                                                  "SelectStmt": {
                                                    "larg": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 123,
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 3,
                                                                },
                                                                "location": 123,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                    },
                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                    "op": "SETOP_UNION",
                                                    "rarg": {
                                                      "fromClause": [
                                                        {
                                                          "RangeVar": {
                                                            "inh": true,
                                                            "location": 430,
                                                            "relname": "innermost3",
                                                            "relpersistence": "p",
                                                          },
                                                        },
                                                      ],
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 423,
                                                            "val": {
                                                              "ColumnRef": {
                                                                "fields": [
                                                                  {
                                                                    "A_Star": {},
                                                                  },
                                                                ],
                                                                "location": 423,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                      "withClause": {
                                                        "ctes": [
                                                          {
                                                            "CommonTableExpr": {
                                                              "ctematerialized": "CTEMaterializeDefault",
                                                              "ctename": "innermost3",
                                                              "ctequery": {
                                                                "SelectStmt": {
                                                                  "larg": {
                                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                    "op": "SETOP_NONE",
                                                                    "targetList": [
                                                                      {
                                                                        "ResTarget": {
                                                                          "location": 167,
                                                                          "val": {
                                                                            "A_Const": {
                                                                              "ival": {
                                                                                "ival": 4,
                                                                              },
                                                                              "location": 167,
                                                                            },
                                                                          },
                                                                        },
                                                                      },
                                                                    ],
                                                                  },
                                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                  "op": "SETOP_UNION",
                                                                  "rarg": {
                                                                    "fromClause": [
                                                                      {
                                                                        "RangeVar": {
                                                                          "inh": true,
                                                                          "location": 399,
                                                                          "relname": "innermost4",
                                                                          "relpersistence": "p",
                                                                        },
                                                                      },
                                                                    ],
                                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                    "op": "SETOP_NONE",
                                                                    "targetList": [
                                                                      {
                                                                        "ResTarget": {
                                                                          "location": 392,
                                                                          "val": {
                                                                            "ColumnRef": {
                                                                              "fields": [
                                                                                {
                                                                                  "A_Star": {},
                                                                                },
                                                                              ],
                                                                              "location": 392,
                                                                            },
                                                                          },
                                                                        },
                                                                      },
                                                                    ],
                                                                    "withClause": {
                                                                      "ctes": [
                                                                        {
                                                                          "CommonTableExpr": {
                                                                            "ctematerialized": "CTEMaterializeDefault",
                                                                            "ctename": "innermost4",
                                                                            "ctequery": {
                                                                              "SelectStmt": {
                                                                                "larg": {
                                                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                  "op": "SETOP_NONE",
                                                                                  "targetList": [
                                                                                    {
                                                                                      "ResTarget": {
                                                                                        "location": 213,
                                                                                        "val": {
                                                                                          "A_Const": {
                                                                                            "ival": {
                                                                                              "ival": 5,
                                                                                            },
                                                                                            "location": 213,
                                                                                          },
                                                                                        },
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                },
                                                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                "op": "SETOP_UNION",
                                                                                "rarg": {
                                                                                  "fromClause": [
                                                                                    {
                                                                                      "RangeVar": {
                                                                                        "inh": true,
                                                                                        "location": 367,
                                                                                        "relname": "innermost5",
                                                                                        "relpersistence": "p",
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                  "op": "SETOP_NONE",
                                                                                  "targetList": [
                                                                                    {
                                                                                      "ResTarget": {
                                                                                        "location": 360,
                                                                                        "val": {
                                                                                          "ColumnRef": {
                                                                                            "fields": [
                                                                                              {
                                                                                                "A_Star": {},
                                                                                              },
                                                                                            ],
                                                                                            "location": 360,
                                                                                          },
                                                                                        },
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                  "withClause": {
                                                                                    "ctes": [
                                                                                      {
                                                                                        "CommonTableExpr": {
                                                                                          "ctematerialized": "CTEMaterializeDefault",
                                                                                          "ctename": "innermost5",
                                                                                          "ctequery": {
                                                                                            "SelectStmt": {
                                                                                              "larg": {
                                                                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                                "op": "SETOP_NONE",
                                                                                                "targetList": [
                                                                                                  {
                                                                                                    "ResTarget": {
                                                                                                      "location": 261,
                                                                                                      "val": {
                                                                                                        "A_Const": {
                                                                                                          "ival": {
                                                                                                            "ival": 6,
                                                                                                          },
                                                                                                          "location": 261,
                                                                                                        },
                                                                                                      },
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                              "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                              "op": "SETOP_UNION",
                                                                                              "rarg": {
                                                                                                "fromClause": [
                                                                                                  {
                                                                                                    "RangeVar": {
                                                                                                      "inh": true,
                                                                                                      "location": 334,
                                                                                                      "relname": "innermost6",
                                                                                                      "relpersistence": "p",
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                                "op": "SETOP_NONE",
                                                                                                "targetList": [
                                                                                                  {
                                                                                                    "ResTarget": {
                                                                                                      "location": 327,
                                                                                                      "val": {
                                                                                                        "ColumnRef": {
                                                                                                          "fields": [
                                                                                                            {
                                                                                                              "A_Star": {},
                                                                                                            },
                                                                                                          ],
                                                                                                          "location": 327,
                                                                                                        },
                                                                                                      },
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                                "withClause": {
                                                                                                  "ctes": [
                                                                                                    {
                                                                                                      "CommonTableExpr": {
                                                                                                        "ctematerialized": "CTEMaterializeDefault",
                                                                                                        "ctename": "innermost6",
                                                                                                        "ctequery": {
                                                                                                          "SelectStmt": {
                                                                                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                                                            "op": "SETOP_NONE",
                                                                                                            "targetList": [
                                                                                                              {
                                                                                                                "ResTarget": {
                                                                                                                  "location": 310,
                                                                                                                  "val": {
                                                                                                                    "A_Const": {
                                                                                                                      "ival": {
                                                                                                                        "ival": 7,
                                                                                                                      },
                                                                                                                      "location": 310,
                                                                                                                    },
                                                                                                                  },
                                                                                                                },
                                                                                                              },
                                                                                                            ],
                                                                                                          },
                                                                                                        },
                                                                                                        "location": 281,
                                                                                                      },
                                                                                                    },
                                                                                                  ],
                                                                                                  "location": 276,
                                                                                                },
                                                                                              },
                                                                                            },
                                                                                          },
                                                                                          "location": 232,
                                                                                        },
                                                                                      },
                                                                                    ],
                                                                                    "location": 227,
                                                                                  },
                                                                                },
                                                                              },
                                                                            },
                                                                            "location": 185,
                                                                          },
                                                                        },
                                                                      ],
                                                                      "location": 180,
                                                                    },
                                                                  },
                                                                },
                                                              },
                                                              "location": 140,
                                                            },
                                                          },
                                                        ],
                                                        "location": 135,
                                                      },
                                                    },
                                                  },
                                                },
                                                "location": 97,
                                              },
                                            },
                                          ],
                                          "location": 92,
                                        },
                                      },
                                    },
                                  },
                                  "location": 56,
                                },
                              },
                            ],
                            "location": 51,
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 158 1`] = `
[
  "INSERT INTO department VALUES (0, NULL, 'ROOT')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "department",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 31,
                          },
                        },
                        {
                          "A_Const": {
                            "isnull": true,
                            "location": 34,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 40,
                            "sval": {
                              "sval": "ROOT",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 169 1`] = `
[
  "WITH RECURSIVE subdepartment AS
(
	-- non recursive term
	SELECT name as root_name, * FROM department WHERE name = 'A'

	UNION ALL

	-- recursive term
	SELECT sd.root_name, d.* FROM department AS d, subdepartment AS sd
		WHERE d.parent_department = sd.id
)
SELECT * FROM subdepartment ORDER BY name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 271,
                  "relname": "subdepartment",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 294,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 264,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 264,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "subdepartment",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 91,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 65,
                                "name": "root_name",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 65,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 84,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 84,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "name",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                              "location": 113,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 115,
                                  "sval": {
                                    "sval": "A",
                                  },
                                },
                              },
                            },
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "d",
                                },
                                "inh": true,
                                "location": 182,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sd",
                                },
                                "inh": true,
                                "location": 199,
                                "relname": "subdepartment",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 159,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "sd",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "root_name",
                                        },
                                      },
                                    ],
                                    "location": 159,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 173,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 173,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "d",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "parent_department",
                                      },
                                    },
                                  ],
                                  "location": 227,
                                },
                              },
                              "location": 247,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sd",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 249,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 183 1`] = `
[
  "WITH RECURSIVE subdepartment(level, id, parent_department, name) AS
(
	-- non recursive term
	SELECT 1, * FROM department WHERE name = 'A'

	UNION ALL

	-- recursive term
	SELECT sd.level + 1, d.* FROM department AS d, subdepartment AS sd
		WHERE d.parent_department = sd.id
)
SELECT * FROM subdepartment ORDER BY name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 291,
                  "relname": "subdepartment",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 314,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 284,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 284,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "level",
                        },
                      },
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                      {
                        "String": {
                          "sval": "parent_department",
                        },
                      },
                      {
                        "String": {
                          "sval": "name",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "subdepartment",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 111,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 101,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 101,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 104,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 104,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "name",
                                      },
                                    },
                                  ],
                                  "location": 128,
                                },
                              },
                              "location": 133,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 135,
                                  "sval": {
                                    "sval": "A",
                                  },
                                },
                              },
                            },
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "d",
                                },
                                "inh": true,
                                "location": 202,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sd",
                                },
                                "inh": true,
                                "location": 219,
                                "relname": "subdepartment",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 179,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sd",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "level",
                                            },
                                          },
                                        ],
                                        "location": 179,
                                      },
                                    },
                                    "location": 188,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 190,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 193,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 193,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "d",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "parent_department",
                                      },
                                    },
                                  ],
                                  "location": 247,
                                },
                              },
                              "location": 267,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sd",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 269,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 198 1`] = `
[
  "WITH RECURSIVE subdepartment(level, id, parent_department, name) AS
(
	-- non recursive term
	SELECT 1, * FROM department WHERE name = 'A'

	UNION ALL

	-- recursive term
	SELECT sd.level + 1, d.* FROM department AS d, subdepartment AS sd
		WHERE d.parent_department = sd.id
)
SELECT * FROM subdepartment WHERE level >= 2 ORDER BY name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 291,
                  "relname": "subdepartment",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 331,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 284,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 284,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "level",
                        },
                      },
                    ],
                    "location": 311,
                  },
                },
                "location": 317,
                "name": [
                  {
                    "String": {
                      "sval": ">=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 2,
                    },
                    "location": 320,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "level",
                        },
                      },
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                      {
                        "String": {
                          "sval": "parent_department",
                        },
                      },
                      {
                        "String": {
                          "sval": "name",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "subdepartment",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 111,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 101,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 101,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 104,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 104,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "name",
                                      },
                                    },
                                  ],
                                  "location": 128,
                                },
                              },
                              "location": 133,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 135,
                                  "sval": {
                                    "sval": "A",
                                  },
                                },
                              },
                            },
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "d",
                                },
                                "inh": true,
                                "location": 202,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sd",
                                },
                                "inh": true,
                                "location": 219,
                                "relname": "subdepartment",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 179,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sd",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "level",
                                            },
                                          },
                                        ],
                                        "location": 179,
                                      },
                                    },
                                    "location": 188,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 190,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 193,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 193,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "d",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "parent_department",
                                      },
                                    },
                                  ],
                                  "location": 247,
                                },
                              },
                              "location": 267,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sd",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 269,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 212 1`] = `
[
  "WITH RECURSIVE subdepartment AS
(
	-- note lack of recursive UNION structure
	SELECT * FROM department WHERE name = 'A'
)
SELECT * FROM subdepartment ORDER BY name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 136,
                  "relname": "subdepartment",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 159,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 129,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 129,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "subdepartment",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 92,
                              "relname": "department",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 85,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 85,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "name",
                                    },
                                  },
                                ],
                                "location": 109,
                              },
                            },
                            "location": 114,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "location": 116,
                                "sval": {
                                  "sval": "A",
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 220 1`] = `
[
  "SELECT count(*) FROM (
    WITH RECURSIVE t(n) AS (
        SELECT 1 UNION ALL SELECT n + 1 FROM t WHERE n < 500
    )
    SELECT * FROM t) AS t WHERE n < (
        SELECT count(*) FROM (
            WITH RECURSIVE t(n) AS (
                   SELECT 1 UNION ALL SELECT n + 1 FROM t WHERE n < 100
                )
            SELECT * FROM t WHERE n < 50000
         ) AS t WHERE n < 100)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 137,
                            "relname": "t",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 130,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 130,
                              },
                            },
                          },
                        },
                      ],
                      "withClause": {
                        "ctes": [
                          {
                            "CommonTableExpr": {
                              "aliascolnames": [
                                {
                                  "String": {
                                    "sval": "n",
                                  },
                                },
                              ],
                              "ctematerialized": "CTEMaterializeDefault",
                              "ctename": "t",
                              "ctequery": {
                                "SelectStmt": {
                                  "all": true,
                                  "larg": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 67,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 67,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_UNION",
                                  "rarg": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 97,
                                          "relname": "t",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 86,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "n",
                                                      },
                                                    },
                                                  ],
                                                  "location": 86,
                                                },
                                              },
                                              "location": 88,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "+",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 90,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "n",
                                                },
                                              },
                                            ],
                                            "location": 105,
                                          },
                                        },
                                        "location": 107,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "<",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 500,
                                            },
                                            "location": 109,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                              "location": 42,
                            },
                          },
                        ],
                        "location": 27,
                        "recursive": true,
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "location": 151,
                  },
                },
                "location": 153,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "SubLink": {
                    "location": 155,
                    "subLinkType": "EXPR_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "t",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 341,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 334,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 334,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "n",
                                              },
                                            },
                                          ],
                                          "location": 349,
                                        },
                                      },
                                      "location": 351,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 50000,
                                          },
                                          "location": 353,
                                        },
                                      },
                                    },
                                  },
                                  "withClause": {
                                    "ctes": [
                                      {
                                        "CommonTableExpr": {
                                          "aliascolnames": [
                                            {
                                              "String": {
                                                "sval": "n",
                                              },
                                            },
                                          ],
                                          "ctematerialized": "CTEMaterializeDefault",
                                          "ctename": "t",
                                          "ctequery": {
                                            "SelectStmt": {
                                              "all": true,
                                              "larg": {
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 251,
                                                      "val": {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 1,
                                                          },
                                                          "location": 251,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                              "limitOption": "LIMIT_OPTION_DEFAULT",
                                              "op": "SETOP_UNION",
                                              "rarg": {
                                                "fromClause": [
                                                  {
                                                    "RangeVar": {
                                                      "inh": true,
                                                      "location": 281,
                                                      "relname": "t",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 270,
                                                      "val": {
                                                        "A_Expr": {
                                                          "kind": "AEXPR_OP",
                                                          "lexpr": {
                                                            "ColumnRef": {
                                                              "fields": [
                                                                {
                                                                  "String": {
                                                                    "sval": "n",
                                                                  },
                                                                },
                                                              ],
                                                              "location": 270,
                                                            },
                                                          },
                                                          "location": 272,
                                                          "name": [
                                                            {
                                                              "String": {
                                                                "sval": "+",
                                                              },
                                                            },
                                                          ],
                                                          "rexpr": {
                                                            "A_Const": {
                                                              "ival": {
                                                                "ival": 1,
                                                              },
                                                              "location": 274,
                                                            },
                                                          },
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                                "whereClause": {
                                                  "A_Expr": {
                                                    "kind": "AEXPR_OP",
                                                    "lexpr": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "n",
                                                            },
                                                          },
                                                        ],
                                                        "location": 289,
                                                      },
                                                    },
                                                    "location": 291,
                                                    "name": [
                                                      {
                                                        "String": {
                                                          "sval": "<",
                                                        },
                                                      },
                                                    ],
                                                    "rexpr": {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 100,
                                                        },
                                                        "location": 293,
                                                      },
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                          "location": 215,
                                        },
                                      },
                                    ],
                                    "location": 200,
                                    "recursive": true,
                                  },
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 172,
                              "val": {
                                "FuncCall": {
                                  "agg_star": true,
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "count",
                                      },
                                    },
                                  ],
                                  "location": 172,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "n",
                                    },
                                  },
                                ],
                                "location": 381,
                              },
                            },
                            "location": 383,
                            "name": [
                              {
                                "String": {
                                  "sval": "<",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 100,
                                },
                                "location": 385,
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 233 1`] = `
[
  "WITH q1(x,y) AS (
    SELECT hundred, sum(ten) FROM tenk1 GROUP BY hundred
  )
SELECT count(*) FROM q1 WHERE y > (SELECT sum(y)/100 FROM q1 qsub)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 100,
                  "relname": "q1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 86,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 86,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                    ],
                    "location": 109,
                  },
                },
                "location": 111,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "SubLink": {
                    "location": 113,
                    "subLinkType": "EXPR_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "qsub",
                              },
                              "inh": true,
                              "location": 137,
                              "relname": "q1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 121,
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "y",
                                                },
                                              },
                                            ],
                                            "location": 125,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "sum",
                                          },
                                        },
                                      ],
                                      "location": 121,
                                    },
                                  },
                                  "location": 127,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "/",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 100,
                                      },
                                      "location": 128,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "q1",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 52,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "groupClause": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "hundred",
                                  },
                                },
                              ],
                              "location": 67,
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 29,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "hundred",
                                      },
                                    },
                                  ],
                                  "location": 29,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 38,
                              "val": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "ten",
                                            },
                                          },
                                        ],
                                        "location": 42,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "sum",
                                      },
                                    },
                                  ],
                                  "location": 38,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 239 1`] = `
[
  "CREATE TEMPORARY VIEW vsubdepartment AS
	WITH RECURSIVE subdepartment AS
	(
		 -- non recursive term
		SELECT * FROM department WHERE name = 'A'
		UNION ALL
		-- recursive term
		SELECT d.* FROM department AS d, subdepartment AS sd
			WHERE d.parent_department = sd.id
	)
	SELECT * FROM subdepartment",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 287,
                      "relname": "subdepartment",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 280,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 280,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "subdepartment",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 117,
                                    "relname": "department",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 110,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 110,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "name",
                                          },
                                        },
                                      ],
                                      "location": 134,
                                    },
                                  },
                                  "location": 139,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "location": 141,
                                      "sval": {
                                        "sval": "A",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "d",
                                    },
                                    "inh": true,
                                    "location": 195,
                                    "relname": "department",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "sd",
                                    },
                                    "inh": true,
                                    "location": 212,
                                    "relname": "subdepartment",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 186,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "d",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 186,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "d",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "parent_department",
                                          },
                                        },
                                      ],
                                      "location": 241,
                                    },
                                  },
                                  "location": 261,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sd",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "id",
                                          },
                                        },
                                      ],
                                      "location": 263,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": 56,
                      },
                    },
                  ],
                  "location": 41,
                  "recursive": true,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 22,
              "relname": "vsubdepartment",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 251 1`] = `
[
  "SELECT * FROM vsubdepartment ORDER BY name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "vsubdepartment",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 38,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 254 1`] = `
[
  "SELECT pg_get_viewdef('vsubdepartment'::regclass)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "TypeCast": {
                            "arg": {
                              "A_Const": {
                                "location": 22,
                                "sval": {
                                  "sval": "vsubdepartment",
                                },
                              },
                            },
                            "location": 38,
                            "typeName": {
                              "location": 40,
                              "names": [
                                {
                                  "String": {
                                    "sval": "regclass",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_get_viewdef",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 258 1`] = `
[
  "CREATE VIEW sums_1_100 AS
WITH RECURSIVE t(n) AS (
    VALUES (1)
UNION ALL
    SELECT n+1 FROM t WHERE n < 100
)
SELECT sum(n) FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 133,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 121,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "n",
                                    },
                                  },
                                ],
                                "location": 125,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 121,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "t",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 63,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 96,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 87,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "n",
                                                },
                                              },
                                            ],
                                            "location": 87,
                                          },
                                        },
                                        "location": 88,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 89,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "n",
                                          },
                                        },
                                      ],
                                      "location": 104,
                                    },
                                  },
                                  "location": 106,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 100,
                                      },
                                      "location": 108,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": 41,
                      },
                    },
                  ],
                  "location": 26,
                  "recursive": true,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "sums_1_100",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 277 1`] = `
[
  "with recursive q as (
      select * from department
    union all
      (with recursive x as (
           select * from department
         union all
           (select * from q union all select * from x)
        )
       select * from x)
    )
select * from q limit 32",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 260,
                  "relname": "q",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 32,
                },
                "location": 268,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 253,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 253,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "q",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 42,
                                "relname": "department",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 35,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 35,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 237,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 230,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 230,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "x",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "all": true,
                                      "larg": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 121,
                                              "relname": "department",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 114,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "A_Star": {},
                                                    },
                                                  ],
                                                  "location": 114,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_UNION",
                                      "rarg": {
                                        "all": true,
                                        "larg": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 177,
                                                "relname": "q",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 170,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 170,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_UNION",
                                        "rarg": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 203,
                                                "relname": "x",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 196,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 196,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                  "location": 89,
                                },
                              },
                            ],
                            "location": 74,
                            "recursive": true,
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 290 1`] = `
[
  "WITH RECURSIVE t(i,j) AS (
	VALUES (1,2)
	UNION ALL
	SELECT t2.i, t.j+1 FROM
		(SELECT 2 AS i UNION ALL SELECT 3 AS i) AS t2
		JOIN t ON (t2.i = t.i+1))

	SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 169,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 162,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 162,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                      {
                        "String": {
                          "sval": "j",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 36,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "all": true,
                                        "larg": {
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 87,
                                                "name": "i",
                                                "val": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 2,
                                                    },
                                                    "location": 87,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_UNION",
                                        "rarg": {
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 111,
                                                "name": "i",
                                                "val": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 3,
                                                    },
                                                    "location": 111,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "i",
                                            },
                                          },
                                        ],
                                        "location": 138,
                                      },
                                    },
                                    "location": 143,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "i",
                                                },
                                              },
                                            ],
                                            "location": 145,
                                          },
                                        },
                                        "location": 148,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 149,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 132,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 60,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 60,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 66,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "j",
                                            },
                                          },
                                        ],
                                        "location": 66,
                                      },
                                    },
                                    "location": 69,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 302 1`] = `
[
  "CREATE TEMPORARY TABLE tree(
    id INTEGER PRIMARY KEY,
    parent_id INTEGER REFERENCES tree(id)
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 23,
              "relname": "tree",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 44,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "parent_id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_FOREIGN",
                        "fk_del_action": "a",
                        "fk_matchtype": "s",
                        "fk_upd_action": "a",
                        "initially_valid": true,
                        "location": 79,
                        "pk_attrs": [
                          {
                            "String": {
                              "sval": "id",
                            },
                          },
                        ],
                        "pktable": {
                          "inh": true,
                          "location": 90,
                          "relname": "tree",
                          "relpersistence": "p",
                        },
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 61,
                  "typeName": {
                    "location": 71,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 307 1`] = `
[
  "INSERT INTO tree
VALUES (1, NULL), (2, 1), (3,1), (4,2), (5,2), (6,2), (7,3), (8,3),
       (9,4), (10,4), (11,7), (12,7), (13,7), (14, 9), (15,11), (16,11)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "tree",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 25,
                          },
                        },
                        {
                          "A_Const": {
                            "isnull": true,
                            "location": 28,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 36,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 39,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 44,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 46,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 51,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 53,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 5,
                            },
                            "location": 58,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 60,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 6,
                            },
                            "location": 65,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 67,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 7,
                            },
                            "location": 72,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 74,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 8,
                            },
                            "location": 79,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 81,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 9,
                            },
                            "location": 93,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 95,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 100,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 103,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 108,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 7,
                            },
                            "location": 111,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 12,
                            },
                            "location": 116,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 7,
                            },
                            "location": 119,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 13,
                            },
                            "location": 124,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 7,
                            },
                            "location": 127,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 14,
                            },
                            "location": 132,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 9,
                            },
                            "location": 136,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 15,
                            },
                            "location": 141,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 144,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 16,
                            },
                            "location": 150,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 153,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 314 1`] = `
[
  "WITH RECURSIVE t(id, path) AS (
    VALUES(1,ARRAY[]::integer[])
UNION ALL
    SELECT tree.id, t.path || tree.id
    FROM tree JOIN t ON (tree.parent_id = t.id)
)
SELECT t1.*, t2.* FROM t AS t1 JOIN t AS t2 ON
	(t1.path[1] = t2.path[1] AND
	array_upper(t1.path,1) = 1 AND
	array_upper(t2.path,1) > 1)
	ORDER BY t1.id, t2.id",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 186,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "A_Indirection": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "path",
                                        },
                                      },
                                    ],
                                    "location": 212,
                                  },
                                },
                                "indirection": [
                                  {
                                    "A_Indices": {
                                      "uidx": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 220,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                            "location": 223,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Indirection": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "path",
                                        },
                                      },
                                    ],
                                    "location": 225,
                                  },
                                },
                                "indirection": [
                                  {
                                    "A_Indices": {
                                      "uidx": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 233,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "path",
                                          },
                                        },
                                      ],
                                      "location": 253,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 261,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "array_upper",
                                    },
                                  },
                                ],
                                "location": 241,
                              },
                            },
                            "location": 264,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 266,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "path",
                                          },
                                        },
                                      ],
                                      "location": 285,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 293,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "array_upper",
                                    },
                                  },
                                ],
                                "location": 273,
                              },
                            },
                            "location": 296,
                            "name": [
                              {
                                "String": {
                                  "sval": ">",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 298,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 236,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 199,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 311,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 318,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 170,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 170,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 176,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 176,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 43,
                                    },
                                  },
                                  {
                                    "TypeCast": {
                                      "arg": {
                                        "A_ArrayExpr": {
                                          "location": 45,
                                        },
                                      },
                                      "location": 52,
                                      "typeName": {
                                        "arrayBounds": [
                                          {
                                            "Integer": {},
                                          },
                                        ],
                                        "location": 54,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "pg_catalog",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "int4",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 122,
                                    "relname": "tree",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "parent_id",
                                            },
                                          },
                                        ],
                                        "location": 138,
                                      },
                                    },
                                    "location": 153,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 155,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 132,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 86,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tree",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 86,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 95,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 95,
                                      },
                                    },
                                    "location": 102,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 327 1`] = `
[
  "WITH RECURSIVE t(id, path) AS (
    VALUES(1,ARRAY[]::integer[])
UNION ALL
    SELECT tree.id, t.path || tree.id
    FROM tree JOIN t ON (tree.parent_id = t.id)
)
SELECT t1.id, count(t2.*) FROM t AS t1 JOIN t AS t2 ON
	(t1.path[1] = t2.path[1] AND
	array_upper(t1.path,1) = 1 AND
	array_upper(t2.path,1) > 1)
	GROUP BY t1.id
	ORDER BY t1.id",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 194,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "A_Indirection": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "path",
                                        },
                                      },
                                    ],
                                    "location": 220,
                                  },
                                },
                                "indirection": [
                                  {
                                    "A_Indices": {
                                      "uidx": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 228,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                            "location": 231,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Indirection": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "path",
                                        },
                                      },
                                    ],
                                    "location": 233,
                                  },
                                },
                                "indirection": [
                                  {
                                    "A_Indices": {
                                      "uidx": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 241,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "path",
                                          },
                                        },
                                      ],
                                      "location": 261,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 269,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "array_upper",
                                    },
                                  },
                                ],
                                "location": 249,
                              },
                            },
                            "location": 272,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 274,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "path",
                                          },
                                        },
                                      ],
                                      "location": 293,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 301,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "array_upper",
                                    },
                                  },
                                ],
                                "location": 281,
                              },
                            },
                            "location": 304,
                            "name": [
                              {
                                "String": {
                                  "sval": ">",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 306,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 244,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 207,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "t1",
                      },
                    },
                    {
                      "String": {
                        "sval": "id",
                      },
                    },
                  ],
                  "location": 319,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 335,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 170,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 170,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 177,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 183,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 177,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 43,
                                    },
                                  },
                                  {
                                    "TypeCast": {
                                      "arg": {
                                        "A_ArrayExpr": {
                                          "location": 45,
                                        },
                                      },
                                      "location": 52,
                                      "typeName": {
                                        "arrayBounds": [
                                          {
                                            "Integer": {},
                                          },
                                        ],
                                        "location": 54,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "pg_catalog",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "int4",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 122,
                                    "relname": "tree",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "parent_id",
                                            },
                                          },
                                        ],
                                        "location": 138,
                                      },
                                    },
                                    "location": 153,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 155,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 132,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 86,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tree",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 86,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 95,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 95,
                                      },
                                    },
                                    "location": 102,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 341 1`] = `
[
  "WITH RECURSIVE t(id, path) AS (
    VALUES(1,ARRAY[]::integer[])
UNION ALL
    SELECT tree.id, t.path || tree.id
    FROM tree JOIN t ON (tree.parent_id = t.id)
)
SELECT t1.id, t2.path, t2 FROM t AS t1 JOIN t AS t2 ON
(t1.id=t2.id)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 194,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 219,
                        },
                      },
                      "location": 224,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 225,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 207,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 170,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 170,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 177,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "path",
                          },
                        },
                      ],
                      "location": 177,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 186,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                      ],
                      "location": 186,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 43,
                                    },
                                  },
                                  {
                                    "TypeCast": {
                                      "arg": {
                                        "A_ArrayExpr": {
                                          "location": 45,
                                        },
                                      },
                                      "location": 52,
                                      "typeName": {
                                        "arrayBounds": [
                                          {
                                            "Integer": {},
                                          },
                                        ],
                                        "location": 54,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "pg_catalog",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "int4",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 122,
                                    "relname": "tree",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "parent_id",
                                            },
                                          },
                                        ],
                                        "location": 138,
                                      },
                                    },
                                    "location": 153,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 155,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 132,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 86,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tree",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 86,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 95,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 95,
                                      },
                                    },
                                    "location": 102,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tree",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 354 1`] = `
[
  "insert into graph0 values
	(1, 2, 'arc 1 -> 2'),
	(1, 3, 'arc 1 -> 3'),
	(2, 3, 'arc 2 -> 3'),
	(1, 4, 'arc 1 -> 4'),
	(4, 5, 'arc 4 -> 5')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "graph0",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 28,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 31,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 34,
                            "sval": {
                              "sval": "arc 1 -> 2",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 51,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 54,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 57,
                            "sval": {
                              "sval": "arc 1 -> 3",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 74,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 77,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 80,
                            "sval": {
                              "sval": "arc 2 -> 3",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 97,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 100,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 103,
                            "sval": {
                              "sval": "arc 1 -> 4",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 120,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 5,
                            },
                            "location": 123,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 126,
                            "sval": {
                              "sval": "arc 4 -> 5",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 361 1`] = `
[
  "explain (verbose, costs off)
with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 223,
                      "relname": "search_graph",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "seq",
                              },
                            },
                          ],
                          "location": 245,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 216,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 216,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                          {
                            "String": {
                              "sval": "t",
                            },
                          },
                          {
                            "String": {
                              "sval": "label",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "search_graph",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 90,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 128,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "sg",
                                    },
                                    "inh": true,
                                    "location": 138,
                                    "relname": "search_graph",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "g",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f",
                                          },
                                        },
                                      ],
                                      "location": 161,
                                    },
                                  },
                                  "location": 165,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sg",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "t",
                                          },
                                        },
                                      ],
                                      "location": 167,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": 44,
                        "search_clause": {
                          "location": 174,
                          "search_col_list": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "search_seq_column": "seq",
                        },
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 371 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 194,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 216,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 187,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 187,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 89,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 132,
                                },
                              },
                              "location": 136,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 145,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 380 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union distinct
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 199,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 221,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 192,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 192,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 104,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 114,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 94,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 94,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 137,
                                },
                              },
                              "location": 141,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 143,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 150,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 389 1`] = `
[
  "explain (verbose, costs off)
with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search breadth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 225,
                      "relname": "search_graph",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "seq",
                              },
                            },
                          ],
                          "location": 247,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 218,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 218,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                          {
                            "String": {
                              "sval": "t",
                            },
                          },
                          {
                            "String": {
                              "sval": "label",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "search_graph",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 90,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 128,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "sg",
                                    },
                                    "inh": true,
                                    "location": 138,
                                    "relname": "search_graph",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "g",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f",
                                          },
                                        },
                                      ],
                                      "location": 161,
                                    },
                                  },
                                  "location": 165,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sg",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "t",
                                          },
                                        },
                                      ],
                                      "location": 167,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": 44,
                        "search_clause": {
                          "location": 174,
                          "search_breadth_first": true,
                          "search_col_list": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "search_seq_column": "seq",
                        },
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 399 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search breadth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 196,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 218,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 189,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 189,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 89,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 132,
                                },
                              },
                              "location": 136,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 145,
                      "search_breadth_first": true,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 408 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union distinct
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search breadth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 201,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 223,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 194,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 194,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 104,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 114,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 94,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 94,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 137,
                                },
                              },
                              "location": 141,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 143,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 150,
                      "search_breadth_first": true,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 418 1`] = `
[
  "explain (verbose, costs off)
with recursive test as (
  select 1 as x
  union all
  select x + 1
  from test
) search depth first by x set y
select * from test limit 5",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 155,
                      "relname": "test",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitCount": {
                  "A_Const": {
                    "ival": {
                      "ival": 5,
                    },
                    "location": 166,
                  },
                },
                "limitOption": "LIMIT_OPTION_COUNT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 148,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 148,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "test",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 104,
                                    "relname": "test",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 91,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "x",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "location": 44,
                        "search_clause": {
                          "location": 111,
                          "search_col_list": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "search_seq_column": "y",
                        },
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 427 1`] = `
[
  "with recursive test as (
  select 1 as x
  union all
  select x + 1
  from test
) search depth first by x set y
select * from test limit 5",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 126,
                  "relname": "test",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 5,
                },
                "location": 137,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 119,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 119,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 34,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 34,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 75,
                                "relname": "test",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                        ],
                                        "location": 62,
                                      },
                                    },
                                    "location": 64,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 66,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 82,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "search_seq_column": "y",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 435 1`] = `
[
  "explain (verbose, costs off)
with recursive test as (
  select 1 as x
  union all
  select x + 1
  from test
) search breadth first by x set y
select * from test limit 5",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 157,
                      "relname": "test",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitCount": {
                  "A_Const": {
                    "ival": {
                      "ival": 5,
                    },
                    "location": 168,
                  },
                },
                "limitOption": "LIMIT_OPTION_COUNT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 150,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 150,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "test",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 104,
                                    "relname": "test",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 91,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "x",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "location": 44,
                        "search_clause": {
                          "location": 111,
                          "search_breadth_first": true,
                          "search_col_list": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "search_seq_column": "y",
                        },
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 444 1`] = `
[
  "with recursive test as (
  select 1 as x
  union all
  select x + 1
  from test
) search breadth first by x set y
select * from test limit 5",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 128,
                  "relname": "test",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 5,
                },
                "location": 139,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 121,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 121,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 34,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 34,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 75,
                                "relname": "test",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                        ],
                                        "location": 62,
                                      },
                                    },
                                    "location": 64,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 66,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 82,
                      "search_breadth_first": true,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "search_seq_column": "y",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 453 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by foo, tar set seq
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 198,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 191,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 191,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 89,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 132,
                                },
                              },
                              "location": 136,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 145,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "foo",
                          },
                        },
                        {
                          "String": {
                            "sval": "tar",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 462 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set label
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 196,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 189,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 189,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 89,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 132,
                                },
                              },
                              "location": 136,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 145,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "label",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 471 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t, f set seq
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 197,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 190,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 190,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 89,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 132,
                                },
                              },
                              "location": 136,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 145,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 480 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 229,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 251,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 222,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 222,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "g",
                                  },
                                  "inh": true,
                                  "location": 61,
                                  "relname": "graph0",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 54,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 54,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "g",
                                  },
                                  "inh": true,
                                  "location": 96,
                                  "relname": "graph0",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 89,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 89,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 134,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 144,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 124,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 124,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 167,
                                },
                              },
                              "location": 171,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 173,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 180,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 491 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	(select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t)
) search depth first by f, t set seq
select * from search_graph order by seq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 231,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "seq",
                          },
                        },
                      ],
                      "location": 253,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 224,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 224,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph0",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "g",
                                  },
                                  "inh": true,
                                  "location": 97,
                                  "relname": "graph0",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 90,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 90,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "g",
                                  },
                                  "inh": true,
                                  "location": 135,
                                  "relname": "graph0",
                                  "relpersistence": "p",
                                },
                              },
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "sg",
                                  },
                                  "inh": true,
                                  "location": 145,
                                  "relname": "search_graph",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 125,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "g",
                                          },
                                        },
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 125,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f",
                                        },
                                      },
                                    ],
                                    "location": 168,
                                  },
                                },
                                "location": 172,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "sg",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "t",
                                        },
                                      },
                                    ],
                                    "location": 174,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 182,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 504 1`] = `
[
  "with recursive x(col) as (
	select 1
	union
	(with x as (select * from x)
	 select * from x)
) search depth first by col set seq
select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 143,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 136,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 136,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "col",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 35,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 35,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 90,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 83,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "x",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 71,
                                            "relname": "x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 64,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 64,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 51,
                                },
                              },
                            ],
                            "location": 46,
                          },
                        },
                      },
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 95,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "col",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 513 1`] = `
[
  "create temp view v_search as
with recursive search_graph(f, t, label) as (
	select * from graph0 g
	union all
	select g.*
	from graph0 g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
select f, t, label from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 233,
                      "relname": "search_graph",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 216,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                          ],
                          "location": 216,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 219,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "location": 219,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 222,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "label",
                              },
                            },
                          ],
                          "location": 222,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                          {
                            "String": {
                              "sval": "t",
                            },
                          },
                          {
                            "String": {
                              "sval": "label",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "search_graph",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 90,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 128,
                                    "relname": "graph0",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "sg",
                                    },
                                    "inh": true,
                                    "location": 138,
                                    "relname": "search_graph",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "g",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f",
                                          },
                                        },
                                      ],
                                      "location": 161,
                                    },
                                  },
                                  "location": 165,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sg",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "t",
                                          },
                                        },
                                      ],
                                      "location": 167,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "location": 44,
                        "search_clause": {
                          "location": 174,
                          "search_col_list": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "search_seq_column": "seq",
                        },
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 17,
              "relname": "v_search",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 525 1`] = `
[
  "select * from v_search",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "v_search",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 530 1`] = `
[
  "create temp table graph( f int, t int, label text )",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "graph",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "f",
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "t",
                  "is_local": true,
                  "location": 32,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "label",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 532 1`] = `
[
  "insert into graph values
	(1, 2, 'arc 1 -> 2'),
	(1, 3, 'arc 1 -> 3'),
	(2, 3, 'arc 2 -> 3'),
	(1, 4, 'arc 1 -> 4'),
	(4, 5, 'arc 4 -> 5'),
	(5, 1, 'arc 5 -> 1')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "graph",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 27,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 30,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 33,
                            "sval": {
                              "sval": "arc 1 -> 2",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 50,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 53,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 56,
                            "sval": {
                              "sval": "arc 1 -> 3",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 73,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 76,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 79,
                            "sval": {
                              "sval": "arc 2 -> 3",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 96,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 99,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 102,
                            "sval": {
                              "sval": "arc 1 -> 4",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 4,
                            },
                            "location": 119,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 5,
                            },
                            "location": 122,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 125,
                            "sval": {
                              "sval": "arc 4 -> 5",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 5,
                            },
                            "location": 142,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 145,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 148,
                            "sval": {
                              "sval": "arc 5 -> 1",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 540 1`] = `
[
  "with recursive search_graph(f, t, label, is_cycle, path) as (
	select *, false, array[row(g.f, g.t)] from graph g
	union all
	select g.*, row(g.f, g.t) = any(path), path || row(g.f, g.t)
	from graph g, search_graph sg
	where g.f = sg.t and not is_cycle
)
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 269,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 262,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 262,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                      {
                        "String": {
                          "sval": "is_cycle",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 106,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 73,
                                "val": {
                                  "A_Const": {
                                    "boolval": {},
                                    "location": 73,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 80,
                                "val": {
                                  "A_ArrayExpr": {
                                    "elements": [
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f",
                                                    },
                                                  },
                                                ],
                                                "location": 90,
                                              },
                                            },
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "t",
                                                    },
                                                  },
                                                ],
                                                "location": 95,
                                              },
                                            },
                                          ],
                                          "location": 86,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                    ],
                                    "location": 80,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 193,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 202,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 133,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 133,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP_ANY",
                                    "lexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 142,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 147,
                                            },
                                          },
                                        ],
                                        "location": 138,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                    "location": 152,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 158,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 165,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 165,
                                      },
                                    },
                                    "location": 170,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 177,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 182,
                                            },
                                          },
                                        ],
                                        "location": 173,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f",
                                            },
                                          },
                                        ],
                                        "location": 225,
                                      },
                                    },
                                    "location": 229,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sg",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                        ],
                                        "location": 231,
                                      },
                                    },
                                  },
                                },
                                {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "is_cycle",
                                              },
                                            },
                                          ],
                                          "location": 244,
                                        },
                                      },
                                    ],
                                    "boolop": "NOT_EXPR",
                                    "location": 240,
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 236,
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 550 1`] = `
[
  "with recursive search_graph(f, t, label, is_cycle, path) as (
	select *, false, array[row(g.f, g.t)] from graph g
	union distinct
	select g.*, row(g.f, g.t) = any(path), path || row(g.f, g.t)
	from graph g, search_graph sg
	where g.f = sg.t and not is_cycle
)
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 274,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 267,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 267,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                      {
                        "String": {
                          "sval": "is_cycle",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 106,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 73,
                                "val": {
                                  "A_Const": {
                                    "boolval": {},
                                    "location": 73,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 80,
                                "val": {
                                  "A_ArrayExpr": {
                                    "elements": [
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f",
                                                    },
                                                  },
                                                ],
                                                "location": 90,
                                              },
                                            },
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "t",
                                                    },
                                                  },
                                                ],
                                                "location": 95,
                                              },
                                            },
                                          ],
                                          "location": 86,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                    ],
                                    "location": 80,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 198,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 207,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 143,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP_ANY",
                                    "lexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 147,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 152,
                                            },
                                          },
                                        ],
                                        "location": 143,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                    "location": 157,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 163,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 170,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 170,
                                      },
                                    },
                                    "location": 175,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 182,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 187,
                                            },
                                          },
                                        ],
                                        "location": 178,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f",
                                            },
                                          },
                                        ],
                                        "location": 230,
                                      },
                                    },
                                    "location": 234,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sg",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                        ],
                                        "location": 236,
                                      },
                                    },
                                  },
                                },
                                {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "is_cycle",
                                              },
                                            },
                                          ],
                                          "location": 249,
                                        },
                                      },
                                    ],
                                    "boolop": "NOT_EXPR",
                                    "location": 245,
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 241,
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 560 1`] = `
[
  "with recursive search_graph(f, t, label, is_cycle, path) as (
	select *, false, array[row(g.f, g.t)] from graph g
	union all
	select g.*, row(g.f, g.t) = any(path), path || row(g.f, g.t)
	from graph g, search_graph sg
	where g.f = sg.t and not is_cycle
)
select * from search_graph order by path",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 269,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "path",
                          },
                        },
                      ],
                      "location": 291,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 262,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 262,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                      {
                        "String": {
                          "sval": "is_cycle",
                        },
                      },
                      {
                        "String": {
                          "sval": "path",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 106,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 73,
                                "val": {
                                  "A_Const": {
                                    "boolval": {},
                                    "location": 73,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 80,
                                "val": {
                                  "A_ArrayExpr": {
                                    "elements": [
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f",
                                                    },
                                                  },
                                                ],
                                                "location": 90,
                                              },
                                            },
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "g",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "t",
                                                    },
                                                  },
                                                ],
                                                "location": 95,
                                              },
                                            },
                                          ],
                                          "location": 86,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                    ],
                                    "location": 80,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 193,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 202,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 133,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 133,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP_ANY",
                                    "lexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 142,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 147,
                                            },
                                          },
                                        ],
                                        "location": 138,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                    "location": 152,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 158,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 165,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "path",
                                            },
                                          },
                                        ],
                                        "location": 165,
                                      },
                                    },
                                    "location": 170,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f",
                                                  },
                                                },
                                              ],
                                              "location": 177,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "g",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "t",
                                                  },
                                                },
                                              ],
                                              "location": 182,
                                            },
                                          },
                                        ],
                                        "location": 173,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f",
                                            },
                                          },
                                        ],
                                        "location": 225,
                                      },
                                    },
                                    "location": 229,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sg",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "t",
                                            },
                                          },
                                        ],
                                        "location": 231,
                                      },
                                    },
                                  },
                                },
                                {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "is_cycle",
                                              },
                                            },
                                          ],
                                          "location": 244,
                                        },
                                      },
                                    ],
                                    "boolop": "NOT_EXPR",
                                    "location": 240,
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 236,
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 572 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set is_cycle using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 192,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 185,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 185,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 590 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union distinct
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set is_cycle to 'Y' default 'N' using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 216,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 209,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 209,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 103,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 112,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 93,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 135,
                                },
                              },
                              "location": 139,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 141,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "location": 187,
                          "sval": {
                            "sval": "N",
                          },
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "location": 175,
                          "sval": {
                            "sval": "Y",
                          },
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 148,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 599 1`] = `
[
  "explain (verbose, costs off)
with recursive test as (
  select 0 as x
  union all
  select (x + 1) % 10
  from test
) cycle x set is_cycle using path
select * from test",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 164,
                      "relname": "test",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 157,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 157,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "test",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 111,
                                    "relname": "test",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 91,
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "x",
                                                    },
                                                  },
                                                ],
                                                "location": 92,
                                              },
                                            },
                                            "location": 94,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "+",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 96,
                                              },
                                            },
                                          },
                                        },
                                        "location": 99,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "%",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 10,
                                            },
                                            "location": 101,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "cycle_clause": {
                          "cycle_col_list": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "cycle_mark_column": "is_cycle",
                          "cycle_mark_default": {
                            "A_Const": {
                              "boolval": {},
                              "location": -1,
                            },
                          },
                          "cycle_mark_value": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": -1,
                            },
                          },
                          "cycle_path_column": "path",
                          "location": 118,
                        },
                        "location": 44,
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 608 1`] = `
[
  "with recursive test as (
  select 0 as x
  union all
  select (x + 1) % 10
  from test
) cycle x set is_cycle using path
select * from test",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 135,
                  "relname": "test",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 128,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 128,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 34,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 34,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 82,
                                "relname": "test",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "x",
                                                },
                                              },
                                            ],
                                            "location": 63,
                                          },
                                        },
                                        "location": 65,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 67,
                                          },
                                        },
                                      },
                                    },
                                    "location": 70,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "%",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 10,
                                        },
                                        "location": 72,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 89,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 616 1`] = `
[
  "with recursive test as (
  select 0 as x
  union all
  select (x + 1) % 10
  from test
    where not is_cycle  -- redundant, but legal
) cycle x set is_cycle using path
select * from test",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 183,
                  "relname": "test",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 176,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 176,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 34,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 34,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 82,
                                "relname": "test",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "x",
                                                },
                                              },
                                            ],
                                            "location": 63,
                                          },
                                        },
                                        "location": 65,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 67,
                                          },
                                        },
                                      },
                                    },
                                    "location": 70,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "%",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 10,
                                        },
                                        "location": 72,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "is_cycle",
                                        },
                                      },
                                    ],
                                    "location": 101,
                                  },
                                },
                              ],
                              "boolop": "NOT_EXPR",
                              "location": 97,
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 137,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 626 1`] = `
[
  "with recursive
graph(f, t, label) as (
  values (1, 2, 'arc 1 -> 2'),
         (1, 3, 'arc 1 -> 3'),
         (2, 3, 'arc 2 -> 3'),
         (1, 4, 'arc 1 -> 4'),
         (4, 5, 'arc 4 -> 5'),
         (5, 1, 'arc 5 -> 1')
),
search_graph(f, t, label) as (
        select * from graph g
        union all
        select g.*
        from graph g, search_graph sg
        where g.f = sg.t
) cycle f, t set is_cycle to true default false using path
select f, t, label from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 471,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 454,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                      ],
                      "location": 454,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 457,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "location": 457,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 460,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "label",
                          },
                        },
                      ],
                      "location": 460,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "graph",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 49,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 52,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 55,
                                    "sval": {
                                      "sval": "arc 1 -> 2",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 80,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 83,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 86,
                                    "sval": {
                                      "sval": "arc 1 -> 3",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 111,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 114,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 117,
                                    "sval": {
                                      "sval": "arc 2 -> 3",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 142,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 4,
                                    },
                                    "location": 145,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 148,
                                    "sval": {
                                      "sval": "arc 1 -> 4",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 4,
                                    },
                                    "location": 173,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 176,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 179,
                                    "sval": {
                                      "sval": "arc 4 -> 5",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 204,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 207,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 210,
                                    "sval": {
                                      "sval": "arc 5 -> 1",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 15,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 280,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 273,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 273,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 338,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 347,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 321,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 321,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 377,
                                },
                              },
                              "location": 381,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 383,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 430,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 417,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 390,
                    },
                    "location": 227,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 645 1`] = `
[
  "with recursive a as (
	select 1 as b
	union all
	select * from a
) cycle b set c using p
select * from a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 103,
                  "relname": "a",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 96,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 96,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "a",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 30,
                                "name": "b",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 30,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 63,
                                "relname": "a",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 56,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 56,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "cycle_mark_column": "c",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "p",
                      "location": 67,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 653 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set seq
  cycle f, t set is_cycle using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 229,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 222,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 222,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 180,
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 143,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 663 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) search breadth first by f, t set seq
  cycle f, t set is_cycle using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 231,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 224,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 224,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 182,
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 143,
                      "search_breadth_first": true,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "seq",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 674 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle foo, tar set is_cycle using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 196,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 189,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 189,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "foo",
                          },
                        },
                        {
                          "String": {
                            "sval": "tar",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": -1,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": -1,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 701 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set label to true default false using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 211,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 204,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 204,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "label",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 180,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 167,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 710 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set is_cycle to true default false using label
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 215,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 208,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 208,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 183,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 170,
                        },
                      },
                      "cycle_path_column": "label",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 719 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set foo to true default false using foo
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 208,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 201,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 201,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "foo",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 178,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 165,
                        },
                      },
                      "cycle_path_column": "foo",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 728 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t, f set is_cycle to true default false using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 217,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 210,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 210,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 186,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 173,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 143,
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 737 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set foo
  cycle f, t set foo to true default false using path
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 246,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 239,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 239,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "foo",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 215,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 202,
                        },
                      },
                      "cycle_path_column": "path",
                      "location": 180,
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 143,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "foo",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 747 1`] = `
[
  "with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) search depth first by f, t set foo
  cycle f, t set is_cycle to true default false using foo
select * from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 250,
                  "relname": "search_graph",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 243,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 243,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "label",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "search_graph",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 61,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "g",
                                },
                                "inh": true,
                                "location": 98,
                                "relname": "graph",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "sg",
                                },
                                "inh": true,
                                "location": 107,
                                "relname": "search_graph",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "g",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f",
                                      },
                                    },
                                  ],
                                  "location": 130,
                                },
                              },
                              "location": 134,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "sg",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "t",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "cycle_clause": {
                      "cycle_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "cycle_mark_column": "is_cycle",
                      "cycle_mark_default": {
                        "A_Const": {
                          "boolval": {},
                          "location": 220,
                        },
                      },
                      "cycle_mark_value": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 207,
                        },
                      },
                      "cycle_path_column": "foo",
                      "location": 180,
                    },
                    "location": 15,
                    "search_clause": {
                      "location": 143,
                      "search_col_list": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "search_seq_column": "foo",
                    },
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 758 1`] = `
[
  "create temp view v_cycle1 as
with recursive search_graph(f, t, label) as (
	select * from graph g
	union all
	select g.*
	from graph g, search_graph sg
	where g.f = sg.t
) cycle f, t set is_cycle using path
select f, t, label from search_graph",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 231,
                      "relname": "search_graph",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 214,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                          ],
                          "location": 214,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 217,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "location": 217,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 220,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "label",
                              },
                            },
                          ],
                          "location": 220,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                          {
                            "String": {
                              "sval": "t",
                            },
                          },
                          {
                            "String": {
                              "sval": "label",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "search_graph",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 90,
                                    "relname": "graph",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "g",
                                    },
                                    "inh": true,
                                    "location": 127,
                                    "relname": "graph",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "sg",
                                    },
                                    "inh": true,
                                    "location": 136,
                                    "relname": "search_graph",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 117,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "g",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 117,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "g",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f",
                                          },
                                        },
                                      ],
                                      "location": 159,
                                    },
                                  },
                                  "location": 163,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sg",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "t",
                                          },
                                        },
                                      ],
                                      "location": 165,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                        "cycle_clause": {
                          "cycle_col_list": [
                            {
                              "String": {
                                "sval": "f",
                              },
                            },
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                          ],
                          "cycle_mark_column": "is_cycle",
                          "cycle_mark_default": {
                            "A_Const": {
                              "boolval": {},
                              "location": -1,
                            },
                          },
                          "cycle_mark_value": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": -1,
                            },
                          },
                          "cycle_path_column": "path",
                          "location": 172,
                        },
                        "location": 44,
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 17,
              "relname": "v_cycle1",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 781 1`] = `
[
  "select * from v_cycle1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "v_cycle1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 787 1`] = `
[
  "WITH RECURSIVE
  y (id) AS (VALUES (1)),
  x (id) AS (SELECT * FROM y UNION ALL SELECT id+1 FROM x WHERE id < 5)
SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 127,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 120,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 120,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 36,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 17,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 68,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 61,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 97,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 87,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 87,
                                      },
                                    },
                                    "location": 89,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 90,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 105,
                                },
                              },
                              "location": 108,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 110,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 43,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 793 1`] = `
[
  "WITH RECURSIVE
    x(id) AS (SELECT * FROM y UNION ALL SELECT id+1 FROM x WHERE id < 5),
    y(id) AS (values (1))
 SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 130,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 123,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 123,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 43,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 36,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 72,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 62,
                                      },
                                    },
                                    "location": 64,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 65,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 80,
                                },
                              },
                              "location": 83,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 85,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 19,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 111,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 93,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 798 1`] = `
[
  "WITH RECURSIVE
   x(id) AS
     (VALUES (1) UNION ALL SELECT id+1 FROM x WHERE id < 5),
   y(id) AS
     (VALUES (1) UNION ALL SELECT id+1 FROM y WHERE id < 10)
 SELECT y.*, x.* FROM y LEFT JOIN x USING (id)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 183,
                      "relname": "y",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 195,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "id",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 169,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "y",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 169,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 174,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 174,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 41,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 71,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                    "location": 63,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 79,
                                },
                              },
                              "location": 82,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 84,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 18,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 114,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 144,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 134,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 134,
                                      },
                                    },
                                    "location": 136,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 137,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 152,
                                },
                              },
                              "location": 155,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 157,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 91,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 805 1`] = `
[
  "WITH RECURSIVE
   x(id) AS
     (VALUES (1) UNION ALL SELECT id+1 FROM x WHERE id < 5),
   y(id) AS
     (VALUES (1) UNION ALL SELECT id+1 FROM x WHERE id < 10)
 SELECT y.*, x.* FROM y LEFT JOIN x USING (id)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 183,
                      "relname": "y",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 195,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "id",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 169,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "y",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 169,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 174,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 174,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 41,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 71,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                    "location": 63,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 79,
                                },
                              },
                              "location": 82,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 84,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 18,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 114,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 144,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 134,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 134,
                                      },
                                    },
                                    "location": 136,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 137,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 152,
                                },
                              },
                              "location": 155,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 157,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 91,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 812 1`] = `
[
  "WITH RECURSIVE
   x(id) AS
     (SELECT 1 UNION ALL SELECT id+1 FROM x WHERE id < 3 ),
   y(id) AS
     (SELECT * FROM x UNION ALL SELECT * FROM x),
   z(id) AS
     (SELECT * FROM x UNION ALL SELECT id+1 FROM z WHERE id < 10)
 SELECT * FROM z",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 242,
                  "relname": "z",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 235,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 235,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 40,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 40,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 69,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 59,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 59,
                                      },
                                    },
                                    "location": 61,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 62,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 77,
                                },
                              },
                              "location": 80,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 82,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 18,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 119,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 112,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 112,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 145,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 90,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "z",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 181,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 174,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 174,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 210,
                                "relname": "z",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 200,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 200,
                                      },
                                    },
                                    "location": 202,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 203,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 218,
                                },
                              },
                              "location": 221,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 223,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 152,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 821 1`] = `
[
  "WITH RECURSIVE
   x(id) AS
     (SELECT 1 UNION ALL SELECT id+1 FROM x WHERE id < 3 ),
   y(id) AS
     (SELECT * FROM x UNION ALL SELECT * FROM x),
   z(id) AS
     (SELECT * FROM y UNION ALL SELECT id+1 FROM z WHERE id < 10)
 SELECT * FROM z",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 242,
                  "relname": "z",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 235,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 235,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 40,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 40,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 69,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 59,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 59,
                                      },
                                    },
                                    "location": 61,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 62,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 77,
                                },
                              },
                              "location": 80,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 82,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 18,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 119,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 112,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 112,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 145,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 90,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "z",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 181,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 174,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 174,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 210,
                                "relname": "z",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 200,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 200,
                                      },
                                    },
                                    "location": 202,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 203,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 218,
                                },
                              },
                              "location": 221,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 223,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 152,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 837 1`] = `
[
  "WITH t AS (
	SELECT a FROM y
)
INSERT INTO y
SELECT a+20 FROM t RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "y",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 74,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 74,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 62,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 52,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 52,
                            },
                          },
                          "location": 53,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 20,
                              },
                              "location": 54,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 27,
                              "relname": "y",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 20,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 20,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 843 1`] = `
[
  "SELECT * FROM y",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "y",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 845 1`] = `
[
  "WITH t AS (
	SELECT a FROM y
)
UPDATE y SET a = y.a-10 FROM t WHERE y.a > 20 AND t.a = y.a RETURNING y.a",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 60,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 38,
              "relname": "y",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 101,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "y",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 101,
                    },
                  },
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 44,
                  "name": "a",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                      "location": 51,
                      "name": [
                        {
                          "String": {
                            "sval": "-",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 52,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 68,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 74,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 81,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 87,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 77,
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 27,
                              "relname": "y",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 20,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 20,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 852 1`] = `
[
  "WITH RECURSIVE t(a) AS (
	SELECT 11
	UNION ALL
	SELECT a+1 FROM t WHERE a < 50
)
DELETE FROM y USING t WHERE t.a = y.a RETURNING y.a",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 93,
              "relname": "y",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 129,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "y",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 129,
                    },
                  },
                },
              },
            ],
            "usingClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 101,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 109,
                  },
                },
                "location": 113,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 115,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 33,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 11,
                                    },
                                    "location": 33,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 55,
                                      },
                                    },
                                    "location": 56,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 57,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 72,
                                },
                              },
                              "location": 74,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 50,
                                  },
                                  "location": 76,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 861 1`] = `
[
  "DROP TABLE y",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "y",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 868 1`] = `
[
  "SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 871 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 INTERSECT SELECT n+1 FROM x)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 77,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 70,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 70,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_INTERSECT",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 59,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 51,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 52,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 874 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 INTERSECT ALL SELECT n+1 FROM x)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 81,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 74,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 74,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_INTERSECT",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 63,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 54,
                                      },
                                    },
                                    "location": 55,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 56,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 878 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 EXCEPT SELECT n+1 FROM x)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 74,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 67,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 67,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_EXCEPT",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 56,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 47,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 47,
                                      },
                                    },
                                    "location": 48,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 49,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 881 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 EXCEPT ALL SELECT n+1 FROM x)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 78,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 71,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 71,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_EXCEPT",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 60,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 51,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 51,
                                      },
                                    },
                                    "location": 52,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 53,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 885 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT n FROM x)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 56,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 49,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 49,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 38,
                              "relname": "x",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 31,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 31,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 889 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT n FROM x UNION ALL SELECT 1)
	SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 75,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 68,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 68,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 38,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 57,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 892 1`] = `
[
  "CREATE TEMPORARY TABLE y (a INTEGER)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 23,
              "relname": "y",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 903 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT a FROM y WHERE a = 1
	UNION ALL
	SELECT x.n+1 FROM x RIGHT JOIN y ON x.n = y.a WHERE n < 10)
SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 138,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 131,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 131,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 38,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 46,
                                },
                              },
                              "location": 48,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 50,
                                },
                              },
                            },
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_RIGHT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 82,
                                    "relname": "x",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 100,
                                      },
                                    },
                                    "location": 104,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "y",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 106,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 95,
                                    "relname": "y",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 71,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 71,
                                      },
                                    },
                                    "location": 74,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 75,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 116,
                                },
                              },
                              "location": 118,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 120,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 909 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT a FROM y WHERE a = 1
	UNION ALL
	SELECT x.n+1 FROM x FULL JOIN y ON x.n = y.a WHERE n < 10)
SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 137,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 130,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 130,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 38,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 46,
                                },
                              },
                              "location": 48,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 50,
                                },
                              },
                            },
                          },
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_FULL",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 82,
                                    "relname": "x",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 99,
                                      },
                                    },
                                    "location": 103,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "y",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 94,
                                    "relname": "y",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 71,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 71,
                                      },
                                    },
                                    "location": 74,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 75,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 115,
                                },
                              },
                              "location": 117,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 119,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 915 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT n+1 FROM x
                          WHERE n IN (SELECT * FROM x))
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 133,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 126,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 126,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 59,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 51,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 52,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "SubLink": {
                              "location": 95,
                              "subLinkType": "ANY_SUBLINK",
                              "subselect": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 113,
                                        "relname": "x",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 106,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 106,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                              "testexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "n",
                                      },
                                    },
                                  ],
                                  "location": 93,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 920 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT count(*) FROM x)
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 83,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 76,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 76,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "FuncCall": {
                                    "agg_star": true,
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "count",
                                        },
                                      },
                                    ],
                                    "location": 50,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 923 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT sum(n) FROM x)
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 81,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 74,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 74,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 62,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "n",
                                              },
                                            },
                                          ],
                                          "location": 54,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "sum",
                                        },
                                      },
                                    ],
                                    "location": 50,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 927 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT n+1 FROM x ORDER BY 1)
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 89,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 82,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 82,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 59,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 51,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 52,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "sortClause": [
                          {
                            "SortBy": {
                              "location": -1,
                              "node": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 70,
                                },
                              },
                              "sortby_dir": "SORTBY_DEFAULT",
                              "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                            },
                          },
                        ],
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 931 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT n+1 FROM x LIMIT 10 OFFSET 1)
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 96,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 89,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 89,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitCount": {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 67,
                          },
                        },
                        "limitOffset": {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 77,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 59,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 51,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 52,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 935 1`] = `
[
  "WITH RECURSIVE x(n) AS (SELECT 1 UNION ALL SELECT n+1 FROM x FOR UPDATE)
  SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 89,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 82,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 82,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "n",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "lockingClause": [
                          {
                            "LockingClause": {
                              "strength": "LCS_FORUPDATE",
                              "waitPolicy": "LockWaitBlock",
                            },
                          },
                        ],
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 59,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 51,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 52,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 939 1`] = `
[
  "WITH RECURSIVE x(id) AS (values (1)
    UNION ALL
    SELECT (SELECT * FROM x) FROM x WHERE id < 5
) SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 115,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 108,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 108,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 33,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 84,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "SubLink": {
                                    "location": 61,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 76,
                                              "relname": "x",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 69,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "A_Star": {},
                                                    },
                                                  ],
                                                  "location": 69,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 92,
                                },
                              },
                              "location": 95,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 97,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 945 1`] = `
[
  "WITH RECURSIVE
  x (id) AS (SELECT 1 UNION ALL SELECT id+1 FROM y WHERE id < 5),
  y (id) AS (SELECT 1 UNION ALL SELECT id+1 FROM x WHERE id < 5)
SELECT * FROM x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 160,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 153,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 153,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 35,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 35,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 54,
                                      },
                                    },
                                    "location": 56,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 57,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 72,
                                },
                              },
                              "location": 75,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 77,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 17,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "y",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 101,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 101,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 130,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 120,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 120,
                                      },
                                    },
                                    "location": 122,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 123,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                              "location": 141,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 143,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 83,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 951 1`] = `
[
  "WITH RECURSIVE foo(i) AS
    (values (1)
    UNION ALL
       (SELECT i+1 FROM foo WHERE i < 10
          UNION ALL
       SELECT i+1 FROM foo WHERE i < 5)
) SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 172,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 165,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 165,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 79,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 70,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 70,
                                        },
                                      },
                                      "location": 71,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 72,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                                "location": 91,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 10,
                                    },
                                    "location": 93,
                                  },
                                },
                              },
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 139,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 130,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 130,
                                        },
                                      },
                                      "location": 131,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 132,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 149,
                                  },
                                },
                                "location": 151,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 153,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 959 1`] = `
[
  "WITH RECURSIVE foo(i) AS
    (values (1)
    UNION ALL
	   SELECT * FROM
       (SELECT i+1 FROM foo WHERE i < 10
          UNION ALL
       SELECT i+1 FROM foo WHERE i < 5) AS t
) SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 195,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 188,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 188,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "t",
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "all": true,
                                    "larg": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 97,
                                            "relname": "foo",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 88,
                                            "val": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "i",
                                                        },
                                                      },
                                                    ],
                                                    "location": 88,
                                                  },
                                                },
                                                "location": 89,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "+",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 90,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "i",
                                                  },
                                                },
                                              ],
                                              "location": 107,
                                            },
                                          },
                                          "location": 109,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "<",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 10,
                                              },
                                              "location": 111,
                                            },
                                          },
                                        },
                                      },
                                    },
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_UNION",
                                    "rarg": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 157,
                                            "relname": "foo",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 148,
                                            "val": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "i",
                                                        },
                                                      },
                                                    ],
                                                    "location": 148,
                                                  },
                                                },
                                                "location": 149,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "+",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 150,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "i",
                                                  },
                                                },
                                              ],
                                              "location": 167,
                                            },
                                          },
                                          "location": 169,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "<",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 5,
                                              },
                                              "location": 171,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 66,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 66,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 968 1`] = `
[
  "WITH RECURSIVE foo(i) AS
    (values (1)
    UNION ALL
       (SELECT i+1 FROM foo WHERE i < 10
          EXCEPT
       SELECT i+1 FROM foo WHERE i < 5)
) SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 169,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 162,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 162,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 79,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 70,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 70,
                                        },
                                      },
                                      "location": 71,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 72,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                                "location": 91,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 10,
                                    },
                                    "location": 93,
                                  },
                                },
                              },
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_EXCEPT",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 136,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 127,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 127,
                                        },
                                      },
                                      "location": 128,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 129,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 146,
                                  },
                                },
                                "location": 148,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 150,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 976 1`] = `
[
  "WITH RECURSIVE foo(i) AS
    (values (1)
    UNION ALL
       (SELECT i+1 FROM foo WHERE i < 10
          INTERSECT
       SELECT i+1 FROM foo WHERE i < 5)
) SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 172,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 165,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 165,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 79,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 70,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 70,
                                        },
                                      },
                                      "location": 71,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 72,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 89,
                                  },
                                },
                                "location": 91,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 10,
                                    },
                                    "location": 93,
                                  },
                                },
                              },
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_INTERSECT",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 139,
                                  "relname": "foo",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 130,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 130,
                                        },
                                      },
                                      "location": 131,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 132,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 149,
                                  },
                                },
                                "location": 151,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 153,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 985 1`] = `
[
  "WITH RECURSIVE foo(i) AS
   (SELECT i FROM (VALUES(1),(2)) t(i)
   UNION ALL
   SELECT (i+1)::numeric(10,0) FROM foo WHERE i < 10)
SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 145,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 138,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 138,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "t",
                                  "colnames": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "valuesLists": [
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 51,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 55,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 36,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 113,
                                "relname": "foo",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 87,
                                "val": {
                                  "TypeCast": {
                                    "arg": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i",
                                                },
                                              },
                                            ],
                                            "location": 88,
                                          },
                                        },
                                        "location": 89,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 90,
                                          },
                                        },
                                      },
                                    },
                                    "location": 92,
                                    "typeName": {
                                      "location": 94,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "pg_catalog",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "numeric",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                      "typmods": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 10,
                                            },
                                            "location": 102,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 105,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 123,
                                },
                              },
                              "location": 125,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 127,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 992 1`] = `
[
  "WITH RECURSIVE foo(i) AS
   (SELECT i::numeric(3,0) FROM (VALUES(1),(2)) t(i)
   UNION ALL
   SELECT (i+1)::numeric(10,0) FROM foo WHERE i < 10)
SELECT * FROM foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 159,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 152,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 152,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "foo",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "t",
                                  "colnames": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "valuesLists": [
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 65,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 69,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 36,
                                "val": {
                                  "TypeCast": {
                                    "arg": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i",
                                            },
                                          },
                                        ],
                                        "location": 36,
                                      },
                                    },
                                    "location": 37,
                                    "typeName": {
                                      "location": 39,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "pg_catalog",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "numeric",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                      "typmods": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 3,
                                            },
                                            "location": 47,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 49,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 127,
                                "relname": "foo",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 101,
                                "val": {
                                  "TypeCast": {
                                    "arg": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i",
                                                },
                                              },
                                            ],
                                            "location": 102,
                                          },
                                        },
                                        "location": 103,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 104,
                                          },
                                        },
                                      },
                                    },
                                    "location": 106,
                                    "typeName": {
                                      "location": 108,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "pg_catalog",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "numeric",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                      "typmods": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 10,
                                            },
                                            "location": 116,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 119,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 137,
                                },
                              },
                              "location": 139,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 141,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 999 1`] = `
[
  "CREATE TEMPORARY TABLE x (n integer)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 23,
              "relname": "x",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "n",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1001 1`] = `
[
  "    WITH t AS (SELECT OLD.*) UPDATE y SET a = t.n FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 55,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 36,
              "relname": "y",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 42,
                  "name": "a",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "n",
                          },
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 22,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "old",
                                      },
                                    },
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 22,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 9,
                  },
                },
              ],
              "location": 4,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1006 1`] = `
[
  "with cte(foo) as ( values(42) ) values((select foo from cte))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "valuesLists": [
              {
                "List": {
                  "items": [
                    {
                      "SubLink": {
                        "location": 39,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 56,
                                  "relname": "cte",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "foo",
                                          },
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  ],
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "foo",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "cte",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 42,
                                    },
                                    "location": 26,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1011 1`] = `
[
  "select ( with cte(foo) as ( values(f1) )
         select (select foo from cte) )
from int4_tbl",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 86,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "SubLink": {
                                    "location": 57,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 74,
                                              "relname": "cte",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 65,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "foo",
                                                      },
                                                    },
                                                  ],
                                                  "location": 65,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "aliascolnames": [
                                    {
                                      "String": {
                                        "sval": "foo",
                                      },
                                    },
                                  ],
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "cte",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "valuesLists": [
                                        {
                                          "List": {
                                            "items": [
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 35,
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 14,
                                },
                              },
                            ],
                            "location": 9,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1015 1`] = `
[
  "select ( with cte(foo) as ( values(f1) )
          values((select foo from cte)) )
from int4_tbl",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 88,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "SubLink": {
                                      "location": 58,
                                      "subLinkType": "EXPR_SUBLINK",
                                      "subselect": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 75,
                                                "relname": "cte",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 66,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "foo",
                                                        },
                                                      },
                                                    ],
                                                    "location": 66,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "aliascolnames": [
                                    {
                                      "String": {
                                        "sval": "foo",
                                      },
                                    },
                                  ],
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "cte",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "valuesLists": [
                                        {
                                          "List": {
                                            "items": [
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 35,
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 14,
                                },
                              },
                            ],
                            "location": 9,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1022 1`] = `
[
  "WITH RECURSIVE t(j) AS (
    WITH RECURSIVE s(i) AS (
        VALUES (1)
        UNION ALL
        SELECT i+1 FROM s WHERE i < 10
    )
    SELECT i FROM s
    UNION ALL
    SELECT j+1 FROM t WHERE j < 10
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 221,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 214,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 214,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "j",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 154,
                                "relname": "s",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 147,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 147,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 190,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 181,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "j",
                                            },
                                          },
                                        ],
                                        "location": 181,
                                      },
                                    },
                                    "location": 182,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 183,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j",
                                      },
                                    },
                                  ],
                                  "location": 198,
                                },
                              },
                              "location": 200,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 202,
                                },
                              },
                            },
                          },
                        },
                        "withClause": {
                          "ctes": [
                            {
                              "CommonTableExpr": {
                                "aliascolnames": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "ctematerialized": "CTEMaterializeDefault",
                                "ctename": "s",
                                "ctequery": {
                                  "SelectStmt": {
                                    "all": true,
                                    "larg": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "valuesLists": [
                                        {
                                          "List": {
                                            "items": [
                                              {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 70,
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      ],
                                    },
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_UNION",
                                    "rarg": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 115,
                                            "relname": "s",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 106,
                                            "val": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "i",
                                                        },
                                                      },
                                                    ],
                                                    "location": 106,
                                                  },
                                                },
                                                "location": 107,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "+",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 108,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "i",
                                                  },
                                                },
                                              ],
                                              "location": 123,
                                            },
                                          },
                                          "location": 125,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "<",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 10,
                                              },
                                              "location": 127,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                                "location": 44,
                              },
                            },
                          ],
                          "location": 29,
                          "recursive": true,
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1046 1`] = `
[
  "WITH outermost(x) AS (
  SELECT 1
  UNION (WITH innermost as (SELECT 2)
         SELECT * FROM outermost  -- fail
         UNION SELECT * FROM innermost)
)
SELECT * FROM outermost ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 170,
                  "relname": "outermost",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 189,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 163,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 163,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "outermost",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 32,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 32,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 95,
                                  "relname": "outermost",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 88,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 88,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 143,
                                  "relname": "innermost",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 136,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 136,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "innermost",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 69,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 69,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 48,
                                },
                              },
                            ],
                            "location": 43,
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1054 1`] = `
[
  "WITH RECURSIVE outermost(x) AS (
  SELECT 1
  UNION (WITH innermost as (SELECT 2)
         SELECT * FROM outermost
         UNION SELECT * FROM innermost)
)
SELECT * FROM outermost ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 171,
                  "relname": "outermost",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 190,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 164,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 164,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "outermost",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 42,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 42,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 105,
                                  "relname": "outermost",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 98,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 98,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 144,
                                  "relname": "innermost",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 137,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 137,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "innermost",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 79,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 79,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 58,
                                },
                              },
                            ],
                            "location": 53,
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1062 1`] = `
[
  "WITH RECURSIVE outermost(x) AS (
  WITH innermost as (SELECT 2 FROM outermost) -- fail
    SELECT * FROM innermost
    UNION SELECT * from outermost
)
SELECT * FROM outermost ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 165,
                  "relname": "outermost",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 184,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 158,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 158,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "outermost",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 105,
                                "relname": "innermost",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 98,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 98,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 139,
                                "relname": "outermost",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 132,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 132,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "withClause": {
                          "ctes": [
                            {
                              "CommonTableExpr": {
                                "ctematerialized": "CTEMaterializeDefault",
                                "ctename": "innermost",
                                "ctequery": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 68,
                                          "relname": "outermost",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 61,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 61,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                                "location": 40,
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1113 1`] = `
[
  "WITH RECURSIVE
  tab(id_key,link) AS (VALUES (1,17), (2,17), (3,17), (4,17), (6,17), (5,17)),
  iter (id_key, row_type, link) AS (
      SELECT 0, 'base', 17
    UNION (
      WITH remaining(id_key, row_type, link, min) AS (
        SELECT tab.id_key, 'true'::text, iter.link, MIN(tab.id_key) OVER ()
        FROM tab INNER JOIN iter USING (link)
        WHERE tab.id_key > iter.id_key
      ),
      first_remaining AS (
        SELECT id_key, row_type, link
        FROM remaining
        WHERE id_key=min
      ),
      effect AS (
        SELECT tab.id_key, 'new'::text, tab.link
        FROM first_remaining e INNER JOIN tab ON e.id_key=tab.id_key
        WHERE e.row_type = 'false'
      )
      SELECT * FROM first_remaining
      UNION ALL SELECT * FROM effect
    )
  )
SELECT * FROM iter",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 793,
                  "relname": "iter",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 786,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 786,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id_key",
                        },
                      },
                      {
                        "String": {
                          "sval": "link",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "tab",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 46,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 48,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 54,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 56,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 62,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 64,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 4,
                                    },
                                    "location": 70,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 72,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 6,
                                    },
                                    "location": 78,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 80,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 86,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 88,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 17,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "id_key",
                        },
                      },
                      {
                        "String": {
                          "sval": "row_type",
                        },
                      },
                      {
                        "String": {
                          "sval": "link",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "iter",
                    "ctequery": {
                      "SelectStmt": {
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 144,
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 144,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 147,
                                "val": {
                                  "A_Const": {
                                    "location": 147,
                                    "sval": {
                                      "sval": "base",
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 155,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 17,
                                    },
                                    "location": 155,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 716,
                                  "relname": "first_remaining",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 709,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 709,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 762,
                                  "relname": "effect",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 755,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 755,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "aliascolnames": [
                                    {
                                      "String": {
                                        "sval": "id_key",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "row_type",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "link",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "min",
                                      },
                                    },
                                  ],
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "remaining",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "JoinExpr": {
                                            "jointype": "JOIN_INNER",
                                            "larg": {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 314,
                                                "relname": "tab",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "rarg": {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 329,
                                                "relname": "iter",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "usingClause": [
                                              {
                                                "String": {
                                                  "sval": "link",
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 240,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "tab",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "id_key",
                                                    },
                                                  },
                                                ],
                                                "location": 240,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 252,
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "location": 252,
                                                    "sval": {
                                                      "sval": "true",
                                                    },
                                                  },
                                                },
                                                "location": 258,
                                                "typeName": {
                                                  "location": 260,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "text",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 266,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "iter",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "link",
                                                    },
                                                  },
                                                ],
                                                "location": 266,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 277,
                                            "val": {
                                              "FuncCall": {
                                                "args": [
                                                  {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "tab",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "id_key",
                                                          },
                                                        },
                                                      ],
                                                      "location": 281,
                                                    },
                                                  },
                                                ],
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "min",
                                                    },
                                                  },
                                                ],
                                                "location": 277,
                                                "over": {
                                                  "frameOptions": 1058,
                                                  "location": 298,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "tab",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "id_key",
                                                  },
                                                },
                                              ],
                                              "location": 361,
                                            },
                                          },
                                          "location": 372,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": ">",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "iter",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "id_key",
                                                  },
                                                },
                                              ],
                                              "location": 374,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                  "location": 181,
                                },
                              },
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "first_remaining",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 473,
                                            "relname": "remaining",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 437,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "id_key",
                                                    },
                                                  },
                                                ],
                                                "location": 437,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 445,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "row_type",
                                                    },
                                                  },
                                                ],
                                                "location": 445,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 455,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "link",
                                                    },
                                                  },
                                                ],
                                                "location": 455,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "id_key",
                                                  },
                                                },
                                              ],
                                              "location": 497,
                                            },
                                          },
                                          "location": 503,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "min",
                                                  },
                                                },
                                              ],
                                              "location": 504,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                  "location": 401,
                                },
                              },
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "effect",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "JoinExpr": {
                                            "jointype": "JOIN_INNER",
                                            "larg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "e",
                                                },
                                                "inh": true,
                                                "location": 597,
                                                "relname": "first_remaining",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "quals": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "e",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "id_key",
                                                        },
                                                      },
                                                    ],
                                                    "location": 633,
                                                  },
                                                },
                                                "location": 641,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "tab",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "id_key",
                                                        },
                                                      },
                                                    ],
                                                    "location": 642,
                                                  },
                                                },
                                              },
                                            },
                                            "rarg": {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 626,
                                                "relname": "tab",
                                                "relpersistence": "p",
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 550,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "tab",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "id_key",
                                                    },
                                                  },
                                                ],
                                                "location": 550,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 562,
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "location": 562,
                                                    "sval": {
                                                      "sval": "new",
                                                    },
                                                  },
                                                },
                                                "location": 567,
                                                "typeName": {
                                                  "location": 569,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "text",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 575,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "tab",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "link",
                                                    },
                                                  },
                                                ],
                                                "location": 575,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "e",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "row_type",
                                                  },
                                                },
                                              ],
                                              "location": 667,
                                            },
                                          },
                                          "location": 678,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 680,
                                              "sval": {
                                                "sval": "false",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                  "location": 523,
                                },
                              },
                            ],
                            "location": 176,
                          },
                        },
                      },
                    },
                    "location": 96,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1144 1`] = `
[
  "WITH t AS (
    INSERT INTO y
    VALUES
        (11),
        (12),
        (13),
        (14),
        (15),
        (16),
        (17),
        (18),
        (19),
        (20)
    RETURNING *
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 212,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 205,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 205,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 28,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 194,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 194,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 11,
                                        },
                                        "location": 50,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 12,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 13,
                                        },
                                        "location": 78,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 14,
                                        },
                                        "location": 92,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 15,
                                        },
                                        "location": 106,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 16,
                                        },
                                        "location": 120,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 17,
                                        },
                                        "location": 134,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 18,
                                        },
                                        "location": 148,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 19,
                                        },
                                        "location": 162,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 20,
                                        },
                                        "location": 176,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1164 1`] = `
[
  "WITH t AS (
    UPDATE y
    SET a=a+1
    RETURNING *
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 71,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 64,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 64,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "UpdateStmt": {
                        "relation": {
                          "inh": true,
                          "location": 23,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 53,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 53,
                                },
                              },
                            },
                          },
                        ],
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 33,
                              "name": "a",
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 35,
                                    },
                                  },
                                  "location": 36,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 37,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1174 1`] = `
[
  "WITH t AS (
    DELETE FROM y
    WHERE a <= 10
    RETURNING *
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 80,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 73,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 73,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "DeleteStmt": {
                        "relation": {
                          "inh": true,
                          "location": 28,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 62,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 62,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            "location": 42,
                            "name": [
                              {
                                "String": {
                                  "sval": "<=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 10,
                                },
                                "location": 45,
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1184 1`] = `
[
  "WITH RECURSIVE t AS (
	INSERT INTO y
		SELECT a+5 FROM t2 WHERE a > 5
	RETURNING *
), t2 AS (
	UPDATE y SET a=a-11 RETURNING *
)
SELECT * FROM t
UNION ALL
SELECT * FROM t2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "all": true,
            "larg": {
              "fromClause": [
                {
                  "RangeVar": {
                    "inh": true,
                    "location": 143,
                    "relname": "t",
                    "relpersistence": "p",
                  },
                },
              ],
              "limitOption": "LIMIT_OPTION_DEFAULT",
              "op": "SETOP_NONE",
              "targetList": [
                {
                  "ResTarget": {
                    "location": 136,
                    "val": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "A_Star": {},
                          },
                        ],
                        "location": 136,
                      },
                    },
                  },
                },
              ],
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_UNION",
            "rarg": {
              "fromClause": [
                {
                  "RangeVar": {
                    "inh": true,
                    "location": 169,
                    "relname": "t2",
                    "relpersistence": "p",
                  },
                },
              ],
              "limitOption": "LIMIT_OPTION_DEFAULT",
              "op": "SETOP_NONE",
              "targetList": [
                {
                  "ResTarget": {
                    "location": 162,
                    "val": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "A_Star": {},
                          },
                        ],
                        "location": 162,
                      },
                    },
                  },
                },
              ],
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 35,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 81,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 81,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 55,
                                  "relname": "t2",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 46,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 46,
                                        },
                                      },
                                      "location": 47,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "+",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 5,
                                          },
                                          "location": 48,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 64,
                                  },
                                },
                                "location": 66,
                                "name": [
                                  {
                                    "String": {
                                      "sval": ">",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 68,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t2",
                    "ctequery": {
                      "UpdateStmt": {
                        "relation": {
                          "inh": true,
                          "location": 102,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 125,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 125,
                                },
                              },
                            },
                          },
                        ],
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 108,
                              "name": "a",
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 110,
                                    },
                                  },
                                  "location": 111,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "-",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 11,
                                      },
                                      "location": 112,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 86,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1198 1`] = `
[
  "CREATE RULE y_rule AS ON DELETE TO y DO INSTEAD
  INSERT INTO y VALUES(42) RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 62,
                    "relname": "y",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 85,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 85,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 42,
                                  },
                                  "location": 71,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 35,
              "relname": "y",
              "relpersistence": "p",
            },
            "rulename": "y_rule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1201 1`] = `
[
  "WITH t AS (
	DELETE FROM y RETURNING *
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 55,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 48,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 48,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "DeleteStmt": {
                        "relation": {
                          "inh": true,
                          "location": 25,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 37,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 37,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1208 1`] = `
[
  "DROP RULE y_rule ON y",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "y",
                      },
                    },
                    {
                      "String": {
                        "sval": "y_rule",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_RULE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1211 1`] = `
[
  "CREATE TEMP TABLE bug6051 AS
  select i from generate_series(1,3) as t(i)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 18,
                "relname": "bug6051",
                "relpersistence": "t",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "t",
                        "colnames": [
                          {
                            "String": {
                              "sval": "i",
                            },
                          },
                        ],
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 61,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 3,
                                        },
                                        "location": 63,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 45,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1214 1`] = `
[
  "SELECT * FROM bug6051",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "bug6051",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1216 1`] = `
[
  "WITH t1 AS ( DELETE FROM bug6051 RETURNING * )
INSERT INTO bug6051 SELECT * FROM t1",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 59,
              "relname": "bug6051",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 81,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 74,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t1",
                    "ctequery": {
                      "DeleteStmt": {
                        "relation": {
                          "inh": true,
                          "location": 25,
                          "relname": "bug6051",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 43,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 43,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1221 1`] = `
[
  "CREATE TEMP TABLE bug6051_2 (i int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "bug6051_2",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1223 1`] = `
[
  "CREATE RULE bug6051_ins AS ON INSERT TO bug6051 DO INSTEAD
 INSERT INTO bug6051_2
 VALUES(NEW.i)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 72,
                    "relname": "bug6051_2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 90,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 40,
              "relname": "bug6051",
              "relpersistence": "p",
            },
            "rulename": "bug6051_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1235 1`] = `
[
  "CREATE OR REPLACE RULE bug6051_ins AS ON INSERT TO bug6051 DO INSTEAD
 INSERT INTO bug6051_2
 SELECT NEW.i",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 83,
                    "relname": "bug6051_2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 101,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 101,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 51,
              "relname": "bug6051",
              "relpersistence": "p",
            },
            "replace": true,
            "rulename": "bug6051_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1243 1`] = `
[
  "CREATE TEMP TABLE bug6051_3 AS
  SELECT a FROM generate_series(11,13) AS a",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 18,
                "relname": "bug6051_3",
                "relpersistence": "t",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 11,
                                        },
                                        "location": 63,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 13,
                                        },
                                        "location": 66,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1246 1`] = `
[
  "CREATE RULE bug6051_3_ins AS ON INSERT TO bug6051_3 DO INSTEAD
  SELECT i FROM bug6051_2",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "SelectStmt": {
                  "fromClause": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 79,
                        "relname": "bug6051_2",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "limitOption": "LIMIT_OPTION_DEFAULT",
                  "op": "SETOP_NONE",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 72,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "i",
                                },
                              },
                            ],
                            "location": 72,
                          },
                        },
                      },
                    },
                  ],
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "bug6051_3",
              "relpersistence": "p",
            },
            "rulename": "bug6051_3_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1249 1`] = `
[
  "BEGIN",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_BEGIN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1249 2`] = `
[
  " SET LOCAL debug_parallel_query = on",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 34,
                  "sval": {
                    "sval": "on",
                  },
                },
              },
            ],
            "is_local": true,
            "kind": "VAR_SET_VALUE",
            "name": "debug_parallel_query",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1251 1`] = `
[
  "WITH t1 AS ( DELETE FROM bug6051_3 RETURNING * )
  INSERT INTO bug6051_3 SELECT * FROM t1",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 63,
              "relname": "bug6051_3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 87,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 80,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 80,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t1",
                    "ctequery": {
                      "DeleteStmt": {
                        "relation": {
                          "inh": true,
                          "location": 25,
                          "relname": "bug6051_3",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 45,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 45,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1254 1`] = `
[
  "COMMIT",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_COMMIT",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1256 1`] = `
[
  "SELECT * FROM bug6051_3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "bug6051_3",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1259 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
SELECT q1 FROM
(
  WITH t_cte AS (SELECT * FROM int8_tbl t)
  SELECT q1, (SELECT q2 FROM t_cte WHERE t_cte.q1 = i8.q1) AS t_sub
  FROM int8_tbl i8
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i8",
                                },
                                "inh": true,
                                "location": 164,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 98,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 98,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 102,
                                "name": "t_sub",
                                "val": {
                                  "SubLink": {
                                    "location": 102,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 118,
                                              "relname": "t_cte",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 110,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 110,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "whereClause": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t_cte",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 130,
                                              },
                                            },
                                            "location": 139,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "i8",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 141,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "t_cte",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t",
                                            },
                                            "inh": true,
                                            "location": 77,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 70,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 70,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 53,
                                },
                              },
                            ],
                            "location": 48,
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1267 1`] = `
[
  "SELECT q1 FROM
(
  WITH t_cte AS (SELECT * FROM int8_tbl t)
  SELECT q1, (SELECT q2 FROM t_cte WHERE t_cte.q1 = i8.q1) AS t_sub
  FROM int8_tbl i8
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i8",
                            },
                            "inh": true,
                            "location": 135,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 69,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 69,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 73,
                            "name": "t_sub",
                            "val": {
                              "SubLink": {
                                "location": 73,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 89,
                                          "relname": "t_cte",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 81,
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q2",
                                                  },
                                                },
                                              ],
                                              "location": 81,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t_cte",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 101,
                                          },
                                        },
                                        "location": 110,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i8",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 112,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                      "withClause": {
                        "ctes": [
                          {
                            "CommonTableExpr": {
                              "ctematerialized": "CTEMaterializeDefault",
                              "ctename": "t_cte",
                              "ctequery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t",
                                        },
                                        "inh": true,
                                        "location": 48,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 41,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 41,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                              "location": 24,
                            },
                          },
                        ],
                        "location": 19,
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1274 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
SELECT q1 FROM
(
  WITH t_cte AS MATERIALIZED (SELECT * FROM int8_tbl t)
  SELECT q1, (SELECT q2 FROM t_cte WHERE t_cte.q1 = i8.q1) AS t_sub
  FROM int8_tbl i8
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i8",
                                },
                                "inh": true,
                                "location": 177,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 111,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 111,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 115,
                                "name": "t_sub",
                                "val": {
                                  "SubLink": {
                                    "location": 115,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 131,
                                              "relname": "t_cte",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 123,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 123,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "whereClause": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t_cte",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 143,
                                              },
                                            },
                                            "location": 152,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "i8",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 154,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeAlways",
                                  "ctename": "t_cte",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t",
                                            },
                                            "inh": true,
                                            "location": 90,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 83,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 83,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 53,
                                },
                              },
                            ],
                            "location": 48,
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1282 1`] = `
[
  "SELECT q1 FROM
(
  WITH t_cte AS MATERIALIZED (SELECT * FROM int8_tbl t)
  SELECT q1, (SELECT q2 FROM t_cte WHERE t_cte.q1 = i8.q1) AS t_sub
  FROM int8_tbl i8
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i8",
                            },
                            "inh": true,
                            "location": 148,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 82,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 82,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 86,
                            "name": "t_sub",
                            "val": {
                              "SubLink": {
                                "location": 86,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 102,
                                          "relname": "t_cte",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 94,
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q2",
                                                  },
                                                },
                                              ],
                                              "location": 94,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t_cte",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 114,
                                          },
                                        },
                                        "location": 123,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i8",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 125,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                      "withClause": {
                        "ctes": [
                          {
                            "CommonTableExpr": {
                              "ctematerialized": "CTEMaterializeAlways",
                              "ctename": "t_cte",
                              "ctequery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t",
                                        },
                                        "inh": true,
                                        "location": 61,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 54,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 54,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                              "location": 24,
                            },
                          },
                        ],
                        "location": 19,
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1290 1`] = `
[
  "WITH RECURSIVE t(a) AS (
	SELECT 0
		UNION ALL
	SELECT a+1 FROM t WHERE a+1 < 5
), t2 as (
	INSERT INTO y
		SELECT * FROM t RETURNING *
)
SELECT * FROM t2 JOIN y USING (a) ORDER BY a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 152,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 160,
                      "relname": "y",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 181,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 145,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 145,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 33,
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 33,
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "t",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 55,
                                      },
                                    },
                                    "location": 56,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 57,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 72,
                                    },
                                  },
                                  "location": 73,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 74,
                                    },
                                  },
                                },
                              },
                              "location": 76,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 78,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t2",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 104,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 134,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 122,
                                  "relname": "t",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 115,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 115,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 83,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1303 1`] = `
[
  "WITH t AS (
    DELETE FROM y
    WHERE a <= 10
    RETURNING *
)
INSERT INTO y SELECT -a FROM t RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 78,
              "relname": "y",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 107,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 107,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 95,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 87,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "location": 87,
                          "name": [
                            {
                              "String": {
                                "sval": "-",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "DeleteStmt": {
                        "relation": {
                          "inh": true,
                          "location": 28,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 62,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 62,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            "location": 42,
                            "name": [
                              {
                                "String": {
                                  "sval": "<=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 10,
                                },
                                "location": 45,
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1313 1`] = `
[
  "WITH t AS (
    UPDATE y SET a = a * 100 RETURNING *
)
SELECT * FROM t LIMIT 10",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 69,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 10,
                },
                "location": 77,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 62,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 62,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "UpdateStmt": {
                        "relation": {
                          "inh": true,
                          "location": 23,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 51,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 51,
                                },
                              },
                            },
                          },
                        ],
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 29,
                              "name": "a",
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 33,
                                    },
                                  },
                                  "location": 35,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "*",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 100,
                                      },
                                      "location": 37,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1321 1`] = `
[
  "CREATE TABLE withz AS SELECT i AS k, (i || ' v')::text v FROM generate_series(1, 16, 3) i",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "withz",
                "relpersistence": "p",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "i",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 78,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 16,
                                        },
                                        "location": 81,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 3,
                                        },
                                        "location": 85,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 62,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "name": "k",
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "name": "v",
                      "val": {
                        "TypeCast": {
                          "arg": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 38,
                                },
                              },
                              "location": 40,
                              "name": [
                                {
                                  "String": {
                                    "sval": "||",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 43,
                                  "sval": {
                                    "sval": " v",
                                  },
                                },
                              },
                            },
                          },
                          "location": 48,
                          "typeName": {
                            "location": 50,
                            "names": [
                              {
                                "String": {
                                  "sval": "text",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1324 1`] = `
[
  "WITH t AS (
    INSERT INTO withz SELECT i, 'insert'
    FROM generate_series(0, 16) i
    ON CONFLICT (k) DO UPDATE SET v = withz.v || ', now update'
    RETURNING *
)
SELECT * FROM t JOIN y ON t.k = y.a ORDER BY a, k",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 183,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 195,
                        },
                      },
                      "location": 199,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 201,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 190,
                      "relname": "y",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 214,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 217,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 176,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 176,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "onConflictClause": {
                          "action": "ONCONFLICT_UPDATE",
                          "infer": {
                            "indexElems": [
                              {
                                "IndexElem": {
                                  "name": "k",
                                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                                  "ordering": "SORTBY_DEFAULT",
                                },
                              },
                            ],
                            "location": 103,
                          },
                          "location": 91,
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 121,
                                "name": "v",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "withz",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "v",
                                            },
                                          },
                                        ],
                                        "location": 125,
                                      },
                                    },
                                    "location": 133,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "location": 136,
                                        "sval": {
                                          "sval": ", now update",
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 28,
                          "relname": "withz",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 165,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 165,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeFunction": {
                                  "alias": {
                                    "aliasname": "i",
                                  },
                                  "functions": [
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "FuncCall": {
                                              "args": [
                                                {
                                                  "A_Const": {
                                                    "ival": {},
                                                    "location": 78,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 16,
                                                    },
                                                    "location": 81,
                                                  },
                                                },
                                              ],
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "generate_series",
                                                  },
                                                },
                                              ],
                                              "location": 62,
                                            },
                                          },
                                          {},
                                        ],
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 41,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i",
                                          },
                                        },
                                      ],
                                      "location": 41,
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 44,
                                  "val": {
                                    "A_Const": {
                                      "location": 44,
                                      "sval": {
                                        "sval": "insert",
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1333 1`] = `
[
  "WITH aa AS (
    INSERT INTO withz VALUES(1, 5) ON CONFLICT (k) DO UPDATE SET v = EXCLUDED.v
    WHERE withz.k != EXCLUDED.k
    RETURNING *
)
SELECT * FROM aa",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 157,
                  "relname": "aa",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 150,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 150,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "aa",
                    "ctequery": {
                      "InsertStmt": {
                        "onConflictClause": {
                          "action": "ONCONFLICT_UPDATE",
                          "infer": {
                            "indexElems": [
                              {
                                "IndexElem": {
                                  "name": "k",
                                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                                  "ordering": "SORTBY_DEFAULT",
                                },
                              },
                            ],
                            "location": 60,
                          },
                          "location": 48,
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 78,
                                "name": "v",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "excluded",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "withz",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "k",
                                      },
                                    },
                                  ],
                                  "location": 103,
                                },
                              },
                              "location": 111,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<>",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "excluded",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "k",
                                      },
                                    },
                                  ],
                                  "location": 114,
                                },
                              },
                            },
                          },
                        },
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 29,
                          "relname": "withz",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 139,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 139,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 42,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 5,
                                        },
                                        "location": 45,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1341 1`] = `
[
  "SELECT * FROM withz ORDER BY k",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "withz",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 29,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1347 1`] = `
[
  "WITH aa AS (SELECT 1 a, 2 b)
INSERT INTO withz VALUES(1, 'insert')
ON CONFLICT (k) DO UPDATE SET v = (SELECT b || ' update' FROM aa WHERE a = 1 LIMIT 1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "k",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 79,
              },
              "location": 67,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 97,
                    "name": "v",
                    "val": {
                      "SubLink": {
                        "location": 101,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 129,
                                  "relname": "aa",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitCount": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 150,
                              },
                            },
                            "limitOption": "LIMIT_OPTION_COUNT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 109,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 109,
                                        },
                                      },
                                      "location": 111,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "||",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "location": 114,
                                          "sval": {
                                            "sval": " update",
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                                "location": 140,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 142,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 41,
              "relname": "withz",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 54,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 57,
                            "sval": {
                              "sval": "insert",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "aa",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 19,
                              "name": "a",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 19,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 24,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 24,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1351 1`] = `
[
  "INSERT INTO withz VALUES(1, 'insert')
ON CONFLICT (k) DO UPDATE SET v = ' update' WHERE withz.k = (SELECT a FROM aa)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "k",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 50,
              },
              "location": 38,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 68,
                    "name": "v",
                    "val": {
                      "A_Const": {
                        "location": 72,
                        "sval": {
                          "sval": " update",
                        },
                      },
                    },
                  },
                },
              ],
              "whereClause": {
                "A_Expr": {
                  "kind": "AEXPR_OP",
                  "lexpr": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "withz",
                          },
                        },
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 88,
                    },
                  },
                  "location": 96,
                  "name": [
                    {
                      "String": {
                        "sval": "=",
                      },
                    },
                  ],
                  "rexpr": {
                    "SubLink": {
                      "location": 98,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 113,
                                "relname": "aa",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 106,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 106,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "withz",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 25,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 28,
                            "sval": {
                              "sval": "insert",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1354 1`] = `
[
  "INSERT INTO withz VALUES(1, 'insert')
ON CONFLICT (k) DO UPDATE SET v = (SELECT b || ' update' FROM aa WHERE a = 1 LIMIT 1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "k",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 50,
              },
              "location": 38,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 68,
                    "name": "v",
                    "val": {
                      "SubLink": {
                        "location": 72,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 100,
                                  "relname": "aa",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitCount": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 121,
                              },
                            },
                            "limitOption": "LIMIT_OPTION_COUNT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 80,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 80,
                                        },
                                      },
                                      "location": 82,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "||",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "location": 85,
                                          "sval": {
                                            "sval": " update",
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                "location": 111,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 113,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "withz",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 25,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 28,
                            "sval": {
                              "sval": "insert",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1360 1`] = `
[
  "INSERT INTO withz VALUES(1, (SELECT b || ' insert' FROM aa WHERE a = 1 ))
ON CONFLICT (k) DO UPDATE SET v = (SELECT b || ' update' FROM aa WHERE a = 1 LIMIT 1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "k",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 86,
              },
              "location": 74,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 104,
                    "name": "v",
                    "val": {
                      "SubLink": {
                        "location": 108,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 136,
                                  "relname": "aa",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitCount": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 157,
                              },
                            },
                            "limitOption": "LIMIT_OPTION_COUNT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 116,
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 116,
                                        },
                                      },
                                      "location": 118,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "||",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "location": 121,
                                          "sval": {
                                            "sval": " update",
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 145,
                                  },
                                },
                                "location": 147,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 149,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "withz",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 25,
                          },
                        },
                        {
                          "SubLink": {
                            "location": 28,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 56,
                                      "relname": "aa",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 36,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 36,
                                            },
                                          },
                                          "location": 38,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 41,
                                              "sval": {
                                                "sval": " insert",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 65,
                                      },
                                    },
                                    "location": 67,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 69,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1366 1`] = `
[
  "WITH simpletup AS (
  SELECT 2 k, 'Green' v),
upsert_cte AS (
  INSERT INTO withz VALUES(2, 'Blue') ON CONFLICT (k) DO
    UPDATE SET (k, v) = (SELECT k, v FROM simpletup WHERE simpletup.k = withz.k)
    RETURNING k, v)
INSERT INTO withz VALUES(2, 'Red') ON CONFLICT (k) DO
UPDATE SET (k, v) = (SELECT k, v FROM upsert_cte WHERE upsert_cte.k = withz.k)
RETURNING k, v",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "k",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 267,
              },
              "location": 255,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 286,
                    "name": "k",
                    "val": {
                      "MultiAssignRef": {
                        "colno": 1,
                        "ncolumns": 2,
                        "source": {
                          "SubLink": {
                            "location": 294,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 312,
                                      "relname": "upsert_cte",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 302,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "k",
                                              },
                                            },
                                          ],
                                          "location": 302,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "ResTarget": {
                                      "location": 305,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "v",
                                              },
                                            },
                                          ],
                                          "location": 305,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "upsert_cte",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 329,
                                      },
                                    },
                                    "location": 342,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "withz",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 344,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
                {
                  "ResTarget": {
                    "location": 289,
                    "name": "v",
                    "val": {
                      "MultiAssignRef": {
                        "colno": 2,
                        "ncolumns": 2,
                        "source": {
                          "SubLink": {
                            "location": 294,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 312,
                                      "relname": "upsert_cte",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 302,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "k",
                                              },
                                            },
                                          ],
                                          "location": 302,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "ResTarget": {
                                      "location": 305,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "v",
                                              },
                                            },
                                          ],
                                          "location": 305,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "upsert_cte",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 329,
                                      },
                                    },
                                    "location": 342,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "withz",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 344,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 232,
              "relname": "withz",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 363,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 363,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 366,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                      ],
                      "location": 366,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 245,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 248,
                            "sval": {
                              "sval": "Red",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "simpletup",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 29,
                              "name": "k",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 29,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 34,
                              "name": "v",
                              "val": {
                                "A_Const": {
                                  "location": 34,
                                  "sval": {
                                    "sval": "Green",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "upsert_cte",
                    "ctequery": {
                      "InsertStmt": {
                        "onConflictClause": {
                          "action": "ONCONFLICT_UPDATE",
                          "infer": {
                            "indexElems": [
                              {
                                "IndexElem": {
                                  "name": "k",
                                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                                  "ordering": "SORTBY_DEFAULT",
                                },
                              },
                            ],
                            "location": 112,
                          },
                          "location": 100,
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 135,
                                "name": "k",
                                "val": {
                                  "MultiAssignRef": {
                                    "colno": 1,
                                    "ncolumns": 2,
                                    "source": {
                                      "SubLink": {
                                        "location": 143,
                                        "subLinkType": "EXPR_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "RangeVar": {
                                                  "inh": true,
                                                  "location": 161,
                                                  "relname": "simpletup",
                                                  "relpersistence": "p",
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 151,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "k",
                                                          },
                                                        },
                                                      ],
                                                      "location": 151,
                                                    },
                                                  },
                                                },
                                              },
                                              {
                                                "ResTarget": {
                                                  "location": 154,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "v",
                                                          },
                                                        },
                                                      ],
                                                      "location": 154,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "whereClause": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "simpletup",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "k",
                                                        },
                                                      },
                                                    ],
                                                    "location": 177,
                                                  },
                                                },
                                                "location": 189,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "withz",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "k",
                                                        },
                                                      },
                                                    ],
                                                    "location": 191,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 138,
                                "name": "v",
                                "val": {
                                  "MultiAssignRef": {
                                    "colno": 2,
                                    "ncolumns": 2,
                                    "source": {
                                      "SubLink": {
                                        "location": 143,
                                        "subLinkType": "EXPR_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "RangeVar": {
                                                  "inh": true,
                                                  "location": 161,
                                                  "relname": "simpletup",
                                                  "relpersistence": "p",
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 151,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "k",
                                                          },
                                                        },
                                                      ],
                                                      "location": 151,
                                                    },
                                                  },
                                                },
                                              },
                                              {
                                                "ResTarget": {
                                                  "location": 154,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "v",
                                                          },
                                                        },
                                                      ],
                                                      "location": 154,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "whereClause": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "simpletup",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "k",
                                                        },
                                                      },
                                                    ],
                                                    "location": 177,
                                                  },
                                                },
                                                "location": 189,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "withz",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "k",
                                                        },
                                                      },
                                                    ],
                                                    "location": 191,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 76,
                          "relname": "withz",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 214,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "k",
                                      },
                                    },
                                  ],
                                  "location": 214,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 217,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "v",
                                      },
                                    },
                                  ],
                                  "location": 217,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 89,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "location": 92,
                                        "sval": {
                                          "sval": "Blue",
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 46,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1376 1`] = `
[
  "DROP TABLE withz",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "withz",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1379 1`] = `
[
  "CREATE TABLE m AS SELECT i AS k, (i || ' v')::text v FROM generate_series(1, 16, 3) i",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "m",
                "relpersistence": "p",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "i",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 74,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 16,
                                        },
                                        "location": 77,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 3,
                                        },
                                        "location": 81,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 58,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 25,
                      "name": "k",
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i",
                              },
                            },
                          ],
                          "location": 25,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "name": "v",
                      "val": {
                        "TypeCast": {
                          "arg": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 34,
                                },
                              },
                              "location": 36,
                              "name": [
                                {
                                  "String": {
                                    "sval": "||",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 39,
                                  "sval": {
                                    "sval": " v",
                                  },
                                },
                              },
                            },
                          },
                          "location": 44,
                          "typeName": {
                            "location": 46,
                            "names": [
                              {
                                "String": {
                                  "sval": "text",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1382 1`] = `
[
  "WITH RECURSIVE cte_basic AS (SELECT 1 a, 'cte_basic val' b)
MERGE INTO m USING (select 0 k, 'merge source SubPlan' v) o ON m.k=o.k
WHEN MATCHED THEN UPDATE SET v = (SELECT b || ' merge update' FROM cte_basic WHERE cte_basic.a = m.k LIMIT 1)
WHEN NOT MATCHED THEN INSERT VALUES(o.k, o.v)",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "m",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 123,
                  },
                },
                "location": 126,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 127,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 160,
                        "name": "v",
                        "val": {
                          "SubLink": {
                            "location": 164,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 198,
                                      "relname": "cte_basic",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitCount": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 238,
                                  },
                                },
                                "limitOption": "LIMIT_OPTION_COUNT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 172,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 172,
                                            },
                                          },
                                          "location": 174,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 177,
                                              "sval": {
                                                "sval": " merge update",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "cte_basic",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 214,
                                      },
                                    },
                                    "location": 226,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "m",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 228,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 277,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "v",
                            },
                          },
                        ],
                        "location": 282,
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 71,
              "relname": "m",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "o",
                },
                "subquery": {
                  "SelectStmt": {
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 87,
                          "name": "k",
                          "val": {
                            "A_Const": {
                              "ival": {},
                              "location": 87,
                            },
                          },
                        },
                      },
                      {
                        "ResTarget": {
                          "location": 92,
                          "name": "v",
                          "val": {
                            "A_Const": {
                              "location": 92,
                              "sval": {
                                "sval": "merge source SubPlan",
                              },
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "cte_basic",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 36,
                              "name": "a",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 36,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 41,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "location": 41,
                                  "sval": {
                                    "sval": "cte_basic val",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1388 1`] = `
[
  "WITH cte_basic AS MATERIALIZED (SELECT 1 a, 'cte_basic val' b)
MERGE INTO m USING (select 0 k, 'merge source SubPlan' v offset 0) o ON m.k=o.k
WHEN MATCHED THEN UPDATE SET v = (SELECT b || ' merge update' FROM cte_basic WHERE cte_basic.a = m.k LIMIT 1)
WHEN NOT MATCHED THEN INSERT VALUES(o.k, o.v)",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "m",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 135,
                  },
                },
                "location": 138,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 139,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 172,
                        "name": "v",
                        "val": {
                          "SubLink": {
                            "location": 176,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 210,
                                      "relname": "cte_basic",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitCount": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 250,
                                  },
                                },
                                "limitOption": "LIMIT_OPTION_COUNT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 184,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 184,
                                            },
                                          },
                                          "location": 186,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 189,
                                              "sval": {
                                                "sval": " merge update",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "cte_basic",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 226,
                                      },
                                    },
                                    "location": 238,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "m",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 240,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 289,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "v",
                            },
                          },
                        ],
                        "location": 294,
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 74,
              "relname": "m",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "o",
                },
                "subquery": {
                  "SelectStmt": {
                    "limitOffset": {
                      "A_Const": {
                        "ival": {},
                        "location": 127,
                      },
                    },
                    "limitOption": "LIMIT_OPTION_COUNT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 90,
                          "name": "k",
                          "val": {
                            "A_Const": {
                              "ival": {},
                              "location": 90,
                            },
                          },
                        },
                      },
                      {
                        "ResTarget": {
                          "location": 95,
                          "name": "v",
                          "val": {
                            "A_Const": {
                              "location": 95,
                              "sval": {
                                "sval": "merge source SubPlan",
                              },
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "cte_basic",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 39,
                              "name": "a",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 39,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 44,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "location": 44,
                                  "sval": {
                                    "sval": "cte_basic val",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1393 1`] = `
[
  "SELECT * FROM m where k = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "m",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 22,
                  },
                },
                "location": 24,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 26,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1396 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
WITH cte_basic AS MATERIALIZED (SELECT 1 a, 'cte_basic val' b)
MERGE INTO m USING (select 0 k, 'merge source SubPlan' v offset 0) o ON m.k=o.k
WHEN MATCHED THEN UPDATE SET v = (SELECT b || ' merge update' FROM cte_basic WHERE cte_basic.a = m.k LIMIT 1)
WHEN NOT MATCHED THEN INSERT VALUES(o.k, o.v)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "MergeStmt": {
                "joinCondition": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "m",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 164,
                      },
                    },
                    "location": 167,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 168,
                      },
                    },
                  },
                },
                "mergeWhenClauses": [
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_UPDATE",
                      "matched": true,
                      "override": "OVERRIDING_NOT_SET",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 201,
                            "name": "v",
                            "val": {
                              "SubLink": {
                                "location": 205,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 239,
                                          "relname": "cte_basic",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitCount": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 279,
                                      },
                                    },
                                    "limitOption": "LIMIT_OPTION_COUNT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 213,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 213,
                                                },
                                              },
                                              "location": 215,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "||",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "location": 218,
                                                  "sval": {
                                                    "sval": " merge update",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "cte_basic",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 255,
                                          },
                                        },
                                        "location": 267,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "m",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "k",
                                                },
                                              },
                                            ],
                                            "location": 269,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_INSERT",
                      "override": "OVERRIDING_NOT_SET",
                      "values": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "k",
                                },
                              },
                            ],
                            "location": 318,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 323,
                          },
                        },
                      ],
                    },
                  },
                ],
                "relation": {
                  "inh": true,
                  "location": 103,
                  "relname": "m",
                  "relpersistence": "p",
                },
                "sourceRelation": {
                  "RangeSubselect": {
                    "alias": {
                      "aliasname": "o",
                    },
                    "subquery": {
                      "SelectStmt": {
                        "limitOffset": {
                          "A_Const": {
                            "ival": {},
                            "location": 156,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 119,
                              "name": "k",
                              "val": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 119,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 124,
                              "name": "v",
                              "val": {
                                "A_Const": {
                                  "location": 124,
                                  "sval": {
                                    "sval": "merge source SubPlan",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "cte_basic",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 68,
                                  "name": "a",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 68,
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 73,
                                  "name": "b",
                                  "val": {
                                    "A_Const": {
                                      "location": 73,
                                      "sval": {
                                        "sval": "cte_basic val",
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1403 1`] = `
[
  "WITH cte_init AS MATERIALIZED (SELECT 1 a, 'cte_init val' b)
MERGE INTO m USING (select 1 k, 'merge source InitPlan' v offset 0) o ON m.k=o.k
WHEN MATCHED THEN UPDATE SET v = (SELECT b || ' merge update' FROM cte_init WHERE a = 1 LIMIT 1)
WHEN NOT MATCHED THEN INSERT VALUES(o.k, o.v)",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "m",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 134,
                  },
                },
                "location": 137,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 138,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 171,
                        "name": "v",
                        "val": {
                          "SubLink": {
                            "location": 175,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 209,
                                      "relname": "cte_init",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitCount": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 236,
                                  },
                                },
                                "limitOption": "LIMIT_OPTION_COUNT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 183,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                              ],
                                              "location": 183,
                                            },
                                          },
                                          "location": 185,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 188,
                                              "sval": {
                                                "sval": " merge update",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 224,
                                      },
                                    },
                                    "location": 226,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 228,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 275,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "v",
                            },
                          },
                        ],
                        "location": 280,
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 72,
              "relname": "m",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "o",
                },
                "subquery": {
                  "SelectStmt": {
                    "limitOffset": {
                      "A_Const": {
                        "ival": {},
                        "location": 126,
                      },
                    },
                    "limitOption": "LIMIT_OPTION_COUNT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 88,
                          "name": "k",
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 88,
                            },
                          },
                        },
                      },
                      {
                        "ResTarget": {
                          "location": 93,
                          "name": "v",
                          "val": {
                            "A_Const": {
                              "location": 93,
                              "sval": {
                                "sval": "merge source InitPlan",
                              },
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "cte_init",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 38,
                              "name": "a",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 38,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 43,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "location": 43,
                                  "sval": {
                                    "sval": "cte_init val",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1411 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
WITH cte_init AS MATERIALIZED (SELECT 1 a, 'cte_init val' b)
MERGE INTO m USING (select 1 k, 'merge source InitPlan' v offset 0) o ON m.k=o.k
WHEN MATCHED THEN UPDATE SET v = (SELECT b || ' merge update' FROM cte_init WHERE a = 1 LIMIT 1)
WHEN NOT MATCHED THEN INSERT VALUES(o.k, o.v)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "MergeStmt": {
                "joinCondition": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "m",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 163,
                      },
                    },
                    "location": 166,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 167,
                      },
                    },
                  },
                },
                "mergeWhenClauses": [
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_UPDATE",
                      "matched": true,
                      "override": "OVERRIDING_NOT_SET",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 200,
                            "name": "v",
                            "val": {
                              "SubLink": {
                                "location": 204,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 238,
                                          "relname": "cte_init",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitCount": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 265,
                                      },
                                    },
                                    "limitOption": "LIMIT_OPTION_COUNT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 212,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 212,
                                                },
                                              },
                                              "location": 214,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "||",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "location": 217,
                                                  "sval": {
                                                    "sval": " merge update",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 253,
                                          },
                                        },
                                        "location": 255,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 257,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_INSERT",
                      "override": "OVERRIDING_NOT_SET",
                      "values": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "k",
                                },
                              },
                            ],
                            "location": 304,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 309,
                          },
                        },
                      ],
                    },
                  },
                ],
                "relation": {
                  "inh": true,
                  "location": 101,
                  "relname": "m",
                  "relpersistence": "p",
                },
                "sourceRelation": {
                  "RangeSubselect": {
                    "alias": {
                      "aliasname": "o",
                    },
                    "subquery": {
                      "SelectStmt": {
                        "limitOffset": {
                          "A_Const": {
                            "ival": {},
                            "location": 155,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 117,
                              "name": "k",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 117,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 122,
                              "name": "v",
                              "val": {
                                "A_Const": {
                                  "location": 122,
                                  "sval": {
                                    "sval": "merge source InitPlan",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "cte_init",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 67,
                                  "name": "a",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 67,
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 72,
                                  "name": "b",
                                  "val": {
                                    "A_Const": {
                                      "location": 72,
                                      "sval": {
                                        "sval": "cte_init val",
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1418 1`] = `
[
  "WITH merge_source_cte AS MATERIALIZED (SELECT 15 a, 'merge_source_cte val' b)
MERGE INTO m USING (select * from merge_source_cte) o ON m.k=o.a
WHEN MATCHED THEN UPDATE SET v = (SELECT b || merge_source_cte.*::text || ' merge update' FROM merge_source_cte WHERE a = 15)
WHEN NOT MATCHED THEN INSERT VALUES(o.a, o.b || (SELECT merge_source_cte.*::text || ' merge insert' FROM merge_source_cte))",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "m",
                        },
                      },
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 135,
                  },
                },
                "location": 138,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 139,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 172,
                        "name": "v",
                        "val": {
                          "SubLink": {
                            "location": 176,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 238,
                                      "relname": "merge_source_cte",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 184,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                  ],
                                                  "location": 184,
                                                },
                                              },
                                              "location": 186,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "||",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "TypeCast": {
                                                  "arg": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "merge_source_cte",
                                                          },
                                                        },
                                                        {
                                                          "A_Star": {},
                                                        },
                                                      ],
                                                      "location": 189,
                                                    },
                                                  },
                                                  "location": 207,
                                                  "typeName": {
                                                    "location": 209,
                                                    "names": [
                                                      {
                                                        "String": {
                                                          "sval": "text",
                                                        },
                                                      },
                                                    ],
                                                    "typemod": -1,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                          "location": 214,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 217,
                                              "sval": {
                                                "sval": " merge update",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 261,
                                      },
                                    },
                                    "location": 263,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 15,
                                        },
                                        "location": 265,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 305,
                      },
                    },
                    {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 310,
                          },
                        },
                        "location": 314,
                        "name": [
                          {
                            "String": {
                              "sval": "||",
                            },
                          },
                        ],
                        "rexpr": {
                          "SubLink": {
                            "location": 317,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 374,
                                      "relname": "merge_source_cte",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 325,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "TypeCast": {
                                              "arg": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "merge_source_cte",
                                                      },
                                                    },
                                                    {
                                                      "A_Star": {},
                                                    },
                                                  ],
                                                  "location": 325,
                                                },
                                              },
                                              "location": 343,
                                              "typeName": {
                                                "location": 345,
                                                "names": [
                                                  {
                                                    "String": {
                                                      "sval": "text",
                                                    },
                                                  },
                                                ],
                                                "typemod": -1,
                                              },
                                            },
                                          },
                                          "location": 350,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "||",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "location": 353,
                                              "sval": {
                                                "sval": " merge insert",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 89,
              "relname": "m",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "o",
                },
                "subquery": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 112,
                          "relname": "merge_source_cte",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 105,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "A_Star": {},
                                },
                              ],
                              "location": 105,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "merge_source_cte",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 46,
                              "name": "a",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 15,
                                  },
                                  "location": 46,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 52,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "location": 52,
                                  "sval": {
                                    "sval": "merge_source_cte val",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1426 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
WITH merge_source_cte AS MATERIALIZED (SELECT 15 a, 'merge_source_cte val' b)
MERGE INTO m USING (select * from merge_source_cte) o ON m.k=o.a
WHEN MATCHED THEN UPDATE SET v = (SELECT b || merge_source_cte.*::text || ' merge update' FROM merge_source_cte WHERE a = 15)
WHEN NOT MATCHED THEN INSERT VALUES(o.a, o.b || (SELECT merge_source_cte.*::text || ' merge insert' FROM merge_source_cte))",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "MergeStmt": {
                "joinCondition": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "m",
                            },
                          },
                          {
                            "String": {
                              "sval": "k",
                            },
                          },
                        ],
                        "location": 164,
                      },
                    },
                    "location": 167,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 168,
                      },
                    },
                  },
                },
                "mergeWhenClauses": [
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_UPDATE",
                      "matched": true,
                      "override": "OVERRIDING_NOT_SET",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 201,
                            "name": "v",
                            "val": {
                              "SubLink": {
                                "location": 205,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 267,
                                          "relname": "merge_source_cte",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 213,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "b",
                                                          },
                                                        },
                                                      ],
                                                      "location": 213,
                                                    },
                                                  },
                                                  "location": 215,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "||",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "TypeCast": {
                                                      "arg": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "merge_source_cte",
                                                              },
                                                            },
                                                            {
                                                              "A_Star": {},
                                                            },
                                                          ],
                                                          "location": 218,
                                                        },
                                                      },
                                                      "location": 236,
                                                      "typeName": {
                                                        "location": 238,
                                                        "names": [
                                                          {
                                                            "String": {
                                                              "sval": "text",
                                                            },
                                                          },
                                                        ],
                                                        "typemod": -1,
                                                      },
                                                    },
                                                  },
                                                },
                                              },
                                              "location": 243,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "||",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "location": 246,
                                                  "sval": {
                                                    "sval": " merge update",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 290,
                                          },
                                        },
                                        "location": 292,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 15,
                                            },
                                            "location": 294,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "MergeWhenClause": {
                      "commandType": "CMD_INSERT",
                      "override": "OVERRIDING_NOT_SET",
                      "values": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 334,
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "o",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 339,
                              },
                            },
                            "location": 343,
                            "name": [
                              {
                                "String": {
                                  "sval": "||",
                                },
                              },
                            ],
                            "rexpr": {
                              "SubLink": {
                                "location": 346,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 403,
                                          "relname": "merge_source_cte",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 354,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "TypeCast": {
                                                  "arg": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "merge_source_cte",
                                                          },
                                                        },
                                                        {
                                                          "A_Star": {},
                                                        },
                                                      ],
                                                      "location": 354,
                                                    },
                                                  },
                                                  "location": 372,
                                                  "typeName": {
                                                    "location": 374,
                                                    "names": [
                                                      {
                                                        "String": {
                                                          "sval": "text",
                                                        },
                                                      },
                                                    ],
                                                    "typemod": -1,
                                                  },
                                                },
                                              },
                                              "location": 379,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "||",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "location": 382,
                                                  "sval": {
                                                    "sval": " merge insert",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
                "relation": {
                  "inh": true,
                  "location": 118,
                  "relname": "m",
                  "relpersistence": "p",
                },
                "sourceRelation": {
                  "RangeSubselect": {
                    "alias": {
                      "aliasname": "o",
                    },
                    "subquery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 141,
                              "relname": "merge_source_cte",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 134,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "merge_source_cte",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 75,
                                  "name": "a",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 15,
                                      },
                                      "location": 75,
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 81,
                                  "name": "b",
                                  "val": {
                                    "A_Const": {
                                      "location": 81,
                                      "sval": {
                                        "sval": "merge_source_cte val",
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1432 1`] = `
[
  "DROP TABLE m",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "m",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1440 1`] = `
[
  "WITH RECURSIVE t1 AS (
  INSERT INTO y SELECT * FROM y RETURNING *
), t2 AS (
  INSERT INTO yy SELECT * FROM t1 RETURNING *
)
SELECT 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 133,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 133,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t1",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 37,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 65,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 65,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 53,
                                  "relname": "y",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 46,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 46,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t2",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 92,
                          "relname": "yy",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 122,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 122,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 109,
                                  "relname": "t1",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 102,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 102,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 70,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1450 1`] = `
[
  "WITH RECURSIVE t1 AS (
  INSERT INTO yy SELECT * FROM t2 RETURNING *
), t2 AS (
  INSERT INTO y SELECT * FROM y RETURNING *
)
SELECT 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 133,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 133,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t1",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 37,
                          "relname": "yy",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 67,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 67,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 54,
                                  "relname": "t2",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t2",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 94,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 122,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 122,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 110,
                                  "relname": "y",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 103,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 103,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 72,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1465 1`] = `
[
  "CREATE FUNCTION y_trigger() RETURNS trigger AS $$
begin
  raise notice 'y_trigger: a = %', new.a;
  return new;
end;
$$ LANGUAGE plpgsql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "y_trigger",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
begin
  raise notice 'y_trigger: a = %', new.a;
  return new;
end;
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 44,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 120,
                },
              },
            ],
            "returnType": {
              "location": 36,
              "names": [
                {
                  "String": {
                    "sval": "trigger",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1472 1`] = `
[
  "CREATE TRIGGER y_trig BEFORE INSERT ON y FOR EACH ROW
    EXECUTE PROCEDURE y_trigger()",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTrigStmt": {
            "events": 4,
            "funcname": [
              {
                "String": {
                  "sval": "y_trigger",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 39,
              "relname": "y",
              "relpersistence": "p",
            },
            "row": true,
            "timing": 2,
            "trigname": "y_trig",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1487 1`] = `
[
  "DROP TRIGGER y_trig ON y",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "y",
                      },
                    },
                    {
                      "String": {
                        "sval": "y_trig",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TRIGGER",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1489 1`] = `
[
  "CREATE TRIGGER y_trig AFTER INSERT ON y FOR EACH ROW
    EXECUTE PROCEDURE y_trigger()",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTrigStmt": {
            "events": 4,
            "funcname": [
              {
                "String": {
                  "sval": "y_trigger",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 38,
              "relname": "y",
              "relpersistence": "p",
            },
            "row": true,
            "trigname": "y_trig",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1492 1`] = `
[
  "WITH t AS (
    INSERT INTO y
    VALUES
        (31),
        (32),
        (33)
    RETURNING *
)
SELECT * FROM t LIMIT 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 114,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 1,
                },
                "location": 122,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 107,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 107,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 28,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 96,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 96,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 31,
                                        },
                                        "location": 50,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 32,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 33,
                                        },
                                        "location": 78,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1506 1`] = `
[
  "CREATE OR REPLACE FUNCTION y_trigger() RETURNS trigger AS $$
begin
  raise notice 'y_trigger';
  return null;
end;
$$ LANGUAGE plpgsql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "y_trigger",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
begin
  raise notice 'y_trigger';
  return null;
end;
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 55,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 118,
                },
              },
            ],
            "replace": true,
            "returnType": {
              "location": 47,
              "names": [
                {
                  "String": {
                    "sval": "trigger",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1513 1`] = `
[
  "CREATE TRIGGER y_trig AFTER INSERT ON y FOR EACH STATEMENT
    EXECUTE PROCEDURE y_trigger()",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTrigStmt": {
            "events": 4,
            "funcname": [
              {
                "String": {
                  "sval": "y_trigger",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 38,
              "relname": "y",
              "relpersistence": "p",
            },
            "trigname": "y_trig",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1537 1`] = `
[
  "INSERT INTO parent VALUES ( 1, 'p1' )",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "parent",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 28,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 31,
                            "sval": {
                              "sval": "p1",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1541 1`] = `
[
  "WITH rcte AS ( SELECT sum(id) AS totalid FROM parent )
UPDATE parent SET id = id + totalid FROM rcte",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 96,
                  "relname": "rcte",
                  "relpersistence": "p",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 62,
              "relname": "parent",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 73,
                  "name": "id",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 78,
                        },
                      },
                      "location": 81,
                      "name": [
                        {
                          "String": {
                            "sval": "+",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "totalid",
                              },
                            },
                          ],
                          "location": 83,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "rcte",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 46,
                              "relname": "parent",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 22,
                              "name": "totalid",
                              "val": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 26,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "sum",
                                      },
                                    },
                                  ],
                                  "location": 22,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1544 1`] = `
[
  "SELECT * FROM parent",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "parent",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1546 1`] = `
[
  "WITH wcte AS ( INSERT INTO child1 VALUES ( 42, 'new' ) RETURNING id AS newid )
UPDATE parent SET id = id + newid FROM wcte",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 118,
                  "relname": "wcte",
                  "relpersistence": "p",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 86,
              "relname": "parent",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 97,
                  "name": "id",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 102,
                        },
                      },
                      "location": 105,
                      "name": [
                        {
                          "String": {
                            "sval": "+",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "newid",
                              },
                            },
                          ],
                          "location": 107,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "wcte",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 27,
                          "relname": "child1",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 65,
                              "name": "newid",
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 65,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 43,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "location": 47,
                                        "sval": {
                                          "sval": "new",
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1551 1`] = `
[
  "WITH rcte AS ( SELECT max(id) AS maxid FROM parent )
DELETE FROM parent USING rcte WHERE id = maxid",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 65,
              "relname": "parent",
              "relpersistence": "p",
            },
            "usingClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 78,
                  "relname": "rcte",
                  "relpersistence": "p",
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "location": 89,
                  },
                },
                "location": 92,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "maxid",
                        },
                      },
                    ],
                    "location": 94,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "rcte",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 44,
                              "relname": "parent",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 22,
                              "name": "maxid",
                              "val": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 26,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "max",
                                      },
                                    },
                                  ],
                                  "location": 22,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1556 1`] = `
[
  "WITH wcte AS ( INSERT INTO child2 VALUES ( 42, 'new2' ) RETURNING id AS newid )
DELETE FROM parent USING wcte WHERE id = newid",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 92,
              "relname": "parent",
              "relpersistence": "p",
            },
            "usingClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 105,
                  "relname": "wcte",
                  "relpersistence": "p",
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "location": 116,
                  },
                },
                "location": 119,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "newid",
                        },
                      },
                    ],
                    "location": 121,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "wcte",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 27,
                          "relname": "child2",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 66,
                              "name": "newid",
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 66,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 43,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "location": 47,
                                        "sval": {
                                          "sval": "new2",
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1564 1`] = `
[
  "WITH wcte AS ( INSERT INTO int8_tbl VALUES ( 42, 47 ) RETURNING q2 )
DELETE FROM a_star USING wcte WHERE aa = q2",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 81,
              "relname": "a_star",
              "relpersistence": "p",
            },
            "usingClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 94,
                  "relname": "wcte",
                  "relpersistence": "p",
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "aa",
                        },
                      },
                    ],
                    "location": 105,
                  },
                },
                "location": 108,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "q2",
                        },
                      },
                    ],
                    "location": 110,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "wcte",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 27,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                        "returningList": [
                          {
                            "ResTarget": {
                              "location": 64,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 64,
                                },
                              },
                            },
                          },
                        ],
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 45,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 47,
                                        },
                                        "location": 49,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1570 1`] = `
[
  "WITH RECURSIVE t AS (
	INSERT INTO y
		SELECT * FROM t
)
VALUES(FALSE)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "valuesLists": [
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "boolval": {},
                        "location": 64,
                      },
                    },
                  ],
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 35,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "selectStmt": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 53,
                                  "relname": "t",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 46,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 46,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1577 1`] = `
[
  "WITH t AS (
	INSERT INTO y VALUES(0)
)
SELECT * FROM t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 53,
                  "relname": "t",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 46,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "t",
                    "ctequery": {
                      "InsertStmt": {
                        "override": "OVERRIDING_NOT_SET",
                        "relation": {
                          "inh": true,
                          "location": 25,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                        "selectStmt": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 34,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1583 1`] = `
[
  "SELECT * FROM (
	WITH t AS (UPDATE y SET a=a+1 RETURNING *)
	SELECT * FROM t
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 75,
                            "relname": "t",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 68,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 68,
                              },
                            },
                          },
                        },
                      ],
                      "withClause": {
                        "ctes": [
                          {
                            "CommonTableExpr": {
                              "ctematerialized": "CTEMaterializeDefault",
                              "ctename": "t",
                              "ctequery": {
                                "UpdateStmt": {
                                  "relation": {
                                    "inh": true,
                                    "location": 35,
                                    "relname": "y",
                                    "relpersistence": "p",
                                  },
                                  "returningList": [
                                    {
                                      "ResTarget": {
                                        "location": 57,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 57,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 41,
                                        "name": "a",
                                        "val": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 43,
                                              },
                                            },
                                            "location": 44,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "+",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 45,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                              "location": 22,
                            },
                          },
                        ],
                        "location": 17,
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1589 1`] = `
[
  "CREATE RULE y_rule AS ON INSERT TO y WHERE a=0 DO INSTEAD DELETE FROM y",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "DeleteStmt": {
                  "relation": {
                    "inh": true,
                    "location": 70,
                    "relname": "y",
                    "relpersistence": "p",
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 35,
              "relname": "y",
              "relpersistence": "p",
            },
            "rulename": "y_rule",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 43,
                  },
                },
                "location": 44,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 45,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1619 1`] = `
[
  "  -- fail, WITH is a reserved word
with ordinality as (select 1 as x) select * from ordinality",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 84,
                  "relname": "ordinality",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 77,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 77,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "ordinality",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 62,
                              "name": "x",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 62,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 40,
                  },
                },
              ],
              "location": 35,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`with.sql > line 1623 1`] = `
[
  "WITH with_test AS (SELECT 42) INSERT INTO with_test VALUES (1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "with_test",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 60,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "with_test",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 26,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 42,
                                  },
                                  "location": 26,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
