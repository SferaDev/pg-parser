// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`rules.sql > line 10 1`] = `
[
  "create table rtest_t1 (a int4, b int4)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_t1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 14 1`] = `
[
  "create view rtest_v1 as select * from rtest_t1",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_t1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 16 1`] = `
[
  "	insert into rtest_t1 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_t1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 30,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 37,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 18 1`] = `
[
  "	update rtest_t1 set a = new.a, b = new.b
	where a = old.a",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 8,
              "relname": "rtest_t1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 21,
                  "name": "a",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "new",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 25,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 32,
                  "name": "b",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "new",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 36,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 49,
                  },
                },
                "location": 51,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "old",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 53,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 21 1`] = `
[
  "	delete from rtest_t1 where a = old.a",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_t1",
              "relpersistence": "p",
            },
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 28,
                  },
                },
                "location": 30,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "old",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 32,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 23 1`] = `
[
  "COMMENT ON RULE rtest_v1_bad ON rtest_v1 IS 'bad rule'",
  {
    "stmts": [
      {
        "stmt": {
          "CommentStmt": {
            "comment": "bad rule",
            "object": {
              "List": {
                "items": [
                  {
                    "String": {
                      "sval": "rtest_v1",
                    },
                  },
                  {
                    "String": {
                      "sval": "rtest_v1_bad",
                    },
                  },
                ],
              },
            },
            "objtype": "OBJECT_RULE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 34 1`] = `
[
  "create table rtest_system (sysname text, sysdesc text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "sysname",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sysdesc",
                  "is_local": true,
                  "location": 41,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 39 1`] = `
[
  "create rule rtest_sys_upd as on update to rtest_system do also (
	update rtest_interface set sysname = new.sysname
		where sysname = old.sysname;
	update rtest_admin set sysname = new.sysname
		where sysname = old.sysname
	)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 73,
                    "relname": "rtest_interface",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 93,
                        "name": "sysname",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sysname",
                                },
                              },
                            ],
                            "location": 103,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 123,
                        },
                      },
                      "location": 131,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 133,
                        },
                      },
                    },
                  },
                },
              },
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 154,
                    "relname": "rtest_admin",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 170,
                        "name": "sysname",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sysname",
                                },
                              },
                            ],
                            "location": 180,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 200,
                        },
                      },
                      "location": 208,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 210,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "rulename": "rtest_sys_upd",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 46 1`] = `
[
  "create rule rtest_sys_del as on delete to rtest_system do also (
	delete from rtest_interface where sysname = old.sysname;
	delete from rtest_admin where sysname = old.sysname;
	)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "DeleteStmt": {
                  "relation": {
                    "inh": true,
                    "location": 78,
                    "relname": "rtest_interface",
                    "relpersistence": "p",
                  },
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 100,
                        },
                      },
                      "location": 108,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 110,
                        },
                      },
                    },
                  },
                },
              },
              {
                "DeleteStmt": {
                  "relation": {
                    "inh": true,
                    "location": 136,
                    "relname": "rtest_admin",
                    "relpersistence": "p",
                  },
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 154,
                        },
                      },
                      "location": 162,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sysname",
                              },
                            },
                          ],
                          "location": 164,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "rulename": "rtest_sys_del",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 51 1`] = `
[
  "create rule rtest_pers_upd as on update to rtest_person do also
	update rtest_admin set pname = new.pname where pname = old.pname",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 72,
                    "relname": "rtest_admin",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 88,
                        "name": "pname",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "pname",
                                },
                              },
                            ],
                            "location": 96,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "pname",
                              },
                            },
                          ],
                          "location": 112,
                        },
                      },
                      "location": 118,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "pname",
                              },
                            },
                          ],
                          "location": 120,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_person",
              "relpersistence": "p",
            },
            "rulename": "rtest_pers_upd",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 54 1`] = `
[
  "create rule rtest_pers_del as on delete to rtest_person do also
	delete from rtest_admin where pname = old.pname",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "DeleteStmt": {
                  "relation": {
                    "inh": true,
                    "location": 77,
                    "relname": "rtest_admin",
                    "relpersistence": "p",
                  },
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "pname",
                              },
                            },
                          ],
                          "location": 95,
                        },
                      },
                      "location": 101,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "pname",
                              },
                            },
                          ],
                          "location": 103,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_person",
              "relpersistence": "p",
            },
            "rulename": "rtest_pers_del",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 60 1`] = `
[
  "create table rtest_emp (ename char(20), salary money)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_emp",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "ename",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 35,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "salary",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 47,
                    "names": [
                      {
                        "String": {
                          "sval": "money",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 64 1`] = `
[
  "create rule rtest_emp_ins as on insert to rtest_emp do
	insert into rtest_emplog values (new.ename, current_user,
			'hired', new.salary, '0.00')",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 68,
                    "relname": "rtest_emplog",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "ename",
                                      },
                                    },
                                  ],
                                  "location": 89,
                                },
                              },
                              {
                                "SQLValueFunction": {
                                  "location": 100,
                                  "op": "SVFOP_CURRENT_USER",
                                  "typmod": -1,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 117,
                                  "sval": {
                                    "sval": "hired",
                                  },
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "salary",
                                      },
                                    },
                                  ],
                                  "location": 126,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 138,
                                  "sval": {
                                    "sval": "0.00",
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_emp",
              "relpersistence": "p",
            },
            "rulename": "rtest_emp_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 68 1`] = `
[
  "create rule rtest_emp_upd as on update to rtest_emp where new.salary != old.salary do
	insert into rtest_emplog values (new.ename, current_user,
			'honored', new.salary, old.salary)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 99,
                    "relname": "rtest_emplog",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "ename",
                                      },
                                    },
                                  ],
                                  "location": 120,
                                },
                              },
                              {
                                "SQLValueFunction": {
                                  "location": 131,
                                  "op": "SVFOP_CURRENT_USER",
                                  "typmod": -1,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 148,
                                  "sval": {
                                    "sval": "honored",
                                  },
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "salary",
                                      },
                                    },
                                  ],
                                  "location": 159,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "old",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "salary",
                                      },
                                    },
                                  ],
                                  "location": 171,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_emp",
              "relpersistence": "p",
            },
            "rulename": "rtest_emp_upd",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "new",
                        },
                      },
                      {
                        "String": {
                          "sval": "salary",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 69,
                "name": [
                  {
                    "String": {
                      "sval": "<>",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "old",
                        },
                      },
                      {
                        "String": {
                          "sval": "salary",
                        },
                      },
                    ],
                    "location": 72,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 72 1`] = `
[
  "create rule rtest_emp_del as on delete to rtest_emp do
	insert into rtest_emplog values (old.ename, current_user,
			'fired', '0.00', old.salary)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 68,
                    "relname": "rtest_emplog",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "old",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "ename",
                                      },
                                    },
                                  ],
                                  "location": 89,
                                },
                              },
                              {
                                "SQLValueFunction": {
                                  "location": 100,
                                  "op": "SVFOP_CURRENT_USER",
                                  "typmod": -1,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 117,
                                  "sval": {
                                    "sval": "fired",
                                  },
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 126,
                                  "sval": {
                                    "sval": "0.00",
                                  },
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "old",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "salary",
                                      },
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_emp",
              "relpersistence": "p",
            },
            "rulename": "rtest_emp_del",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 80 1`] = `
[
  "create table rtest_t4 (a int4, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 87 1`] = `
[
  "create rule rtest_t4_ins1 as on insert to rtest_t4
		where new.a >= 10 and new.a < 20 do instead
	insert into rtest_t5 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 110,
                    "relname": "rtest_t5",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 127,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "rulename": "rtest_t4_ins1",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 59,
                        },
                      },
                      "location": 65,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 68,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 75,
                        },
                      },
                      "location": 81,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 83,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 71,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 91 1`] = `
[
  "create rule rtest_t4_ins2 as on insert to rtest_t4
		where new.a >= 20 and new.a < 30 do
	insert into rtest_t6 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 102,
                    "relname": "rtest_t6",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 119,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 126,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "rulename": "rtest_t4_ins2",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 59,
                        },
                      },
                      "location": 65,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 68,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 75,
                        },
                      },
                      "location": 81,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 30,
                          },
                          "location": 83,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 71,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 95 1`] = `
[
  "create rule rtest_t5_ins as on insert to rtest_t5
		where new.a > 15 do
	insert into rtest_t7 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 85,
                    "relname": "rtest_t7",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 102,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 109,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "relation": {
              "inh": true,
              "location": 41,
              "relname": "rtest_t5",
              "relpersistence": "p",
            },
            "rulename": "rtest_t5_ins",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "new",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 64,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 15,
                    },
                    "location": 66,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 99 1`] = `
[
  "create rule rtest_t6_ins as on insert to rtest_t6
		where new.a > 25 do instead
	insert into rtest_t8 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 93,
                    "relname": "rtest_t8",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 110,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 117,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 41,
              "relname": "rtest_t6",
              "relpersistence": "p",
            },
            "rulename": "rtest_t6_ins",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "new",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 64,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 25,
                    },
                    "location": 66,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 109 1`] = `
[
  "create table rtest_order1 (a int4)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 112 1`] = `
[
  "create sequence rtest_seq",
  {
    "stmts": [
      {
        "stmt": {
          "CreateSeqStmt": {
            "sequence": {
              "inh": true,
              "location": 16,
              "relname": "rtest_seq",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 114 1`] = `
[
  "create rule rtest_order_r3 as on insert to rtest_order1 do instead
	insert into rtest_order2 values (new.a, nextval('rtest_seq'),
		'rule 3 - this should run 3rd')",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 80,
                    "relname": "rtest_order2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 101,
                                },
                              },
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "location": 116,
                                        "sval": {
                                          "sval": "rtest_seq",
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "nextval",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 132,
                                  "sval": {
                                    "sval": "rule 3 - this should run 3rd",
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "rulename": "rtest_order_r3",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 118 1`] = `
[
  "create rule rtest_order_r4 as on insert to rtest_order1
		where a < 100 do instead
	insert into rtest_order2 values (new.a, nextval('rtest_seq'),
		'rule 4 - this should run 4th')",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 96,
                    "relname": "rtest_order2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 117,
                                },
                              },
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "location": 132,
                                        "sval": {
                                          "sval": "rtest_seq",
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "nextval",
                                      },
                                    },
                                  ],
                                  "location": 124,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 148,
                                  "sval": {
                                    "sval": "rule 4 - this should run 4th",
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "rulename": "rtest_order_r4",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 64,
                  },
                },
                "location": 66,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 100,
                    },
                    "location": 68,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 123 1`] = `
[
  "create rule rtest_order_r2 as on insert to rtest_order1 do
	insert into rtest_order2 values (new.a, nextval('rtest_seq'),
		'rule 2 - this should run 2nd')",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 72,
                    "relname": "rtest_order2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 93,
                                },
                              },
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "location": 108,
                                        "sval": {
                                          "sval": "rtest_seq",
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "nextval",
                                      },
                                    },
                                  ],
                                  "location": 100,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 124,
                                  "sval": {
                                    "sval": "rule 2 - this should run 2nd",
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "rulename": "rtest_order_r2",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 127 1`] = `
[
  "create rule rtest_order_r1 as on insert to rtest_order1 do instead
	insert into rtest_order2 values (new.a, nextval('rtest_seq'),
		'rule 1 - this should run 1st')",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 80,
                    "relname": "rtest_order2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 101,
                                },
                              },
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "location": 116,
                                        "sval": {
                                          "sval": "rtest_seq",
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "nextval",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 132,
                                  "sval": {
                                    "sval": "rule 1 - this should run 1st",
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "rulename": "rtest_order_r1",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 134 1`] = `
[
  "create table rtest_nothn1 (a int4, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 139 1`] = `
[
  "create rule rtest_nothn_r1 as on insert to rtest_nothn1
	where new.a >= 10 and new.a < 20 do instead nothing",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
            "rulename": "rtest_nothn_r1",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 63,
                        },
                      },
                      "location": 69,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 72,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 79,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 87,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 75,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 142 1`] = `
[
  "create rule rtest_nothn_r2 as on insert to rtest_nothn1
	where new.a >= 30 and new.a < 40 do instead nothing",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
            "rulename": "rtest_nothn_r2",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 63,
                        },
                      },
                      "location": 69,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 30,
                          },
                          "location": 72,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 79,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 40,
                          },
                          "location": 87,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 75,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 145 1`] = `
[
  "create rule rtest_nothn_r3 as on insert to rtest_nothn2
	where new.a >= 100 do instead
	insert into rtest_nothn3 values (new.a, new.b)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 100,
                    "relname": "rtest_nothn3",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 121,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 128,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_nothn2",
              "relpersistence": "p",
            },
            "rulename": "rtest_nothn_r3",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "new",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 63,
                  },
                },
                "location": 69,
                "name": [
                  {
                    "String": {
                      "sval": ">=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 100,
                    },
                    "location": 72,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 149 1`] = `
[
  "create rule rtest_nothn_r4 as on insert to rtest_nothn2
	do instead nothing",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rtest_nothn2",
              "relpersistence": "p",
            },
            "rulename": "rtest_nothn_r4",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 161 1`] = `
[
  "insert into rtest_t2 values (1, 21)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 21,
                            },
                            "location": 32,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 165 1`] = `
[
  "insert into rtest_t3 values (1, 31)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 31,
                            },
                            "location": 32,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 172 1`] = `
[
  "insert into rtest_v1 values (1, 11)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 32,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 177 1`] = `
[
  "delete from rtest_v1 where a = 1",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 27,
                  },
                },
                "location": 29,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 31,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 195 1`] = `
[
  "insert into rtest_v1 select * from rtest_t2",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 35,
                      "relname": "rtest_t2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 28,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 28,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 200 1`] = `
[
  "insert into rtest_v1 (b, a) select b, a from rtest_t2",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 22,
                  "name": "b",
                },
              },
              {
                "ResTarget": {
                  "location": 25,
                  "name": "a",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 45,
                      "relname": "rtest_t2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 204 1`] = `
[
  "insert into rtest_v1 (a) select a from rtest_t3",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 22,
                  "name": "a",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "rtest_t3",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 209 1`] = `
[
  "update rtest_t1 set a = a + 10 where b isnull",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "rtest_t1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 20,
                  "name": "a",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 24,
                        },
                      },
                      "location": 26,
                      "name": [
                        {
                          "String": {
                            "sval": "+",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 28,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "NullTest": {
                "arg": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                    ],
                    "location": 37,
                  },
                },
                "location": 39,
                "nulltesttype": "IS_NULL",
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 214 1`] = `
[
  "update rtest_v1 set b = 42 where a = 2",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 20,
                  "name": "b",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 42,
                      },
                      "location": 24,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 33,
                  },
                },
                "location": 35,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 2,
                    },
                    "location": 37,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 227 1`] = `
[
  "update rtest_v1 set b = rtest_t2.b from rtest_t2 where rtest_v1.a = rtest_t2.a",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 40,
                  "relname": "rtest_t2",
                  "relpersistence": "p",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "rtest_v1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 20,
                  "name": "b",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "rtest_t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 24,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "rtest_v1",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 55,
                  },
                },
                "location": 66,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "rtest_t2",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 68,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 239 1`] = `
[
  "insert into rtest_system values ('orion', 'Linux Jan Wieck')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 33,
                            "sval": {
                              "sval": "orion",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 42,
                            "sval": {
                              "sval": "Linux Jan Wieck",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 243 1`] = `
[
  "insert into rtest_interface values ('orion', 'eth0')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_interface",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 36,
                            "sval": {
                              "sval": "orion",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 45,
                            "sval": {
                              "sval": "eth0",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 248 1`] = `
[
  "insert into rtest_person values ('jw', 'Jan Wieck')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_person",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 33,
                            "sval": {
                              "sval": "jw",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 39,
                            "sval": {
                              "sval": "Jan Wieck",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 251 1`] = `
[
  "insert into rtest_admin values ('jw', 'orion')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_admin",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 32,
                            "sval": {
                              "sval": "jw",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 38,
                            "sval": {
                              "sval": "orion",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 255 1`] = `
[
  "update rtest_system set sysname = 'pluto' where sysname = 'neptun'",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 24,
                  "name": "sysname",
                  "val": {
                    "A_Const": {
                      "location": 34,
                      "sval": {
                        "sval": "pluto",
                      },
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "sysname",
                        },
                      },
                    ],
                    "location": 48,
                  },
                },
                "location": 56,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 58,
                    "sval": {
                      "sval": "neptun",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 257 1`] = `
[
  "select * from rtest_interface",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_interface",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 260 1`] = `
[
  "update rtest_person set pname = 'jwieck' where pdesc = 'Jan Wieck'",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "rtest_person",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 24,
                  "name": "pname",
                  "val": {
                    "A_Const": {
                      "location": 32,
                      "sval": {
                        "sval": "jwieck",
                      },
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "pdesc",
                        },
                      },
                    ],
                    "location": 47,
                  },
                },
                "location": 53,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 55,
                    "sval": {
                      "sval": "Jan Wieck",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 268 1`] = `
[
  "delete from rtest_system where sysname = 'orion'",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_system",
              "relpersistence": "p",
            },
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "sysname",
                        },
                      },
                    ],
                    "location": 31,
                  },
                },
                "location": 39,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 41,
                    "sval": {
                      "sval": "orion",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 276 1`] = `
[
  "insert into rtest_emp values ('wiecc', '5000.00')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_emp",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 30,
                            "sval": {
                              "sval": "wiecc",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 39,
                            "sval": {
                              "sval": "5000.00",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 283 1`] = `
[
  "select ename, who = current_user as "matches user", action, newsal, oldsal from rtest_emplog order by ename, action, newsal",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 80,
                  "relname": "rtest_emplog",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ename",
                          },
                        },
                      ],
                      "location": 102,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "action",
                          },
                        },
                      ],
                      "location": 109,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "newsal",
                          },
                        },
                      ],
                      "location": 117,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ename",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "name": "matches user",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "who",
                              },
                            },
                          ],
                          "location": 14,
                        },
                      },
                      "location": 18,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "SQLValueFunction": {
                          "location": 20,
                          "op": "SVFOP_CURRENT_USER",
                          "typmod": -1,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "action",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 60,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "newsal",
                          },
                        },
                      ],
                      "location": 60,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 68,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "oldsal",
                          },
                        },
                      ],
                      "location": 68,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 298 1`] = `
[
  "insert into rtest_t4 values (1, 'Record should go to rtest_t4')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 32,
                            "sval": {
                              "sval": "Record should go to rtest_t4",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 309 1`] = `
[
  "select * from rtest_t4",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_t4",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 315 1`] = `
[
  "delete from rtest_t4",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 321 1`] = `
[
  "insert into rtest_t9 values (1, 'Record should go to rtest_t4')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t9",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 32,
                            "sval": {
                              "sval": "Record should go to rtest_t4",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 332 1`] = `
[
  "insert into rtest_t4 select * from rtest_t9 where a < 20",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 35,
                      "relname": "rtest_t9",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 28,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 28,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 50,
                      },
                    },
                    "location": 52,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 20,
                        },
                        "location": 54,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 340 1`] = `
[
  "insert into rtest_t4 select * from rtest_t9 where b ~ 'and t8'",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 35,
                      "relname": "rtest_t9",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 28,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 28,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 50,
                      },
                    },
                    "location": 52,
                    "name": [
                      {
                        "String": {
                          "sval": "~",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "location": 54,
                        "sval": {
                          "sval": "and t8",
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 348 1`] = `
[
  "insert into rtest_t4 select a + 1, b from rtest_t9 where a in (20, 30, 40)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_t4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 42,
                      "relname": "rtest_t9",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 28,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 28,
                            },
                          },
                          "location": 30,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 32,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_IN",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 57,
                      },
                    },
                    "location": 59,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "List": {
                        "items": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 20,
                              },
                              "location": 63,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 30,
                              },
                              "location": 67,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 40,
                              },
                              "location": 71,
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 359 1`] = `
[
  "insert into rtest_order1 values (1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_order1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 33,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 365 1`] = `
[
  "insert into rtest_nothn1 values (1, 'want this')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 33,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 36,
                            "sval": {
                              "sval": "want this",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 377 1`] = `
[
  "select * from rtest_nothn1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_nothn1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 379 1`] = `
[
  "insert into rtest_nothn2 values (10, 'too small')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 33,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 37,
                            "sval": {
                              "sval": "too small",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 384 1`] = `
[
  "select * from rtest_nothn2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_nothn2",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 387 1`] = `
[
  "delete from rtest_nothn1",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 391 1`] = `
[
  "insert into rtest_nothn4 values (1, 'want this')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 33,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 36,
                            "sval": {
                              "sval": "want this",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 403 1`] = `
[
  "insert into rtest_nothn1 select * from rtest_nothn4",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "rtest_nothn4",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 407 1`] = `
[
  "delete from rtest_nothn4",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn4",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 414 1`] = `
[
  "insert into rtest_nothn2 select * from rtest_nothn4",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_nothn2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "rtest_nothn4",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 419 1`] = `
[
  "create table rtest_view1 (a int4, b text, v bool)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_view1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 34,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "v",
                  "is_local": true,
                  "location": 42,
                  "typeName": {
                    "location": 44,
                    "names": [
                      {
                        "String": {
                          "sval": "bool",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 438 1`] = `
[
  "insert into rtest_view1 values (1, 'item 1', 't')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 32,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 35,
                            "sval": {
                              "sval": "item 1",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 45,
                            "sval": {
                              "sval": "t",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 447 1`] = `
[
  "insert into rtest_view2 values (2)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 32,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 456 1`] = `
[
  "select * from rtest_vview1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_vview1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 462 1`] = `
[
  "insert into rtest_view3 select * from rtest_vview1 where a < 7",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_vview1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 57,
                      },
                    },
                    "location": 59,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 7,
                        },
                        "location": 61,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 466 1`] = `
[
  "insert into rtest_view3 select * from rtest_vview2 where a != 5 and b !~ '2'",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_vview2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 57,
                            },
                          },
                          "location": 59,
                          "name": [
                            {
                              "String": {
                                "sval": "<>",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 5,
                              },
                              "location": 62,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 68,
                            },
                          },
                          "location": 70,
                          "name": [
                            {
                              "String": {
                                "sval": "!~",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "location": 73,
                              "sval": {
                                "sval": "2",
                              },
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 64,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 470 1`] = `
[
  "insert into rtest_view3 select * from rtest_vview3",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_vview3",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 474 1`] = `
[
  "insert into rtest_view4 select * from rtest_vview4 where 3 > refcount",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_vview4",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 3,
                        },
                        "location": 57,
                      },
                    },
                    "location": 59,
                    "name": [
                      {
                        "String": {
                          "sval": ">",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "refcount",
                            },
                          },
                        ],
                        "location": 61,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 478 1`] = `
[
  "insert into rtest_view4 select * from rtest_vview5 where a > 2 and refcount = 0",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_view4",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "rtest_vview5",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 57,
                            },
                          },
                          "location": 59,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 2,
                              },
                              "location": 61,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "refcount",
                                  },
                                },
                              ],
                              "location": 67,
                            },
                          },
                          "location": 76,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 78,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 63,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 484 1`] = `
[
  "create table rtest_comp (
	part	text,
	unit	char(4),
	size	float
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rtest_comp",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "part",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "unit",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 44,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 4,
                          },
                          "location": 49,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "size",
                  "is_local": true,
                  "location": 54,
                  "typeName": {
                    "location": 59,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 496 1`] = `
[
  "create view rtest_vcomp as
	select X.part, (X.size * Y.factor) as size_in_cm
			from rtest_comp X, rtest_unitfact Y
			where X.unit = Y.unit",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 85,
                      "relname": "rtest_comp",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "y",
                      },
                      "inh": true,
                      "location": 99,
                      "relname": "rtest_unitfact",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "part",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 43,
                      "name": "size_in_cm",
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "size",
                                  },
                                },
                              ],
                              "location": 44,
                            },
                          },
                          "location": 51,
                          "name": [
                            {
                              "String": {
                                "sval": "*",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "factor",
                                  },
                                },
                              ],
                              "location": 53,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                          {
                            "String": {
                              "sval": "unit",
                            },
                          },
                        ],
                        "location": 125,
                      },
                    },
                    "location": 132,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "y",
                            },
                          },
                          {
                            "String": {
                              "sval": "unit",
                            },
                          },
                        ],
                        "location": 134,
                      },
                    },
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "rtest_vcomp",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 506 1`] = `
[
  "insert into rtest_comp values ('p1', 'm', 5.0)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rtest_comp",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 31,
                            "sval": {
                              "sval": "p1",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 37,
                            "sval": {
                              "sval": "m",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "5.0",
                            },
                            "location": 42,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 513 1`] = `
[
  "select * from rtest_vcomp order by part",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_vcomp",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "part",
                          },
                        },
                      ],
                      "location": 35,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 515 1`] = `
[
  "select * from rtest_vcomp where size_in_cm > 10.0 order by size_in_cm using >",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rtest_vcomp",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": 76,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "size_in_cm",
                          },
                        },
                      ],
                      "location": 59,
                    },
                  },
                  "sortby_dir": "SORTBY_USING",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                  "useOp": [
                    {
                      "String": {
                        "sval": ">",
                      },
                    },
                  ],
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "size_in_cm",
                        },
                      },
                    ],
                    "location": 32,
                  },
                },
                "location": 43,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "fval": {
                      "fval": "10.0",
                    },
                    "location": 45,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 521 1`] = `
[
  "CREATE TABLE shoe_data (
	shoename   char(10),      -- primary key
	sh_avail   integer,       -- available # of pairs
	slcolor    char(10),      -- preferred shoelace color
	slminlen   float,         -- minimum shoelace length
	slmaxlen   float,         -- maximum shoelace length
	slunit     char(8)        -- length unit
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "shoe_data",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "shoename",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 42,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sh_avail",
                  "is_local": true,
                  "location": 68,
                  "typeName": {
                    "location": 79,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "slcolor",
                  "is_local": true,
                  "location": 119,
                  "typeName": {
                    "location": 130,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 135,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "slminlen",
                  "is_local": true,
                  "location": 174,
                  "typeName": {
                    "location": 185,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "slmaxlen",
                  "is_local": true,
                  "location": 228,
                  "typeName": {
                    "location": 239,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "slunit",
                  "is_local": true,
                  "location": 282,
                  "typeName": {
                    "location": 293,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 8,
                          },
                          "location": 298,
                        },
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 530 1`] = `
[
  "CREATE TABLE shoelace_data (
	sl_name    char(10),      -- primary key
	sl_avail   integer,       -- available # of pairs
	sl_color   char(10),      -- shoelace color
	sl_len     float,         -- shoelace length
	sl_unit    char(8)        -- length unit
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "shoelace_data",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "sl_name",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 46,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sl_avail",
                  "is_local": true,
                  "location": 72,
                  "typeName": {
                    "location": 83,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sl_color",
                  "is_local": true,
                  "location": 123,
                  "typeName": {
                    "location": 134,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 139,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sl_len",
                  "is_local": true,
                  "location": 168,
                  "typeName": {
                    "location": 179,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sl_unit",
                  "is_local": true,
                  "location": 214,
                  "typeName": {
                    "location": 225,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 8,
                          },
                          "location": 230,
                        },
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 538 1`] = `
[
  "CREATE TABLE unit (
	un_name    char(8),       -- the primary key
	un_fact    float          -- factor to transform to cm
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "unit",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "un_name",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 8,
                          },
                          "location": 37,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "un_fact",
                  "is_local": true,
                  "location": 67,
                  "typeName": {
                    "location": 78,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 543 1`] = `
[
  "CREATE VIEW shoe AS
	SELECT sh.shoename,
		   sh.sh_avail,
		   sh.slcolor,
		   sh.slminlen,
		   sh.slminlen * un.un_fact AS slminlen_cm,
		   sh.slmaxlen,
		   sh.slmaxlen * un.un_fact AS slmaxlen_cm,
		   sh.slunit
	  FROM shoe_data sh, unit un
	 WHERE sh.slunit = un.un_name",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "sh",
                      },
                      "inh": true,
                      "location": 227,
                      "relname": "shoe_data",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "un",
                      },
                      "inh": true,
                      "location": 241,
                      "relname": "unit",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 28,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "shoename",
                              },
                            },
                          ],
                          "location": 28,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 46,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "sh_avail",
                              },
                            },
                          ],
                          "location": 46,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 64,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "slcolor",
                              },
                            },
                          ],
                          "location": 64,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 81,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "slminlen",
                              },
                            },
                          ],
                          "location": 81,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 99,
                      "name": "slminlen_cm",
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "sh",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "slminlen",
                                  },
                                },
                              ],
                              "location": 99,
                            },
                          },
                          "location": 111,
                          "name": [
                            {
                              "String": {
                                "sval": "*",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "un",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "un_fact",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 145,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "slmaxlen",
                              },
                            },
                          ],
                          "location": 145,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 163,
                      "name": "slmaxlen_cm",
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "sh",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "slmaxlen",
                                  },
                                },
                              ],
                              "location": 163,
                            },
                          },
                          "location": 175,
                          "name": [
                            {
                              "String": {
                                "sval": "*",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "un",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "un_fact",
                                  },
                                },
                              ],
                              "location": 177,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 209,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sh",
                              },
                            },
                            {
                              "String": {
                                "sval": "slunit",
                              },
                            },
                          ],
                          "location": 209,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "sh",
                            },
                          },
                          {
                            "String": {
                              "sval": "slunit",
                            },
                          },
                        ],
                        "location": 257,
                      },
                    },
                    "location": 267,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "un",
                            },
                          },
                          {
                            "String": {
                              "sval": "un_name",
                            },
                          },
                        ],
                        "location": 269,
                      },
                    },
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "shoe",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 555 1`] = `
[
  "CREATE VIEW shoelace AS
	SELECT s.sl_name,
		   s.sl_avail,
		   s.sl_color,
		   s.sl_len,
		   s.sl_unit,
		   s.sl_len * u.un_fact AS sl_len_cm
	  FROM shoelace_data s, unit u
	 WHERE s.sl_unit = u.un_name",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "s",
                      },
                      "inh": true,
                      "location": 155,
                      "relname": "shoelace_data",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "u",
                      },
                      "inh": true,
                      "location": 172,
                      "relname": "unit",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 48,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_avail",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 65,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_color",
                              },
                            },
                          ],
                          "location": 65,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 82,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_len",
                              },
                            },
                          ],
                          "location": 82,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 97,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_unit",
                              },
                            },
                          ],
                          "location": 97,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 113,
                      "name": "sl_len_cm",
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "sl_len",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                          "location": 122,
                          "name": [
                            {
                              "String": {
                                "sval": "*",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "u",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "un_fact",
                                  },
                                },
                              ],
                              "location": 124,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "sl_unit",
                            },
                          },
                        ],
                        "location": 187,
                      },
                    },
                    "location": 197,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "u",
                            },
                          },
                          {
                            "String": {
                              "sval": "un_name",
                            },
                          },
                        ],
                        "location": 199,
                      },
                    },
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 565 1`] = `
[
  "CREATE VIEW shoe_ready AS
	SELECT rsh.shoename,
		   rsh.sh_avail,
		   rsl.sl_name,
		   rsl.sl_avail,
		   int4smaller(rsh.sh_avail, rsl.sl_avail) AS total_avail
	  FROM shoe rsh, shoelace rsl
	 WHERE rsl.sl_color = rsh.slcolor
	   AND rsl.sl_len_cm >= rsh.slminlen_cm
	   AND rsl.sl_len_cm <= rsh.slmaxlen_cm",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "rsh",
                      },
                      "inh": true,
                      "location": 172,
                      "relname": "shoe",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "rsl",
                      },
                      "inh": true,
                      "location": 182,
                      "relname": "shoelace",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "rsh",
                              },
                            },
                            {
                              "String": {
                                "sval": "shoename",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 53,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "rsh",
                              },
                            },
                            {
                              "String": {
                                "sval": "sh_avail",
                              },
                            },
                          ],
                          "location": 53,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 72,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "rsl",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 72,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 90,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "rsl",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_avail",
                              },
                            },
                          ],
                          "location": 90,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 109,
                      "name": "total_avail",
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "rsh",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "sh_avail",
                                    },
                                  },
                                ],
                                "location": 121,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "rsl",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "sl_avail",
                                    },
                                  },
                                ],
                                "location": 135,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "int4smaller",
                              },
                            },
                          ],
                          "location": 109,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsl",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "sl_color",
                                  },
                                },
                              ],
                              "location": 203,
                            },
                          },
                          "location": 216,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsh",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "slcolor",
                                  },
                                },
                              ],
                              "location": 218,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsl",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "sl_len_cm",
                                  },
                                },
                              ],
                              "location": 238,
                            },
                          },
                          "location": 252,
                          "name": [
                            {
                              "String": {
                                "sval": ">=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsh",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "slminlen_cm",
                                  },
                                },
                              ],
                              "location": 255,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsl",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "sl_len_cm",
                                  },
                                },
                              ],
                              "location": 279,
                            },
                          },
                          "location": 293,
                          "name": [
                            {
                              "String": {
                                "sval": "<=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "rsh",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "slmaxlen_cm",
                                  },
                                },
                              ],
                              "location": 296,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 234,
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "shoe_ready",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 576 1`] = `
[
  "INSERT INTO unit VALUES ('cm', 1.0)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "unit",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 25,
                            "sval": {
                              "sval": "cm",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "1.0",
                            },
                            "location": 31,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 580 1`] = `
[
  "INSERT INTO shoe_data VALUES ('sh1', 2, 'black', 70.0, 90.0, 'cm')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoe_data",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 30,
                            "sval": {
                              "sval": "sh1",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 37,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 40,
                            "sval": {
                              "sval": "black",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "70.0",
                            },
                            "location": 49,
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "90.0",
                            },
                            "location": 55,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 61,
                            "sval": {
                              "sval": "cm",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 585 1`] = `
[
  "INSERT INTO shoelace_data VALUES ('sl1', 5, 'black', 80.0, 'cm')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace_data",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 34,
                            "sval": {
                              "sval": "sl1",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 5,
                            },
                            "location": 41,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 44,
                            "sval": {
                              "sval": "black",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "80.0",
                            },
                            "location": 53,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 59,
                            "sval": {
                              "sval": "cm",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 595 1`] = `
[
  "SELECT * FROM shoelace ORDER BY sl_name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shoelace",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "sl_name",
                          },
                        },
                      ],
                      "location": 32,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 598 1`] = `
[
  "    CREATE TABLE shoelace_log (
        sl_name    char(10),      -- shoelace changed
        sl_avail   integer,       -- new available value
        log_who    name,          -- who did it
        log_when   timestamp      -- when
    )",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 17,
              "relname": "shoelace_log",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "sl_name",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 51,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 56,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "sl_avail",
                  "is_local": true,
                  "location": 94,
                  "typeName": {
                    "location": 105,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "log_who",
                  "is_local": true,
                  "location": 151,
                  "typeName": {
                    "location": 162,
                    "names": [
                      {
                        "String": {
                          "sval": "name",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "log_when",
                  "is_local": true,
                  "location": 199,
                  "typeName": {
                    "location": 210,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "timestamp",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 618 1`] = `
[
  "UPDATE shoelace_data SET sl_avail = 6 WHERE  sl_name = 'sl7'",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "shoelace_data",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 25,
                  "name": "sl_avail",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 6,
                      },
                      "location": 36,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "sl_name",
                        },
                      },
                    ],
                    "location": 45,
                  },
                },
                "location": 53,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 55,
                    "sval": {
                      "sval": "sl7",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 620 1`] = `
[
  "SELECT * FROM shoelace_log",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shoelace_log",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 622 1`] = `
[
  "    CREATE RULE shoelace_ins AS ON INSERT TO shoelace
        DO INSTEAD
        INSERT INTO shoelace_data VALUES (
               NEW.sl_name,
               NEW.sl_avail,
               NEW.sl_color,
               NEW.sl_len,
               NEW.sl_unit)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 93,
                    "relname": "shoelace_data",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "sl_name",
                                      },
                                    },
                                  ],
                                  "location": 131,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "sl_avail",
                                      },
                                    },
                                  ],
                                  "location": 159,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "sl_color",
                                      },
                                    },
                                  ],
                                  "location": 188,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "sl_len",
                                      },
                                    },
                                  ],
                                  "location": 217,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "sl_unit",
                                      },
                                    },
                                  ],
                                  "location": 244,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 45,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "rulename": "shoelace_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 631 1`] = `
[
  "    CREATE RULE shoelace_upd AS ON UPDATE TO shoelace
        DO INSTEAD
        UPDATE shoelace_data SET
               sl_name = NEW.sl_name,
               sl_avail = NEW.sl_avail,
               sl_color = NEW.sl_color,
               sl_len = NEW.sl_len,
               sl_unit = NEW.sl_unit
         WHERE sl_name = OLD.sl_name",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 88,
                    "relname": "shoelace_data",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 121,
                        "name": "sl_name",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_name",
                                },
                              },
                            ],
                            "location": 131,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 159,
                        "name": "sl_avail",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_avail",
                                },
                              },
                            ],
                            "location": 170,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 199,
                        "name": "sl_color",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_color",
                                },
                              },
                            ],
                            "location": 210,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 239,
                        "name": "sl_len",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_len",
                                },
                              },
                            ],
                            "location": 248,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 275,
                        "name": "sl_unit",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_unit",
                                },
                              },
                            ],
                            "location": 285,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 312,
                        },
                      },
                      "location": 320,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 322,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 45,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "rulename": "shoelace_upd",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 641 1`] = `
[
  "    CREATE RULE shoelace_del AS ON DELETE TO shoelace
        DO INSTEAD
        DELETE FROM shoelace_data
         WHERE sl_name = OLD.sl_name",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "DeleteStmt": {
                  "relation": {
                    "inh": true,
                    "location": 93,
                    "relname": "shoelace_data",
                    "relpersistence": "p",
                  },
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 122,
                        },
                      },
                      "location": 130,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 132,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 45,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "rulename": "shoelace_del",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 646 1`] = `
[
  "    CREATE TABLE shoelace_arrive (
        arr_name    char(10),
        arr_quant   integer
    )",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 17,
              "relname": "shoelace_arrive",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "arr_name",
                  "is_local": true,
                  "location": 43,
                  "typeName": {
                    "location": 55,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 60,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "arr_quant",
                  "is_local": true,
                  "location": 73,
                  "typeName": {
                    "location": 85,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 651 1`] = `
[
  "    CREATE TABLE shoelace_ok (
        ok_name     char(10),
        ok_quant    integer
    )",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 17,
              "relname": "shoelace_ok",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "ok_name",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 51,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 56,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "ok_quant",
                  "is_local": true,
                  "location": 69,
                  "typeName": {
                    "location": 81,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 656 1`] = `
[
  "    CREATE RULE shoelace_ok_ins AS ON INSERT TO shoelace_ok
        DO INSTEAD
        UPDATE shoelace SET
               sl_avail = sl_avail + NEW.ok_quant
         WHERE sl_name = NEW.ok_name",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 94,
                    "relname": "shoelace",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 122,
                        "name": "sl_avail",
                        "val": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "sl_avail",
                                    },
                                  },
                                ],
                                "location": 133,
                              },
                            },
                            "location": 142,
                            "name": [
                              {
                                "String": {
                                  "sval": "+",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "ok_quant",
                                    },
                                  },
                                ],
                                "location": 144,
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sl_name",
                              },
                            },
                          ],
                          "location": 172,
                        },
                      },
                      "location": 180,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "ok_name",
                              },
                            },
                          ],
                          "location": 182,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 48,
              "relname": "shoelace_ok",
              "relpersistence": "p",
            },
            "rulename": "shoelace_ok_ins",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 662 1`] = `
[
  "INSERT INTO shoelace_arrive VALUES ('sl3', 10)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace_arrive",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 36,
                            "sval": {
                              "sval": "sl3",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 43,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 668 1`] = `
[
  "insert into shoelace_ok select * from shoelace_arrive",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace_ok",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 38,
                      "relname": "shoelace_arrive",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 672 1`] = `
[
  "SELECT * FROM shoelace_log ORDER BY sl_name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shoelace_log",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "sl_name",
                          },
                        },
                      ],
                      "location": 36,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 674 1`] = `
[
  "    CREATE VIEW shoelace_obsolete AS
	SELECT * FROM shoelace WHERE NOT EXISTS
	    (SELECT shoename FROM shoe WHERE slcolor = sl_color)",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 52,
                      "relname": "shoelace",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 71,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 105,
                                    "relname": "shoe",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 91,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "shoename",
                                            },
                                          },
                                        ],
                                        "location": 91,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "slcolor",
                                          },
                                        },
                                      ],
                                      "location": 116,
                                    },
                                  },
                                  "location": 124,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "sl_color",
                                          },
                                        },
                                      ],
                                      "location": 126,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "NOT_EXPR",
                    "location": 67,
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 16,
              "relname": "shoelace_obsolete",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 678 1`] = `
[
  "    CREATE VIEW shoelace_candelete AS
	SELECT * FROM shoelace_obsolete WHERE sl_avail = 0",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 53,
                      "relname": "shoelace_obsolete",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 46,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 46,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "sl_avail",
                            },
                          },
                        ],
                        "location": 77,
                      },
                    },
                    "location": 86,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 88,
                      },
                    },
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 16,
              "relname": "shoelace_candelete",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 681 1`] = `
[
  "insert into shoelace values ('sl9', 0, 'pink', 35.0, 'inch', 0.0)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 29,
                            "sval": {
                              "sval": "sl9",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 36,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 39,
                            "sval": {
                              "sval": "pink",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "35.0",
                            },
                            "location": 47,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 53,
                            "sval": {
                              "sval": "inch",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "0.0",
                            },
                            "location": 61,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 684 1`] = `
[
  "insert into shoelace values ('sl10', 1000, 'magenta', 40.0, 'inch', 0.0)
  on conflict do nothing",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_NOTHING",
              "location": 75,
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 29,
                            "sval": {
                              "sval": "sl10",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1000,
                            },
                            "location": 37,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 43,
                            "sval": {
                              "sval": "magenta",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "40.0",
                            },
                            "location": 54,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 60,
                            "sval": {
                              "sval": "inch",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "0.0",
                            },
                            "location": 68,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 687 1`] = `
[
  "SELECT * FROM shoelace_obsolete ORDER BY sl_len_cm",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shoelace_obsolete",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "sl_len_cm",
                          },
                        },
                      ],
                      "location": 41,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 690 1`] = `
[
  "DELETE FROM shoelace WHERE EXISTS
    (SELECT * FROM shoelace_candelete
             WHERE sl_name = shoelace.sl_name)",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "whereClause": {
              "SubLink": {
                "location": 27,
                "subLinkType": "EXISTS_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 53,
                          "relname": "shoelace_candelete",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 46,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "A_Star": {},
                                },
                              ],
                              "location": 46,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "sl_name",
                                },
                              },
                            ],
                            "location": 91,
                          },
                        },
                        "location": 99,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "shoelace",
                                },
                              },
                              {
                                "String": {
                                  "sval": "sl_name",
                                },
                              },
                            ],
                            "location": 101,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 696 1`] = `
[
  "SELECT * FROM shoe ORDER BY shoename",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shoe",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "shoename",
                          },
                        },
                      ],
                      "location": 28,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 703 1`] = `
[
  "create table rules_foo (f1 int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rules_foo",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "f1",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 706 1`] = `
[
  "create rule rules_foorule as on insert to rules_foo where f1 < 100
do instead nothing",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rules_foo",
              "relpersistence": "p",
            },
            "rulename": "rules_foorule",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 61,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 100,
                    },
                    "location": 63,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 709 1`] = `
[
  "insert into rules_foo values(1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rules_foo",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 29,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 713 1`] = `
[
  "drop rule rules_foorule on rules_foo",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rules_foo",
                      },
                    },
                    {
                      "String": {
                        "sval": "rules_foorule",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_RULE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 716 1`] = `
[
  "create rule rules_foorule as on insert to rules_foo where f1 < 100
do instead insert into rules_foo2 values (f1)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 90,
                    "relname": "rules_foo2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 109,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rules_foo",
              "relpersistence": "p",
            },
            "rulename": "rules_foorule",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 61,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 100,
                    },
                    "location": 63,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 719 1`] = `
[
  "create rule rules_foorule as on insert to rules_foo where f1 < 100
do instead insert into rules_foo2 values (new.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 90,
                    "relname": "rules_foo2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 109,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 42,
              "relname": "rules_foo",
              "relpersistence": "p",
            },
            "rulename": "rules_foorule",
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 58,
                  },
                },
                "location": 61,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 100,
                    },
                    "location": 63,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 725 1`] = `
[
  "select * from rules_foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "rules_foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 737 1`] = `
[
  "create table pparent (pid int, txt text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "pparent",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "pid",
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 26,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "txt",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 741 1`] = `
[
  "create table cchild (pid int, descrip text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "cchild",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "pid",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "descrip",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 38,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 744 1`] = `
[
  "create view vview as
  select pparent.pid, txt, descrip from
    pparent left join cchild using (pid)",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 65,
                          "relname": "pparent",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 83,
                          "relname": "cchild",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "pid",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 30,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "pparent",
                              },
                            },
                            {
                              "String": {
                                "sval": "pid",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 43,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "txt",
                              },
                            },
                          ],
                          "location": 43,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 48,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "descrip",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "vview",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 748 1`] = `
[
  "create rule rrule as
  on update to vview do instead
(
  insert into cchild (pid, descrip)
    select old.pid, new.descrip where old.descrip isnull;
  update cchild set descrip = new.descrip where cchild.pid = old.pid;
)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "cols": [
                    {
                      "ResTarget": {
                        "location": 77,
                        "name": "pid",
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 82,
                        "name": "descrip",
                      },
                    },
                  ],
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 69,
                    "relname": "cchild",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 102,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "old",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "pid",
                                    },
                                  },
                                ],
                                "location": 102,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 111,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "descrip",
                                    },
                                  },
                                ],
                                "location": 111,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "NullTest": {
                          "arg": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "old",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "descrip",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                          "location": 141,
                          "nulltesttype": "IS_NULL",
                        },
                      },
                    },
                  },
                },
              },
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 158,
                    "relname": "cchild",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 169,
                        "name": "descrip",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "descrip",
                                },
                              },
                            ],
                            "location": 179,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "cchild",
                              },
                            },
                            {
                              "String": {
                                "sval": "pid",
                              },
                            },
                          ],
                          "location": 197,
                        },
                      },
                      "location": 208,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "pid",
                              },
                            },
                          ],
                          "location": 210,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 36,
              "relname": "vview",
              "relpersistence": "p",
            },
            "rulename": "rrule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 756 1`] = `
[
  "select * from vview",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "vview",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 765 1`] = `
[
  "drop rule rrule on vview",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "vview",
                      },
                    },
                    {
                      "String": {
                        "sval": "rrule",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_RULE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 782 1`] = `
[
  "SELECT tablename, rulename, definition FROM pg_rules
WHERE schemaname = 'pg_catalog'
ORDER BY tablename, rulename",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 44,
                  "relname": "pg_rules",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tablename",
                          },
                        },
                      ],
                      "location": 94,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "rulename",
                          },
                        },
                      ],
                      "location": 105,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tablename",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "rulename",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 28,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "definition",
                          },
                        },
                      ],
                      "location": 28,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "schemaname",
                        },
                      },
                    ],
                    "location": 59,
                  },
                },
                "location": 70,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 72,
                    "sval": {
                      "sval": "pg_catalog",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 796 1`] = `
[
  "CREATE OR REPLACE RULE myrule AS ON INSERT TO ruletest_tbl
	DO INSTEAD INSERT INTO ruletest_tbl2 VALUES (10, 10)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 83,
                    "relname": "ruletest_tbl2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 105,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 109,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 46,
              "relname": "ruletest_tbl",
              "relpersistence": "p",
            },
            "replace": true,
            "rulename": "myrule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 799 1`] = `
[
  "INSERT INTO ruletest_tbl VALUES (99, 99)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "ruletest_tbl",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 99,
                            },
                            "location": 33,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 99,
                            },
                            "location": 37,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 806 1`] = `
[
  "SELECT * FROM ruletest_tbl2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "ruletest_tbl2",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 810 1`] = `
[
  "create table rule_and_refint_t1 (
	id1a integer,
	id1b integer,

	primary key (id1a, id1b)
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_and_refint_t1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id1a",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "id1b",
                  "is_local": true,
                  "location": 50,
                  "typeName": {
                    "location": 55,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "id1a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id1b",
                      },
                    },
                  ],
                  "location": 66,
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 817 1`] = `
[
  "create table rule_and_refint_t2 (
	id2a integer,
	id2c integer,

	primary key (id2a, id2c)
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_and_refint_t2",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id2a",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "id2c",
                  "is_local": true,
                  "location": 50,
                  "typeName": {
                    "location": 55,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "id2a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id2c",
                      },
                    },
                  ],
                  "location": 66,
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 824 1`] = `
[
  "create table rule_and_refint_t3 (
	id3a integer,
	id3b integer,
	id3c integer,
	data text,

	primary key (id3a, id3b, id3c),

	foreign key (id3a, id3b) references rule_and_refint_t1 (id1a, id1b),
	foreign key (id3a, id3c) references rule_and_refint_t2 (id2a, id2c)
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_and_refint_t3",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id3a",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "id3b",
                  "is_local": true,
                  "location": 50,
                  "typeName": {
                    "location": 55,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "id3c",
                  "is_local": true,
                  "location": 65,
                  "typeName": {
                    "location": 70,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "data",
                  "is_local": true,
                  "location": 80,
                  "typeName": {
                    "location": 85,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "id3a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id3b",
                      },
                    },
                    {
                      "String": {
                        "sval": "id3c",
                      },
                    },
                  ],
                  "location": 93,
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_FOREIGN",
                  "fk_attrs": [
                    {
                      "String": {
                        "sval": "id3a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id3b",
                      },
                    },
                  ],
                  "fk_del_action": "a",
                  "fk_matchtype": "s",
                  "fk_upd_action": "a",
                  "initially_valid": true,
                  "location": 127,
                  "pk_attrs": [
                    {
                      "String": {
                        "sval": "id1a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id1b",
                      },
                    },
                  ],
                  "pktable": {
                    "inh": true,
                    "location": 163,
                    "relname": "rule_and_refint_t1",
                    "relpersistence": "p",
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_FOREIGN",
                  "fk_attrs": [
                    {
                      "String": {
                        "sval": "id3a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id3c",
                      },
                    },
                  ],
                  "fk_del_action": "a",
                  "fk_matchtype": "s",
                  "fk_upd_action": "a",
                  "initially_valid": true,
                  "location": 197,
                  "pk_attrs": [
                    {
                      "String": {
                        "sval": "id2a",
                      },
                    },
                    {
                      "String": {
                        "sval": "id2c",
                      },
                    },
                  ],
                  "pktable": {
                    "inh": true,
                    "location": 233,
                    "relname": "rule_and_refint_t2",
                    "relpersistence": "p",
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 842 1`] = `
[
  "insert into rule_and_refint_t2 values (1, 11)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_and_refint_t2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 39,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 42,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 847 1`] = `
[
  "insert into rule_and_refint_t3 values (1, 11, 11, 'row1')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_and_refint_t3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 39,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 42,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 46,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 50,
                            "sval": {
                              "sval": "row1",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 854 1`] = `
[
  "insert into rule_and_refint_t3 values (1, 13, 11, 'row6')
  on conflict do nothing",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_NOTHING",
              "location": 60,
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_and_refint_t3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 39,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 13,
                            },
                            "location": 42,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 46,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 50,
                            "sval": {
                              "sval": "row6",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 857 1`] = `
[
  "insert into rule_and_refint_t3 values (1, 13, 11, 'row6')
  on conflict (id3a, id3b, id3c) do update
  set id3b = excluded.id3b",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "id3a",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                  {
                    "IndexElem": {
                      "name": "id3b",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                  {
                    "IndexElem": {
                      "name": "id3c",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 72,
              },
              "location": 60,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 107,
                    "name": "id3b",
                    "val": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "excluded",
                            },
                          },
                          {
                            "String": {
                              "sval": "id3b",
                            },
                          },
                        ],
                        "location": 114,
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_and_refint_t3",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 39,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 13,
                            },
                            "location": 42,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 46,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 50,
                            "sval": {
                              "sval": "row6",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 861 1`] = `
[
  "insert into shoelace values ('sl9', 0, 'pink', 35.0, 'inch', 0.0)
  on conflict (sl_name) do update
  set sl_avail = excluded.sl_avail",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "sl_name",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 80,
              },
              "location": 68,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 106,
                    "name": "sl_avail",
                    "val": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "excluded",
                            },
                          },
                          {
                            "String": {
                              "sval": "sl_avail",
                            },
                          },
                        ],
                        "location": 117,
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shoelace",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 29,
                            "sval": {
                              "sval": "sl9",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 36,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 39,
                            "sval": {
                              "sval": "pink",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "35.0",
                            },
                            "location": 47,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 53,
                            "sval": {
                              "sval": "inch",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "0.0",
                            },
                            "location": 61,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 865 1`] = `
[
  "create rule rule_and_refint_t3_ins as on insert to rule_and_refint_t3
	where (exists (select 1 from rule_and_refint_t3
			where (((rule_and_refint_t3.id3a = new.id3a)
			and (rule_and_refint_t3.id3b = new.id3b))
			and (rule_and_refint_t3.id3c = new.id3c))))
	do instead update rule_and_refint_t3 set data = new.data
	where (((rule_and_refint_t3.id3a = new.id3a)
	and (rule_and_refint_t3.id3b = new.id3b))
	and (rule_and_refint_t3.id3c = new.id3c))",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 278,
                    "relname": "rule_and_refint_t3",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 301,
                        "name": "data",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "data",
                                },
                              },
                            ],
                            "location": 308,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "rule_and_refint_t3",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3a",
                                    },
                                  },
                                ],
                                "location": 327,
                              },
                            },
                            "location": 351,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3a",
                                    },
                                  },
                                ],
                                "location": 353,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "rule_and_refint_t3",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3b",
                                    },
                                  },
                                ],
                                "location": 369,
                              },
                            },
                            "location": 393,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3b",
                                    },
                                  },
                                ],
                                "location": 395,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "rule_and_refint_t3",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3c",
                                    },
                                  },
                                ],
                                "location": 412,
                              },
                            },
                            "location": 436,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id3c",
                                    },
                                  },
                                ],
                                "location": 438,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 364,
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 51,
              "relname": "rule_and_refint_t3",
              "relpersistence": "p",
            },
            "rulename": "rule_and_refint_t3_ins",
            "whereClause": {
              "SubLink": {
                "location": 78,
                "subLinkType": "EXISTS_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 100,
                          "relname": "rule_and_refint_t3",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 93,
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 93,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "BoolExpr": {
                        "args": [
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "rule_and_refint_t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3a",
                                      },
                                    },
                                  ],
                                  "location": 131,
                                },
                              },
                              "location": 155,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3a",
                                      },
                                    },
                                  ],
                                  "location": 157,
                                },
                              },
                            },
                          },
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "rule_and_refint_t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3b",
                                      },
                                    },
                                  ],
                                  "location": 175,
                                },
                              },
                              "location": 199,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3b",
                                      },
                                    },
                                  ],
                                  "location": 201,
                                },
                              },
                            },
                          },
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "rule_and_refint_t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3c",
                                      },
                                    },
                                  ],
                                  "location": 220,
                                },
                              },
                              "location": 244,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id3c",
                                      },
                                    },
                                  ],
                                  "location": 246,
                                },
                              },
                            },
                          },
                        ],
                        "boolop": "AND_EXPR",
                        "location": 170,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 893 1`] = `
[
  "  select 1 as x, 'aaa'::text as y",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "name": "x",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "name": "y",
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "A_Const": {
                          "location": 17,
                          "sval": {
                            "sval": "aaa",
                          },
                        },
                      },
                      "location": 22,
                      "typeName": {
                        "location": 24,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 897 1`] = `
[
  "create table rules_fooview (x int, y text) partition by list (x)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 43,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 62,
                    "name": "x",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rules_fooview",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "x",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "y",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 901 1`] = `
[
  "create table rules_fooview_part partition of rules_fooview for values in (1)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 45,
                  "relname": "rules_fooview",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "listdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 74,
                  },
                },
              ],
              "location": 70,
              "strategy": "l",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rules_fooview_part",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 905 1`] = `
[
  "drop table rules_fooview",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rules_fooview",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 913 1`] = `
[
  "create table test_1 (id integer primary key) inherits (id)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 55,
                  "relname": "id",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "test_1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 32,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 917 1`] = `
[
  "insert into test_1 (name) values ('Test 1')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 20,
                  "name": "name",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "test_1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 34,
                            "sval": {
                              "sval": "Test 1",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 924 1`] = `
[
  "create view id_ordered as select * from id order by id",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "id",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 52,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "id_ordered",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 926 1`] = `
[
  "create rule update_id_ordered as on update to id_ordered
	do instead update id set name = new.name where id = old.id",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 76,
                    "relname": "id",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 83,
                        "name": "name",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "name",
                                },
                              },
                            ],
                            "location": 90,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                      "location": 108,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 110,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 46,
              "relname": "id_ordered",
              "relpersistence": "p",
            },
            "rulename": "update_id_ordered",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 929 1`] = `
[
  "select * from id_ordered",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "id_ordered",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 935 1`] = `
[
  "drop table id cascade",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_CASCADE",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "id",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 944 1`] = `
[
  "create temp table t1_1 (check (a >= 0 and a < 10)) inherits (t1)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 61,
                  "relname": "t1",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "t1_1",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "Constraint": {
                  "contype": "CONSTR_CHECK",
                  "initially_valid": true,
                  "location": 24,
                  "raw_expr": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                            "location": 33,
                            "name": [
                              {
                                "String": {
                                  "sval": ">=",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {},
                                "location": 36,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                            "location": 44,
                            "name": [
                              {
                                "String": {
                                  "sval": "<",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 10,
                                },
                                "location": 46,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 38,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 947 1`] = `
[
  "create rule t1_ins_1 as on insert to t1
	where new.a >= 0 and new.a < 10
	do instead
	insert into t1_1 values (new.a)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 98,
                    "relname": "t1_1",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 111,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 37,
              "relname": "t1",
              "relpersistence": "p",
            },
            "rulename": "t1_ins_1",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                      "location": 53,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 56,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "new",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 68,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 70,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 58,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 956 1`] = `
[
  "create rule t1_upd_1 as on update to t1
	where old.a >= 0 and old.a < 10
	do instead
	update t1_1 set a = new.a where a = old.a",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 93,
                    "relname": "t1_1",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 102,
                        "name": "a",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 106,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 118,
                        },
                      },
                      "location": 120,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 122,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 37,
              "relname": "t1",
              "relpersistence": "p",
            },
            "rulename": "t1_upd_1",
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                      "location": 53,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 56,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "old",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 68,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 70,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 58,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 965 1`] = `
[
  "set constraint_exclusion = on",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 27,
                  "sval": {
                    "sval": "on",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "constraint_exclusion",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 967 1`] = `
[
  "insert into t1 select * from generate_series(5,19,1) g",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "t1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 5,
                                        },
                                        "location": 45,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 19,
                                        },
                                        "location": 47,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 50,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 29,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 22,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 22,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 970 1`] = `
[
  "select * from only t1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "location": 19,
                  "relname": "t1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 974 1`] = `
[
  "reset constraint_exclusion",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "constraint_exclusion",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 981 1`] = `
[
  "  select * from rules_base where f1 = 1 for update",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "rules_base",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 33,
                  },
                },
                "location": 36,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 38,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 984 1`] = `
[
  "  select * from rules_base where f1 = 11 for update of rules_base",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "rules_base",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 55,
                        "relname": "rules_base",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 33,
                  },
                },
                "location": 36,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 11,
                    },
                    "location": 38,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 987 1`] = `
[
  "  select * from rules_base where f1 = 11 for update of old",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "rules_base",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 55,
                        "relname": "old",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 33,
                  },
                },
                "location": 36,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 11,
                    },
                    "location": 38,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 987 2`] = `
[
  " -- error
drop table rules_base",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rules_base",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1004 1`] = `
[
  "  insert into rules_log values(old.*, 'old', default), (new.*, 'new', default)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 14,
              "relname": "rules_log",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "old",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 31,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 38,
                            "sval": {
                              "sval": "old",
                            },
                          },
                        },
                        {
                          "SetToDefault": {
                            "location": 45,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 56,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 63,
                            "sval": {
                              "sval": "new",
                            },
                          },
                        },
                        {
                          "SetToDefault": {
                            "location": 70,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1010 1`] = `
[
  "  values(old.*, 'old'), (new.*, 'new')",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "valuesLists": [
              {
                "List": {
                  "items": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "old",
                            },
                          },
                          {
                            "A_Star": {},
                          },
                        ],
                        "location": 9,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 16,
                        "sval": {
                          "sval": "old",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "new",
                            },
                          },
                          {
                            "A_Star": {},
                          },
                        ],
                        "location": 25,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 32,
                        "sval": {
                          "sval": "new",
                        },
                      },
                    },
                  ],
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1013 1`] = `
[
  "  insert into rules_log values(null, null, '-', default), (new.*, 'new', default)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 14,
              "relname": "rules_log",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "isnull": true,
                            "location": 31,
                          },
                        },
                        {
                          "A_Const": {
                            "isnull": true,
                            "location": 37,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 43,
                            "sval": {
                              "sval": "-",
                            },
                          },
                        },
                        {
                          "SetToDefault": {
                            "location": 48,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 59,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 66,
                            "sval": {
                              "sval": "new",
                            },
                          },
                        },
                        {
                          "SetToDefault": {
                            "location": 73,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1022 1`] = `
[
  "create rule r5 as on insert to rules_src do instead insert into rules_log AS trgt SELECT NEW.* RETURNING trgt.f1, trgt.f2",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "alias": {
                      "aliasname": "trgt",
                    },
                    "inh": true,
                    "location": 64,
                    "relname": "rules_log",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 105,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "trgt",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f1",
                                },
                              },
                            ],
                            "location": 105,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 114,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "trgt",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f2",
                                },
                              },
                            ],
                            "location": 114,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 89,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 89,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 31,
              "relname": "rules_src",
              "relpersistence": "p",
            },
            "rulename": "r5",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1028 1`] = `
[
  "create rule r7 as on delete to rules_src do instead
  with wins as (insert into int4_tbl as trgt values (0) returning *),
       wupd as (update int4_tbl trgt set f1 = f1+1 returning *),
       wdel as (delete from int4_tbl trgt where f1 = 0 returning *)
  insert into rules_log AS trgt select old.* from wins, wupd, wdel
  returning trgt.f1, trgt.f2",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "alias": {
                      "aliasname": "trgt",
                    },
                    "inh": true,
                    "location": 269,
                    "relname": "rules_log",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 334,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "trgt",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f1",
                                },
                              },
                            ],
                            "location": 334,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 343,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "trgt",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f2",
                                },
                              },
                            ],
                            "location": 343,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 305,
                            "relname": "wins",
                            "relpersistence": "p",
                          },
                        },
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 311,
                            "relname": "wupd",
                            "relpersistence": "p",
                          },
                        },
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 317,
                            "relname": "wdel",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 294,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "old",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 294,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                  "withClause": {
                    "ctes": [
                      {
                        "CommonTableExpr": {
                          "ctematerialized": "CTEMaterializeDefault",
                          "ctename": "wins",
                          "ctequery": {
                            "InsertStmt": {
                              "override": "OVERRIDING_NOT_SET",
                              "relation": {
                                "alias": {
                                  "aliasname": "trgt",
                                },
                                "inh": true,
                                "location": 80,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                              "returningList": [
                                {
                                  "ResTarget": {
                                    "location": 118,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                  },
                                },
                              ],
                              "selectStmt": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "valuesLists": [
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 105,
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "location": 59,
                        },
                      },
                      {
                        "CommonTableExpr": {
                          "ctematerialized": "CTEMaterializeDefault",
                          "ctename": "wupd",
                          "ctequery": {
                            "UpdateStmt": {
                              "relation": {
                                "alias": {
                                  "aliasname": "trgt",
                                },
                                "inh": true,
                                "location": 145,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                              "returningList": [
                                {
                                  "ResTarget": {
                                    "location": 183,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 183,
                                      },
                                    },
                                  },
                                },
                              ],
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 163,
                                    "name": "f1",
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 168,
                                          },
                                        },
                                        "location": 170,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 171,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          "location": 129,
                        },
                      },
                      {
                        "CommonTableExpr": {
                          "ctematerialized": "CTEMaterializeDefault",
                          "ctename": "wdel",
                          "ctequery": {
                            "DeleteStmt": {
                              "relation": {
                                "alias": {
                                  "aliasname": "trgt",
                                },
                                "inh": true,
                                "location": 215,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                              "returningList": [
                                {
                                  "ResTarget": {
                                    "location": 252,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 252,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 235,
                                    },
                                  },
                                  "location": 238,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 240,
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "location": 194,
                        },
                      },
                    ],
                    "location": 54,
                  },
                },
              },
            ],
            "event": "CMD_DELETE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 31,
              "relname": "rules_src",
              "relpersistence": "p",
            },
            "rulename": "r7",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1047 1`] = `
[
  "drop table rule_t1, rule_dest",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rule_t1",
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rule_dest",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1052 1`] = `
[
  "CREATE TABLE rule_t1(a int, b text DEFAULT 'xxx', c int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_t1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_DEFAULT",
                        "location": 35,
                        "raw_expr": {
                          "A_Const": {
                            "location": 43,
                            "sval": {
                              "sval": "xxx",
                            },
                          },
                        },
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 50,
                  "typeName": {
                    "location": 52,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1069 1`] = `
[
  "CREATE TABLE rule_t1 (a INT)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_t1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1072 1`] = `
[
  "CREATE RULE InsertRule AS
    ON INSERT TO rule_v1
    DO INSTEAD
        INSERT INTO rule_t1 VALUES(new.a)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 86,
                    "relname": "rule_t1",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 101,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "rulename": "insertrule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1077 1`] = `
[
  "ALTER RULE InsertRule ON rule_v1 RENAME to NewInsertRule",
  {
    "stmts": [
      {
        "stmt": {
          "RenameStmt": {
            "behavior": "DROP_RESTRICT",
            "newname": "newinsertrule",
            "relation": {
              "inh": true,
              "location": 25,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "relationType": "OBJECT_ACCESS_METHOD",
            "renameType": "OBJECT_RULE",
            "subname": "insertrule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1079 1`] = `
[
  "INSERT INTO rule_v1 VALUES(1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 27,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1087 1`] = `
[
  " -- doesn't exist
ALTER RULE NewInsertRule ON rule_v1 RENAME TO "_RETURN"",
  {
    "stmts": [
      {
        "stmt": {
          "RenameStmt": {
            "behavior": "DROP_RESTRICT",
            "newname": "_RETURN",
            "relation": {
              "inh": true,
              "location": 46,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "relationType": "OBJECT_ACCESS_METHOD",
            "renameType": "OBJECT_RULE",
            "subname": "newinsertrule",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1088 1`] = `
[
  " -- already exists
ALTER RULE "_RETURN" ON rule_v1 RENAME TO abc",
  {
    "stmts": [
      {
        "stmt": {
          "RenameStmt": {
            "behavior": "DROP_RESTRICT",
            "newname": "abc",
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "relationType": "OBJECT_ACCESS_METHOD",
            "renameType": "OBJECT_RULE",
            "subname": "_RETURN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1089 1`] = `
[
  " -- ON SELECT rule cannot be renamed

DROP VIEW rule_v1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "rule_v1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_VIEW",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1097 1`] = `
[
  "create view rule_v1 as values(1,2)",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 30,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 32,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1099 1`] = `
[
  "alter table rule_v1 rename column column2 to q2",
  {
    "stmts": [
      {
        "stmt": {
          "RenameStmt": {
            "behavior": "DROP_RESTRICT",
            "newname": "q2",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "rule_v1",
              "relpersistence": "p",
            },
            "relationType": "OBJECT_TABLE",
            "renameType": "OBJECT_COLUMN",
            "subname": "column2",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1115 1`] = `
[
  "CREATE TABLE hats (
	hat_name    char(10) primary key,
	hat_color   char(10)      -- hat color
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "hats",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "hat_name",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 42,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 38,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "hat_color",
                  "is_local": true,
                  "location": 56,
                  "typeName": {
                    "location": 68,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 73,
                        },
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1120 1`] = `
[
  "CREATE TABLE hat_data (
	hat_name    char(10),
	hat_color   char(10)      -- hat color
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "hat_data",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "hat_name",
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 42,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "hat_color",
                  "is_local": true,
                  "location": 48,
                  "typeName": {
                    "location": 60,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 65,
                        },
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1128 1`] = `
[
  "CREATE RULE hat_nosert AS ON INSERT TO hats
    DO INSTEAD
    INSERT INTO hat_data VALUES (
           NEW.hat_name,
           NEW.hat_color)
        ON CONFLICT (hat_name COLLATE "C" bpchar_pattern_ops) WHERE hat_color = 'green'
        DO NOTHING
        RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "onConflictClause": {
                    "action": "ONCONFLICT_NOTHING",
                    "infer": {
                      "indexElems": [
                        {
                          "IndexElem": {
                            "collation": [
                              {
                                "String": {
                                  "sval": "C",
                                },
                              },
                            ],
                            "name": "hat_name",
                            "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                            "opclass": [
                              {
                                "String": {
                                  "sval": "bpchar_pattern_ops",
                                },
                              },
                            ],
                            "ordering": "SORTBY_DEFAULT",
                          },
                        },
                      ],
                      "location": 164,
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "hat_color",
                                  },
                                },
                              ],
                              "location": 212,
                            },
                          },
                          "location": 222,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "location": 224,
                              "sval": {
                                "sval": "green",
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 152,
                  },
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 75,
                    "relname": "hat_data",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 269,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 269,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_name",
                                      },
                                    },
                                  ],
                                  "location": 104,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_color",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 39,
              "relname": "hats",
              "relpersistence": "p",
            },
            "rulename": "hat_nosert",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1139 1`] = `
[
  "INSERT INTO hats VALUES ('h7', 'black') RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "hats",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 50,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 50,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 25,
                            "sval": {
                              "sval": "h7",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 31,
                            "sval": {
                              "sval": "black",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1147 1`] = `
[
  "CREATE RULE hat_nosert_all AS ON INSERT TO hats
    DO INSTEAD
    INSERT INTO hat_data VALUES (
           NEW.hat_name,
           NEW.hat_color)
        ON CONFLICT
        DO NOTHING
        RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "onConflictClause": {
                    "action": "ONCONFLICT_NOTHING",
                    "location": 156,
                  },
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 79,
                    "relname": "hat_data",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 205,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 205,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_name",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_color",
                                      },
                                    },
                                  ],
                                  "location": 133,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 43,
              "relname": "hats",
              "relpersistence": "p",
            },
            "rulename": "hat_nosert_all",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1162 1`] = `
[
  "CREATE RULE hat_upsert AS ON INSERT TO hats
    DO INSTEAD
    INSERT INTO hat_data VALUES (
           NEW.hat_name,
           NEW.hat_color)
        ON CONFLICT (hat_name)
        DO UPDATE
           SET hat_name = hat_data.hat_name, hat_color = excluded.hat_color
           WHERE excluded.hat_color <>  'forbidden' AND hat_data.* != excluded.*
        RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "onConflictClause": {
                    "action": "ONCONFLICT_UPDATE",
                    "infer": {
                      "indexElems": [
                        {
                          "IndexElem": {
                            "name": "hat_name",
                            "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                            "ordering": "SORTBY_DEFAULT",
                          },
                        },
                      ],
                      "location": 164,
                    },
                    "location": 152,
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 208,
                          "name": "hat_name",
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "hat_data",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "hat_name",
                                  },
                                },
                              ],
                              "location": 219,
                            },
                          },
                        },
                      },
                      {
                        "ResTarget": {
                          "location": 238,
                          "name": "hat_color",
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "excluded",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "hat_color",
                                  },
                                },
                              ],
                              "location": 250,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "BoolExpr": {
                        "args": [
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "excluded",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_color",
                                      },
                                    },
                                  ],
                                  "location": 286,
                                },
                              },
                              "location": 305,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<>",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 309,
                                  "sval": {
                                    "sval": "forbidden",
                                  },
                                },
                              },
                            },
                          },
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "hat_data",
                                      },
                                    },
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 325,
                                },
                              },
                              "location": 336,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<>",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "excluded",
                                      },
                                    },
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 339,
                                },
                              },
                            },
                          },
                        ],
                        "boolop": "AND_EXPR",
                        "location": 321,
                      },
                    },
                  },
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 75,
                    "relname": "hat_data",
                    "relpersistence": "p",
                  },
                  "returningList": [
                    {
                      "ResTarget": {
                        "location": 368,
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 368,
                          },
                        },
                      },
                    },
                  ],
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_name",
                                      },
                                    },
                                  ],
                                  "location": 104,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "hat_color",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 39,
              "relname": "hats",
              "relpersistence": "p",
            },
            "rulename": "hat_upsert",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1184 1`] = `
[
  "explain (costs off) INSERT INTO hats VALUES ('h8', 'forbidden') RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "InsertStmt": {
                "override": "OVERRIDING_NOT_SET",
                "relation": {
                  "inh": true,
                  "location": 32,
                  "relname": "hats",
                  "relpersistence": "p",
                },
                "returningList": [
                  {
                    "ResTarget": {
                      "location": 74,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                ],
                "selectStmt": {
                  "SelectStmt": {
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "valuesLists": [
                      {
                        "List": {
                          "items": [
                            {
                              "A_Const": {
                                "location": 45,
                                "sval": {
                                  "sval": "h8",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 51,
                                "sval": {
                                  "sval": "forbidden",
                                },
                              },
                            },
                          ],
                        },
                      },
                    ],
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1187 1`] = `
[
  "WITH data(hat_name, hat_color) AS MATERIALIZED (
    VALUES ('h8', 'green'),
        ('h9', 'blue'),
        ('h7', 'forbidden')
)
INSERT INTO hats
    SELECT * FROM data
RETURNING *",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 143,
              "relname": "hats",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 181,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 181,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 166,
                      "relname": "data",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 159,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 159,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "hat_name",
                        },
                      },
                      {
                        "String": {
                          "sval": "hat_color",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "data",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 61,
                                    "sval": {
                                      "sval": "h8",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 67,
                                    "sval": {
                                      "sval": "green",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 86,
                                    "sval": {
                                      "sval": "h9",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 92,
                                    "sval": {
                                      "sval": "blue",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "location": 110,
                                    "sval": {
                                      "sval": "h7",
                                    },
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 116,
                                    "sval": {
                                      "sval": "forbidden",
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1206 1`] = `
[
  "DROP RULE hat_upsert ON hats",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "hats",
                      },
                    },
                    {
                      "String": {
                        "sval": "hat_upsert",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_RULE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1208 1`] = `
[
  "drop table hats",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "hats",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1213 1`] = `
[
  "CREATE FUNCTION func_with_set_params() RETURNS integer
    AS 'select 1;'
    LANGUAGE SQL
    SET search_path TO PG_CATALOG
    SET extra_float_digits TO 2
    SET work_mem TO '4MB'
    SET datestyle to iso, mdy
    SET local_preload_libraries TO "Mixed/Case", 'c:/''a"/path', '', '0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789'
    IMMUTABLE STRICT",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "func_with_set_params",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "select 1;",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 59,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 78,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "VariableSetStmt": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 114,
                            "sval": {
                              "sval": "pg_catalog",
                            },
                          },
                        },
                      ],
                      "kind": "VAR_SET_VALUE",
                      "name": "search_path",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "set",
                  "location": 95,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "VariableSetStmt": {
                      "args": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 155,
                          },
                        },
                      ],
                      "kind": "VAR_SET_VALUE",
                      "name": "extra_float_digits",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "set",
                  "location": 129,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "VariableSetStmt": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 177,
                            "sval": {
                              "sval": "4MB",
                            },
                          },
                        },
                      ],
                      "kind": "VAR_SET_VALUE",
                      "name": "work_mem",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "set",
                  "location": 161,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "VariableSetStmt": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 204,
                            "sval": {
                              "sval": "iso",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 209,
                            "sval": {
                              "sval": "mdy",
                            },
                          },
                        },
                      ],
                      "kind": "VAR_SET_VALUE",
                      "name": "datestyle",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "set",
                  "location": 187,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "VariableSetStmt": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 248,
                            "sval": {
                              "sval": "Mixed/Case",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 262,
                            "sval": {
                              "sval": "c:/'a"/path",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 278,
                            "sval": {
                              "sval": "",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 282,
                            "sval": {
                              "sval": "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789",
                            },
                          },
                        },
                      ],
                      "kind": "VAR_SET_VALUE",
                      "name": "local_preload_libraries",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "set",
                  "location": 217,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "immutable",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "volatility",
                  "location": 389,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "Boolean": {
                      "boolval": true,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "strict",
                  "location": 399,
                },
              },
            ],
            "returnType": {
              "location": 47,
              "names": [
                {
                  "String": {
                    "sval": "pg_catalog",
                  },
                },
                {
                  "String": {
                    "sval": "int4",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1225 1`] = `
[
  "SELECT pg_get_constraintdef(0)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 28,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_get_constraintdef",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1240 1`] = `
[
  "CREATE TABLE rules_parted_table (a int) PARTITION BY LIST (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 40,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 59,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rules_parted_table",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1250 1`] = `
[
  "CREATE TABLE rule_merge1 (a int, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "rule_merge1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1261 1`] = `
[
  "MERGE INTO rule_merge1 t USING (SELECT 1 AS a) s
	ON t.a = s.a
	WHEN MATCHED AND t.a < 2 THEN
		UPDATE SET b = b || ' updated by merge'
	WHEN MATCHED AND t.a > 2 THEN
		DELETE
	WHEN NOT MATCHED THEN
		INSERT VALUES (s.a, '')",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 53,
                  },
                },
                "location": 57,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "s",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 59,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "condition": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 81,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 87,
                        },
                      },
                    },
                  },
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 107,
                        "name": "b",
                        "val": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 111,
                              },
                            },
                            "location": 113,
                            "name": [
                              {
                                "String": {
                                  "sval": "||",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "location": 116,
                                "sval": {
                                  "sval": " updated by merge",
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_DELETE",
                  "condition": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 154,
                        },
                      },
                      "location": 158,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 160,
                        },
                      },
                    },
                  },
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 216,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 221,
                        "sval": {
                          "sval": "",
                        },
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "alias": {
                "aliasname": "t",
              },
              "inh": true,
              "location": 11,
              "relname": "rule_merge1",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "s",
                },
                "subquery": {
                  "SelectStmt": {
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 39,
                          "name": "a",
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 39,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1271 1`] = `
[
  "MERGE INTO rule_merge2 t USING (SELECT 1 AS a) s
	ON t.a = s.a
	WHEN MATCHED AND t.a < 2 THEN
		UPDATE SET b = b || ' updated by merge'
	WHEN MATCHED AND t.a > 2 THEN
		DELETE
	WHEN NOT MATCHED THEN
		INSERT VALUES (s.a, '')",
  {
    "stmts": [
      {
        "stmt": {
          "MergeStmt": {
            "joinCondition": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 53,
                  },
                },
                "location": 57,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "s",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 59,
                  },
                },
              },
            },
            "mergeWhenClauses": [
              {
                "MergeWhenClause": {
                  "commandType": "CMD_UPDATE",
                  "condition": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 81,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 87,
                        },
                      },
                    },
                  },
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 107,
                        "name": "b",
                        "val": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 111,
                              },
                            },
                            "location": 113,
                            "name": [
                              {
                                "String": {
                                  "sval": "||",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "location": 116,
                                "sval": {
                                  "sval": " updated by merge",
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  ],
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_DELETE",
                  "condition": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 154,
                        },
                      },
                      "location": 158,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 160,
                        },
                      },
                    },
                  },
                  "matched": true,
                  "override": "OVERRIDING_NOT_SET",
                },
              },
              {
                "MergeWhenClause": {
                  "commandType": "CMD_INSERT",
                  "override": "OVERRIDING_NOT_SET",
                  "values": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 216,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 221,
                        "sval": {
                          "sval": "",
                        },
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "alias": {
                "aliasname": "t",
              },
              "inh": true,
              "location": 11,
              "relname": "rule_merge2",
              "relpersistence": "p",
            },
            "sourceRelation": {
              "RangeSubselect": {
                "alias": {
                  "aliasname": "s",
                },
                "subquery": {
                  "SelectStmt": {
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 39,
                          "name": "a",
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 39,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1281 1`] = `
[
  "CREATE TABLE sf_target(id int, data text, filling int[])",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "sf_target",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 26,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "data",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "filling",
                  "is_local": true,
                  "location": 42,
                  "typeName": {
                    "arrayBounds": [
                      {
                        "Integer": {},
                      },
                    ],
                    "location": 50,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1332 1`] = `
[
  "CREATE TABLE ruletest1 (a int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "ruletest1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 26,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1335 1`] = `
[
  "CREATE RULE rule1 AS ON INSERT TO ruletest1
    DO INSTEAD INSERT INTO ruletest2 VALUES (NEW.*)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 71,
                    "relname": "ruletest2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 89,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 34,
              "relname": "ruletest1",
              "relpersistence": "p",
            },
            "rulename": "rule1",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1338 1`] = `
[
  "INSERT INTO ruletest1 VALUES (1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "ruletest1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 30,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1349 1`] = `
[
  "SELECT * FROM ruletest1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "ruletest1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1352 1`] = `
[
  "DROP TABLE ruletest1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "ruletest1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1359 1`] = `
[
  "CREATE USER regress_rule_user1",
  {
    "stmts": [
      {
        "stmt": {
          "CreateRoleStmt": {
            "role": "regress_rule_user1",
            "stmt_type": "ROLESTMT_USER",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1361 1`] = `
[
  "CREATE TABLE ruletest_t1 (x int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "ruletest_t1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "x",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1364 1`] = `
[
  "    SELECT * FROM ruletest_t1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 18,
                  "relname": "ruletest_t1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1367 1`] = `
[
  "CREATE RULE rule1 AS ON INSERT TO ruletest_v1
    DO INSTEAD INSERT INTO ruletest_t2 VALUES (NEW.*)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 73,
                    "relname": "ruletest_t2",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 93,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 34,
              "relname": "ruletest_v1",
              "relpersistence": "p",
            },
            "rulename": "rule1",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1370 1`] = `
[
  "SET SESSION AUTHORIZATION regress_rule_user1",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 26,
                  "sval": {
                    "sval": "regress_rule_user1",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "session_authorization",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1373 1`] = `
[
  "RESET SESSION AUTHORIZATION",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "session_authorization",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1377 1`] = `
[
  "CREATE TABLE ruletest_t3 (x int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "ruletest_t3",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "x",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1390 1`] = `
[
  "DROP VIEW ruletest_v1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "ruletest_v1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_VIEW",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rules.sql > line 1396 1`] = `
[
  "DROP USER regress_rule_user1",
  {
    "stmts": [
      {
        "stmt": {
          "DropRoleStmt": {
            "roles": [
              {
                "RoleSpec": {
                  "location": 10,
                  "rolename": "regress_rule_user1",
                  "roletype": "ROLESPEC_CSTRING",
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
