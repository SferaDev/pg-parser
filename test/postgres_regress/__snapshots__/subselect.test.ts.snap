// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`subselect.sql > line 7 1`] = `
[
  "SELECT 1 AS zero WHERE 1 NOT IN (SELECT 1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "zero",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 25,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 40,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 40,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                      "testexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 23,
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 25,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 9 1`] = `
[
  "SELECT 1 AS zero WHERE 1 IN (SELECT 2)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "zero",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 25,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 36,
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 2,
                              },
                              "location": 36,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 23,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 16 1`] = `
[
  "SELECT * FROM ((SELECT 1 AS x)), ((SELECT * FROM ((SELECT 2 AS y))))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 23,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 23,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeSubselect": {
                            "subquery": {
                              "SelectStmt": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 58,
                                      "name": "y",
                                      "val": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 2,
                                          },
                                          "location": 58,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 42,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 18 1`] = `
[
  "(SELECT 2) UNION SELECT 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "larg": {
              "limitOption": "LIMIT_OPTION_DEFAULT",
              "op": "SETOP_NONE",
              "targetList": [
                {
                  "ResTarget": {
                    "location": 8,
                    "val": {
                      "A_Const": {
                        "ival": {
                          "ival": 2,
                        },
                        "location": 8,
                      },
                    },
                  },
                },
              ],
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_UNION",
            "rarg": {
              "limitOption": "LIMIT_OPTION_DEFAULT",
              "op": "SETOP_NONE",
              "targetList": [
                {
                  "ResTarget": {
                    "location": 24,
                    "val": {
                      "A_Const": {
                        "ival": {
                          "ival": 2,
                        },
                        "location": 24,
                      },
                    },
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 21 1`] = `
[
  "SELECT ((SELECT 2) UNION SELECT 2)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "larg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 16,
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 16,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 32,
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 32,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 24 1`] = `
[
  "SELECT (SELECT ARRAY[1,2,3])[1]",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "SubLink": {
                          "location": 7,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 15,
                                    "val": {
                                      "A_ArrayExpr": {
                                        "elements": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 21,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 23,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 3,
                                              },
                                              "location": 25,
                                            },
                                          },
                                        ],
                                        "location": 15,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "indirection": [
                        {
                          "A_Indices": {
                            "uidx": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 29,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 36 1`] = `
[
  "INSERT INTO SUBSELECT_TBL VALUES (1, 2, 3)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "subselect_tbl",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 34,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 37,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 40,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 45 1`] = `
[
  "SELECT * FROM SUBSELECT_TBL",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 52 1`] = `
[
  "SELECT f1 AS "Uncorrelated Field" FROM SUBSELECT_TBL
  WHERE f1 IN (SELECT f2 FROM SUBSELECT_TBL)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 39,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "Uncorrelated Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 64,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 83,
                          "relname": "subselect_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 75,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 75,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 61,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 55 1`] = `
[
  "SELECT f1 AS "Uncorrelated Field" FROM SUBSELECT_TBL
  WHERE f1 IN (SELECT f2 FROM SUBSELECT_TBL WHERE
    f2 IN (SELECT f1 FROM SUBSELECT_TBL))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 39,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "Uncorrelated Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 64,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 83,
                          "relname": "subselect_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 75,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 75,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "SubLink": {
                        "location": 110,
                        "subLinkType": "ANY_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 129,
                                  "relname": "subselect_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 121,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 121,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "testexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "f2",
                                },
                              },
                            ],
                            "location": 107,
                          },
                        },
                      },
                    },
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 61,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 59 1`] = `
[
  "SELECT f1, f2
  FROM SUBSELECT_TBL
  WHERE (f1, f2) NOT IN (SELECT f2, CAST(f3 AS int4) FROM SUBSELECT_TBL
                         WHERE f3 IS NOT NULL)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 21,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f2",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 52,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 93,
                                "relname": "subselect_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 67,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f2",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 71,
                                "val": {
                                  "TypeCast": {
                                    "arg": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f3",
                                            },
                                          },
                                        ],
                                        "location": 76,
                                      },
                                    },
                                    "location": 71,
                                    "typeName": {
                                      "location": 82,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "int4",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "NullTest": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f3",
                                      },
                                    },
                                  ],
                                  "location": 138,
                                },
                              },
                              "location": 141,
                              "nulltesttype": "IS_NOT_NULL",
                            },
                          },
                        },
                      },
                      "testexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 44,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f2",
                                    },
                                  },
                                ],
                                "location": 48,
                              },
                            },
                          ],
                          "location": 43,
                          "row_format": "COERCE_IMPLICIT_CAST",
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 52,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 70 1`] = `
[
  "SELECT f1 AS "Correlated Field", f3 AS "Second Field"
  FROM SUBSELECT_TBL upper
  WHERE f1 IN
    (SELECT f2 FROM SUBSELECT_TBL WHERE CAST(upper.f2 AS float) = f3)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "upper",
                  },
                  "inh": true,
                  "location": 61,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "Correlated Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 33,
                  "name": "Second Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f3",
                          },
                        },
                      ],
                      "location": 33,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 92,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 115,
                          "relname": "subselect_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 107,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 107,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "TypeCast": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "upper",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f2",
                                    },
                                  },
                                ],
                                "location": 140,
                              },
                            },
                            "location": 135,
                            "typeName": {
                              "location": 152,
                              "names": [
                                {
                                  "String": {
                                    "sval": "pg_catalog",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "float8",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                        "location": 159,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "f3",
                                },
                              },
                            ],
                            "location": 161,
                          },
                        },
                      },
                    },
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 89,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 75 1`] = `
[
  "SELECT f1 AS "Correlated Field", f3 AS "Second Field"
  FROM SUBSELECT_TBL upper
  WHERE f3 IN (SELECT upper.f1 + f2 FROM SUBSELECT_TBL
               WHERE f2 = CAST(f3 AS integer))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "upper",
                  },
                  "inh": true,
                  "location": 61,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "Correlated Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 33,
                  "name": "Second Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f3",
                          },
                        },
                      ],
                      "location": 33,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 92,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 122,
                          "relname": "subselect_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 103,
                          "val": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "upper",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 103,
                                },
                              },
                              "location": 112,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f2",
                                      },
                                    },
                                  ],
                                  "location": 114,
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "f2",
                                },
                              },
                            ],
                            "location": 157,
                          },
                        },
                        "location": 160,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "TypeCast": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f3",
                                    },
                                  },
                                ],
                                "location": 167,
                              },
                            },
                            "location": 162,
                            "typeName": {
                              "location": 173,
                              "names": [
                                {
                                  "String": {
                                    "sval": "pg_catalog",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "int4",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                      },
                    },
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f3",
                        },
                      },
                    ],
                    "location": 89,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 80 1`] = `
[
  "SELECT f1 AS "Correlated Field"
  FROM SUBSELECT_TBL
  WHERE (f1, f2) IN (SELECT f2, CAST(f3 AS int4) FROM SUBSELECT_TBL
                     WHERE f3 IS NOT NULL)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 39,
                  "relname": "subselect_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "Correlated Field",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 70,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 107,
                          "relname": "subselect_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 81,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 81,
                            },
                          },
                        },
                      },
                      {
                        "ResTarget": {
                          "location": 85,
                          "val": {
                            "TypeCast": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f3",
                                      },
                                    },
                                  ],
                                  "location": 90,
                                },
                              },
                              "location": 85,
                              "typeName": {
                                "location": 96,
                                "names": [
                                  {
                                    "String": {
                                      "sval": "int4",
                                    },
                                  },
                                ],
                                "typemod": -1,
                              },
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "NullTest": {
                        "arg": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "f3",
                                },
                              },
                            ],
                            "location": 148,
                          },
                        },
                        "location": 151,
                        "nulltesttype": "IS_NOT_NULL",
                      },
                    },
                  },
                },
                "testexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f2",
                              },
                            },
                          ],
                          "location": 66,
                        },
                      },
                    ],
                    "location": 61,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 90 1`] = `
[
  "SELECT * FROM (SELECT * FROM int4_tbl), (VALUES (123456)) WHERE f1 = column1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 29,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 22,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 22,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 123456,
                                  },
                                  "location": 49,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 64,
                  },
                },
                "location": 67,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "column1",
                        },
                      },
                    ],
                    "location": 69,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 92 1`] = `
[
  "CREATE VIEW view_unnamed_ss AS
SELECT * FROM (SELECT * FROM (SELECT abs(f1) AS a1 FROM int4_tbl)),
              (SELECT * FROM int8_tbl)
  WHERE a1 < 10 AND q1 > a1 ORDER BY q1, q2",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "subquery": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "inh": true,
                                          "location": 87,
                                          "relname": "int4_tbl",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 68,
                                          "name": "a1",
                                          "val": {
                                            "FuncCall": {
                                              "args": [
                                                {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 72,
                                                  },
                                                },
                                              ],
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "abs",
                                                  },
                                                },
                                              ],
                                              "location": 68,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 128,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 121,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 121,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 175,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 179,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a1",
                                  },
                                },
                              ],
                              "location": 146,
                            },
                          },
                          "location": 149,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 151,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 158,
                            },
                          },
                          "location": 161,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a1",
                                  },
                                },
                              ],
                              "location": 163,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 154,
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "view_unnamed_ss",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 97 1`] = `
[
  "SELECT * FROM view_unnamed_ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "view_unnamed_ss",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 106 1`] = `
[
  "SELECT * FROM (SELECT * FROM int4_tbl), int8_tbl AS unnamed_subquery
  WHERE f1 = q1
  FOR UPDATE OF unnamed_subquery",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 29,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 22,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 22,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "unnamed_subquery",
                  },
                  "inh": true,
                  "location": 40,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 101,
                        "relname": "unnamed_subquery",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 77,
                  },
                },
                "location": 80,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "q1",
                        },
                      },
                    ],
                    "location": 82,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 123 1`] = `
[
  "select q1, float8(count(*)) / (select count(*) from int8_tbl)
from int8_tbl group by q1 order by q1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 67,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "q1",
                      },
                    },
                  ],
                  "location": 85,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q1",
                          },
                        },
                      ],
                      "location": 97,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "FuncCall": {
                          "args": [
                            {
                              "FuncCall": {
                                "agg_star": true,
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "count",
                                    },
                                  },
                                ],
                                "location": 18,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "float8",
                              },
                            },
                          ],
                          "location": 11,
                        },
                      },
                      "location": 28,
                      "name": [
                        {
                          "String": {
                            "sval": "/",
                          },
                        },
                      ],
                      "rexpr": {
                        "SubLink": {
                          "location": 30,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 52,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 38,
                                    "val": {
                                      "FuncCall": {
                                        "agg_star": true,
                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                        "funcname": [
                                          {
                                            "String": {
                                              "sval": "count",
                                            },
                                          },
                                        ],
                                        "location": 38,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 137 1`] = `
[
  "explain (verbose, costs off)
select 1 = all (select (select 1))",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "SubLink": {
                          "location": 38,
                          "operName": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "subLinkType": "ALL_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 52,
                                    "val": {
                                      "SubLink": {
                                        "location": 52,
                                        "subLinkType": "EXPR_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 60,
                                                  "val": {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 1,
                                                      },
                                                      "location": 60,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          "testexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 36,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 144 1`] = `
[
  "explain (costs off)
select * from int4_tbl o where exists
  (select 1 from int4_tbl i where i.f1=o.f1 limit null)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "o",
                      },
                      "inh": true,
                      "location": 34,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 51,
                    "subLinkType": "EXISTS_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i",
                              },
                              "inh": true,
                              "location": 75,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitCount": {
                          "A_Const": {
                            "isnull": true,
                            "location": 108,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 68,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 68,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 92,
                              },
                            },
                            "location": 96,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "o",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 97,
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 148 1`] = `
[
  "select * from int4_tbl o where not exists
  (select 1 from int4_tbl i where i.f1=o.f1 limit 1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "o",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 35,
                      "subLinkType": "EXISTS_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i",
                                },
                                "inh": true,
                                "location": 59,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 92,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 52,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 52,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 76,
                                },
                              },
                              "location": 80,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "o",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 81,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 31,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 151 1`] = `
[
  "select * from int4_tbl o where exists
  (select 1 from int4_tbl i where i.f1=o.f1 limit 0)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "o",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 31,
                "subLinkType": "EXISTS_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitCount": {
                      "A_Const": {
                        "ival": {},
                        "location": 88,
                      },
                    },
                    "limitOption": "LIMIT_OPTION_COUNT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 48,
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 48,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "i",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f1",
                                },
                              },
                            ],
                            "location": 72,
                          },
                        },
                        "location": 76,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f1",
                                },
                              },
                            ],
                            "location": 77,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 181 1`] = `
[
  "INSERT INTO foo VALUES (1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "foo",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 183 1`] = `
[
  "INSERT INTO bar VALUES (1, 1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "bar",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 27,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 188 1`] = `
[
  "SELECT * FROM foo WHERE id IN
    (SELECT id2 FROM (SELECT DISTINCT id1, id2 FROM bar) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 27,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "distinctClause": [
                                {},
                              ],
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 82,
                                    "relname": "bar",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 68,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id1",
                                            },
                                          },
                                        ],
                                        "location": 68,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 73,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id2",
                                            },
                                          },
                                        ],
                                        "location": 73,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 42,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "id2",
                                  },
                                },
                              ],
                              "location": 42,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "location": 24,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 191 1`] = `
[
  "    (SELECT id2 FROM (SELECT id1,id2 FROM bar GROUP BY id1,id2) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 42,
                            "relname": "bar",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "id1",
                                },
                              },
                            ],
                            "location": 55,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "id2",
                                },
                              },
                            ],
                            "location": 59,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 29,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 29,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 33,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "id2",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 193 1`] = `
[
  "    (SELECT id2 FROM (SELECT id1, id2 FROM bar UNION
                      SELECT id1, id2 FROM bar) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "larg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 43,
                              "relname": "bar",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 29,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 29,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 34,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id2",
                                      },
                                    },
                                  ],
                                  "location": 34,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_UNION",
                      "rarg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 96,
                              "relname": "bar",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 82,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 82,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 87,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id2",
                                      },
                                    },
                                  ],
                                  "location": 87,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "id2",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 197 1`] = `
[
  "SELECT * FROM foo WHERE id IN
    (SELECT id2 FROM (SELECT DISTINCT ON (id2) id1, id2 FROM bar) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "foo",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 27,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "distinctClause": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 72,
                                  },
                                },
                              ],
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 91,
                                    "relname": "bar",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 77,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id1",
                                            },
                                          },
                                        ],
                                        "location": 77,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 82,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id2",
                                            },
                                          },
                                        ],
                                        "location": 82,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 42,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "id2",
                                  },
                                },
                              ],
                              "location": 42,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                    "location": 24,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 200 1`] = `
[
  "    (SELECT id2 FROM (SELECT id2 FROM bar GROUP BY id2) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 38,
                            "relname": "bar",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "id2",
                                },
                              },
                            ],
                            "location": 51,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 29,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 29,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "id2",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 202 1`] = `
[
  "    (SELECT id2 FROM (SELECT id2 FROM bar UNION
                      SELECT id2 FROM bar) AS s)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "larg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 38,
                              "relname": "bar",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 29,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id2",
                                      },
                                    },
                                  ],
                                  "location": 29,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_UNION",
                      "rarg": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 86,
                              "relname": "bar",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 77,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "id2",
                                      },
                                    },
                                  ],
                                  "location": 77,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "id2",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 216 1`] = `
[
  "INSERT INTO orderstest VALUES (1, 1, false)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "orderstest",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 31,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 34,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {},
                            "location": 37,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 228 1`] = `
[
  "CREATE VIEW orders_view AS
SELECT *,
(SELECT CASE
   WHEN ord.approver_ref=1 THEN '---' ELSE 'Approved'
 END) AS "Approved",
(SELECT CASE
 WHEN ord.ordercanceled
 THEN 'Canceled'
 ELSE
  (SELECT CASE
		WHEN ord.po_ref=1
		THEN
		 (SELECT CASE
				WHEN ord.approver_ref=1
				THEN '---'
				ELSE 'Approved'
			END)
		ELSE 'PO'
	END)
END) AS "Status",
(CASE
 WHEN ord.ordercanceled
 THEN 'Canceled'
 ELSE
  (CASE
		WHEN ord.po_ref=1
		THEN
		 (CASE
				WHEN ord.approver_ref=1
				THEN '---'
				ELSE 'Approved'
			END)
		ELSE 'PO'
	END)
END) AS "Status_OK"
FROM orderstest ord",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "ord",
                      },
                      "inh": true,
                      "location": 561,
                      "relname": "orderstest",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "name": "Approved",
                      "val": {
                        "SubLink": {
                          "location": 37,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 45,
                                    "val": {
                                      "CaseExpr": {
                                        "args": [
                                          {
                                            "CaseWhen": {
                                              "expr": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "ord",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "approver_ref",
                                                          },
                                                        },
                                                      ],
                                                      "location": 58,
                                                    },
                                                  },
                                                  "location": 74,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 1,
                                                      },
                                                      "location": 75,
                                                    },
                                                  },
                                                },
                                              },
                                              "location": 53,
                                              "result": {
                                                "A_Const": {
                                                  "location": 82,
                                                  "sval": {
                                                    "sval": "---",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "defresult": {
                                          "A_Const": {
                                            "location": 93,
                                            "sval": {
                                              "sval": "Approved",
                                            },
                                          },
                                        },
                                        "location": 45,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 125,
                      "name": "Status",
                      "val": {
                        "SubLink": {
                          "location": 125,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 133,
                                    "val": {
                                      "CaseExpr": {
                                        "args": [
                                          {
                                            "CaseWhen": {
                                              "expr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "ord",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "ordercanceled",
                                                      },
                                                    },
                                                  ],
                                                  "location": 144,
                                                },
                                              },
                                              "location": 139,
                                              "result": {
                                                "A_Const": {
                                                  "location": 168,
                                                  "sval": {
                                                    "sval": "Canceled",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "defresult": {
                                          "SubLink": {
                                            "location": 187,
                                            "subLinkType": "EXPR_SUBLINK",
                                            "subselect": {
                                              "SelectStmt": {
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 195,
                                                      "val": {
                                                        "CaseExpr": {
                                                          "args": [
                                                            {
                                                              "CaseWhen": {
                                                                "expr": {
                                                                  "A_Expr": {
                                                                    "kind": "AEXPR_OP",
                                                                    "lexpr": {
                                                                      "ColumnRef": {
                                                                        "fields": [
                                                                          {
                                                                            "String": {
                                                                              "sval": "ord",
                                                                            },
                                                                          },
                                                                          {
                                                                            "String": {
                                                                              "sval": "po_ref",
                                                                            },
                                                                          },
                                                                        ],
                                                                        "location": 207,
                                                                      },
                                                                    },
                                                                    "location": 217,
                                                                    "name": [
                                                                      {
                                                                        "String": {
                                                                          "sval": "=",
                                                                        },
                                                                      },
                                                                    ],
                                                                    "rexpr": {
                                                                      "A_Const": {
                                                                        "ival": {
                                                                          "ival": 1,
                                                                        },
                                                                        "location": 218,
                                                                      },
                                                                    },
                                                                  },
                                                                },
                                                                "location": 202,
                                                                "result": {
                                                                  "SubLink": {
                                                                    "location": 230,
                                                                    "subLinkType": "EXPR_SUBLINK",
                                                                    "subselect": {
                                                                      "SelectStmt": {
                                                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                        "op": "SETOP_NONE",
                                                                        "targetList": [
                                                                          {
                                                                            "ResTarget": {
                                                                              "location": 238,
                                                                              "val": {
                                                                                "CaseExpr": {
                                                                                  "args": [
                                                                                    {
                                                                                      "CaseWhen": {
                                                                                        "expr": {
                                                                                          "A_Expr": {
                                                                                            "kind": "AEXPR_OP",
                                                                                            "lexpr": {
                                                                                              "ColumnRef": {
                                                                                                "fields": [
                                                                                                  {
                                                                                                    "String": {
                                                                                                      "sval": "ord",
                                                                                                    },
                                                                                                  },
                                                                                                  {
                                                                                                    "String": {
                                                                                                      "sval": "approver_ref",
                                                                                                    },
                                                                                                  },
                                                                                                ],
                                                                                                "location": 252,
                                                                                              },
                                                                                            },
                                                                                            "location": 268,
                                                                                            "name": [
                                                                                              {
                                                                                                "String": {
                                                                                                  "sval": "=",
                                                                                                },
                                                                                              },
                                                                                            ],
                                                                                            "rexpr": {
                                                                                              "A_Const": {
                                                                                                "ival": {
                                                                                                  "ival": 1,
                                                                                                },
                                                                                                "location": 269,
                                                                                              },
                                                                                            },
                                                                                          },
                                                                                        },
                                                                                        "location": 247,
                                                                                        "result": {
                                                                                          "A_Const": {
                                                                                            "location": 280,
                                                                                            "sval": {
                                                                                              "sval": "---",
                                                                                            },
                                                                                          },
                                                                                        },
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                  "defresult": {
                                                                                    "A_Const": {
                                                                                      "location": 295,
                                                                                      "sval": {
                                                                                        "sval": "Approved",
                                                                                      },
                                                                                    },
                                                                                  },
                                                                                  "location": 238,
                                                                                },
                                                                              },
                                                                            },
                                                                          },
                                                                        ],
                                                                      },
                                                                    },
                                                                  },
                                                                },
                                                              },
                                                            },
                                                          ],
                                                          "defresult": {
                                                            "A_Const": {
                                                              "location": 321,
                                                              "sval": {
                                                                "sval": "PO",
                                                              },
                                                            },
                                                          },
                                                          "location": 195,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                        "location": 133,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 350,
                      "name": "Status_OK",
                      "val": {
                        "CaseExpr": {
                          "args": [
                            {
                              "CaseWhen": {
                                "expr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ord",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "ordercanceled",
                                        },
                                      },
                                    ],
                                    "location": 362,
                                  },
                                },
                                "location": 357,
                                "result": {
                                  "A_Const": {
                                    "location": 386,
                                    "sval": {
                                      "sval": "Canceled",
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "defresult": {
                            "CaseExpr": {
                              "args": [
                                {
                                  "CaseWhen": {
                                    "expr": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "ord",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "po_ref",
                                                },
                                              },
                                            ],
                                            "location": 418,
                                          },
                                        },
                                        "location": 428,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 429,
                                          },
                                        },
                                      },
                                    },
                                    "location": 413,
                                    "result": {
                                      "CaseExpr": {
                                        "args": [
                                          {
                                            "CaseWhen": {
                                              "expr": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "ord",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "approver_ref",
                                                          },
                                                        },
                                                      ],
                                                      "location": 456,
                                                    },
                                                  },
                                                  "location": 472,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 1,
                                                      },
                                                      "location": 473,
                                                    },
                                                  },
                                                },
                                              },
                                              "location": 451,
                                              "result": {
                                                "A_Const": {
                                                  "location": 484,
                                                  "sval": {
                                                    "sval": "---",
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "defresult": {
                                          "A_Const": {
                                            "location": 499,
                                            "sval": {
                                              "sval": "Approved",
                                            },
                                          },
                                        },
                                        "location": 442,
                                      },
                                    },
                                  },
                                },
                              ],
                              "defresult": {
                                "A_Const": {
                                  "location": 525,
                                  "sval": {
                                    "sval": "PO",
                                  },
                                },
                              },
                              "location": 406,
                            },
                          },
                          "location": 351,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "orders_view",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 265 1`] = `
[
  "SELECT * FROM orders_view",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "orders_view",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 267 1`] = `
[
  "DROP TABLE orderstest cascade",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_CASCADE",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "orderstest",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 279 1`] = `
[
  "create temp table shipped (
    ttype       char(2),
    ordnum      int4,
    partnum     text,
    value       float8
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "shipped",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "ttype",
                  "is_local": true,
                  "location": 32,
                  "typeName": {
                    "location": 44,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 49,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "ordnum",
                  "is_local": true,
                  "location": 57,
                  "typeName": {
                    "location": 69,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "partnum",
                  "is_local": true,
                  "location": 79,
                  "typeName": {
                    "location": 91,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "value",
                  "is_local": true,
                  "location": 101,
                  "typeName": {
                    "location": 113,
                    "names": [
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 286 1`] = `
[
  "create temp view shipped_view as
    select * from shipped where ttype = 'wt'",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 51,
                      "relname": "shipped",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 44,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 44,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ttype",
                            },
                          },
                        ],
                        "location": 65,
                      },
                    },
                    "location": 71,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "location": 73,
                        "sval": {
                          "sval": "wt",
                        },
                      },
                    },
                  },
                },
              },
            },
            "view": {
              "inh": true,
              "location": 17,
              "relname": "shipped_view",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 289 1`] = `
[
  "create rule shipped_view_insert as on insert to shipped_view do instead
    insert into shipped values('wt', new.ordnum, new.partnum, new.value)",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "InsertStmt": {
                  "override": "OVERRIDING_NOT_SET",
                  "relation": {
                    "inh": true,
                    "location": 88,
                    "relname": "shipped",
                    "relpersistence": "p",
                  },
                  "selectStmt": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "location": 103,
                                  "sval": {
                                    "sval": "wt",
                                  },
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "ordnum",
                                      },
                                    },
                                  ],
                                  "location": 109,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "partnum",
                                      },
                                    },
                                  ],
                                  "location": 121,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "new",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "value",
                                      },
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "event": "CMD_INSERT",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 48,
              "relname": "shipped_view",
              "relpersistence": "p",
            },
            "rulename": "shipped_view_insert",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 292 1`] = `
[
  "insert into parts (partnum, cost) values (1, 1234.56)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 19,
                  "name": "partnum",
                },
              },
              {
                "ResTarget": {
                  "location": 28,
                  "name": "cost",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "parts",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 42,
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "1234.56",
                            },
                            "location": 45,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 294 1`] = `
[
  "insert into shipped_view (ordnum, partnum, value)
    values (0, 1, (select cost from parts where partnum = '1'))",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 26,
                  "name": "ordnum",
                },
              },
              {
                "ResTarget": {
                  "location": 34,
                  "name": "partnum",
                },
              },
              {
                "ResTarget": {
                  "location": 43,
                  "name": "value",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "shipped_view",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 62,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 65,
                          },
                        },
                        {
                          "SubLink": {
                            "location": 68,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 86,
                                      "relname": "parts",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 76,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "cost",
                                              },
                                            },
                                          ],
                                          "location": 76,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "partnum",
                                            },
                                          },
                                        ],
                                        "location": 98,
                                      },
                                    },
                                    "location": 106,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "location": 108,
                                        "sval": {
                                          "sval": "1",
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 297 1`] = `
[
  "select * from shipped_view",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "shipped_view",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 299 1`] = `
[
  "create rule shipped_view_update as on update to shipped_view do instead
    update shipped set partnum = new.partnum, value = new.value
        where ttype = new.ttype and ordnum = new.ordnum",
  {
    "stmts": [
      {
        "stmt": {
          "RuleStmt": {
            "actions": [
              {
                "UpdateStmt": {
                  "relation": {
                    "inh": true,
                    "location": 83,
                    "relname": "shipped",
                    "relpersistence": "p",
                  },
                  "targetList": [
                    {
                      "ResTarget": {
                        "location": 95,
                        "name": "partnum",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "partnum",
                                },
                              },
                            ],
                            "location": 105,
                          },
                        },
                      },
                    },
                    {
                      "ResTarget": {
                        "location": 118,
                        "name": "value",
                        "val": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "new",
                                },
                              },
                              {
                                "String": {
                                  "sval": "value",
                                },
                              },
                            ],
                            "location": 126,
                          },
                        },
                      },
                    },
                  ],
                  "whereClause": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ttype",
                                    },
                                  },
                                ],
                                "location": 150,
                              },
                            },
                            "location": 156,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "ttype",
                                    },
                                  },
                                ],
                                "location": 158,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ordnum",
                                    },
                                  },
                                ],
                                "location": 172,
                              },
                            },
                            "location": 179,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "new",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "ordnum",
                                    },
                                  },
                                ],
                                "location": 181,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 168,
                    },
                  },
                },
              },
            ],
            "event": "CMD_UPDATE",
            "instead": true,
            "relation": {
              "inh": true,
              "location": 48,
              "relname": "shipped_view",
              "relpersistence": "p",
            },
            "rulename": "shipped_view_update",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 303 1`] = `
[
  "update shipped_view set value = 11
    from int4_tbl a join int4_tbl b
      on (a.f1 = (select f1 from int4_tbl c where c.f1=b.f1))
    where ordnum = a.f1",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 44,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 81,
                        },
                      },
                      "location": 86,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "SubLink": {
                          "location": 88,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "c",
                                    },
                                    "inh": true,
                                    "location": 104,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 96,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 96,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 121,
                                    },
                                  },
                                  "location": 125,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 126,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 60,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "shipped_view",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 24,
                  "name": "value",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 11,
                      },
                      "location": 32,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ordnum",
                        },
                      },
                    ],
                    "location": 143,
                  },
                },
                "location": 150,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 152,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 310 1`] = `
[
  "select f1, ss1 as relabel from
    (select *, (select sum(f1) from int4_tbl b where f1 >= a.f1) as ss1
     from int4_tbl a) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "a",
                            },
                            "inh": true,
                            "location": 113,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 43,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 43,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 46,
                            "name": "ss1",
                            "val": {
                              "SubLink": {
                                "location": 46,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "b",
                                          },
                                          "inh": true,
                                          "location": 67,
                                          "relname": "int4_tbl",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 54,
                                          "val": {
                                            "FuncCall": {
                                              "args": [
                                                {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 58,
                                                  },
                                                },
                                              ],
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "sum",
                                                  },
                                                },
                                              ],
                                              "location": 54,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 84,
                                          },
                                        },
                                        "location": 87,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": ">=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 90,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "name": "relabel",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss1",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 324 1`] = `
[
  "select * from (
  select min(unique1) from tenk1 as a
  where not exists (select 1 from tenk1 as b where b.unique2 = 10000)
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "a",
                            },
                            "inh": true,
                            "location": 43,
                            "relname": "tenk1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 25,
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 29,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "min",
                                    },
                                  },
                                ],
                                "location": 25,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 66,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "b",
                                          },
                                          "inh": true,
                                          "location": 88,
                                          "relname": "tenk1",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 81,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 81,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique2",
                                                },
                                              },
                                            ],
                                            "location": 105,
                                          },
                                        },
                                        "location": 115,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 10000,
                                            },
                                            "location": 117,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "NOT_EXPR",
                          "location": 62,
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 341 1`] = `
[
  "create temp table float_table (float_col float8)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "float_table",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "float_col",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 344 1`] = `
[
  "select * from float_table
  where float_col in (select num_col from numeric_table)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "float_table",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 44,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 68,
                          "relname": "numeric_table",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 55,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "num_col",
                                  },
                                },
                              ],
                              "location": 55,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "float_col",
                        },
                      },
                    ],
                    "location": 34,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 347 1`] = `
[
  "select * from numeric_table
  where num_col in (select float_col from float_table)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "numeric_table",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 44,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 70,
                          "relname": "float_table",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 55,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "float_col",
                                  },
                                },
                              ],
                              "location": 55,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "num_col",
                        },
                      },
                    ],
                    "location": 36,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 356 1`] = `
[
  "insert into ta values(1,1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "ta",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 22,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 359 1`] = `
[
  "create temp table tb (id int primary key, aval int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tb",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 29,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "aval",
                  "is_local": true,
                  "location": 42,
                  "typeName": {
                    "location": 47,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 361 1`] = `
[
  "insert into tb values(1,1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "tb",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 22,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 366 1`] = `
[
  "create temp table tc (id int primary key, aid int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tc",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 29,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "aid",
                  "is_local": true,
                  "location": 42,
                  "typeName": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 368 1`] = `
[
  "insert into tc values(1,1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "tc",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 22,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 371 1`] = `
[
  "select
  ( select min(tb.id) from tb
    where tb.aval = (select ta.val from ta where ta.id = tc.aid) ) as min_tb_id
from tc",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 122,
                  "relname": "tc",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "name": "min_tb_id",
                  "val": {
                    "SubLink": {
                      "location": 9,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 34,
                                "relname": "tb",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 18,
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "tb",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "id",
                                              },
                                            },
                                          ],
                                          "location": 22,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "min",
                                        },
                                      },
                                    ],
                                    "location": 18,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "tb",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "aval",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              "location": 55,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "SubLink": {
                                  "location": 57,
                                  "subLinkType": "EXPR_SUBLINK",
                                  "subselect": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 77,
                                            "relname": "ta",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 65,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "ta",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "val",
                                                    },
                                                  },
                                                ],
                                                "location": 65,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "ta",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "id",
                                                  },
                                                },
                                              ],
                                              "location": 86,
                                            },
                                          },
                                          "location": 92,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "tc",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "aid",
                                                  },
                                                },
                                              ],
                                              "location": 94,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 382 1`] = `
[
  "select * from
  (select distinct f1, f2, (select f2 from t1 x where x.f1 = up.f1) as fs
   from t1 up) ss
group by f1,f2,fs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "distinctClause": [
                        {},
                      ],
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "up",
                            },
                            "inh": true,
                            "location": 96,
                            "relname": "t1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 33,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 37,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f2",
                                    },
                                  },
                                ],
                                "location": 37,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 41,
                            "name": "fs",
                            "val": {
                              "SubLink": {
                                "location": 41,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "x",
                                          },
                                          "inh": true,
                                          "location": 57,
                                          "relname": "t1",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 49,
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f2",
                                                  },
                                                },
                                              ],
                                              "location": 49,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "x",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 68,
                                          },
                                        },
                                        "location": 73,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "up",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 75,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "f1",
                      },
                    },
                  ],
                  "location": 115,
                },
              },
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "f2",
                      },
                    },
                  ],
                  "location": 118,
                },
              },
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "fs",
                      },
                    },
                  ],
                  "location": 121,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 394 1`] = `
[
  "create temp view view_a as select * from table_a",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 41,
                      "relname": "table_a",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 17,
              "relname": "view_a",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 396 1`] = `
[
  "select view_a from view_a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 19,
                  "relname": "view_a",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "view_a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 408 1`] = `
[
  "  select q from q",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "q",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 415 1`] = `
[
  "  --  this shouldn't delete anything, but be safe

delete from road
where exists (
  select 1
  from
    int4_tbl cross join
    ( select f1, array(select q1 from int8_tbl) as arr
      from text_tbl ) ss
  where road.name = ss.f1 )",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 63,
              "relname": "road",
              "relpersistence": "p",
            },
            "whereClause": {
              "SubLink": {
                "location": 74,
                "subLinkType": "EXISTS_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "inh": true,
                              "location": 105,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 191,
                                        "relname": "text_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 138,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 138,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 142,
                                        "name": "arr",
                                        "val": {
                                          "SubLink": {
                                            "location": 142,
                                            "subLinkType": "ARRAY_SUBLINK",
                                            "subselect": {
                                              "SelectStmt": {
                                                "fromClause": [
                                                  {
                                                    "RangeVar": {
                                                      "inh": true,
                                                      "location": 163,
                                                      "relname": "int8_tbl",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 155,
                                                      "val": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "q1",
                                                              },
                                                            },
                                                          ],
                                                          "location": 155,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 92,
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 92,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "road",
                                },
                              },
                              {
                                "String": {
                                  "sval": "name",
                                },
                              },
                            ],
                            "location": 213,
                          },
                        },
                        "location": 223,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ss",
                                },
                              },
                              {
                                "String": {
                                  "sval": "f1",
                                },
                              },
                            ],
                            "location": 225,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 426 1`] = `
[
  "rollback",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_ROLLBACK",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 443 1`] = `
[
  "create temp table upsert(key int4 primary key, val text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "upsert",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "key",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 34,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "val",
                  "is_local": true,
                  "location": 47,
                  "typeName": {
                    "location": 51,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 447 1`] = `
[
  "select * from upsert",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "upsert",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 449 1`] = `
[
  "with aa as (select 'int4_tbl' u from int4_tbl limit 1)
insert into upsert values (1, 'x'), (999, 'y')
on conflict (key) do update set val = (select u from aa)
returning *",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "onConflictClause": {
              "action": "ONCONFLICT_UPDATE",
              "infer": {
                "indexElems": [
                  {
                    "IndexElem": {
                      "name": "key",
                      "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                      "ordering": "SORTBY_DEFAULT",
                    },
                  },
                ],
                "location": 114,
              },
              "location": 102,
              "targetList": [
                {
                  "ResTarget": {
                    "location": 134,
                    "name": "val",
                    "val": {
                      "SubLink": {
                        "location": 140,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 155,
                                  "relname": "aa",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 148,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "u",
                                          },
                                        },
                                      ],
                                      "location": 148,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                },
              ],
            },
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 67,
              "relname": "upsert",
              "relpersistence": "p",
            },
            "returningList": [
              {
                "ResTarget": {
                  "location": 169,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 169,
                    },
                  },
                },
              },
            ],
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 82,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 85,
                            "sval": {
                              "sval": "x",
                            },
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 999,
                            },
                            "location": 92,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 97,
                            "sval": {
                              "sval": "y",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "aa",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 37,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitCount": {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 52,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 19,
                              "name": "u",
                              "val": {
                                "A_Const": {
                                  "location": 19,
                                  "sval": {
                                    "sval": "int4_tbl",
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 464 1`] = `
[
  "create temp table inner_7597(c1 int8, c2 int8)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "inner_7597",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "c1",
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c2",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 467 1`] = `
[
  "select * from outer_7597 where (f1, f2) not in (select * from inner_7597)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "outer_7597",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 40,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 62,
                                "relname": "inner_7597",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 55,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                      "testexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 32,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f2",
                                    },
                                  },
                                ],
                                "location": 36,
                              },
                            },
                          ],
                          "location": 31,
                          "row_format": "COERCE_IMPLICIT_CAST",
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 40,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 481 1`] = `
[
  "create temp table inner_text (c1 text, c2 text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "inner_text",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "c1",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c2",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 485 1`] = `
[
  "select * from outer_text where (f1, f2) not in (select * from inner_text)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "outer_text",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 40,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 62,
                                "relname": "inner_text",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 55,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                      "testexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 32,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f2",
                                    },
                                  },
                                ],
                                "location": 36,
                              },
                            },
                          ],
                          "location": 31,
                          "row_format": "COERCE_IMPLICIT_CAST",
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 40,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 493 1`] = `
[
  "select 'foo'::text in (select 'bar'::name union all select 'bar'::name)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 19,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 30,
                                  "val": {
                                    "TypeCast": {
                                      "arg": {
                                        "A_Const": {
                                          "location": 30,
                                          "sval": {
                                            "sval": "bar",
                                          },
                                        },
                                      },
                                      "location": 35,
                                      "typeName": {
                                        "location": 37,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 59,
                                  "val": {
                                    "TypeCast": {
                                      "arg": {
                                        "A_Const": {
                                          "location": 59,
                                          "sval": {
                                            "sval": "bar",
                                          },
                                        },
                                      },
                                      "location": 64,
                                      "typeName": {
                                        "location": 66,
                                        "names": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "typemod": -1,
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                      "testexpr": {
                        "TypeCast": {
                          "arg": {
                            "A_Const": {
                              "location": 7,
                              "sval": {
                                "sval": "foo",
                              },
                            },
                          },
                          "location": 12,
                          "typeName": {
                            "location": 14,
                            "names": [
                              {
                                "String": {
                                  "sval": "text",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 503 1`] = `
[
  "select row(row(row(1))) = any (select row(row(1)))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 24,
                      "operName": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 38,
                                "val": {
                                  "RowExpr": {
                                    "args": [
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 46,
                                              },
                                            },
                                          ],
                                          "location": 42,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                    ],
                                    "location": 38,
                                    "row_format": "COERCE_EXPLICIT_CALL",
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                      "testexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "RowExpr": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 19,
                                          },
                                        },
                                      ],
                                      "location": 15,
                                      "row_format": "COERCE_EXPLICIT_CALL",
                                    },
                                  },
                                ],
                                "location": 11,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                          ],
                          "location": 7,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 519 1`] = `
[
  "select * from int8_tbl where q1 in (select c1 from inner_text)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 32,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "inh": true,
                          "location": 51,
                          "relname": "inner_text",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 43,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c1",
                                  },
                                },
                              ],
                              "location": 43,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "q1",
                        },
                      },
                    ],
                    "location": 29,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 521 1`] = `
[
  "begin",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_BEGIN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 524 1`] = `
[
  "create function bogus_int8_text_eq(int8, text) returns boolean
language sql as 'select $1::text = $2'",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "bogus_int8_text_eq",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 63,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "select $1::text = $2",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 76,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "returnType": {
              "location": 55,
              "names": [
                {
                  "String": {
                    "sval": "pg_catalog",
                  },
                },
                {
                  "String": {
                    "sval": "bool",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 527 1`] = `
[
  "create operator = (procedure=bogus_int8_text_eq, leftarg=int8, rightarg=text)",
  {
    "stmts": [
      {
        "stmt": {
          "DefineStmt": {
            "definition": [
              {
                "DefElem": {
                  "arg": {
                    "TypeName": {
                      "location": 29,
                      "names": [
                        {
                          "String": {
                            "sval": "bogus_int8_text_eq",
                          },
                        },
                      ],
                      "typemod": -1,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "procedure",
                  "location": 19,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "TypeName": {
                      "location": 57,
                      "names": [
                        {
                          "String": {
                            "sval": "int8",
                          },
                        },
                      ],
                      "typemod": -1,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "leftarg",
                  "location": 49,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "TypeName": {
                      "location": 72,
                      "names": [
                        {
                          "String": {
                            "sval": "text",
                          },
                        },
                      ],
                      "typemod": -1,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "rightarg",
                  "location": 63,
                },
              },
            ],
            "defnames": [
              {
                "String": {
                  "sval": "=",
                },
              },
            ],
            "kind": "OBJECT_OPERATOR",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 529 1`] = `
[
  "explain (costs off)
select * from int8_tbl where q1 in (select c1 from inner_text)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 52,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 71,
                              "relname": "inner_text",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 63,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c1",
                                      },
                                    },
                                  ],
                                  "location": 63,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "q1",
                            },
                          },
                        ],
                        "location": 49,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 535 1`] = `
[
  "create or replace function bogus_int8_text_eq(int8, text) returns boolean
language sql as 'select $1::text = $2 and $1::text = $2'",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "bogus_int8_text_eq",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 74,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "select $1::text = $2 and $1::text = $2",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 87,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 52,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "replace": true,
            "returnType": {
              "location": 66,
              "names": [
                {
                  "String": {
                    "sval": "pg_catalog",
                  },
                },
                {
                  "String": {
                    "sval": "bool",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 551 1`] = `
[
  "  -- to get rid of the bogus operator

--
-- Test resolution of hashed vs non-hashed implementation of EXISTS subplan
--
explain (costs off)
select count(*) from tenk1 t
where (exists(select 1 from tenk1 k where k.unique1 = t.unique2) or ten < 0)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 130,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 162,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 148,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 148,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 177,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "k",
                                    },
                                    "inh": true,
                                    "location": 198,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 191,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 191,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "k",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 212,
                                    },
                                  },
                                  "location": 222,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 224,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ten",
                                  },
                                },
                              ],
                              "location": 238,
                            },
                          },
                          "location": 242,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 244,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 235,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 562 1`] = `
[
  "explain (costs off)
select count(*) from tenk1 t
where (exists(select 1 from tenk1 k where k.unique1 = t.unique2) or ten < 0)
  and thousand = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 41,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "BoolExpr": {
                          "args": [
                            {
                              "SubLink": {
                                "location": 56,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "k",
                                          },
                                          "inh": true,
                                          "location": 77,
                                          "relname": "tenk1",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 70,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 70,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "k",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 91,
                                          },
                                        },
                                        "location": 101,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique2",
                                                },
                                              },
                                            ],
                                            "location": 103,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 117,
                                  },
                                },
                                "location": 121,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "<",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 123,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 114,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 132,
                            },
                          },
                          "location": 141,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 143,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 128,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 571 1`] = `
[
  "create temp table exists_tbl (c1 int, c2 int, c3 int) partition by list (c1)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 54,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 73,
                    "name": "c1",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "exists_tbl",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "c1",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c2",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 41,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c3",
                  "is_local": true,
                  "location": 46,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 577 1`] = `
[
  "select * from exists_tbl t1
  where (exists(select 1 from exists_tbl t2 where t1.c1 = t2.c2) or c3 < 0)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "exists_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 37,
                      "subLinkType": "EXISTS_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t2",
                                },
                                "inh": true,
                                "location": 58,
                                "relname": "exists_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 51,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 51,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c1",
                                      },
                                    },
                                  ],
                                  "location": 78,
                                },
                              },
                              "location": 84,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "c2",
                                      },
                                    },
                                  ],
                                  "location": 86,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c3",
                              },
                            },
                          ],
                          "location": 96,
                        },
                      },
                      "location": 99,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 101,
                        },
                      },
                    },
                  },
                ],
                "boolop": "OR_EXPR",
                "location": 93,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 585 1`] = `
[
  "select a.thousand from tenk1 a, tenk1 b
where a.thousand = b.thousand
  and exists ( select 1 from tenk1 c where b.hundred = c.hundred
                   and not exists ( select 1 from tenk1 d
                                    where a.thousand = d.thousand ) )",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 23,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "b",
                  },
                  "inh": true,
                  "location": 32,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 46,
                        },
                      },
                      "location": 57,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 59,
                        },
                      },
                    },
                  },
                  {
                    "SubLink": {
                      "location": 76,
                      "subLinkType": "EXISTS_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "c",
                                },
                                "inh": true,
                                "location": 99,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 92,
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 92,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "hundred",
                                            },
                                          },
                                        ],
                                        "location": 113,
                                      },
                                    },
                                    "location": 123,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "hundred",
                                            },
                                          },
                                        ],
                                        "location": 125,
                                      },
                                    },
                                  },
                                },
                                {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "SubLink": {
                                          "location": 162,
                                          "subLinkType": "EXISTS_SUBLINK",
                                          "subselect": {
                                            "SelectStmt": {
                                              "fromClause": [
                                                {
                                                  "RangeVar": {
                                                    "alias": {
                                                      "aliasname": "d",
                                                    },
                                                    "inh": true,
                                                    "location": 185,
                                                    "relname": "tenk1",
                                                    "relpersistence": "p",
                                                  },
                                                },
                                              ],
                                              "limitOption": "LIMIT_OPTION_DEFAULT",
                                              "op": "SETOP_NONE",
                                              "targetList": [
                                                {
                                                  "ResTarget": {
                                                    "location": 178,
                                                    "val": {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 1,
                                                        },
                                                        "location": 178,
                                                      },
                                                    },
                                                  },
                                                },
                                              ],
                                              "whereClause": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "a",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "thousand",
                                                          },
                                                        },
                                                      ],
                                                      "location": 235,
                                                    },
                                                  },
                                                  "location": 246,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "d",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "thousand",
                                                          },
                                                        },
                                                      ],
                                                      "location": 248,
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "boolop": "NOT_EXPR",
                                    "location": 158,
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 154,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 72,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 594 1`] = `
[
  "explain (verbose, costs off)
  select x, x from
    (select (select now()) as x from (values(1),(2)) v(y)) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "v",
                                  "colnames": [
                                    {
                                      "String": {
                                        "sval": "y",
                                      },
                                    },
                                  ],
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "valuesLists": [
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 93,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 97,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 60,
                                "name": "x",
                                "val": {
                                  "SubLink": {
                                    "location": 60,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 68,
                                              "val": {
                                                "FuncCall": {
                                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                                  "funcname": [
                                                    {
                                                      "String": {
                                                        "sval": "now",
                                                      },
                                                    },
                                                  ],
                                                  "location": 68,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 41,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 41,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 598 1`] = `
[
  "  select x, x from
    (select (select random()) as x from (values(1),(2)) v(y)) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeSubselect": {
                            "alias": {
                              "aliasname": "v",
                              "colnames": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                              ],
                            },
                            "subquery": {
                              "SelectStmt": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "valuesLists": [
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 67,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 71,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 31,
                            "name": "x",
                            "val": {
                              "SubLink": {
                                "location": 31,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 39,
                                          "val": {
                                            "FuncCall": {
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "random",
                                                  },
                                                },
                                              ],
                                              "location": 39,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 601 1`] = `
[
  "  select x, x from
    (select (select now() where y=y) as x from (values(1),(2)) v(y)) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeSubselect": {
                            "alias": {
                              "aliasname": "v",
                              "colnames": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                              ],
                            },
                            "subquery": {
                              "SelectStmt": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "valuesLists": [
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 74,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 78,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 31,
                            "name": "x",
                            "val": {
                              "SubLink": {
                                "location": 31,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 39,
                                          "val": {
                                            "FuncCall": {
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "now",
                                                  },
                                                },
                                              ],
                                              "location": 39,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "y",
                                                },
                                              },
                                            ],
                                            "location": 51,
                                          },
                                        },
                                        "location": 52,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "y",
                                                },
                                              },
                                            ],
                                            "location": 53,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 604 1`] = `
[
  "  select x, x from
    (select (select random() where y=y) as x from (values(1),(2)) v(y)) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeSubselect": {
                            "alias": {
                              "aliasname": "v",
                              "colnames": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                              ],
                            },
                            "subquery": {
                              "SelectStmt": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "valuesLists": [
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 77,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 81,
                                          },
                                        },
                                      ],
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 31,
                            "name": "x",
                            "val": {
                              "SubLink": {
                                "location": 31,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 39,
                                          "val": {
                                            "FuncCall": {
                                              "funcformat": "COERCE_EXPLICIT_CALL",
                                              "funcname": [
                                                {
                                                  "String": {
                                                    "sval": "random",
                                                  },
                                                },
                                              ],
                                              "location": 39,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "y",
                                                },
                                              },
                                            ],
                                            "location": 54,
                                          },
                                        },
                                        "location": 55,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "y",
                                                },
                                              },
                                            ],
                                            "location": 56,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 611 1`] = `
[
  "explain (verbose, costs off)
select sum(ss.tst::int) from
  onek o cross join lateral (
  select i.ten in (select f1 from int4_tbl where f1 <= o.hundred) as tst,
         random() as r
  from onek i where i.unique1 = o.unique1 ) ss
where o.ten = 0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "o",
                          },
                          "inh": true,
                          "location": 60,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i",
                                    },
                                    "inh": true,
                                    "location": 192,
                                    "relname": "onek",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 97,
                                    "name": "tst",
                                    "val": {
                                      "SubLink": {
                                        "location": 103,
                                        "subLinkType": "ANY_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "RangeVar": {
                                                  "inh": true,
                                                  "location": 122,
                                                  "relname": "int4_tbl",
                                                  "relpersistence": "p",
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 114,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "f1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 114,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "whereClause": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 137,
                                                  },
                                                },
                                                "location": 140,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "<=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "o",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "hundred",
                                                        },
                                                      },
                                                    ],
                                                    "location": 143,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                        "testexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "ten",
                                                },
                                              },
                                            ],
                                            "location": 97,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 171,
                                    "name": "r",
                                    "val": {
                                      "FuncCall": {
                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                        "funcname": [
                                          {
                                            "String": {
                                              "sval": "random",
                                            },
                                          },
                                        ],
                                        "location": 171,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 205,
                                    },
                                  },
                                  "location": 215,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "o",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 217,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "tst",
                                        },
                                      },
                                    ],
                                    "location": 40,
                                  },
                                },
                                "location": 46,
                                "typeName": {
                                  "location": 48,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "pg_catalog",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "int4",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 238,
                      },
                    },
                    "location": 244,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 246,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 619 1`] = `
[
  "select sum(ss.tst::int) from
  onek o cross join lateral (
  select i.ten in (select f1 from int4_tbl where f1 <= o.hundred) as tst,
         random() as r
  from onek i where i.unique1 = o.unique1 ) ss
where o.ten = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "o",
                      },
                      "inh": true,
                      "location": 31,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i",
                                },
                                "inh": true,
                                "location": 163,
                                "relname": "onek",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 68,
                                "name": "tst",
                                "val": {
                                  "SubLink": {
                                    "location": 74,
                                    "subLinkType": "ANY_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 93,
                                              "relname": "int4_tbl",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 85,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 85,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "whereClause": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 108,
                                              },
                                            },
                                            "location": 111,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "<=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "o",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "hundred",
                                                    },
                                                  },
                                                ],
                                                "location": 114,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                    "testexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "ten",
                                            },
                                          },
                                        ],
                                        "location": 68,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 142,
                                "name": "r",
                                "val": {
                                  "FuncCall": {
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "random",
                                        },
                                      },
                                    ],
                                    "location": 142,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 176,
                                },
                              },
                              "location": 186,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "o",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 188,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "TypeCast": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "tst",
                                    },
                                  },
                                ],
                                "location": 11,
                              },
                            },
                            "location": 17,
                            "typeName": {
                              "location": 19,
                              "names": [
                                {
                                  "String": {
                                    "sval": "pg_catalog",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "int4",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "ten",
                        },
                      },
                    ],
                    "location": 209,
                  },
                },
                "location": 215,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 217,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 629 1`] = `
[
  "explain (costs off)
select count(*) from
  onek o cross join lateral (
    select * from onek i1 where i1.unique1 = o.unique1
    except
    select * from onek i2 where i2.unique1 = o.unique2
  ) ss
where o.ten = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "o",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "larg": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i1",
                                      },
                                      "inh": true,
                                      "location": 89,
                                      "relname": "onek",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 82,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "A_Star": {},
                                            },
                                          ],
                                          "location": 82,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 103,
                                      },
                                    },
                                    "location": 114,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "o",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 116,
                                      },
                                    },
                                  },
                                },
                              },
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_EXCEPT",
                              "rarg": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i2",
                                      },
                                      "inh": true,
                                      "location": 155,
                                      "relname": "onek",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 148,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "A_Star": {},
                                            },
                                          ],
                                          "location": 148,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "whereClause": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 169,
                                      },
                                    },
                                    "location": 180,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "o",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 182,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 205,
                      },
                    },
                    "location": 211,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 213,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 638 1`] = `
[
  "select count(*) from
  onek o cross join lateral (
    select * from onek i1 where i1.unique1 = o.unique1
    except
    select * from onek i2 where i2.unique1 = o.unique2
  ) ss
where o.ten = 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "o",
                      },
                      "inh": true,
                      "location": 23,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i1",
                                  },
                                  "inh": true,
                                  "location": 69,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 62,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 62,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                                "location": 94,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "o",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 96,
                                  },
                                },
                              },
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_EXCEPT",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i2",
                                  },
                                  "inh": true,
                                  "location": 135,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 128,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 128,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 149,
                                  },
                                },
                                "location": 160,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "o",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 162,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "ten",
                        },
                      },
                    ],
                    "location": 185,
                  },
                },
                "location": 191,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 193,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 649 1`] = `
[
  "explain (costs off)
select sum(o.four), sum(ss.a) from
  onek o cross join lateral (
    with recursive x(a) as
      (select o.four as a
       union
       select a + 1 from x
       where a < 10)
    select * from x
  ) ss
where o.ten = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "o",
                          },
                          "inh": true,
                          "location": 57,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 217,
                                    "relname": "x",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 210,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 210,
                                      },
                                    },
                                  },
                                },
                              ],
                              "withClause": {
                                "ctes": [
                                  {
                                    "CommonTableExpr": {
                                      "aliascolnames": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "ctematerialized": "CTEMaterializeDefault",
                                      "ctename": "x",
                                      "ctequery": {
                                        "SelectStmt": {
                                          "larg": {
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 126,
                                                  "name": "a",
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "o",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "four",
                                                          },
                                                        },
                                                      ],
                                                      "location": 126,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_UNION",
                                          "rarg": {
                                            "fromClause": [
                                              {
                                                "RangeVar": {
                                                  "inh": true,
                                                  "location": 176,
                                                  "relname": "x",
                                                  "relpersistence": "p",
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 165,
                                                  "val": {
                                                    "A_Expr": {
                                                      "kind": "AEXPR_OP",
                                                      "lexpr": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "a",
                                                              },
                                                            },
                                                          ],
                                                          "location": 165,
                                                        },
                                                      },
                                                      "location": 167,
                                                      "name": [
                                                        {
                                                          "String": {
                                                            "sval": "+",
                                                          },
                                                        },
                                                      ],
                                                      "rexpr": {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 1,
                                                          },
                                                          "location": 169,
                                                        },
                                                      },
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "whereClause": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "a",
                                                        },
                                                      },
                                                    ],
                                                    "location": 191,
                                                  },
                                                },
                                                "location": 193,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "<",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 10,
                                                    },
                                                    "location": 195,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                      "location": 104,
                                    },
                                  },
                                ],
                                "location": 89,
                                "recursive": true,
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "o",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "four",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 44,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "o",
                            },
                          },
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 232,
                      },
                    },
                    "location": 238,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 240,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 661 1`] = `
[
  "select sum(o.four), sum(ss.a) from
  onek o cross join lateral (
    with recursive x(a) as
      (select o.four as a
       union
       select a + 1 from x
       where a < 10)
    select * from x
  ) ss
where o.ten = 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "o",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 197,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 190,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 190,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "aliascolnames": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "x",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "larg": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 106,
                                              "name": "a",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "o",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "four",
                                                      },
                                                    },
                                                  ],
                                                  "location": 106,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_UNION",
                                      "rarg": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 156,
                                              "relname": "x",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 145,
                                              "val": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "a",
                                                          },
                                                        },
                                                      ],
                                                      "location": 145,
                                                    },
                                                  },
                                                  "location": 147,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "+",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 1,
                                                      },
                                                      "location": 149,
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "whereClause": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 171,
                                              },
                                            },
                                            "location": 173,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "<",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 10,
                                                },
                                                "location": 175,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                  "location": 84,
                                },
                              },
                            ],
                            "location": 69,
                            "recursive": true,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "o",
                                },
                              },
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 11,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ss",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 24,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "o",
                        },
                      },
                      {
                        "String": {
                          "sval": "ten",
                        },
                      },
                    ],
                    "location": 212,
                  },
                },
                "location": 218,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 220,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 675 1`] = `
[
  "create temp table notinouter (a int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "notinouter",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 679 1`] = `
[
  "select * from notinouter where a not in (select b from notininner)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "notinouter",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 33,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 55,
                                "relname": "notininner",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 48,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 48,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                      "testexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
                "boolop": "NOT_EXPR",
                "location": 33,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 684 1`] = `
[
  "create temp table nocolumns()",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "nocolumns",
              "relpersistence": "t",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 690 1`] = `
[
  "select val.x
  from generate_series(1,10) as s(i),
  lateral (
    values ((select s.i + 1)), (s.i + 101)
  ) as val(x)
where s.i < 10 and (select val.x) < 110",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "s",
                    "colnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 36,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 10,
                                    },
                                    "location": 38,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 20,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "val",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "SubLink": {
                                  "location": 75,
                                  "subLinkType": "EXPR_SUBLINK",
                                  "subselect": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 83,
                                            "val": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "s",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "i",
                                                        },
                                                      },
                                                    ],
                                                    "location": 83,
                                                  },
                                                },
                                                "location": 87,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "+",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 89,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "s",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "i",
                                          },
                                        },
                                      ],
                                      "location": 95,
                                    },
                                  },
                                  "location": 99,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 101,
                                      },
                                      "location": 101,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "val",
                          },
                        },
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "i",
                              },
                            },
                          ],
                          "location": 126,
                        },
                      },
                      "location": 130,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 132,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "SubLink": {
                          "location": 139,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 147,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "val",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                        ],
                                        "location": 147,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "location": 154,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 110,
                          },
                          "location": 156,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 135,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 698 1`] = `
[
  "explain (verbose, costs off)
select * from
(values
  (3 not in (select * from (values (1), (2)) ss1)),
  (false)
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "BoolExpr": {
                                      "args": [
                                        {
                                          "SubLink": {
                                            "location": 56,
                                            "subLinkType": "ANY_SUBLINK",
                                            "subselect": {
                                              "SelectStmt": {
                                                "fromClause": [
                                                  {
                                                    "RangeSubselect": {
                                                      "alias": {
                                                        "aliasname": "ss1",
                                                      },
                                                      "subquery": {
                                                        "SelectStmt": {
                                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                                          "op": "SETOP_NONE",
                                                          "valuesLists": [
                                                            {
                                                              "List": {
                                                                "items": [
                                                                  {
                                                                    "A_Const": {
                                                                      "ival": {
                                                                        "ival": 1,
                                                                      },
                                                                      "location": 87,
                                                                    },
                                                                  },
                                                                ],
                                                              },
                                                            },
                                                            {
                                                              "List": {
                                                                "items": [
                                                                  {
                                                                    "A_Const": {
                                                                      "ival": {
                                                                        "ival": 2,
                                                                      },
                                                                      "location": 92,
                                                                    },
                                                                  },
                                                                ],
                                                              },
                                                            },
                                                          ],
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 71,
                                                      "val": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "A_Star": {},
                                                            },
                                                          ],
                                                          "location": 71,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                            "testexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 3,
                                                },
                                                "location": 54,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "boolop": "NOT_EXPR",
                                      "location": 56,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "boolval": {},
                                      "location": 106,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 705 1`] = `
[
  "select * from
(values
  (3 not in (select * from (values (1), (2)) ss1)),
  (false)
) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "SubLink": {
                                        "location": 27,
                                        "subLinkType": "ANY_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "RangeSubselect": {
                                                  "alias": {
                                                    "aliasname": "ss1",
                                                  },
                                                  "subquery": {
                                                    "SelectStmt": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "valuesLists": [
                                                        {
                                                          "List": {
                                                            "items": [
                                                              {
                                                                "A_Const": {
                                                                  "ival": {
                                                                    "ival": 1,
                                                                  },
                                                                  "location": 58,
                                                                },
                                                              },
                                                            ],
                                                          },
                                                        },
                                                        {
                                                          "List": {
                                                            "items": [
                                                              {
                                                                "A_Const": {
                                                                  "ival": {
                                                                    "ival": 2,
                                                                  },
                                                                  "location": 63,
                                                                },
                                                              },
                                                            ],
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 42,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "A_Star": {},
                                                        },
                                                      ],
                                                      "location": 42,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                        "testexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 3,
                                            },
                                            "location": 25,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "NOT_EXPR",
                                  "location": 27,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "boolval": {},
                                  "location": 77,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 714 1`] = `
[
  "explain (verbose, costs off)
select * from int4_tbl where
  (case when f1 in (select unique1 from tenk1 a) then f1 else null end) in
  (select ten from tenk1 b)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 43,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 130,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "b",
                              },
                              "inh": true,
                              "location": 152,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 143,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "ten",
                                      },
                                    },
                                  ],
                                  "location": 143,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "CaseExpr": {
                        "args": [
                          {
                            "CaseWhen": {
                              "expr": {
                                "SubLink": {
                                  "location": 74,
                                  "subLinkType": "ANY_SUBLINK",
                                  "subselect": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "a",
                                            },
                                            "inh": true,
                                            "location": 98,
                                            "relname": "tenk1",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 85,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "unique1",
                                                    },
                                                  },
                                                ],
                                                "location": 85,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "testexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 71,
                                    },
                                  },
                                },
                              },
                              "location": 66,
                              "result": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 112,
                                },
                              },
                            },
                          },
                        ],
                        "defresult": {
                          "A_Const": {
                            "isnull": true,
                            "location": 120,
                          },
                        },
                        "location": 61,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 725 1`] = `
[
  "explain (verbose, costs off)
select * from int4_tbl o where (f1, f1) in
  (select f1, generate_series(1,50) / 10 g from int4_tbl i group by f1)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "o",
                      },
                      "inh": true,
                      "location": 43,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 69,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i",
                              },
                              "inh": true,
                              "location": 120,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "groupClause": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 140,
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 82,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 82,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 86,
                              "name": "g",
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 102,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 50,
                                            },
                                            "location": 104,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "generate_series",
                                          },
                                        },
                                      ],
                                      "location": 86,
                                    },
                                  },
                                  "location": 108,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "/",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 10,
                                      },
                                      "location": 110,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 61,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 65,
                            },
                          },
                        ],
                        "location": 60,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 729 1`] = `
[
  "  (select f1, generate_series(1,50) / 10 g from int4_tbl i group by f1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i",
                  },
                  "inh": true,
                  "location": 48,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "f1",
                      },
                    },
                  ],
                  "location": 68,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "name": "g",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "FuncCall": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 30,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 50,
                                },
                                "location": 32,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "generate_series",
                              },
                            },
                          ],
                          "location": 14,
                        },
                      },
                      "location": 36,
                      "name": [
                        {
                          "String": {
                            "sval": "/",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 38,
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 734 1`] = `
[
  "select (select q from
         (select 1,2,3 where f1 > 0
          union all
          select 4,5,6.0 where f1 <= 0
         ) q )
from int4_tbl",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 137,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "q",
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "all": true,
                                    "larg": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 39,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 39,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 41,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 41,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 43,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 3,
                                                },
                                                "location": 43,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 51,
                                            },
                                          },
                                          "location": 54,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": ">",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 56,
                                            },
                                          },
                                        },
                                      },
                                    },
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_UNION",
                                    "rarg": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 95,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 4,
                                                },
                                                "location": 95,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 97,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 5,
                                                },
                                                "location": 97,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 99,
                                            "val": {
                                              "A_Const": {
                                                "fval": {
                                                  "fval": "6.0",
                                                },
                                                "location": 99,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 109,
                                            },
                                          },
                                          "location": 112,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "<=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 115,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 15,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q",
                                        },
                                      },
                                    ],
                                    "location": 15,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 746 1`] = `
[
  "explain (verbose, costs off)
select * from
    int4_tbl i4,
    lateral (
        select i4.f1 > 1 as b, 1 as id
        from (select random() order by 1) as t1
      union all
        select true as b, 2 as id
    ) as t2
where b and f1 >= 0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 47,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "sortClause": [
                                        {
                                          "SortBy": {
                                            "location": -1,
                                            "node": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 152,
                                              },
                                            },
                                            "sortby_dir": "SORTBY_DEFAULT",
                                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                          },
                                        },
                                      ],
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 134,
                                            "val": {
                                              "FuncCall": {
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "random",
                                                    },
                                                  },
                                                ],
                                                "location": 134,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 89,
                                  "name": "b",
                                  "val": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i4",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 89,
                                        },
                                      },
                                      "location": 95,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": ">",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 97,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 105,
                                  "name": "id",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 105,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 192,
                                  "name": "b",
                                  "val": {
                                    "A_Const": {
                                      "boolval": {
                                        "boolval": true,
                                      },
                                      "location": 192,
                                    },
                                  },
                                },
                              },
                              {
                                "ResTarget": {
                                  "location": 203,
                                  "name": "id",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 203,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 229,
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 235,
                            },
                          },
                          "location": 238,
                          "name": [
                            {
                              "String": {
                                "sval": ">=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 241,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 231,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 757 1`] = `
[
  "select * from
    int4_tbl i4,
    lateral (
        select i4.f1 > 1 as b, 1 as id
        from (select random() order by 1) as t1
      union all
        select true as b, 2 as id
    ) as t2
where b and f1 >= 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i4",
                  },
                  "inh": true,
                  "location": 18,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t2",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "all": true,
                      "larg": {
                        "fromClause": [
                          {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "sortClause": [
                                    {
                                      "SortBy": {
                                        "location": -1,
                                        "node": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 123,
                                          },
                                        },
                                        "sortby_dir": "SORTBY_DEFAULT",
                                        "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                      },
                                    },
                                  ],
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 105,
                                        "val": {
                                          "FuncCall": {
                                            "funcformat": "COERCE_EXPLICIT_CALL",
                                            "funcname": [
                                              {
                                                "String": {
                                                  "sval": "random",
                                                },
                                              },
                                            ],
                                            "location": 105,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 60,
                              "name": "b",
                              "val": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i4",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 60,
                                    },
                                  },
                                  "location": 66,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 68,
                                    },
                                  },
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 76,
                              "name": "id",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 76,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_UNION",
                      "rarg": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 163,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 163,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 174,
                              "name": "id",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 174,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 200,
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 206,
                        },
                      },
                      "location": 209,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 212,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 202,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 771 1`] = `
[
  "create temp sequence ts1",
  {
    "stmts": [
      {
        "stmt": {
          "CreateSeqStmt": {
            "sequence": {
              "inh": true,
              "location": 21,
              "relname": "ts1",
              "relpersistence": "t",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 773 1`] = `
[
  "select * from
  (select distinct ten from tenk1) ss
  where ten < 10 + nextval('ts1')
  order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "distinctClause": [
                        {},
                      ],
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 42,
                            "relname": "tenk1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 33,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ten",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 97,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ten",
                        },
                      },
                    ],
                    "location": 60,
                  },
                },
                "location": 64,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 10,
                        },
                        "location": 66,
                      },
                    },
                    "location": 69,
                    "name": [
                      {
                        "String": {
                          "sval": "+",
                        },
                      },
                    ],
                    "rexpr": {
                      "FuncCall": {
                        "args": [
                          {
                            "A_Const": {
                              "location": 79,
                              "sval": {
                                "sval": "ts1",
                              },
                            },
                          },
                        ],
                        "funcformat": "COERCE_EXPLICIT_CALL",
                        "funcname": [
                          {
                            "String": {
                              "sval": "nextval",
                            },
                          },
                        ],
                        "location": 71,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 778 1`] = `
[
  "select nextval('ts1')",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 15,
                            "sval": {
                              "sval": "ts1",
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "nextval",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 784 1`] = `
[
  "create function tattle(x int, y int) returns bool
volatile language plpgsql as $$
begin
  raise notice 'x = %, y = %', x, y;
  return x > y;
end$$",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "tattle",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "volatile",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "volatility",
                  "location": 50,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 59,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
begin
  raise notice 'x = %, y = %', x, y;
  return x > y;
end",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 76,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "x",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "y",
                },
              },
            ],
            "returnType": {
              "location": 45,
              "names": [
                {
                  "String": {
                    "sval": "bool",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 791 1`] = `
[
  "explain (verbose, costs off)
select * from
  (select 9 as x, unnest(array[1,2,3,11,12,13]) as u) ss
  where tattle(x, 8)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 9,
                                    },
                                    "location": 53,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 61,
                                "name": "u",
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "A_ArrayExpr": {
                                          "elements": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 74,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 76,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 3,
                                                },
                                                "location": 78,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 11,
                                                },
                                                "location": 80,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 12,
                                                },
                                                "location": 83,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 13,
                                                },
                                                "location": 86,
                                              },
                                            },
                                          ],
                                          "location": 68,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "unnest",
                                        },
                                      },
                                    ],
                                    "location": 61,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "FuncCall": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 115,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 8,
                          },
                          "location": 118,
                        },
                      },
                    ],
                    "funcformat": "COERCE_EXPLICIT_CALL",
                    "funcname": [
                      {
                        "String": {
                          "sval": "tattle",
                        },
                      },
                    ],
                    "location": 108,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 796 1`] = `
[
  "select * from
  (select 9 as x, unnest(array[1,2,3,11,12,13]) as u) ss
  where tattle(x, 8)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 24,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 9,
                                },
                                "location": 24,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 32,
                            "name": "u",
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "A_ArrayExpr": {
                                      "elements": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 45,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 47,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 3,
                                            },
                                            "location": 49,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 11,
                                            },
                                            "location": 51,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 12,
                                            },
                                            "location": 54,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 13,
                                            },
                                            "location": 57,
                                          },
                                        },
                                      ],
                                      "location": 39,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "unnest",
                                    },
                                  },
                                ],
                                "location": 32,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "FuncCall": {
                "args": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 86,
                    },
                  },
                  {
                    "A_Const": {
                      "ival": {
                        "ival": 8,
                      },
                      "location": 89,
                    },
                  },
                ],
                "funcformat": "COERCE_EXPLICIT_CALL",
                "funcname": [
                  {
                    "String": {
                      "sval": "tattle",
                    },
                  },
                ],
                "location": 79,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 801 1`] = `
[
  "alter function tattle(x int, y int) stable",
  {
    "stmts": [
      {
        "stmt": {
          "AlterFunctionStmt": {
            "actions": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "stable",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "volatility",
                  "location": 36,
                },
              },
            ],
            "func": {
              "objargs": [
                {
                  "TypeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
                {
                  "TypeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              ],
              "objfuncargs": [
                {
                  "FunctionParameter": {
                    "argType": {
                      "location": 24,
                      "names": [
                        {
                          "String": {
                            "sval": "pg_catalog",
                          },
                        },
                        {
                          "String": {
                            "sval": "int4",
                          },
                        },
                      ],
                      "typemod": -1,
                    },
                    "mode": "FUNC_PARAM_DEFAULT",
                    "name": "x",
                  },
                },
                {
                  "FunctionParameter": {
                    "argType": {
                      "location": 31,
                      "names": [
                        {
                          "String": {
                            "sval": "pg_catalog",
                          },
                        },
                        {
                          "String": {
                            "sval": "int4",
                          },
                        },
                      ],
                      "typemod": -1,
                    },
                    "mode": "FUNC_PARAM_DEFAULT",
                    "name": "y",
                  },
                },
              ],
              "objname": [
                {
                  "String": {
                    "sval": "tattle",
                  },
                },
              ],
            },
            "objtype": "OBJECT_FUNCTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 813 1`] = `
[
  "explain (verbose, costs off)
select * from
  (select 9 as x, unnest(array[1,2,3,11,12,13]) as u) ss
  where tattle(x, u)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 9,
                                    },
                                    "location": 53,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 61,
                                "name": "u",
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "A_ArrayExpr": {
                                          "elements": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 74,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 76,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 3,
                                                },
                                                "location": 78,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 11,
                                                },
                                                "location": 80,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 12,
                                                },
                                                "location": 83,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 13,
                                                },
                                                "location": 86,
                                              },
                                            },
                                          ],
                                          "location": 68,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "unnest",
                                        },
                                      },
                                    ],
                                    "location": 61,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "FuncCall": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 115,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "u",
                              },
                            },
                          ],
                          "location": 118,
                        },
                      },
                    ],
                    "funcformat": "COERCE_EXPLICIT_CALL",
                    "funcname": [
                      {
                        "String": {
                          "sval": "tattle",
                        },
                      },
                    ],
                    "location": 108,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 818 1`] = `
[
  "select * from
  (select 9 as x, unnest(array[1,2,3,11,12,13]) as u) ss
  where tattle(x, u)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 24,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 9,
                                },
                                "location": 24,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 32,
                            "name": "u",
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "A_ArrayExpr": {
                                      "elements": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 45,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 47,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 3,
                                            },
                                            "location": 49,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 11,
                                            },
                                            "location": 51,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 12,
                                            },
                                            "location": 54,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 13,
                                            },
                                            "location": 57,
                                          },
                                        },
                                      ],
                                      "location": 39,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "unnest",
                                    },
                                  },
                                ],
                                "location": 32,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "FuncCall": {
                "args": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 86,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "u",
                          },
                        },
                      ],
                      "location": 89,
                    },
                  },
                ],
                "funcformat": "COERCE_EXPLICIT_CALL",
                "funcname": [
                  {
                    "String": {
                      "sval": "tattle",
                    },
                  },
                ],
                "location": 79,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 822 1`] = `
[
  "drop function tattle(x int, y int)",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "ObjectWithArgs": {
                  "objargs": [
                    {
                      "TypeName": {
                        "location": 23,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int4",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                    {
                      "TypeName": {
                        "location": 30,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int4",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  ],
                  "objfuncargs": [
                    {
                      "FunctionParameter": {
                        "argType": {
                          "location": 23,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int4",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                        "mode": "FUNC_PARAM_DEFAULT",
                        "name": "x",
                      },
                    },
                    {
                      "FunctionParameter": {
                        "argType": {
                          "location": 30,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int4",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                        "mode": "FUNC_PARAM_DEFAULT",
                        "name": "y",
                      },
                    },
                  ],
                  "objname": [
                    {
                      "String": {
                        "sval": "tattle",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_FUNCTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 830 1`] = `
[
  "create table sq_limit (pk int primary key, c1 int, c2 int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "sq_limit",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "pk",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 30,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 26,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c1",
                  "is_local": true,
                  "location": 43,
                  "typeName": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c2",
                  "is_local": true,
                  "location": 51,
                  "typeName": {
                    "location": 54,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 841 1`] = `
[
  "create function explain_sq_limit() returns setof text language plpgsql as
$$
declare ln text;
begin
    for ln in
        explain (analyze, summary off, timing off, costs off)
        select * from (select pk,c2 from sq_limit order by c1,pk) as x limit 3
    loop
        ln := regexp_replace(ln, 'Memory: \\S*',  'Memory: xxx');
        return next ln;
    end loop;
end;
$$",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "explain_sq_limit",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 54,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
declare ln text;
begin
    for ln in
        explain (analyze, summary off, timing off, costs off)
        select * from (select pk,c2 from sq_limit order by c1,pk) as x limit 3
    loop
        ln := regexp_replace(ln, 'Memory: \\S*',  'Memory: xxx');
        return next ln;
    end loop;
end;
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 71,
                },
              },
            ],
            "returnType": {
              "location": 49,
              "names": [
                {
                  "String": {
                    "sval": "text",
                  },
                },
              ],
              "setof": true,
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 855 1`] = `
[
  "select * from explain_sq_limit()",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "explain_sq_limit",
                                  },
                                },
                              ],
                              "location": 14,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 857 1`] = `
[
  "select * from (select pk,c2 from sq_limit order by c1,pk) as x limit 3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "x",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 33,
                            "relname": "sq_limit",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "sortClause": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "c1",
                                    },
                                  },
                                ],
                                "location": 51,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "pk",
                                    },
                                  },
                                ],
                                "location": 54,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                      ],
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 22,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "pk",
                                    },
                                  },
                                ],
                                "location": 22,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 25,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "c2",
                                    },
                                  },
                                ],
                                "location": 25,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitCount": {
              "A_Const": {
                "ival": {
                  "ival": 3,
                },
                "location": 69,
              },
            },
            "limitOption": "LIMIT_OPTION_COUNT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 859 1`] = `
[
  "drop function explain_sq_limit()",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "ObjectWithArgs": {
                  "objname": [
                    {
                      "String": {
                        "sval": "explain_sq_limit",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_FUNCTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 861 1`] = `
[
  "drop table sq_limit",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "sq_limit",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 870 1`] = `
[
  "declare c1 scroll cursor for
 select * from generate_series(1,4) i
  where i <> all (values (2),(3))",
  {
    "stmts": [
      {
        "stmt": {
          "DeclareCursorStmt": {
            "options": 258,
            "portalname": "c1",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "i",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 60,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 4,
                                        },
                                        "location": 62,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 44,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 77,
                    "operName": [
                      {
                        "String": {
                          "sval": "<>",
                        },
                      },
                    ],
                    "subLinkType": "ALL_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 93,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 97,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "i",
                            },
                          },
                        ],
                        "location": 75,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 874 1`] = `
[
  "move forward all in c1",
  {
    "stmts": [
      {
        "stmt": {
          "FetchStmt": {
            "direction": "FETCH_FORWARD",
            "howMany": 9223372036854776000,
            "ismove": true,
            "portalname": "c1",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 877 1`] = `
[
  "commit",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_COMMIT",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 884 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from (select f1 from subselect_tbl) ss)
select * from x where f1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 103,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 96,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 96,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 111,
                      },
                    },
                    "location": 114,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 116,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 70,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 62,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 62,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 889 1`] = `
[
  "explain (verbose, costs off)
with x as materialized (select * from (select f1 from subselect_tbl) ss)
select * from x where f1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 116,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 109,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 109,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 124,
                      },
                    },
                    "location": 127,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 129,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 83,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 75,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 75,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 60,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 60,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 894 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from (select f1, now() from subselect_tbl) ss)
select * from x where f1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 110,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 103,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 103,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 118,
                      },
                    },
                    "location": 121,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 123,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 77,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 62,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 62,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 66,
                                            "val": {
                                              "FuncCall": {
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "now",
                                                    },
                                                  },
                                                ],
                                                "location": 66,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 899 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from (select f1, random() from subselect_tbl) ss)
select * from x where f1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 113,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 106,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 106,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 121,
                      },
                    },
                    "location": 124,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 126,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 80,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 62,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 62,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 66,
                                            "val": {
                                              "FuncCall": {
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "random",
                                                    },
                                                  },
                                                ],
                                                "location": 66,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 904 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from (select f1 from subselect_tbl for update) ss)
select * from x where f1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 114,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 107,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 107,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 122,
                      },
                    },
                    "location": 125,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 127,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 70,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "lockingClause": [
                                        {
                                          "LockingClause": {
                                            "strength": "LCS_FORUPDATE",
                                            "waitPolicy": "LockWaitBlock",
                                          },
                                        },
                                      ],
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 62,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 62,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 909 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from (select f1, now() as n from subselect_tbl) ss)
select * from x, x x2 where x.n = x2.n",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 115,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x2",
                      },
                      "inh": true,
                      "location": 118,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 108,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 108,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "location": 129,
                      },
                    },
                    "location": 133,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x2",
                            },
                          },
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "location": 135,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 82,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 62,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 62,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 66,
                                            "name": "n",
                                            "val": {
                                              "FuncCall": {
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "now",
                                                    },
                                                  },
                                                ],
                                                "location": 66,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 913 1`] = `
[
  "explain (verbose, costs off)
with x as not materialized (select * from (select f1, now() as n from subselect_tbl) ss)
select * from x, x x2 where x.n = x2.n",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 132,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x2",
                      },
                      "inh": true,
                      "location": 135,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 125,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 125,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "location": 146,
                      },
                    },
                    "location": 150,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x2",
                            },
                          },
                          {
                            "String": {
                              "sval": "n",
                            },
                          },
                        ],
                        "location": 152,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeNever",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 99,
                                            "relname": "subselect_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 79,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 79,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 83,
                                            "name": "n",
                                            "val": {
                                              "FuncCall": {
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "now",
                                                    },
                                                  },
                                                ],
                                                "location": 83,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 64,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 64,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 918 1`] = `
[
  "explain (verbose, costs off)
with recursive x(a) as
  ((values ('a'), ('b'))
   union all
   (with z as not materialized (select * from x)
    select z.a || z1.a as a from z cross join z as z1
    where length(z.a || z1.a) < 5))
select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 243,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 236,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 236,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "location": 64,
                                          "sval": {
                                            "sval": "a",
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "location": 71,
                                          "sval": {
                                            "sval": "b",
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 172,
                                        "relname": "z",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "z1",
                                        },
                                        "inh": true,
                                        "location": 185,
                                        "relname": "z",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 150,
                                    "name": "a",
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 150,
                                          },
                                        },
                                        "location": 154,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "||",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 157,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "z",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 210,
                                              },
                                            },
                                            "location": 214,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "z1",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 217,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "length",
                                          },
                                        },
                                      ],
                                      "location": 203,
                                    },
                                  },
                                  "location": 223,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 5,
                                      },
                                      "location": 225,
                                    },
                                  },
                                },
                              },
                              "withClause": {
                                "ctes": [
                                  {
                                    "CommonTableExpr": {
                                      "ctematerialized": "CTEMaterializeNever",
                                      "ctename": "z",
                                      "ctequery": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 136,
                                                "relname": "x",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 129,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 129,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                      "location": 99,
                                    },
                                  },
                                ],
                                "location": 94,
                              },
                            },
                          },
                        },
                        "location": 44,
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 927 1`] = `
[
  "with recursive x(a) as
  ((values ('a'), ('b'))
   union all
   (with z as not materialized (select * from x)
    select z.a || z1.a as a from z cross join z as z1
    where length(z.a || z1.a) < 5))
select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 214,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 207,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 207,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "location": 35,
                                      "sval": {
                                        "sval": "a",
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "location": 42,
                                      "sval": {
                                        "sval": "b",
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 143,
                                    "relname": "z",
                                    "relpersistence": "p",
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "z1",
                                    },
                                    "inh": true,
                                    "location": 156,
                                    "relname": "z",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 121,
                                "name": "a",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "z",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 121,
                                      },
                                    },
                                    "location": 125,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "z1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 128,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 181,
                                          },
                                        },
                                        "location": 185,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "||",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 188,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "length",
                                      },
                                    },
                                  ],
                                  "location": 174,
                                },
                              },
                              "location": 194,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 196,
                                },
                              },
                            },
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeNever",
                                  "ctename": "z",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 107,
                                            "relname": "x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 100,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 100,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 70,
                                },
                              },
                            ],
                            "location": 65,
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 935 1`] = `
[
  "explain (verbose, costs off)
with recursive x(a) as
  ((values ('a'), ('b'))
   union all
   (with z as not materialized (select * from x)
    select z.a || z.a as a from z
    where length(z.a || z.a) < 5))
select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 222,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 215,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 215,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "all": true,
                            "larg": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "location": 64,
                                          "sval": {
                                            "sval": "a",
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "location": 71,
                                          "sval": {
                                            "sval": "b",
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_UNION",
                            "rarg": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 171,
                                    "relname": "z",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 150,
                                    "name": "a",
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 150,
                                          },
                                        },
                                        "location": 154,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "||",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 157,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "z",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 190,
                                              },
                                            },
                                            "location": 194,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "z",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 197,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "length",
                                          },
                                        },
                                      ],
                                      "location": 183,
                                    },
                                  },
                                  "location": 202,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "<",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 5,
                                      },
                                      "location": 204,
                                    },
                                  },
                                },
                              },
                              "withClause": {
                                "ctes": [
                                  {
                                    "CommonTableExpr": {
                                      "ctematerialized": "CTEMaterializeNever",
                                      "ctename": "z",
                                      "ctequery": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "inh": true,
                                                "location": 136,
                                                "relname": "x",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 129,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 129,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                      "location": 99,
                                    },
                                  },
                                ],
                                "location": 94,
                              },
                            },
                          },
                        },
                        "location": 44,
                      },
                    },
                  ],
                  "location": 29,
                  "recursive": true,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 944 1`] = `
[
  "with recursive x(a) as
  ((values ('a'), ('b'))
   union all
   (with z as not materialized (select * from x)
    select z.a || z.a as a from z
    where length(z.a || z.a) < 5))
select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 193,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 186,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 186,
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "x",
                    "ctequery": {
                      "SelectStmt": {
                        "all": true,
                        "larg": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "location": 35,
                                      "sval": {
                                        "sval": "a",
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "location": 42,
                                      "sval": {
                                        "sval": "b",
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_UNION",
                        "rarg": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 142,
                                "relname": "z",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 121,
                                "name": "a",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "z",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 121,
                                      },
                                    },
                                    "location": 125,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "||",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "z",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 128,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 161,
                                          },
                                        },
                                        "location": 165,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "||",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "z",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 168,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "length",
                                      },
                                    },
                                  ],
                                  "location": 154,
                                },
                              },
                              "location": 173,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 175,
                                },
                              },
                            },
                          },
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeNever",
                                  "ctename": "z",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 107,
                                            "relname": "x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 100,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 100,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 70,
                                },
                              },
                            ],
                            "location": 65,
                          },
                        },
                      },
                    },
                    "location": 15,
                  },
                },
              ],
              "recursive": true,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 953 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from int4_tbl)
select * from (with y as (select * from x) select * from y) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 121,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 114,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 114,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "y",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 104,
                                            "relname": "x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 97,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 97,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 84,
                                },
                              },
                            ],
                            "location": 79,
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 71,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 71,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 54,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 957 1`] = `
[
  "explain (verbose, costs off)
with x as materialized (select * from int4_tbl)
select * from (with y as (select * from x) select * from y) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 134,
                                "relname": "y",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 127,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 127,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "y",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 117,
                                            "relname": "x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 110,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 110,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 97,
                                },
                              },
                            ],
                            "location": 92,
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 84,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 84,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 67,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 60,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 60,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 963 1`] = `
[
  "explain (verbose, costs off)
with x as (select 1 as y)
select * from (with x as (select 2 as y) select * from x) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 110,
                                "relname": "x",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 103,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 103,
                                  },
                                },
                              },
                            },
                          ],
                          "withClause": {
                            "ctes": [
                              {
                                "CommonTableExpr": {
                                  "ctematerialized": "CTEMaterializeDefault",
                                  "ctename": "x",
                                  "ctequery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 88,
                                            "name": "y",
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 88,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                  "location": 75,
                                },
                              },
                            ],
                            "location": 70,
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 62,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 62,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "name": "y",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`subselect.sql > line 968 1`] = `
[
  "explain (verbose, costs off)
with x as (select * from subselect_tbl)
select * from x for update",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 83,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "lockingClause": [
                  {
                    "LockingClause": {
                      "strength": "LCS_FORUPDATE",
                      "waitPolicy": "LockWaitBlock",
                    },
                  },
                ],
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 76,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "x",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 54,
                                  "relname": "subselect_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 47,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 47,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
