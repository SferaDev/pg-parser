// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`join.sql > line 12 1`] = `
[
  "CREATE TABLE J2_TBL (
  i integer,
  k integer
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "j2_tbl",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 26,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "k",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 30 1`] = `
[
  "INSERT INTO J2_TBL VALUES (1, -1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "j2_tbl",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 27,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {},
                            "location": 30,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 41 1`] = `
[
  "create temp table onerow()",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "onerow",
              "relpersistence": "t",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 55 1`] = `
[
  "SELECT *
  FROM J1_TBL tx",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "tx",
                  },
                  "inh": true,
                  "location": 16,
                  "relname": "j1_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 64 1`] = `
[
  "SELECT *
  FROM J1_TBL t1 (a, b, c), J2_TBL t2 (d, e)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "inh": true,
                  "location": 16,
                  "relname": "j1_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t2",
                    "colnames": [
                      {
                        "String": {
                          "sval": "d",
                        },
                      },
                      {
                        "String": {
                          "sval": "e",
                        },
                      },
                    ],
                  },
                  "inh": true,
                  "location": 37,
                  "relname": "j2_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 67 1`] = `
[
  "SELECT t1.a, t2.e
  FROM J1_TBL t1 (a, b, c), J2_TBL t2 (d, e)
  WHERE t1.a = t2.d",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "inh": true,
                  "location": 25,
                  "relname": "j1_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t2",
                    "colnames": [
                      {
                        "String": {
                          "sval": "d",
                        },
                      },
                      {
                        "String": {
                          "sval": "e",
                        },
                      },
                    ],
                  },
                  "inh": true,
                  "location": 46,
                  "relname": "j2_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "e",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t1",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 71,
                  },
                },
                "location": 76,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t2",
                        },
                      },
                      {
                        "String": {
                          "sval": "d",
                        },
                      },
                    ],
                    "location": 78,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 82 1`] = `
[
  "SELECT i, k, t
  FROM J1_TBL CROSS JOIN J2_TBL",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 22,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 86 1`] = `
[
  "SELECT t1.i, k, t
  FROM J1_TBL t1 CROSS JOIN J2_TBL t2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 25,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 46,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 89 1`] = `
[
  "SELECT ii, tt, kk
  FROM (J1_TBL CROSS JOIN J2_TBL)
    AS tx (ii, jj, tt, ii2, kk)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "alias": {
                    "aliasname": "tx",
                    "colnames": [
                      {
                        "String": {
                          "sval": "ii",
                        },
                      },
                      {
                        "String": {
                          "sval": "jj",
                        },
                      },
                      {
                        "String": {
                          "sval": "tt",
                        },
                      },
                      {
                        "String": {
                          "sval": "ii2",
                        },
                      },
                      {
                        "String": {
                          "sval": "kk",
                        },
                      },
                    ],
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 26,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 44,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ii",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tt",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "kk",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 93 1`] = `
[
  "SELECT tx.ii, tx.jj, tx.kk
  FROM (J1_TBL t1 (a, b, c) CROSS JOIN J2_TBL t2 (d, e))
    AS tx (ii, jj, tt, ii2, kk)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "alias": {
                    "aliasname": "tx",
                    "colnames": [
                      {
                        "String": {
                          "sval": "ii",
                        },
                      },
                      {
                        "String": {
                          "sval": "jj",
                        },
                      },
                      {
                        "String": {
                          "sval": "tt",
                        },
                      },
                      {
                        "String": {
                          "sval": "ii2",
                        },
                      },
                      {
                        "String": {
                          "sval": "kk",
                        },
                      },
                    ],
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                        "colnames": [
                          {
                            "String": {
                              "sval": "d",
                            },
                          },
                          {
                            "String": {
                              "sval": "e",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 66,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tx",
                          },
                        },
                        {
                          "String": {
                            "sval": "ii",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tx",
                          },
                        },
                        {
                          "String": {
                            "sval": "jj",
                          },
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 21,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tx",
                          },
                        },
                        {
                          "String": {
                            "sval": "kk",
                          },
                        },
                      ],
                      "location": 21,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 97 1`] = `
[
  "SELECT *
  FROM J1_TBL CROSS JOIN J2_TBL a CROSS JOIN J2_TBL b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 16,
                          "relname": "j1_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "j2_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 54,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 114 1`] = `
[
  "SELECT *
  FROM J1_TBL INNER JOIN J2_TBL USING (i)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 121 1`] = `
[
  "SELECT *
  FROM J1_TBL t1 (a, b, c) JOIN J2_TBL t2 (a, d) USING (a)
  ORDER BY a, d",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "d",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 41,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 79,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "d",
                          },
                        },
                      ],
                      "location": 82,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 125 1`] = `
[
  "SELECT *
  FROM J1_TBL t1 (a, b, c) JOIN J2_TBL t2 (a, b) USING (b)
  ORDER BY b, t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 41,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "b",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 79,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 82,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 130 1`] = `
[
  "SELECT * FROM J1_TBL JOIN J2_TBL USING (i) WHERE J1_TBL.t = 'one'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 26,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "j1_tbl",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                    ],
                    "location": 49,
                  },
                },
                "location": 58,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 60,
                    "sval": {
                      "sval": "one",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 132 1`] = `
[
  "  -- error
SELECT * FROM J1_TBL JOIN J2_TBL USING (i) AS x WHERE x.i = 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "join_using_alias": {
                    "aliasname": "x",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 25,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 37,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "location": 65,
                  },
                },
                "location": 69,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 71,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 133 1`] = `
[
  "  -- ok
SELECT * FROM J1_TBL JOIN J2_TBL USING (i) AS x WHERE x.t = 'one'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "join_using_alias": {
                    "aliasname": "x",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 22,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                    ],
                    "location": 62,
                  },
                },
                "location": 66,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 68,
                    "sval": {
                      "sval": "one",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 136 1`] = `
[
  "  -- error
SELECT x.* FROM J1_TBL JOIN J2_TBL USING (i) AS x WHERE J1_TBL.t = 'one'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "join_using_alias": {
                    "aliasname": "x",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 27,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "j1_tbl",
                        },
                      },
                      {
                        "String": {
                          "sval": "t",
                        },
                      },
                    ],
                    "location": 67,
                  },
                },
                "location": 76,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 78,
                    "sval": {
                      "sval": "one",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 149 1`] = `
[
  "SELECT *
  FROM J1_TBL t1 (a, b, c) NATURAL JOIN J2_TBL t2 (a, d)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "d",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 49,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 168 1`] = `
[
  "SELECT *
  FROM J1_TBL JOIN J2_TBL ON (J1_TBL.i = J2_TBL.k)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "j1_tbl",
                              },
                            },
                            {
                              "String": {
                                "sval": "i",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                      "location": 48,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "j2_tbl",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 50,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 28,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 189 1`] = `
[
  "SELECT *
  FROM J1_TBL LEFT JOIN J2_TBL USING (i)
  ORDER BY i, k, t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 33,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                      "location": 61,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 64,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "location": 67,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 193 1`] = `
[
  "SELECT *
  FROM J1_TBL RIGHT OUTER JOIN J2_TBL USING (i)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 199 1`] = `
[
  "SELECT *
  FROM J1_TBL FULL OUTER JOIN J2_TBL USING (i)
  ORDER BY i, k, t",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                      "location": 67,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "k",
                          },
                        },
                      ],
                      "location": 70,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                      ],
                      "location": 73,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 207 1`] = `
[
  "SELECT *
  FROM J1_TBL LEFT JOIN J2_TBL USING (i) WHERE (k = 1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 33,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "k",
                        },
                      },
                    ],
                    "location": 57,
                  },
                },
                "location": 59,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 61,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 210 1`] = `
[
  "SELECT *
  FROM J1_TBL LEFT JOIN J2_TBL USING (i) WHERE (i = 1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 33,
                      "relname": "j2_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                    "location": 57,
                  },
                },
                "location": 59,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 61,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 216 1`] = `
[
  "explain (costs off)
select * from int4_tbl i4, tenk1 a
where exists(select * from tenk1 b
             where a.twothousand = b.twothousand and a.fivethous <> b.fivethous)
      and i4.f1 = a.tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 34,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 47,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 61,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 82,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 75,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 75,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "twothousand",
                                                },
                                              },
                                            ],
                                            "location": 109,
                                          },
                                        },
                                        "location": 123,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "twothousand",
                                                },
                                              },
                                            ],
                                            "location": 125,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "fivethous",
                                                },
                                              },
                                            ],
                                            "location": 143,
                                          },
                                        },
                                        "location": 155,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "<>",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "fivethous",
                                                },
                                              },
                                            ],
                                            "location": 158,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 139,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 181,
                            },
                          },
                          "location": 187,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 189,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 177,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 235 1`] = `
[
  "INSERT INTO t1 VALUES ( 'bb', 11 )",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "t1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 24,
                            "sval": {
                              "sval": "bb",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 30,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 243 1`] = `
[
  "SELECT * FROM t1 FULL JOIN t2 USING (name) FULL JOIN t3 USING (name)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 14,
                          "relname": "t1",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 27,
                          "relname": "t2",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 53,
                      "relname": "t3",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "name",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 250 1`] = `
[
  "SELECT * FROM
(SELECT * FROM t2) as s2
INNER JOIN
(SELECT * FROM t3) s3
USING (name)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 29,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 65,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 58,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 58,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "name",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 256 1`] = `
[
  "SELECT * FROM
(SELECT * FROM t2) as s2
LEFT JOIN
(SELECT * FROM t3) s3
USING (name)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 29,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 57,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "name",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 262 1`] = `
[
  "SELECT * FROM
(SELECT * FROM t2) as s2
FULL JOIN
(SELECT * FROM t3) s3
USING (name)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 29,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 64,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 57,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "name",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 270 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
NATURAL INNER JOIN
(SELECT name, n as s3_n, 3 as s3_2 FROM t3) s3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 54,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 28,
                                "name": "s2_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 28,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 39,
                                "name": "s2_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 39,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 123,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 91,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 91,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 97,
                                "name": "s3_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 97,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 108,
                                "name": "s3_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 108,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 275 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
NATURAL LEFT JOIN
(SELECT name, n as s3_n, 3 as s3_2 FROM t3) s3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 54,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 28,
                                "name": "s2_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 28,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 39,
                                "name": "s2_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 39,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 122,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 90,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 90,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 96,
                                "name": "s3_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 96,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 107,
                                "name": "s3_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 107,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 280 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
NATURAL FULL JOIN
(SELECT name, n as s3_n, 3 as s3_2 FROM t3) s3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 54,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 28,
                                "name": "s2_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 28,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 39,
                                "name": "s2_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 39,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 122,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 90,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 90,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 96,
                                "name": "s3_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 96,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 107,
                                "name": "s3_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 107,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 285 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s1_n, 1 as s1_1 FROM t1) as s1
NATURAL INNER JOIN
(SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
NATURAL INNER JOIN
(SELECT name, n as s3_n, 3 as s3_2 FROM t3) s3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "isNatural": true,
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 54,
                                    "relname": "t1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 22,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "location": 22,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 28,
                                    "name": "s1_n",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 28,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 39,
                                    "name": "s1_1",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 39,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 123,
                                    "relname": "t2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 91,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "location": 91,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 97,
                                    "name": "s2_n",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 97,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 108,
                                    "name": "s2_2",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 108,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 192,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 160,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 160,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 166,
                                "name": "s3_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 166,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 177,
                                "name": "s3_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 177,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 292 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s1_n, 1 as s1_1 FROM t1) as s1
NATURAL FULL JOIN
(SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
NATURAL FULL JOIN
(SELECT name, n as s3_n, 3 as s3_2 FROM t3) s3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "JoinExpr": {
                      "isNatural": true,
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 54,
                                    "relname": "t1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 22,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "location": 22,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 28,
                                    "name": "s1_n",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 28,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 39,
                                    "name": "s1_1",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 39,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 122,
                                    "relname": "t2",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 90,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "name",
                                            },
                                          },
                                        ],
                                        "location": 90,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 96,
                                    "name": "s2_n",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                        ],
                                        "location": 96,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 107,
                                    "name": "s2_2",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 107,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 190,
                                "relname": "t3",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 158,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 158,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 164,
                                "name": "s3_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 164,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 175,
                                "name": "s3_2",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 175,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 299 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s1_n FROM t1) as s1
NATURAL FULL JOIN
  (SELECT * FROM
    (SELECT name, n as s2_n FROM t2) as s2
    NATURAL FULL JOIN
    (SELECT name, n as s3_n FROM t3) as s3
  ) ss2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 43,
                                "relname": "t1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 28,
                                "name": "s1_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 28,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "isNatural": true,
                                "jointype": "JOIN_FULL",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "s2",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 121,
                                              "relname": "t2",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 100,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "name",
                                                      },
                                                    },
                                                  ],
                                                  "location": 100,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 106,
                                              "name": "s2_n",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "n",
                                                      },
                                                    },
                                                  ],
                                                  "location": 106,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "s3",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 186,
                                              "relname": "t3",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 165,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "name",
                                                      },
                                                    },
                                                  ],
                                                  "location": 165,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 171,
                                              "name": "s3_n",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "n",
                                                      },
                                                    },
                                                  ],
                                                  "location": 171,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 81,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 81,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 308 1`] = `
[
  "SELECT * FROM
(SELECT name, n as s1_n FROM t1) as s1
NATURAL FULL JOIN
  (SELECT * FROM
    (SELECT name, n as s2_n, 2 as s2_2 FROM t2) as s2
    NATURAL FULL JOIN
    (SELECT name, n as s3_n FROM t3) as s3
  ) ss2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "isNatural": true,
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 43,
                                "relname": "t1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 22,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 28,
                                "name": "s1_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 28,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "isNatural": true,
                                "jointype": "JOIN_FULL",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "s2",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 132,
                                              "relname": "t2",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 100,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "name",
                                                      },
                                                    },
                                                  ],
                                                  "location": 100,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 106,
                                              "name": "s2_n",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "n",
                                                      },
                                                    },
                                                  ],
                                                  "location": 106,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 117,
                                              "name": "s2_2",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 2,
                                                  },
                                                  "location": 117,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "s3",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 197,
                                              "relname": "t3",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 176,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "name",
                                                      },
                                                    },
                                                  ],
                                                  "location": 176,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 182,
                                              "name": "s3_n",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "n",
                                                      },
                                                    },
                                                  ],
                                                  "location": 182,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 81,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 81,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 318 1`] = `
[
  "SELECT * FROM
  (SELECT name, n as s1_n FROM t1) as s1
FULL JOIN
  (SELECT name, 2 as s2_n FROM t2) as s2
ON (s1_n = s2_n)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 45,
                                "relname": "t1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 24,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 24,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 30,
                                "name": "s1_n",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 30,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s1_n",
                              },
                            },
                          ],
                          "location": 110,
                        },
                      },
                      "location": 115,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s2_n",
                              },
                            },
                          ],
                          "location": 117,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 96,
                                "relname": "t2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 75,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "name",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 81,
                                "name": "s2_n",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 81,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 334 1`] = `
[
  "create temp table y (y1 int, y2 int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "y",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "y1",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "y2",
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 340 1`] = `
[
  "select * from x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "x",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 343 1`] = `
[
  "select * from x left join y on (x1 = y1 and x2 is not null)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x1",
                                    },
                                  },
                                ],
                                "location": 32,
                              },
                            },
                            "location": 35,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "y1",
                                    },
                                  },
                                ],
                                "location": 37,
                              },
                            },
                          },
                        },
                        {
                          "NullTest": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x2",
                                    },
                                  },
                                ],
                                "location": 44,
                              },
                            },
                            "location": 47,
                            "nulltesttype": "IS_NOT_NULL",
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 40,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 26,
                      "relname": "y",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 346 1`] = `
[
  "select * from (x left join y on (x1 = y1)) left join x xx(xx1,xx2)
on (x1 = xx1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 15,
                          "relname": "x",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 33,
                            },
                          },
                          "location": 36,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y1",
                                  },
                                },
                              ],
                              "location": 38,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 27,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x1",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "xx1",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "xx",
                        "colnames": [
                          {
                            "String": {
                              "sval": "xx1",
                            },
                          },
                          {
                            "String": {
                              "sval": "xx2",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 53,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 355 1`] = `
[
  "select * from (x left join y on (x1 = y1)) left join x xx(xx1,xx2)
on (x1 = xx1) where (x2 is not null)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 15,
                          "relname": "x",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 33,
                            },
                          },
                          "location": 36,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y1",
                                  },
                                },
                              ],
                              "location": 38,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 27,
                          "relname": "y",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x1",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "xx1",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "xx",
                        "colnames": [
                          {
                            "String": {
                              "sval": "xx1",
                            },
                          },
                          {
                            "String": {
                              "sval": "xx2",
                            },
                          },
                        ],
                      },
                      "inh": true,
                      "location": 53,
                      "relname": "x",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "NullTest": {
                "arg": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "x2",
                        },
                      },
                    ],
                    "location": 88,
                  },
                },
                "location": 91,
                "nulltesttype": "IS_NOT_NULL",
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 366 1`] = `
[
  "select count(*) from tenk1 a where unique1 in
  (select unique1 from tenk1 b join tenk1 c using (unique1)
   where b.unique2 = 42)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 21,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 43,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "b",
                              },
                              "inh": true,
                              "location": 69,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "c",
                              },
                              "inh": true,
                              "location": 82,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                          "usingClause": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 56,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 56,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "unique2",
                                },
                              },
                            ],
                            "location": 115,
                          },
                        },
                        "location": 125,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "A_Const": {
                            "ival": {
                              "ival": 42,
                            },
                            "location": 127,
                          },
                        },
                      },
                    },
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "unique1",
                        },
                      },
                    ],
                    "location": 35,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 374 1`] = `
[
  "select count(*) from tenk1 x where
  x.unique1 in (select a.f1 from int4_tbl a,float8_tbl b where a.f1=b.f1) and
  x.unique1 = 0 and
  x.unique1 in (select aa.f1 from int4_tbl aa,float8_tbl bb where aa.f1=bb.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "x",
                  },
                  "inh": true,
                  "location": 21,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 47,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "a",
                                },
                                "inh": true,
                                "location": 68,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "b",
                                },
                                "inh": true,
                                "location": 79,
                                "relname": "float8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 58,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 58,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 98,
                                },
                              },
                              "location": 102,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 103,
                                },
                              },
                            },
                          },
                        },
                      },
                      "testexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 115,
                        },
                      },
                      "location": 125,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 127,
                        },
                      },
                    },
                  },
                  {
                    "SubLink": {
                      "location": 145,
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "aa",
                                },
                                "inh": true,
                                "location": 167,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "bb",
                                },
                                "inh": true,
                                "location": 179,
                                "relname": "float8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 156,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "aa",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 156,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "aa",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 199,
                                },
                              },
                              "location": 204,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "bb",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 205,
                                },
                              },
                            },
                          },
                        },
                      },
                      "testexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 135,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 109,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 380 1`] = `
[
  "begin",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_BEGIN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 392 1`] = `
[
  "explain (costs off)
select aa, bb, unique1, unique1
  from tenk1 right join b_star on aa = unique1
  where bb < bb and bb is null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 59,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "aa",
                                  },
                                },
                              ],
                              "location": 86,
                            },
                          },
                          "location": 89,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 91,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 76,
                          "relname": "b_star",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "aa",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "bb",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 44,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 44,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "bb",
                                  },
                                },
                              ],
                              "location": 107,
                            },
                          },
                          "location": 110,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "bb",
                                  },
                                },
                              ],
                              "location": 112,
                            },
                          },
                        },
                      },
                      {
                        "NullTest": {
                          "arg": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "bb",
                                  },
                                },
                              ],
                              "location": 119,
                            },
                          },
                          "location": 122,
                          "nulltesttype": "IS_NULL",
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 115,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 397 1`] = `
[
  "select aa, bb, unique1, unique1
  from tenk1 right join b_star on aa = unique1
  where bb < bb and bb is null",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "aa",
                              },
                            },
                          ],
                          "location": 66,
                        },
                      },
                      "location": 69,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 56,
                      "relname": "b_star",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "aa",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "bb",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 24,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 24,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "bb",
                              },
                            },
                          ],
                          "location": 87,
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "bb",
                              },
                            },
                          ],
                          "location": 92,
                        },
                      },
                    },
                  },
                  {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "bb",
                              },
                            },
                          ],
                          "location": 99,
                        },
                      },
                      "location": 102,
                      "nulltesttype": "IS_NULL",
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 95,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 404 1`] = `
[
  "explain (costs off)
select * from int8_tbl i1 left join (int8_tbl i2 join
  (select 123 as x) ss on i2.q1 = x) on i1.q2 = i2.q2
order by 1, 2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 114,
                            },
                          },
                          "location": 120,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 122,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i2",
                              },
                              "inh": true,
                              "location": 57,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 100,
                                },
                              },
                              "location": 106,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "x",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 84,
                                        "name": "x",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 123,
                                            },
                                            "location": 84,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 137,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 140,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 409 1`] = `
[
  "select * from int8_tbl i1 left join (int8_tbl i2 join
  (select 123 as x) ss on i2.q1 = x) on i1.q2 = i2.q2
order by 1, 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i1",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 94,
                        },
                      },
                      "location": 100,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 102,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i2",
                          },
                          "inh": true,
                          "location": 37,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 80,
                            },
                          },
                          "location": 86,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 64,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 123,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 117,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 120,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 417 1`] = `
[
  "select count(*)
from
  (select t3.tenthous as x1, coalesce(t1.stringu1, t2.stringu1) as x2
   from tenk1 t1
   left join tenk1 t2 on t1.unique1 = t2.unique1
   join tenk1 t3 on t1.unique2 = t3.unique2) ss,
  tenk1 t4,
  tenk1 t5
where t4.thousand = t5.unique1 and ss.x1 = t4.tenthous and ss.x2 = t5.stringu1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "JoinExpr": {
                            "jointype": "JOIN_INNER",
                            "larg": {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t1",
                                    },
                                    "inh": true,
                                    "location": 99,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 133,
                                      },
                                    },
                                    "location": 144,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 146,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 121,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                            "quals": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 177,
                                  },
                                },
                                "location": 188,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 190,
                                  },
                                },
                              },
                            },
                            "rarg": {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t3",
                                },
                                "inh": true,
                                "location": 165,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 31,
                            "name": "x1",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t3",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "tenthous",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 50,
                            "name": "x2",
                            "val": {
                              "CoalesceExpr": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "stringu1",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "stringu1",
                                          },
                                        },
                                      ],
                                      "location": 72,
                                    },
                                  },
                                ],
                                "location": 50,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t4",
                  },
                  "inh": true,
                  "location": 208,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t5",
                  },
                  "inh": true,
                  "location": 220,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t4",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 235,
                        },
                      },
                      "location": 247,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t5",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 249,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "x1",
                              },
                            },
                          ],
                          "location": 264,
                        },
                      },
                      "location": 270,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t4",
                              },
                            },
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 272,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "x2",
                              },
                            },
                          ],
                          "location": 288,
                        },
                      },
                      "location": 294,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t5",
                              },
                            },
                            {
                              "String": {
                                "sval": "stringu1",
                              },
                            },
                          ],
                          "location": 296,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 260,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 431 1`] = `
[
  "explain (costs off)
select a.f1, b.f1, t.thousand, t.tenthous from
  tenk1 t,
  (select sum(f1)+1 as f1 from int4_tbl i4a) a,
  (select sum(f1) as f1 from int4_tbl i4b) b
where b.f1 = t.thousand and a.f1 = b.f1 and (a.f1+b.f1+999) = t.tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 69,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i4a",
                                },
                                "inh": true,
                                "location": 109,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 88,
                                "name": "f1",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "FuncCall": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 92,
                                            },
                                          },
                                        ],
                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                        "funcname": [
                                          {
                                            "String": {
                                              "sval": "sum",
                                            },
                                          },
                                        ],
                                        "location": 88,
                                      },
                                    },
                                    "location": 95,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 96,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i4b",
                                },
                                "inh": true,
                                "location": 155,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 136,
                                "name": "f1",
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 140,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "sum",
                                        },
                                      },
                                    ],
                                    "location": 136,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 177,
                            },
                          },
                          "location": 182,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 184,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 199,
                            },
                          },
                          "location": 204,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 206,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 216,
                                    },
                                  },
                                  "location": 220,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "+",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 221,
                                    },
                                  },
                                },
                              },
                              "location": 225,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 999,
                                  },
                                  "location": 226,
                                },
                              },
                            },
                          },
                          "location": 231,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 233,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 195,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 438 1`] = `
[
  "select a.f1, b.f1, t.thousand, t.tenthous from
  tenk1 t,
  (select sum(f1)+1 as f1 from int4_tbl i4a) a,
  (select sum(f1) as f1 from int4_tbl i4b) b
where b.f1 = t.thousand and a.f1 = b.f1 and (a.f1+b.f1+999) = t.tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "inh": true,
                  "location": 49,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i4a",
                            },
                            "inh": true,
                            "location": 89,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 68,
                            "name": "f1",
                            "val": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 72,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "sum",
                                        },
                                      },
                                    ],
                                    "location": 68,
                                  },
                                },
                                "location": 75,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "+",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 76,
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "b",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i4b",
                            },
                            "inh": true,
                            "location": 135,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 116,
                            "name": "f1",
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 120,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "sum",
                                    },
                                  },
                                ],
                                "location": 116,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 31,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 31,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 157,
                        },
                      },
                      "location": 162,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 164,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 179,
                        },
                      },
                      "location": 184,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 186,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 196,
                                },
                              },
                              "location": 200,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 201,
                                },
                              },
                            },
                          },
                          "location": 205,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 999,
                              },
                              "location": 206,
                            },
                          },
                        },
                      },
                      "location": 211,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 213,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 175,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 447 1`] = `
[
  "explain (costs off)
select t1.f1
from int4_tbl t1, int4_tbl t2
  left join int4_tbl t3 on t3.f1 > 0
  left join int4_tbl t4 on t3.f1 > 1
where t4.f1 is null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 38,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 51,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 90,
                                },
                              },
                              "location": 96,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 98,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 75,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 127,
                            },
                          },
                          "location": 133,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 135,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 112,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t4",
                            },
                          },
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 143,
                      },
                    },
                    "location": 149,
                    "nulltesttype": "IS_NULL",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 454 1`] = `
[
  "select t1.f1
from int4_tbl t1, int4_tbl t2
  left join int4_tbl t3 on t3.f1 > 0
  left join int4_tbl t4 on t3.f1 > 1
where t4.f1 is null",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                  },
                  "inh": true,
                  "location": 18,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 31,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 70,
                            },
                          },
                          "location": 76,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 78,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t3",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 107,
                        },
                      },
                      "location": 113,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 115,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t4",
                      },
                      "inh": true,
                      "location": 92,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "NullTest": {
                "arg": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t4",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 123,
                  },
                },
                "location": 129,
                "nulltesttype": "IS_NULL",
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 460 1`] = `
[
  "explain (costs off)
select *
from int4_tbl t1 left join int4_tbl t2 on true
  left join int4_tbl t3 on t2.f1 > 0
  left join int4_tbl t4 on t3.f1 > 0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 71,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 56,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 103,
                                },
                              },
                              "location": 109,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 111,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 88,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 140,
                            },
                          },
                          "location": 146,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {},
                              "location": 148,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 125,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 466 1`] = `
[
  "explain (costs off)
select * from onek t1
  left join onek t2 on t1.unique1 = t2.unique1
  left join onek t3 on t2.unique1 != t3.unique1
  left join onek t4 on t3.unique1 = t4.unique1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 65,
                                    },
                                  },
                                  "location": 76,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 78,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 54,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 112,
                                },
                              },
                              "location": 123,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<>",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 126,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 101,
                              "relname": "onek",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 160,
                            },
                          },
                          "location": 171,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 173,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 149,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 472 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join (select now() from int4_tbl t2
             left join int4_tbl t3 on t2.f1 = t3.f1
             left join int4_tbl t4 on t3.f1 = t4.f1) s on true
  inner join int4_tbl t5 on true",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 199,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "JoinExpr": {
                                            "jointype": "JOIN_LEFT",
                                            "larg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t2",
                                                },
                                                "inh": true,
                                                "location": 77,
                                                "relname": "int4_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "quals": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "t2",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 127,
                                                  },
                                                },
                                                "location": 133,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "t3",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 135,
                                                  },
                                                },
                                              },
                                            },
                                            "rarg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t3",
                                                },
                                                "inh": true,
                                                "location": 112,
                                                "relname": "int4_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 179,
                                              },
                                            },
                                            "location": 185,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t4",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 187,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t4",
                                            },
                                            "inh": true,
                                            "location": 164,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 66,
                                        "val": {
                                          "FuncCall": {
                                            "funcformat": "COERCE_EXPLICIT_CALL",
                                            "funcname": [
                                              {
                                                "String": {
                                                  "sval": "now",
                                                },
                                              },
                                            ],
                                            "location": 66,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 232,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t5",
                          },
                          "inh": true,
                          "location": 217,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 479 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join int4_tbl t2 on true
  left join int4_tbl t3 on true
  left join int4_tbl t4 on t2.f1 = t3.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 73,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 58,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 105,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 90,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 137,
                            },
                          },
                          "location": 143,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 122,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 485 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join int4_tbl t2 on true
  left join int4_tbl t3 on t2.f1 = t3.f1
  left join int4_tbl t4 on t3.f1 != t4.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 73,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 58,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 105,
                                },
                              },
                              "location": 111,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 113,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 90,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 146,
                            },
                          },
                          "location": 152,
                          "name": [
                            {
                              "String": {
                                "sval": "<>",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 155,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 131,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 491 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join (int4_tbl t2 left join int4_tbl t3 on t2.f1 > 0) on t2.f1 > 1
  left join int4_tbl t4 on t2.f1 > 2 and t3.f1 > 3
where t1.f1 = coalesce(t2.f1, 1)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 110,
                                },
                              },
                              "location": 116,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 118,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 59,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 96,
                                    },
                                  },
                                  "location": 102,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 104,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t3",
                                  },
                                  "inh": true,
                                  "location": 81,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 147,
                                  },
                                },
                                "location": 153,
                                "name": [
                                  {
                                    "String": {
                                      "sval": ">",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 155,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 161,
                                  },
                                },
                                "location": 167,
                                "name": [
                                  {
                                    "String": {
                                      "sval": ">",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 169,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 157,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 132,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 177,
                      },
                    },
                    "location": 183,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "CoalesceExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 194,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 201,
                            },
                          },
                        ],
                        "location": 185,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 497 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join ((select t2.f1 from int4_tbl t2
                left join int4_tbl t3 on t2.f1 > 0
                where t3.f1 is null) s
             left join tenk1 t4 on s.f1 > 1)
    on s.f1 = t1.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 232,
                            },
                          },
                          "location": 237,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 239,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t2",
                                            },
                                            "inh": true,
                                            "location": 78,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 131,
                                              },
                                            },
                                            "location": 137,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": ">",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {},
                                                "location": 139,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 116,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 67,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 67,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "NullTest": {
                                      "arg": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t3",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 163,
                                        },
                                      },
                                      "location": 169,
                                      "nulltesttype": "IS_NULL",
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "s",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 215,
                                },
                              },
                              "location": 220,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 222,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t4",
                              },
                              "inh": true,
                              "location": 203,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 505 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1
  left join ((select t2.f1 from int4_tbl t2
                left join int4_tbl t3 on t2.f1 > 0
                where t2.f1 <> coalesce(t3.f1, -1)) s
             left join tenk1 t4 on s.f1 > 1)
    on s.f1 = t1.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 247,
                            },
                          },
                          "location": 252,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 254,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t2",
                                            },
                                            "inh": true,
                                            "location": 78,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 131,
                                              },
                                            },
                                            "location": 137,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": ">",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {},
                                                "location": 139,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 116,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 67,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 67,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 163,
                                        },
                                      },
                                      "location": 169,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "<>",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "CoalesceExpr": {
                                          "args": [
                                            {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 181,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {},
                                                "location": 188,
                                              },
                                            },
                                          ],
                                          "location": 172,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "s",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 230,
                                },
                              },
                              "location": 235,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 237,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t4",
                              },
                              "inh": true,
                              "location": 218,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 513 1`] = `
[
  "explain (costs off)
select * from onek t1
    left join onek t2 on t1.unique1 = t2.unique1
    left join onek t3 on t2.unique1 = t3.unique1
    left join onek t4 on t3.unique1 = t4.unique1 and t2.unique2 = t4.unique2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 67,
                                    },
                                  },
                                  "location": 78,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 80,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 56,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 116,
                                },
                              },
                              "location": 127,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 105,
                              "relname": "onek",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 165,
                                  },
                                },
                                "location": 176,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 178,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 193,
                                  },
                                },
                                "location": 204,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 206,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 189,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 154,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 519 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1 left join
    (int8_tbl t2 left join int8_tbl t3 full join int8_tbl t4 on false on false)
    left join int8_tbl t5 on t2.q1 = t5.q1
on t2.q2 = 123",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 182,
                            },
                          },
                          "location": 188,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 123,
                              },
                              "location": 190,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 61,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {},
                                  "location": 129,
                                },
                              },
                              "rarg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_FULL",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t3",
                                      },
                                      "inh": true,
                                      "location": 83,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Const": {
                                      "boolval": {},
                                      "location": 120,
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t4",
                                      },
                                      "inh": true,
                                      "location": 105,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 165,
                                },
                              },
                              "location": 171,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t5",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 173,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t5",
                              },
                              "inh": true,
                              "location": 150,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 525 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1
    left join int8_tbl t2 on true
    left join lateral
      (select * from int8_tbl t3 where t3.q1 = t2.q1 offset 0) s
      on t2.q1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 75,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 60,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 176,
                            },
                          },
                          "location": 182,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 184,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 123,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOffset": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 162,
                                },
                              },
                              "limitOption": "LIMIT_OPTION_COUNT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 116,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 116,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 141,
                                    },
                                  },
                                  "location": 147,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 149,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 532 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1
    left join int8_tbl t2 on true
    left join lateral
      (select * from generate_series(t2.q1, 100)) s
      on t2.q1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 75,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 60,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 163,
                            },
                          },
                          "location": 169,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 171,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeFunction": {
                                    "functions": [
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "FuncCall": {
                                                "args": [
                                                  {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "t2",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "q1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 139,
                                                    },
                                                  },
                                                  {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 100,
                                                      },
                                                      "location": 146,
                                                    },
                                                  },
                                                ],
                                                "funcformat": "COERCE_EXPLICIT_CALL",
                                                "funcname": [
                                                  {
                                                    "String": {
                                                      "sval": "generate_series",
                                                    },
                                                  },
                                                ],
                                                "location": 123,
                                              },
                                            },
                                            {},
                                          ],
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 116,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 116,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 539 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1
    left join int8_tbl t2 on true
    left join lateral
      (select t2.q1 from int8_tbl t3) s
      on t2.q1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 75,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 60,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 151,
                            },
                          },
                          "location": 157,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 159,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 127,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 116,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 116,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 546 1`] = `
[
  "explain (costs off)
select * from onek t1
    left join onek t2 on true
    left join lateral
      (select * from onek t3 where t3.two = t2.two offset 0) s
      on t2.unique1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "onek",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 67,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 56,
                              "relname": "onek",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 166,
                            },
                          },
                          "location": 177,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 179,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 115,
                                    "relname": "onek",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOffset": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 152,
                                },
                              },
                              "limitOption": "LIMIT_OPTION_COUNT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 108,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 108,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "two",
                                          },
                                        },
                                      ],
                                      "location": 129,
                                    },
                                  },
                                  "location": 136,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "two",
                                          },
                                        },
                                      ],
                                      "location": 138,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 557 1`] = `
[
  "explain (costs off)
select * from
  j1_tbl full join
  (select * from j2_tbl order by j2_tbl.i desc, j2_tbl.k asc) j2_tbl
  on j1_tbl.i = j2_tbl.i and j1_tbl.i = j2_tbl.k",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "j1_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 127,
                                  },
                                },
                                "location": 136,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 151,
                                  },
                                },
                                "location": 160,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "k",
                                        },
                                      },
                                    ],
                                    "location": 162,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 147,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "j2_tbl",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 70,
                                    "relname": "j2_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "sortClause": [
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "j2_tbl",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "i",
                                            },
                                          },
                                        ],
                                        "location": 86,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_DESC",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "j2_tbl",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "k",
                                            },
                                          },
                                        ],
                                        "location": 101,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_ASC",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                              ],
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 63,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 563 1`] = `
[
  "select * from
  j1_tbl full join
  (select * from j2_tbl order by j2_tbl.i desc, j2_tbl.k asc) j2_tbl
  on j1_tbl.i = j2_tbl.i and j1_tbl.i = j2_tbl.k",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 16,
                      "relname": "j1_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1_tbl",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 107,
                              },
                            },
                            "location": 116,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2_tbl",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 118,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1_tbl",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 131,
                              },
                            },
                            "location": 140,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2_tbl",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "k",
                                    },
                                  },
                                ],
                                "location": 142,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 127,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "j2_tbl",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 50,
                                "relname": "j2_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "sortClause": [
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "i",
                                        },
                                      },
                                    ],
                                    "location": 66,
                                  },
                                },
                                "sortby_dir": "SORTBY_DESC",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2_tbl",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "k",
                                        },
                                      },
                                    ],
                                    "location": 81,
                                  },
                                },
                                "sortby_dir": "SORTBY_ASC",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                          ],
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 43,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 43,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 571 1`] = `
[
  "explain (costs off)
select count(*) from
  (select * from tenk1 x order by x.thousand, x.twothousand, x.fivethous) x
  left join
  (select * from tenk1 y order by y.unique2) y
  on x.thousand = y.unique2 and x.twothousand = y.hundred and x.fivethous = y.unique2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "x",
                                    },
                                    "inh": true,
                                    "location": 58,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "sortClause": [
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 75,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_DEFAULT",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "twothousand",
                                            },
                                          },
                                        ],
                                        "location": 87,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_DEFAULT",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "fivethous",
                                            },
                                          },
                                        ],
                                        "location": 102,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_DEFAULT",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                              ],
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 51,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 51,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "thousand",
                                        },
                                      },
                                    ],
                                    "location": 181,
                                  },
                                },
                                "location": 192,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 194,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "twothousand",
                                        },
                                      },
                                    ],
                                    "location": 208,
                                  },
                                },
                                "location": 222,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "hundred",
                                        },
                                      },
                                    ],
                                    "location": 224,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "fivethous",
                                        },
                                      },
                                    ],
                                    "location": 238,
                                  },
                                },
                                "location": 250,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 252,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 204,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "y",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "y",
                                    },
                                    "inh": true,
                                    "location": 146,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "sortClause": [
                                {
                                  "SortBy": {
                                    "location": -1,
                                    "node": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "y",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 163,
                                      },
                                    },
                                    "sortby_dir": "SORTBY_DEFAULT",
                                    "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                                  },
                                },
                              ],
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 139,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 139,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 578 1`] = `
[
  "select count(*) from
  (select * from tenk1 x order by x.thousand, x.twothousand, x.fivethous) x
  left join
  (select * from tenk1 y order by y.unique2) y
  on x.thousand = y.unique2 and x.twothousand = y.hundred and x.fivethous = y.unique2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "x",
                                },
                                "inh": true,
                                "location": 38,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "sortClause": [
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "thousand",
                                        },
                                      },
                                    ],
                                    "location": 55,
                                  },
                                },
                                "sortby_dir": "SORTBY_DEFAULT",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "twothousand",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                                "sortby_dir": "SORTBY_DEFAULT",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "fivethous",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                                "sortby_dir": "SORTBY_DEFAULT",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                          ],
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 31,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 31,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "thousand",
                                    },
                                  },
                                ],
                                "location": 161,
                              },
                            },
                            "location": 172,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "y",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "unique2",
                                    },
                                  },
                                ],
                                "location": 174,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "twothousand",
                                    },
                                  },
                                ],
                                "location": 188,
                              },
                            },
                            "location": 202,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "y",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "hundred",
                                    },
                                  },
                                ],
                                "location": 204,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "fivethous",
                                    },
                                  },
                                ],
                                "location": 218,
                              },
                            },
                            "location": 230,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "y",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "unique2",
                                    },
                                  },
                                ],
                                "location": 232,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 184,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "y",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "y",
                                },
                                "inh": true,
                                "location": 126,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "sortClause": [
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 143,
                                  },
                                },
                                "sortby_dir": "SORTBY_DEFAULT",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                          ],
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 119,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 119,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 584 1`] = `
[
  "set enable_hashjoin = 0",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "ival": {},
                  "location": 22,
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_hashjoin",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 593 1`] = `
[
  "explain (costs off)
select x.thousand, x.twothousand, count(*)
from tenk1 x inner join tenk1 y on x.thousand = y.thousand
group by x.thousand, x.twothousand
order by x.thousand desc, x.twothousand",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 68,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 98,
                            },
                          },
                          "location": 109,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 111,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "y",
                          },
                          "inh": true,
                          "location": 87,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 131,
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "String": {
                            "sval": "twothousand",
                          },
                        },
                      ],
                      "location": 143,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 166,
                        },
                      },
                      "sortby_dir": "SORTBY_DESC",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "twothousand",
                              },
                            },
                          ],
                          "location": 183,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "twothousand",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 54,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 54,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 599 1`] = `
[
  "reset enable_hashagg",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_hashagg",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 611 1`] = `
[
  "DROP TABLE J1_TBL",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "j1_tbl",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 631 1`] = `
[
  "DELETE FROM t3 USING t1 table1 WHERE t3.x = table1.a",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "t3",
              "relpersistence": "p",
            },
            "usingClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "table1",
                  },
                  "inh": true,
                  "location": 21,
                  "relname": "t1",
                  "relpersistence": "p",
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t3",
                        },
                      },
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "location": 37,
                  },
                },
                "location": 42,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "table1",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 44,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 642 1`] = `
[
  "insert into t2a values (200, 2001)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "t2a",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 200,
                            },
                            "location": 24,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2001,
                            },
                            "location": 29,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 644 1`] = `
[
  "select * from t1 left join t2 on (t1.a = t2.a)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                      "location": 39,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 41,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 27,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 656 1`] = `
[
  "select foo.*, unnamed_join.* from
  t1 join t2 using (a) as foo, t3 as unnamed_join
  for update of unnamed_join",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "join_using_alias": {
                    "aliasname": "foo",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 36,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 44,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "unnamed_join",
                  },
                  "inh": true,
                  "location": 65,
                  "relname": "t3",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 100,
                        "relname": "unnamed_join",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "foo",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unnamed_join",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 660 1`] = `
[
  "select foo.*, unnamed_join.* from
  t1 join t2 using (a) as foo, t3 as unnamed_join
  for update of foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "join_using_alias": {
                    "aliasname": "foo",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 36,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 44,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "unnamed_join",
                  },
                  "inh": true,
                  "location": 65,
                  "relname": "t3",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 100,
                        "relname": "foo",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "foo",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unnamed_join",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 664 1`] = `
[
  "select bar.*, unnamed_join.* from
  (t1 join t2 using (a) as foo) as bar, t3 as unnamed_join
  for update of foo",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "alias": {
                    "aliasname": "bar",
                  },
                  "join_using_alias": {
                    "aliasname": "foo",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 37,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 45,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "unnamed_join",
                  },
                  "inh": true,
                  "location": 74,
                  "relname": "t3",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 109,
                        "relname": "foo",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "bar",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unnamed_join",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 668 1`] = `
[
  "select bar.*, unnamed_join.* from
  (t1 join t2 using (a) as foo) as bar, t3 as unnamed_join
  for update of bar",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "alias": {
                    "aliasname": "bar",
                  },
                  "join_using_alias": {
                    "aliasname": "foo",
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 37,
                      "relname": "t1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 45,
                      "relname": "t2",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "unnamed_join",
                  },
                  "inh": true,
                  "location": 74,
                  "relname": "t3",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "lockingClause": [
              {
                "LockingClause": {
                  "lockedRels": [
                    {
                      "RangeVar": {
                        "inh": true,
                        "location": 109,
                        "relname": "bar",
                        "relpersistence": "p",
                      },
                    },
                  ],
                  "strength": "LCS_FORUPDATE",
                  "waitPolicy": "LockWaitBlock",
                },
              },
            ],
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "bar",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unnamed_join",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 680 1`] = `
[
  "CREATE TEMP TABLE tt2 ( tt2_id int4, joincol int4 )",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tt2",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "tt2_id",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "joincol",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 691 1`] = `
[
  "select tt1.*, tt2.* from tt2 right join tt1 on tt1.joincol = tt2.joincol",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 25,
                      "relname": "tt2",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt1",
                              },
                            },
                            {
                              "String": {
                                "sval": "joincol",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                      "location": 59,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt2",
                              },
                            },
                            {
                              "String": {
                                "sval": "joincol",
                              },
                            },
                          ],
                          "location": 61,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tt1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tt1",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tt2",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 693 1`] = `
[
  "reset enable_hashjoin",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_hashjoin",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 704 1`] = `
[
  "explain (costs off)
select count(*) from tenk1 a, tenk1 b
  where a.hundred = b.thousand and (b.fivethous % 10) < 10",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 41,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 50,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "hundred",
                                  },
                                },
                              ],
                              "location": 66,
                            },
                          },
                          "location": 76,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "fivethous",
                                      },
                                    },
                                  ],
                                  "location": 94,
                                },
                              },
                              "location": 106,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 10,
                                  },
                                  "location": 108,
                                },
                              },
                            },
                          },
                          "location": 112,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 114,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 89,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 710 1`] = `
[
  "reset work_mem",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "work_mem",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 722 1`] = `
[
  "create temp table tt4(f1 int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tt4",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "f1",
                  "is_local": true,
                  "location": 22,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 726 1`] = `
[
  "set enable_nestloop to off",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 23,
                  "sval": {
                    "sval": "off",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_nestloop",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 728 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT a.f1
FROM tt4 a
LEFT JOIN (
        SELECT b.f1
        FROM tt3 b LEFT JOIN tt3 c ON (b.f1 = c.f1)
        WHERE COALESCE(c.f1, 0) = 0
) AS d ON (a.f1 = d.f1)
WHERE COALESCE(d.f1, 0) = 0
ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 37,
                          "relname": "tt4",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 174,
                            },
                          },
                          "location": 179,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "d",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 181,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "d",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "b",
                                        },
                                        "inh": true,
                                        "location": 88,
                                        "relname": "tt3",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 114,
                                          },
                                        },
                                        "location": 119,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 121,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "c",
                                        },
                                        "inh": true,
                                        "location": 104,
                                        "relname": "tt3",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 70,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "CoalesceExpr": {
                                      "args": [
                                        {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 150,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 156,
                                          },
                                        },
                                      ],
                                      "location": 141,
                                    },
                                  },
                                  "location": 159,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 161,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 224,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "CoalesceExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "d",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 202,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {},
                              "location": 208,
                            },
                          },
                        ],
                        "location": 193,
                      },
                    },
                    "location": 211,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 213,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 739 1`] = `
[
  "SELECT a.f1
FROM tt4 a
LEFT JOIN (
        SELECT b.f1
        FROM tt3 b LEFT JOIN tt3 c ON (b.f1 = c.f1)
        WHERE COALESCE(c.f1, 0) = 0
) AS d ON (a.f1 = d.f1)
WHERE COALESCE(d.f1, 0) = 0
ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 17,
                      "relname": "tt4",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 154,
                        },
                      },
                      "location": 159,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 161,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "d",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 68,
                                    "relname": "tt3",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 94,
                                      },
                                    },
                                    "location": 99,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 101,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "c",
                                    },
                                    "inh": true,
                                    "location": 84,
                                    "relname": "tt3",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 50,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 50,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "CoalesceExpr": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 130,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 136,
                                      },
                                    },
                                  ],
                                  "location": 121,
                                },
                              },
                              "location": 139,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {},
                                  "location": 141,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 204,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "CoalesceExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 182,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {},
                          "location": 188,
                        },
                      },
                    ],
                    "location": 173,
                  },
                },
                "location": 191,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 193,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 749 1`] = `
[
  "reset enable_nestloop",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_nestloop",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 756 1`] = `
[
  "select a.* from tenk1 a
where unique1 in (select unique2 from tenk1 b)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 16,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 38,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 62,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 49,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 49,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "unique1",
                        },
                      },
                    ],
                    "location": 30,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 760 1`] = `
[
  "explain (costs off)
select a.* from tenk1 a
where unique1 not in (select unique2 from tenk1 b)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 58,
                          "subLinkType": "ANY_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 86,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 73,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 73,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                          "testexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 50,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "NOT_EXPR",
                    "location": 58,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 764 1`] = `
[
  "explain (costs off)
select a.* from tenk1 a
where exists (select 1 from tenk1 b where a.unique1 = b.unique2)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 50,
                    "subLinkType": "EXISTS_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "b",
                              },
                              "inh": true,
                              "location": 72,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 65,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 65,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "unique1",
                                    },
                                  },
                                ],
                                "location": 86,
                              },
                            },
                            "location": 96,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "unique2",
                                    },
                                  },
                                ],
                                "location": 98,
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 768 1`] = `
[
  "explain (costs off)
select a.* from tenk1 a
where not exists (select 1 from tenk1 b where a.unique1 = b.unique2)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 54,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 76,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 69,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 69,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 90,
                                    },
                                  },
                                  "location": 100,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 102,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "NOT_EXPR",
                    "location": 50,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 772 1`] = `
[
  "explain (costs off)
select a.* from tenk1 a left join tenk1 b on a.unique1 = b.unique2
where b.unique2 is null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 36,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 65,
                            },
                          },
                          "location": 75,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 77,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 54,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "unique2",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                    "location": 103,
                    "nulltesttype": "IS_NULL",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 782 1`] = `
[
  "explain (costs off)
select * from tt4x t1
where not exists (
  select 1 from tt4x t2
    left join tt4x t3 on t2.c3 = t3.c1
    left join ( select t5.c1 as c1
                from tt4x t4 left join tt4x t5 on t4.c2 = t5.c1
              ) a1 on t3.c2 = a1.c1
  where t1.c1 = t2.c2
)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 34,
                      "relname": "tt4x",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 52,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t2",
                                            },
                                            "inh": true,
                                            "location": 77,
                                            "relname": "tt4x",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "c3",
                                                    },
                                                  },
                                                ],
                                                "location": 110,
                                              },
                                            },
                                            "location": 116,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "c1",
                                                    },
                                                  },
                                                ],
                                                "location": 118,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 99,
                                            "relname": "tt4x",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "c2",
                                                },
                                              },
                                            ],
                                            "location": 245,
                                          },
                                        },
                                        "location": 251,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "c1",
                                                },
                                              },
                                            ],
                                            "location": 253,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeSubselect": {
                                        "alias": {
                                          "aliasname": "a1",
                                        },
                                        "subquery": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "JoinExpr": {
                                                  "jointype": "JOIN_LEFT",
                                                  "larg": {
                                                    "RangeVar": {
                                                      "alias": {
                                                        "aliasname": "t4",
                                                      },
                                                      "inh": true,
                                                      "location": 180,
                                                      "relname": "tt4x",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                  "quals": {
                                                    "A_Expr": {
                                                      "kind": "AEXPR_OP",
                                                      "lexpr": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "t4",
                                                              },
                                                            },
                                                            {
                                                              "String": {
                                                                "sval": "c2",
                                                              },
                                                            },
                                                          ],
                                                          "location": 209,
                                                        },
                                                      },
                                                      "location": 215,
                                                      "name": [
                                                        {
                                                          "String": {
                                                            "sval": "=",
                                                          },
                                                        },
                                                      ],
                                                      "rexpr": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "t5",
                                                              },
                                                            },
                                                            {
                                                              "String": {
                                                                "sval": "c1",
                                                              },
                                                            },
                                                          ],
                                                          "location": 217,
                                                        },
                                                      },
                                                    },
                                                  },
                                                  "rarg": {
                                                    "RangeVar": {
                                                      "alias": {
                                                        "aliasname": "t5",
                                                      },
                                                      "inh": true,
                                                      "location": 198,
                                                      "relname": "tt4x",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 147,
                                                  "name": "c1",
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "t5",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "c1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 147,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 70,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "c1",
                                          },
                                        },
                                      ],
                                      "location": 267,
                                    },
                                  },
                                  "location": 273,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "c2",
                                          },
                                        },
                                      ],
                                      "location": 275,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "NOT_EXPR",
                    "location": 48,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 800 1`] = `
[
  "insert into tt5 values(1, 10)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "tt5",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 23,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 26,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 803 1`] = `
[
  "insert into tt6 values(1, 9)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "tt6",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 23,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 9,
                            },
                            "location": 26,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 807 1`] = `
[
  "select * from tt5,tt6 where tt5.f1 = tt6.f1 and tt5.f1 = tt5.f2 - tt6.f2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "tt5",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "inh": true,
                  "location": 18,
                  "relname": "tt6",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt5",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 28,
                        },
                      },
                      "location": 35,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt6",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt5",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                      "location": 55,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tt5",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 57,
                            },
                          },
                          "location": 64,
                          "name": [
                            {
                              "String": {
                                "sval": "-",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tt6",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 66,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 44,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 816 1`] = `
[
  "insert into xx values (1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "xx",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 23,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 820 1`] = `
[
  "insert into yy values (101, 1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "yy",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 101,
                            },
                            "location": 23,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 28,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 824 1`] = `
[
  "select yy.pkyy as yy_pkyy, yy.pkxx as yy_pkxx, yya.pkyy as yya_pkyy,
       xxa.pkxx as xxa_pkxx, xxb.pkxx as xxb_pkxx
from yy
     left join (SELECT * FROM yy where pkyy = 101) as yya ON yy.pkyy = yya.pkyy
     left join xx xxa on yya.pkxx = xxa.pkxx
     left join xx xxb on coalesce (xxa.pkxx, 1) = xxb.pkxx",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "inh": true,
                              "location": 124,
                              "relname": "yy",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "yy",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "pkyy",
                                      },
                                    },
                                  ],
                                  "location": 188,
                                },
                              },
                              "location": 196,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "yya",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "pkyy",
                                      },
                                    },
                                  ],
                                  "location": 198,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "yya",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 157,
                                        "relname": "yy",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 150,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 150,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "pkyy",
                                              },
                                            },
                                          ],
                                          "location": 166,
                                        },
                                      },
                                      "location": 171,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 101,
                                          },
                                          "location": 173,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "yya",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "pkxx",
                                  },
                                },
                              ],
                              "location": 232,
                            },
                          },
                          "location": 241,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "xxa",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "pkxx",
                                  },
                                },
                              ],
                              "location": 243,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "xxa",
                          },
                          "inh": true,
                          "location": 222,
                          "relname": "xx",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "xxa",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "pkxx",
                                    },
                                  },
                                ],
                                "location": 287,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 297,
                              },
                            },
                          ],
                          "location": 277,
                        },
                      },
                      "location": 300,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "xxb",
                              },
                            },
                            {
                              "String": {
                                "sval": "pkxx",
                              },
                            },
                          ],
                          "location": 302,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "xxb",
                      },
                      "inh": true,
                      "location": 267,
                      "relname": "xx",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "yy_pkyy",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "yy",
                          },
                        },
                        {
                          "String": {
                            "sval": "pkyy",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 27,
                  "name": "yy_pkxx",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "yy",
                          },
                        },
                        {
                          "String": {
                            "sval": "pkxx",
                          },
                        },
                      ],
                      "location": 27,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 47,
                  "name": "yya_pkyy",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "yya",
                          },
                        },
                        {
                          "String": {
                            "sval": "pkyy",
                          },
                        },
                      ],
                      "location": 47,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 76,
                  "name": "xxa_pkxx",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "xxa",
                          },
                        },
                        {
                          "String": {
                            "sval": "pkxx",
                          },
                        },
                      ],
                      "location": 76,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 98,
                  "name": "xxb_pkxx",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "xxb",
                          },
                        },
                        {
                          "String": {
                            "sval": "pkxx",
                          },
                        },
                      ],
                      "location": 98,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 842 1`] = `
[
  "select * from
  zt2 left join zt3 on (f2 = f3)
      left join zt1 on (f3 = f1)
where f2 = 53",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 16,
                          "relname": "zt2",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 38,
                            },
                          },
                          "location": 41,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f3",
                                  },
                                },
                              ],
                              "location": 43,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 30,
                          "relname": "zt3",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f3",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 63,
                      "relname": "zt1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f2",
                        },
                      },
                    ],
                    "location": 86,
                  },
                },
                "location": 89,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 53,
                    },
                    "location": 91,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 847 1`] = `
[
  "create temp view zv1 as select *,'dummy'::text AS junk from zt1",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 60,
                      "relname": "zt1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "name": "junk",
                      "val": {
                        "TypeCast": {
                          "arg": {
                            "A_Const": {
                              "location": 33,
                              "sval": {
                                "sval": "dummy",
                              },
                            },
                          },
                          "location": 40,
                          "typeName": {
                            "location": 42,
                            "names": [
                              {
                                "String": {
                                  "sval": "text",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 17,
              "relname": "zv1",
              "relpersistence": "t",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 849 1`] = `
[
  "select * from
  zt2 left join zt3 on (f2 = f3)
      left join zv1 on (f3 = f1)
where f2 = 53",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 16,
                          "relname": "zt2",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f2",
                                  },
                                },
                              ],
                              "location": 38,
                            },
                          },
                          "location": 41,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f3",
                                  },
                                },
                              ],
                              "location": 43,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 30,
                          "relname": "zt3",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f3",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 63,
                      "relname": "zv1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f2",
                        },
                      },
                    ],
                    "location": 86,
                  },
                },
                "location": 89,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 53,
                    },
                    "location": 91,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 867 1`] = `
[
  "prepare foo(bool) as
  select count(*) from tenk1 a left join tenk1 b
    on (a.unique2 = b.unique1 and exists
        (select 1 from tenk1 c where c.thousand = b.unique2 and $1))",
  {
    "stmts": [
      {
        "stmt": {
          "PrepareStmt": {
            "argtypes": [
              {
                "TypeName": {
                  "location": 12,
                  "names": [
                    {
                      "String": {
                        "sval": "bool",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
            ],
            "name": "foo",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 44,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 78,
                                  },
                                },
                                "location": 88,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 90,
                                  },
                                },
                              },
                            },
                            {
                              "SubLink": {
                                "location": 104,
                                "subLinkType": "EXISTS_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "c",
                                          },
                                          "inh": true,
                                          "location": 134,
                                          "relname": "tenk1",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 127,
                                          "val": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 127,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "whereClause": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "c",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "thousand",
                                                      },
                                                    },
                                                  ],
                                                  "location": 148,
                                                },
                                              },
                                              "location": 159,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "unique2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 161,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ParamRef": {
                                              "location": 175,
                                              "number": 1,
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 171,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 100,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 62,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 30,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 880 1`] = `
[
  "set enable_mergejoin = 1",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "ival": {
                    "ival": 1,
                  },
                  "location": 23,
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_mergejoin",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 884 1`] = `
[
  "create temp table a (i integer)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "a",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 887 1`] = `
[
  "select * from a left join b on i = x and i = y and x = i",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "a",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                            "location": 33,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                ],
                                "location": 35,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 41,
                              },
                            },
                            "location": 43,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "y",
                                    },
                                  },
                                ],
                                "location": 45,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                ],
                                "location": 51,
                              },
                            },
                            "location": 53,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 55,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 37,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 26,
                      "relname": "b",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 889 1`] = `
[
  "rollback",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_ROLLBACK",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 896 1`] = `
[
  "create type mycomptype as (id int, v bigint)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "v",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "mycomptype",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 898 1`] = `
[
  "create temp table tidv (idv mycomptype)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tidv",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "idv",
                  "is_local": true,
                  "location": 24,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "mycomptype",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 901 1`] = `
[
  "explain (costs off)
select a.idv, b.idv from tidv a, tidv b where a.idv = b.idv",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 45,
                      "relname": "tidv",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 53,
                      "relname": "tidv",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "idv",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "idv",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "idv",
                            },
                          },
                        ],
                        "location": 66,
                      },
                    },
                    "location": 72,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "idv",
                            },
                          },
                        ],
                        "location": 74,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 915 1`] = `
[
  "select t1.q2, count(t2.*)
from int8_tbl t1 left join int8_tbl t2 on (t1.q2 = t2.q1)
group by t1.q2 order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 31,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 69,
                        },
                      },
                      "location": 75,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 77,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 53,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "t1",
                      },
                    },
                    {
                      "String": {
                        "sval": "q2",
                      },
                    },
                  ],
                  "location": 93,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 108,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 20,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 919 1`] = `
[
  "select t1.q2, count(t2.*)
from int8_tbl t1 left join (select * from int8_tbl) t2 on (t1.q2 = t2.q1)
group by t1.q2 order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 31,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 85,
                        },
                      },
                      "location": 91,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 93,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 68,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 61,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "t1",
                      },
                    },
                    {
                      "String": {
                        "sval": "q2",
                      },
                    },
                  ],
                  "location": 109,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 124,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 20,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 923 1`] = `
[
  "select t1.q2, count(t2.*)
from int8_tbl t1 left join (select * from int8_tbl offset 0) t2 on (t1.q2 = t2.q1)
group by t1.q2 order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 31,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 94,
                        },
                      },
                      "location": 100,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 102,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 68,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOffset": {
                            "A_Const": {
                              "ival": {},
                              "location": 84,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 61,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 61,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "t1",
                      },
                    },
                    {
                      "String": {
                        "sval": "q2",
                      },
                    },
                  ],
                  "location": 118,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 133,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 20,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 927 1`] = `
[
  "select t1.q2, count(t2.*)
from int8_tbl t1 left join
  (select q1, case when q2=1 then 1 else q2 end as q2 from int8_tbl) t2
  on (t1.q2 = t2.q1)
group by t1.q2 order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 31,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 131,
                        },
                      },
                      "location": 137,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 139,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 112,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 63,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 63,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 67,
                                "name": "q2",
                                "val": {
                                  "CaseExpr": {
                                    "args": [
                                      {
                                        "CaseWhen": {
                                          "expr": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 77,
                                                },
                                              },
                                              "location": 79,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 80,
                                                },
                                              },
                                            },
                                          },
                                          "location": 72,
                                          "result": {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 87,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "defresult": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 94,
                                      },
                                    },
                                    "location": 67,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "t1",
                      },
                    },
                    {
                      "String": {
                        "sval": "q2",
                      },
                    },
                  ],
                  "location": 155,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 170,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "A_Star": {},
                              },
                            ],
                            "location": 20,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 14,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 938 1`] = `
[
  "create temp table a (
     code char not null,
     constraint a_pk primary key (code)
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "a",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "code",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_NOTNULL",
                        "location": 37,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bpchar",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": -1,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "Constraint": {
                  "conname": "a_pk",
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "code",
                      },
                    },
                  ],
                  "location": 52,
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 953 1`] = `
[
  "insert into a (code) values ('p')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 15,
                  "name": "code",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "a",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 29,
                            "sval": {
                              "sval": "p",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 961 1`] = `
[
  "select c.name, ss.code, ss.b_cnt, ss.const
from c left join
  (select a.code, coalesce(b_grp.cnt, 0) as b_cnt, -1 as const
   from a left join
     (select count(1) as cnt, b.a from b group by b.a) as b_grp
     on a.code = b_grp.a
  ) as ss
  on (c.a = ss.code)
order by c.name",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 48,
                      "relname": "c",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 248,
                        },
                      },
                      "location": 252,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "code",
                              },
                            },
                          ],
                          "location": 254,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 131,
                                    "relname": "a",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "code",
                                            },
                                          },
                                        ],
                                        "location": 215,
                                      },
                                    },
                                    "location": 222,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b_grp",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 224,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "b_grp",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 182,
                                              "relname": "b",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "groupClause": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 193,
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 156,
                                              "name": "cnt",
                                              "val": {
                                                "FuncCall": {
                                                  "args": [
                                                    {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 1,
                                                        },
                                                        "location": 162,
                                                      },
                                                    },
                                                  ],
                                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                                  "funcname": [
                                                    {
                                                      "String": {
                                                        "sval": "count",
                                                      },
                                                    },
                                                  ],
                                                  "location": 156,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 173,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "b",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 173,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "code",
                                        },
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 78,
                                "name": "b_cnt",
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b_grp",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "cnt",
                                              },
                                            },
                                          ],
                                          "location": 87,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {},
                                          "location": 98,
                                        },
                                      },
                                    ],
                                    "location": 78,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 111,
                                "name": "const",
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 111,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 272,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                        {
                          "String": {
                            "sval": "name",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "code",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 24,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "b_cnt",
                          },
                        },
                      ],
                      "location": 24,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 34,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "const",
                          },
                        },
                      ],
                      "location": 34,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 977 1`] = `
[
  "SELECT * FROM
( SELECT 1 as key1 ) sub1
LEFT JOIN
( SELECT sub3.key3, sub4.value2, COALESCE(sub4.value2, 66) as value3 FROM
    ( SELECT 1 as key3 ) sub3
    LEFT JOIN
    ( SELECT sub5.key5, COALESCE(sub6.value1, 1) as value2 FROM
        ( SELECT 1 as key5 ) sub5
        LEFT JOIN
        ( SELECT 2 as key6, 42 as value1 ) sub6
        ON sub5.key5 = sub6.key6
    ) sub4
    ON sub4.key5 = sub3.key3
) sub2
ON sub1.key1 = sub2.key3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "sub1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 23,
                                "name": "key1",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 23,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sub1",
                              },
                            },
                            {
                              "String": {
                                "sval": "key1",
                              },
                            },
                          ],
                          "location": 415,
                        },
                      },
                      "location": 425,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sub2",
                              },
                            },
                            {
                              "String": {
                                "sval": "key3",
                              },
                            },
                          ],
                          "location": 427,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "sub2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "sub3",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 137,
                                              "name": "key3",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 137,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sub4",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "key5",
                                            },
                                          },
                                        ],
                                        "location": 383,
                                      },
                                    },
                                    "location": 393,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sub3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "key3",
                                            },
                                          },
                                        ],
                                        "location": 395,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "sub4",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "JoinExpr": {
                                              "jointype": "JOIN_LEFT",
                                              "larg": {
                                                "RangeSubselect": {
                                                  "alias": {
                                                    "aliasname": "sub5",
                                                  },
                                                  "subquery": {
                                                    "SelectStmt": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 249,
                                                            "name": "key5",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 1,
                                                                },
                                                                "location": 249,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                },
                                              },
                                              "quals": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "sub5",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "key5",
                                                          },
                                                        },
                                                      ],
                                                      "location": 343,
                                                    },
                                                  },
                                                  "location": 353,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "sub6",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "key6",
                                                          },
                                                        },
                                                      ],
                                                      "location": 355,
                                                    },
                                                  },
                                                },
                                              },
                                              "rarg": {
                                                "RangeSubselect": {
                                                  "alias": {
                                                    "aliasname": "sub6",
                                                  },
                                                  "subquery": {
                                                    "SelectStmt": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 301,
                                                            "name": "key6",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 2,
                                                                },
                                                                "location": 301,
                                                              },
                                                            },
                                                          },
                                                        },
                                                        {
                                                          "ResTarget": {
                                                            "location": 312,
                                                            "name": "value1",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 42,
                                                                },
                                                                "location": 312,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 181,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "sub5",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "key5",
                                                      },
                                                    },
                                                  ],
                                                  "location": 181,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 192,
                                              "name": "value2",
                                              "val": {
                                                "CoalesceExpr": {
                                                  "args": [
                                                    {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "sub6",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "value1",
                                                            },
                                                          },
                                                        ],
                                                        "location": 201,
                                                      },
                                                    },
                                                    {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 1,
                                                        },
                                                        "location": 214,
                                                      },
                                                    },
                                                  ],
                                                  "location": 192,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 59,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "sub3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "key3",
                                        },
                                      },
                                    ],
                                    "location": 59,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "sub4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "value2",
                                        },
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 83,
                                "name": "value3",
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "sub4",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "value2",
                                              },
                                            },
                                          ],
                                          "location": 92,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 66,
                                          },
                                          "location": 105,
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 994 1`] = `
[
  "SELECT * FROM
( SELECT 1 as key1 ) sub1
LEFT JOIN
( SELECT sub3.key3, value2, COALESCE(value2, 66) as value3 FROM
    ( SELECT 1 as key3 ) sub3
    LEFT JOIN
    ( SELECT sub5.key5, COALESCE(sub6.value1, 1) as value2 FROM
        ( SELECT 1 as key5 ) sub5
        LEFT JOIN
        ( SELECT 2 as key6, 42 as value1 ) sub6
        ON sub5.key5 = sub6.key6
    ) sub4
    ON sub4.key5 = sub3.key3
) sub2
ON sub1.key1 = sub2.key3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "sub1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 23,
                                "name": "key1",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 23,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sub1",
                              },
                            },
                            {
                              "String": {
                                "sval": "key1",
                              },
                            },
                          ],
                          "location": 405,
                        },
                      },
                      "location": 415,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "sub2",
                              },
                            },
                            {
                              "String": {
                                "sval": "key3",
                              },
                            },
                          ],
                          "location": 417,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "sub2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "sub3",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 127,
                                              "name": "key3",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 127,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sub4",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "key5",
                                            },
                                          },
                                        ],
                                        "location": 373,
                                      },
                                    },
                                    "location": 383,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "sub3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "key3",
                                            },
                                          },
                                        ],
                                        "location": 385,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "sub4",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "JoinExpr": {
                                              "jointype": "JOIN_LEFT",
                                              "larg": {
                                                "RangeSubselect": {
                                                  "alias": {
                                                    "aliasname": "sub5",
                                                  },
                                                  "subquery": {
                                                    "SelectStmt": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 239,
                                                            "name": "key5",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 1,
                                                                },
                                                                "location": 239,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                },
                                              },
                                              "quals": {
                                                "A_Expr": {
                                                  "kind": "AEXPR_OP",
                                                  "lexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "sub5",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "key5",
                                                          },
                                                        },
                                                      ],
                                                      "location": 333,
                                                    },
                                                  },
                                                  "location": 343,
                                                  "name": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "rexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "sub6",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "key6",
                                                          },
                                                        },
                                                      ],
                                                      "location": 345,
                                                    },
                                                  },
                                                },
                                              },
                                              "rarg": {
                                                "RangeSubselect": {
                                                  "alias": {
                                                    "aliasname": "sub6",
                                                  },
                                                  "subquery": {
                                                    "SelectStmt": {
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 291,
                                                            "name": "key6",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 2,
                                                                },
                                                                "location": 291,
                                                              },
                                                            },
                                                          },
                                                        },
                                                        {
                                                          "ResTarget": {
                                                            "location": 302,
                                                            "name": "value1",
                                                            "val": {
                                                              "A_Const": {
                                                                "ival": {
                                                                  "ival": 42,
                                                                },
                                                                "location": 302,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 171,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "sub5",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "key5",
                                                      },
                                                    },
                                                  ],
                                                  "location": 171,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 182,
                                              "name": "value2",
                                              "val": {
                                                "CoalesceExpr": {
                                                  "args": [
                                                    {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "sub6",
                                                            },
                                                          },
                                                          {
                                                            "String": {
                                                              "sval": "value1",
                                                            },
                                                          },
                                                        ],
                                                        "location": 191,
                                                      },
                                                    },
                                                    {
                                                      "A_Const": {
                                                        "ival": {
                                                          "ival": 1,
                                                        },
                                                        "location": 204,
                                                      },
                                                    },
                                                  ],
                                                  "location": 182,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 59,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "sub3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "key3",
                                        },
                                      },
                                    ],
                                    "location": 59,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 70,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "value2",
                                        },
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 78,
                                "name": "value3",
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "value2",
                                              },
                                            },
                                          ],
                                          "location": 87,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 66,
                                          },
                                          "location": 95,
                                        },
                                      },
                                    ],
                                    "location": 78,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1015 1`] = `
[
  "SELECT qq, unique1
  FROM
  ( SELECT COALESCE(q1, 0) AS qq FROM int8_tbl a ) AS ss1
  FULL OUTER JOIN
  ( SELECT COALESCE(q2, -1) AS qq FROM int8_tbl b ) AS ss2
  USING (qq)
  INNER JOIN tenk1 c ON qq = unique2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "a",
                                    },
                                    "inh": true,
                                    "location": 64,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 37,
                                    "name": "qq",
                                    "val": {
                                      "CoalesceExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 46,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 50,
                                            },
                                          },
                                        ],
                                        "location": 37,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 141,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 113,
                                    "name": "qq",
                                    "val": {
                                      "CoalesceExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q2",
                                                  },
                                                },
                                              ],
                                              "location": 122,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 126,
                                            },
                                          },
                                        ],
                                        "location": 113,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "qq",
                          },
                        },
                      ],
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "qq",
                              },
                            },
                          ],
                          "location": 198,
                        },
                      },
                      "location": 201,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 203,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "c",
                      },
                      "inh": true,
                      "location": 187,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "qq",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1054 1`] = `
[
  "insert into nt1 values (1,true,true)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "nt1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 24,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {
                              "boolval": true,
                            },
                            "location": 26,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {
                              "boolval": true,
                            },
                            "location": 31,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1064 1`] = `
[
  "explain (costs off)
select nt3.id
from nt3 as nt3
  left join
    (select nt2.*, (nt2.b1 and ss1.a3) AS b3
     from nt2 as nt2
       left join
         (select nt1.*, (nt1.id is not null) as a3 from nt1) as ss1
         on ss1.id = nt2.nt1_id
    ) as ss2
    on ss2.id = nt3.nt2_id
where nt3.id = 1 and ss2.b3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "nt3",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "nt3",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 265,
                            },
                          },
                          "location": 272,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "nt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "nt2_id",
                                  },
                                },
                              ],
                              "location": 274,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "nt2",
                                        },
                                        "inh": true,
                                        "location": 117,
                                        "relname": "nt2",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "ss1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "id",
                                                },
                                              },
                                            ],
                                            "location": 225,
                                          },
                                        },
                                        "location": 232,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "nt2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "nt1_id",
                                                },
                                              },
                                            ],
                                            "location": 234,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeSubselect": {
                                        "alias": {
                                          "aliasname": "ss1",
                                        },
                                        "subquery": {
                                          "SelectStmt": {
                                            "fromClause": [
                                              {
                                                "RangeVar": {
                                                  "inh": true,
                                                  "location": 201,
                                                  "relname": "nt1",
                                                  "relpersistence": "p",
                                                },
                                              },
                                            ],
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 162,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "nt1",
                                                          },
                                                        },
                                                        {
                                                          "A_Star": {},
                                                        },
                                                      ],
                                                      "location": 162,
                                                    },
                                                  },
                                                },
                                              },
                                              {
                                                "ResTarget": {
                                                  "location": 169,
                                                  "name": "a3",
                                                  "val": {
                                                    "NullTest": {
                                                      "arg": {
                                                        "ColumnRef": {
                                                          "fields": [
                                                            {
                                                              "String": {
                                                                "sval": "nt1",
                                                              },
                                                            },
                                                            {
                                                              "String": {
                                                                "sval": "id",
                                                              },
                                                            },
                                                          ],
                                                          "location": 170,
                                                        },
                                                      },
                                                      "location": 177,
                                                      "nulltesttype": "IS_NOT_NULL",
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 74,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "nt2",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 74,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 81,
                                    "name": "b3",
                                    "val": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "nt2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b1",
                                                  },
                                                },
                                              ],
                                              "location": 82,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "ss1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a3",
                                                  },
                                                },
                                              ],
                                              "location": 93,
                                            },
                                          },
                                        ],
                                        "boolop": "AND_EXPR",
                                        "location": 89,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "nt3",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "nt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 291,
                            },
                          },
                          "location": 298,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 300,
                            },
                          },
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b3",
                              },
                            },
                          ],
                          "location": 306,
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 302,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1077 1`] = `
[
  "select nt3.id
from nt3 as nt3
  left join
    (select nt2.*, (nt2.b1 and ss1.a3) AS b3
     from nt2 as nt2
       left join
         (select nt1.*, (nt1.id is not null) as a3 from nt1) as ss1
         on ss1.id = nt2.nt1_id
    ) as ss2
    on ss2.id = nt3.nt2_id
where nt3.id = 1 and ss2.b3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "nt3",
                      },
                      "inh": true,
                      "location": 19,
                      "relname": "nt3",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss2",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 245,
                        },
                      },
                      "location": 252,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "nt3",
                              },
                            },
                            {
                              "String": {
                                "sval": "nt2_id",
                              },
                            },
                          ],
                          "location": 254,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "nt2",
                                    },
                                    "inh": true,
                                    "location": 97,
                                    "relname": "nt2",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "ss1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 205,
                                      },
                                    },
                                    "location": 212,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "nt2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "nt1_id",
                                            },
                                          },
                                        ],
                                        "location": 214,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "ss1",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "inh": true,
                                              "location": 181,
                                              "relname": "nt1",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 142,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "nt1",
                                                      },
                                                    },
                                                    {
                                                      "A_Star": {},
                                                    },
                                                  ],
                                                  "location": 142,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 149,
                                              "name": "a3",
                                              "val": {
                                                "NullTest": {
                                                  "arg": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "nt1",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "id",
                                                          },
                                                        },
                                                      ],
                                                      "location": 150,
                                                    },
                                                  },
                                                  "location": 157,
                                                  "nulltesttype": "IS_NOT_NULL",
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "nt2",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 61,
                                "name": "b3",
                                "val": {
                                  "BoolExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "nt2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "b1",
                                              },
                                            },
                                          ],
                                          "location": 62,
                                        },
                                      },
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "ss1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "a3",
                                              },
                                            },
                                          ],
                                          "location": 73,
                                        },
                                      },
                                    ],
                                    "boolop": "AND_EXPR",
                                    "location": 69,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "nt3",
                          },
                        },
                        {
                          "String": {
                            "sval": "id",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "nt3",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 271,
                        },
                      },
                      "location": 278,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 280,
                        },
                      },
                    },
                  },
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b3",
                          },
                        },
                      ],
                      "location": 286,
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 282,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1094 1`] = `
[
  "select * from
  int8_tbl t1 left join
  (select q1 as x, 42 as y from int8_tbl t2) ss
  on t1.q2 = ss.x
where
  1 = (select 1 from int8_tbl t3 where ss.y is not null limit 1)
order by 1,2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 91,
                        },
                      },
                      "location": 97,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 99,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t2",
                                },
                                "inh": true,
                                "location": 70,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 48,
                                "name": "x",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 48,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 57,
                                "name": "y",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 42,
                                    },
                                    "location": 57,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 184,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 186,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 112,
                  },
                },
                "location": 114,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "SubLink": {
                    "location": 116,
                    "subLinkType": "EXPR_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 131,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitCount": {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 172,
                          },
                        },
                        "limitOption": "LIMIT_OPTION_COUNT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 124,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 124,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "NullTest": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "y",
                                    },
                                  },
                                ],
                                "location": 149,
                              },
                            },
                            "location": 154,
                            "nulltesttype": "IS_NOT_NULL",
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1115 1`] = `
[
  "select * from
  int4_tbl as i41,
  lateral
    (select 1 as x from
      (select i41.f1 as lat,
              i42.f1 as loc from
         int8_tbl as i81, int4_tbl as i42) as ss1
      right join int4_tbl as i43 on (i43.f1 > 1)
      where ss1.loc = ss1.lat) as ss2
where i41.f1 > 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i41",
                  },
                  "inh": true,
                  "location": 16,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss2",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "JoinExpr": {
                            "jointype": "JOIN_RIGHT",
                            "larg": {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "ss1",
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "i81",
                                          },
                                          "inh": true,
                                          "location": 138,
                                          "relname": "int8_tbl",
                                          "relpersistence": "p",
                                        },
                                      },
                                      {
                                        "RangeVar": {
                                          "alias": {
                                            "aliasname": "i42",
                                          },
                                          "inh": true,
                                          "location": 155,
                                          "relname": "int4_tbl",
                                          "relpersistence": "p",
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 81,
                                          "name": "lat",
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "i41",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 81,
                                            },
                                          },
                                        },
                                      },
                                      {
                                        "ResTarget": {
                                          "location": 110,
                                          "name": "loc",
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "i42",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 110,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                            "quals": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i43",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 216,
                                  },
                                },
                                "location": 223,
                                "name": [
                                  {
                                    "String": {
                                      "sval": ">",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 225,
                                  },
                                },
                              },
                            },
                            "rarg": {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i43",
                                },
                                "inh": true,
                                "location": 196,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 55,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 55,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "loc",
                                  },
                                },
                              ],
                              "location": 240,
                            },
                          },
                          "location": 248,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "lat",
                                  },
                                },
                              ],
                              "location": 250,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "i41",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 272,
                  },
                },
                "location": 279,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 281,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1140 1`] = `
[
  "select * from int4_tbl a full join int4_tbl b on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 49,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1152 1`] = `
[
  "explain (costs off)
select * from
  tenk1 join int4_tbl on f1 = twothousand,
  q1, q2
where q1 = thousand or q2 = thousand",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 59,
                            },
                          },
                          "location": 62,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "twothousand",
                                  },
                                },
                              ],
                              "location": 64,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 47,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 79,
                      "relname": "q1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 83,
                      "relname": "q2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 92,
                            },
                          },
                          "location": 95,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 97,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 109,
                            },
                          },
                          "location": 112,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 114,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "OR_EXPR",
                    "location": 106,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1158 1`] = `
[
  "explain (costs off)
select * from
  tenk1 join int4_tbl on f1 = twothousand,
  q1, q2
where thousand = (q1 + q2)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 59,
                            },
                          },
                          "location": 62,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "twothousand",
                                  },
                                },
                              ],
                              "location": 64,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 47,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 79,
                      "relname": "q1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 83,
                      "relname": "q2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "thousand",
                            },
                          },
                        ],
                        "location": 92,
                      },
                    },
                    "location": 101,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "q1",
                                },
                              },
                            ],
                            "location": 104,
                          },
                        },
                        "location": 107,
                        "name": [
                          {
                            "String": {
                              "sval": "+",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "q2",
                                },
                              },
                            ],
                            "location": 109,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1169 1`] = `
[
  "select * from
  tenk1, int8_tbl a, int8_tbl b
where thousand = a.q1 and tenthous = b.q1 and a.q2 = 1 and b.q2 = 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 23,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "b",
                  },
                  "inh": true,
                  "location": 35,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 52,
                        },
                      },
                      "location": 61,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 63,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 72,
                        },
                      },
                      "location": 81,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 83,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 92,
                        },
                      },
                      "location": 97,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 99,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                      "location": 110,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 112,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 68,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1178 1`] = `
[
  "select t1.unique2, t1.stringu1, t2.unique1, t2.stringu2 from
  tenk1 t1
  inner join int4_tbl i1
    left join (select v1.x2, v2.y1, 11 AS d1
               from (select 1,0 from onerow) v1(x1,x2)
               left join (select 3,1 from onerow) v2(y1,y2)
               on v1.x1 = v2.y2) subq1
    on (i1.f1 = subq1.x2)
  on (t1.unique2 = subq1.d1)
  left join tenk1 t2
  on (subq1.y1 = t2.unique1)
where t1.unique2 < 42 and t1.stringu1 > t2.stringu2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 328,
                            },
                          },
                          "location": 339,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "subq1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 341,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i1",
                              },
                              "inh": true,
                              "location": 85,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 304,
                                },
                              },
                              "location": 310,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "subq1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "x2",
                                      },
                                    },
                                  ],
                                  "location": 312,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "subq1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeSubselect": {
                                            "alias": {
                                              "aliasname": "v1",
                                              "colnames": [
                                                {
                                                  "String": {
                                                    "sval": "x1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "x2",
                                                  },
                                                },
                                              ],
                                            },
                                            "subquery": {
                                              "SelectStmt": {
                                                "fromClause": [
                                                  {
                                                    "RangeVar": {
                                                      "inh": true,
                                                      "location": 179,
                                                      "relname": "onerow",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 170,
                                                      "val": {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 1,
                                                          },
                                                          "location": 170,
                                                        },
                                                      },
                                                    },
                                                  },
                                                  {
                                                    "ResTarget": {
                                                      "location": 172,
                                                      "val": {
                                                        "A_Const": {
                                                          "ival": {},
                                                          "location": 172,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "v1",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "x1",
                                                    },
                                                  },
                                                ],
                                                "location": 275,
                                              },
                                            },
                                            "location": 281,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "v2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "y2",
                                                    },
                                                  },
                                                ],
                                                "location": 283,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeSubselect": {
                                            "alias": {
                                              "aliasname": "v2",
                                              "colnames": [
                                                {
                                                  "String": {
                                                    "sval": "y1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "y2",
                                                  },
                                                },
                                              ],
                                            },
                                            "subquery": {
                                              "SelectStmt": {
                                                "fromClause": [
                                                  {
                                                    "RangeVar": {
                                                      "inh": true,
                                                      "location": 239,
                                                      "relname": "onerow",
                                                      "relpersistence": "p",
                                                    },
                                                  },
                                                ],
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "targetList": [
                                                  {
                                                    "ResTarget": {
                                                      "location": 230,
                                                      "val": {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 3,
                                                          },
                                                          "location": 230,
                                                        },
                                                      },
                                                    },
                                                  },
                                                  {
                                                    "ResTarget": {
                                                      "location": 232,
                                                      "val": {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 1,
                                                          },
                                                          "location": 232,
                                                        },
                                                      },
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 119,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "v1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "x2",
                                                },
                                              },
                                            ],
                                            "location": 119,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 126,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "v2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "y1",
                                                },
                                              },
                                            ],
                                            "location": 126,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 133,
                                        "name": "d1",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 11,
                                            },
                                            "location": 133,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "subq1",
                              },
                            },
                            {
                              "String": {
                                "sval": "y1",
                              },
                            },
                          ],
                          "location": 378,
                        },
                      },
                      "location": 387,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 389,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 363,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "stringu1",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 32,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 32,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 44,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "stringu2",
                          },
                        },
                      ],
                      "location": 44,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 407,
                        },
                      },
                      "location": 418,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 42,
                          },
                          "location": 420,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "stringu1",
                              },
                            },
                          ],
                          "location": 427,
                        },
                      },
                      "location": 439,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "stringu2",
                              },
                            },
                          ],
                          "location": 441,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 423,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1225 1`] = `
[
  "select t1.unique2, t1.stringu1, t2.unique1, t2.stringu2 from
  tenk1 t1
  inner join int4_tbl i1
    left join (select v1.x2, v2.y1, 11 AS d1
               from (values(1,0)) v1(x1,x2)
               left join (values(3,1)) v2(y1,y2)
               on v1.x1 = v2.y2) subq1
    on (i1.f1 = subq1.x2)
  on (t1.unique2 = subq1.d1)
  left join tenk1 t2
  on (subq1.y1 = t2.unique1)
where t1.unique2 < 42 and t1.stringu1 > t2.stringu2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 63,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 306,
                            },
                          },
                          "location": 317,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "subq1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 319,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i1",
                              },
                              "inh": true,
                              "location": 85,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 282,
                                },
                              },
                              "location": 288,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "subq1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "x2",
                                      },
                                    },
                                  ],
                                  "location": 290,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "subq1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeSubselect": {
                                            "alias": {
                                              "aliasname": "v1",
                                              "colnames": [
                                                {
                                                  "String": {
                                                    "sval": "x1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "x2",
                                                  },
                                                },
                                              ],
                                            },
                                            "subquery": {
                                              "SelectStmt": {
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "valuesLists": [
                                                  {
                                                    "List": {
                                                      "items": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 1,
                                                            },
                                                            "location": 170,
                                                          },
                                                        },
                                                        {
                                                          "A_Const": {
                                                            "ival": {},
                                                            "location": 172,
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "v1",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "x1",
                                                    },
                                                  },
                                                ],
                                                "location": 253,
                                              },
                                            },
                                            "location": 259,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "v2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "y2",
                                                    },
                                                  },
                                                ],
                                                "location": 261,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeSubselect": {
                                            "alias": {
                                              "aliasname": "v2",
                                              "colnames": [
                                                {
                                                  "String": {
                                                    "sval": "y1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "y2",
                                                  },
                                                },
                                              ],
                                            },
                                            "subquery": {
                                              "SelectStmt": {
                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                "op": "SETOP_NONE",
                                                "valuesLists": [
                                                  {
                                                    "List": {
                                                      "items": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 3,
                                                            },
                                                            "location": 219,
                                                          },
                                                        },
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 1,
                                                            },
                                                            "location": 221,
                                                          },
                                                        },
                                                      ],
                                                    },
                                                  },
                                                ],
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 119,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "v1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "x2",
                                                },
                                              },
                                            ],
                                            "location": 119,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 126,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "v2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "y1",
                                                },
                                              },
                                            ],
                                            "location": 126,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 133,
                                        "name": "d1",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 11,
                                            },
                                            "location": 133,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "subq1",
                              },
                            },
                            {
                              "String": {
                                "sval": "y1",
                              },
                            },
                          ],
                          "location": 356,
                        },
                      },
                      "location": 365,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 367,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 341,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "stringu1",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 32,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 32,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 44,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "stringu2",
                          },
                        },
                      ],
                      "location": 44,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 385,
                        },
                      },
                      "location": 396,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 42,
                          },
                          "location": 398,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "stringu1",
                              },
                            },
                          ],
                          "location": 405,
                        },
                      },
                      "location": 417,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "stringu2",
                              },
                            },
                          ],
                          "location": 419,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 401,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1253 1`] = `
[
  "explain (verbose, costs off)
select * from
  (select 1 as x) ss1 left join (select 2 as y) ss2 on (true),
  lateral (select ss2.y as z limit 1) ss3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 53,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 53,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 99,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "name": "y",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss3",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 141,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 124,
                                "name": "z",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                    ],
                                    "location": 124,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1262 1`] = `
[
  "explain (costs off)
select * from
  (select 0 as z) as t1
  left join
  (select true as a) as t2
  on true,
  lateral (select true as b
           union all
           select a as b) as t3
where b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 44,
                                    "name": "z",
                                    "val": {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 44,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 102,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 80,
                                    "name": "a",
                                    "val": {
                                      "A_Const": {
                                        "boolval": {
                                          "boolval": true,
                                        },
                                        "location": 80,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t3",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 126,
                                  "name": "b",
                                  "val": {
                                    "A_Const": {
                                      "boolval": {
                                        "boolval": true,
                                      },
                                      "location": 126,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 175,
                                  "name": "b",
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 175,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                    ],
                    "location": 195,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1273 1`] = `
[
  "select * from
  (select 0 as z) as t1
  left join
  (select true as a) as t2
  on true,
  lateral (select true as b
           union all
           select a as b) as t3
where b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 24,
                                "name": "z",
                                "val": {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 24,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 82,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 60,
                                "name": "a",
                                "val": {
                                  "A_Const": {
                                    "boolval": {
                                      "boolval": true,
                                    },
                                    "location": 60,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t3",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "all": true,
                      "larg": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 106,
                              "name": "b",
                              "val": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 106,
                                },
                              },
                            },
                          },
                        ],
                      },
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_UNION",
                      "rarg": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 155,
                              "name": "b",
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 155,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "ColumnRef": {
                "fields": [
                  {
                    "String": {
                      "sval": "b",
                    },
                  },
                ],
                "location": 175,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1284 1`] = `
[
  "explain (verbose, costs off)
with ctetable as not materialized ( select 1 as f1 )
select * from ctetable c1
where f1 in ( select c3.f1 from ctetable c2 full join ctetable c3 on true )",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "c1",
                      },
                      "inh": true,
                      "location": 96,
                      "relname": "ctetable",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 89,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 89,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 117,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "JoinExpr": {
                              "jointype": "JOIN_FULL",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "c2",
                                  },
                                  "inh": true,
                                  "location": 140,
                                  "relname": "ctetable",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 177,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "c3",
                                  },
                                  "inh": true,
                                  "location": 162,
                                  "relname": "ctetable",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 129,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 114,
                      },
                    },
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "ctematerialized": "CTEMaterializeNever",
                        "ctename": "ctetable",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 72,
                                  "name": "f1",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 72,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1289 1`] = `
[
  "with ctetable as not materialized ( select 1 as f1 )
select * from ctetable c1
where f1 in ( select c3.f1 from ctetable c2 full join ctetable c3 on true )",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "c1",
                  },
                  "inh": true,
                  "location": 67,
                  "relname": "ctetable",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 60,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 60,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 88,
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "JoinExpr": {
                          "jointype": "JOIN_FULL",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "c2",
                              },
                              "inh": true,
                              "location": 111,
                              "relname": "ctetable",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 148,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "c3",
                              },
                              "inh": true,
                              "location": 133,
                              "relname": "ctetable",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 100,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                        },
                      },
                    ],
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 85,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeNever",
                    "ctename": "ctetable",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 43,
                              "name": "f1",
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 43,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1294 1`] = `
[
  "explain (verbose, costs off)
select table_catalog, table_name
from int4_tbl t1
  inner join (int8_tbl t2
              left join information_schema.column_udt_usage on null)
  on null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 67,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "isnull": true,
                          "location": 179,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 93,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "isnull": true,
                              "location": 168,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "inh": true,
                              "location": 129,
                              "relname": "column_udt_usage",
                              "relpersistence": "p",
                              "schemaname": "information_schema",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "table_catalog",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "table_name",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1302 1`] = `
[
  "explain (verbose, costs off)
select * from int4_tbl left join (
  select text 'foo' union all select text 'bar'
) ss(x) on true
where ss.x is null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 123,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                          },
                          "subquery": {
                            "SelectStmt": {
                              "all": true,
                              "larg": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 73,
                                      "val": {
                                        "TypeCast": {
                                          "arg": {
                                            "A_Const": {
                                              "location": 78,
                                              "sval": {
                                                "sval": "foo",
                                              },
                                            },
                                          },
                                          "location": -1,
                                          "typeName": {
                                            "location": 73,
                                            "names": [
                                              {
                                                "String": {
                                                  "sval": "text",
                                                },
                                              },
                                            ],
                                            "typemod": -1,
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_UNION",
                              "rarg": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 101,
                                      "val": {
                                        "TypeCast": {
                                          "arg": {
                                            "A_Const": {
                                              "location": 106,
                                              "sval": {
                                                "sval": "bar",
                                              },
                                            },
                                          },
                                          "location": -1,
                                          "typeName": {
                                            "location": 101,
                                            "names": [
                                              {
                                                "String": {
                                                  "sval": "text",
                                                },
                                              },
                                            ],
                                            "typemod": -1,
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ss",
                            },
                          },
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 134,
                      },
                    },
                    "location": 139,
                    "nulltesttype": "IS_NULL",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1311 1`] = `
[
  "create function f_immutable_int4(i integer) returns integer as
$$ begin return i; end; $$ language plpgsql immutable",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "f_immutable_int4",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": " begin return i; end; ",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 60,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 90,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "immutable",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "volatility",
                  "location": 107,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "i",
                },
              },
            ],
            "returnType": {
              "location": 52,
              "names": [
                {
                  "String": {
                    "sval": "pg_catalog",
                  },
                },
                {
                  "String": {
                    "sval": "int4",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1315 1`] = `
[
  "explain (costs off)
select unique1 from tenk1, (select * from f_immutable_int4(1) x) x
where x = unique1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeFunction": {
                                "alias": {
                                  "aliasname": "x",
                                },
                                "functions": [
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "FuncCall": {
                                            "args": [
                                              {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 79,
                                                },
                                              },
                                            ],
                                            "funcformat": "COERCE_EXPLICIT_CALL",
                                            "funcname": [
                                              {
                                                "String": {
                                                  "sval": "f_immutable_int4",
                                                },
                                              },
                                            ],
                                            "location": 62,
                                          },
                                        },
                                        {},
                                      ],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 55,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                    "location": 95,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 97,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1319 1`] = `
[
  "explain (verbose, costs off)
select unique1, x.*
from tenk1, (select *, random() from f_immutable_int4(1) x) x
where x = unique1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 54,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeFunction": {
                                "alias": {
                                  "aliasname": "x",
                                },
                                "functions": [
                                  {
                                    "List": {
                                      "items": [
                                        {
                                          "FuncCall": {
                                            "args": [
                                              {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 103,
                                                },
                                              },
                                            ],
                                            "funcformat": "COERCE_EXPLICIT_CALL",
                                            "funcname": [
                                              {
                                                "String": {
                                                  "sval": "f_immutable_int4",
                                                },
                                              },
                                            ],
                                            "location": 86,
                                          },
                                        },
                                        {},
                                      ],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 69,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 69,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 72,
                                "val": {
                                  "FuncCall": {
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "random",
                                        },
                                      },
                                    ],
                                    "location": 72,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 117,
                      },
                    },
                    "location": 119,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 121,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1324 1`] = `
[
  "explain (costs off)
select unique1 from tenk1, f_immutable_int4(1) x where x = unique1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "f_immutable_int4",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 75,
                      },
                    },
                    "location": 77,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 79,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1327 1`] = `
[
  "explain (costs off)
select unique1 from tenk1, lateral f_immutable_int4(1) x where x = unique1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 72,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "f_immutable_int4",
                                      },
                                    },
                                  ],
                                  "location": 55,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                      "lateral": true,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 83,
                      },
                    },
                    "location": 85,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 87,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1330 1`] = `
[
  "explain (costs off)
select unique1 from tenk1, lateral f_immutable_int4(1) x where x in (select 17)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 72,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "f_immutable_int4",
                                      },
                                    },
                                  ],
                                  "location": 55,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                      "lateral": true,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 85,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 96,
                              "val": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 17,
                                  },
                                  "location": 96,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 83,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1333 1`] = `
[
  "explain (costs off)
select unique1, x from tenk1 join f_immutable_int4(1) x on unique1 = x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 79,
                            },
                          },
                          "location": 87,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 89,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeFunction": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "functions": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 71,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "f_immutable_int4",
                                          },
                                        },
                                      ],
                                      "location": 54,
                                    },
                                  },
                                  {},
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1336 1`] = `
[
  "explain (costs off)
select unique1, x from tenk1 left join f_immutable_int4(1) x on unique1 = x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 84,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeFunction": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "functions": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 76,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "f_immutable_int4",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  {},
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1339 1`] = `
[
  "explain (costs off)
select unique1, x from tenk1 right join f_immutable_int4(1) x on unique1 = x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 85,
                            },
                          },
                          "location": 93,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeFunction": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "functions": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 77,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "f_immutable_int4",
                                          },
                                        },
                                      ],
                                      "location": 60,
                                    },
                                  },
                                  {},
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1342 1`] = `
[
  "explain (costs off)
select unique1, x from tenk1 full join f_immutable_int4(1) x on unique1 = x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 84,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeFunction": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "functions": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 76,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "f_immutable_int4",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  {},
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1346 1`] = `
[
  "explain (costs off)
select unique1 from tenk1, f_immutable_int4(1) x where x = 42",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 40,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 64,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "f_immutable_int4",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 75,
                      },
                    },
                    "location": 77,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 42,
                        },
                        "location": 79,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1350 1`] = `
[
  "explain (costs off)
select nt3.id
from nt3 as nt3
  left join
    (select nt2.*, (nt2.b1 or i4 = 42) AS b3
     from nt2 as nt2
       left join
         f_immutable_int4(0) i4
         on i4 = nt2.nt1_id
    ) as ss2
    on ss2.id = nt3.nt2_id
where nt3.id = 1 and ss2.b3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "nt3",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "nt3",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 225,
                            },
                          },
                          "location": 232,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "nt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "nt2_id",
                                  },
                                },
                              ],
                              "location": 234,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "nt2",
                                        },
                                        "inh": true,
                                        "location": 117,
                                        "relname": "nt2",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i4",
                                                },
                                              },
                                            ],
                                            "location": 189,
                                          },
                                        },
                                        "location": 192,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "nt2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "nt1_id",
                                                },
                                              },
                                            ],
                                            "location": 194,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeFunction": {
                                        "alias": {
                                          "aliasname": "i4",
                                        },
                                        "functions": [
                                          {
                                            "List": {
                                              "items": [
                                                {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "ival": {},
                                                          "location": 171,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "f_immutable_int4",
                                                        },
                                                      },
                                                    ],
                                                    "location": 154,
                                                  },
                                                },
                                                {},
                                              ],
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 74,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "nt2",
                                            },
                                          },
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 74,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 81,
                                    "name": "b3",
                                    "val": {
                                      "BoolExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "nt2",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "b1",
                                                  },
                                                },
                                              ],
                                              "location": 82,
                                            },
                                          },
                                          {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "i4",
                                                      },
                                                    },
                                                  ],
                                                  "location": 92,
                                                },
                                              },
                                              "location": 95,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 42,
                                                  },
                                                  "location": 97,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "boolop": "OR_EXPR",
                                        "location": 89,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "nt3",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "nt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 251,
                            },
                          },
                          "location": 258,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 260,
                            },
                          },
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss2",
                              },
                            },
                            {
                              "String": {
                                "sval": "b3",
                              },
                            },
                          ],
                          "location": 266,
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 262,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1363 1`] = `
[
  "drop function f_immutable_int4(int)",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "ObjectWithArgs": {
                  "objargs": [
                    {
                      "TypeName": {
                        "location": 31,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int4",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  ],
                  "objfuncargs": [
                    {
                      "FunctionParameter": {
                        "argType": {
                          "location": 31,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int4",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                        "mode": "FUNC_PARAM_DEFAULT",
                      },
                    },
                  ],
                  "objname": [
                    {
                      "String": {
                        "sval": "f_immutable_int4",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_FUNCTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1370 1`] = `
[
  "create function mki4(int) returns int4_tbl as
$$select row($1)::int4_tbl$$ language sql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "mki4",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "select row($1)::int4_tbl",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 43,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 75,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 21,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "returnType": {
              "location": 34,
              "names": [
                {
                  "String": {
                    "sval": "int4_tbl",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1373 1`] = `
[
  "explain (verbose, costs off)
select * from mki8(1,2)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 48,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 50,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "mki8",
                                      },
                                    },
                                  ],
                                  "location": 43,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1377 1`] = `
[
  "explain (verbose, costs off)
select * from mki4(42)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 48,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "mki4",
                                      },
                                    },
                                  ],
                                  "location": 43,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1381 1`] = `
[
  "drop function mki8(bigint, bigint)",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "ObjectWithArgs": {
                  "objargs": [
                    {
                      "TypeName": {
                        "location": 19,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int8",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                    {
                      "TypeName": {
                        "location": 27,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int8",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  ],
                  "objfuncargs": [
                    {
                      "FunctionParameter": {
                        "argType": {
                          "location": 19,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int8",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                        "mode": "FUNC_PARAM_DEFAULT",
                      },
                    },
                    {
                      "FunctionParameter": {
                        "argType": {
                          "location": 27,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int8",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                        "mode": "FUNC_PARAM_DEFAULT",
                      },
                    },
                  ],
                  "objname": [
                    {
                      "String": {
                        "sval": "mki8",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_FUNCTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1390 1`] = `
[
  "select * from tenk1 a join tenk1 b on
  (a.unique1 = 1 and b.unique1 = 2) or (a.unique2 = 3 and b.hundred = 4)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 41,
                                    },
                                  },
                                  "location": 51,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 53,
                                    },
                                  },
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  "location": 69,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 71,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 55,
                          },
                        },
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 78,
                                    },
                                  },
                                  "location": 88,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 3,
                                      },
                                      "location": 90,
                                    },
                                  },
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "hundred",
                                          },
                                        },
                                      ],
                                      "location": 96,
                                    },
                                  },
                                  "location": 106,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 4,
                                      },
                                      "location": 108,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 92,
                          },
                        },
                      ],
                      "boolop": "OR_EXPR",
                      "location": 74,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 27,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1393 1`] = `
[
  "select * from tenk1 a join tenk1 b on
  (a.unique1 = 1 and b.unique1 = 2) or (a.unique2 = 3 and b.ten = 4)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 41,
                                    },
                                  },
                                  "location": 51,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 53,
                                    },
                                  },
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  "location": 69,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 71,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 55,
                          },
                        },
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 78,
                                    },
                                  },
                                  "location": 88,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 3,
                                      },
                                      "location": 90,
                                    },
                                  },
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "ten",
                                          },
                                        },
                                      ],
                                      "location": 96,
                                    },
                                  },
                                  "location": 102,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 4,
                                      },
                                      "location": 104,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 92,
                          },
                        },
                      ],
                      "boolop": "OR_EXPR",
                      "location": 74,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 27,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1396 1`] = `
[
  "select * from tenk1 a join tenk1 b on
  (a.unique1 = 1 and b.unique1 = 2) or
  ((a.unique2 = 3 or a.unique2 = 7) and b.hundred = 4)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 41,
                                    },
                                  },
                                  "location": 51,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 53,
                                    },
                                  },
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 59,
                                    },
                                  },
                                  "location": 69,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 71,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 55,
                          },
                        },
                        {
                          "BoolExpr": {
                            "args": [
                              {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique2",
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                        "location": 91,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 3,
                                            },
                                            "location": 93,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique2",
                                                },
                                              },
                                            ],
                                            "location": 98,
                                          },
                                        },
                                        "location": 108,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 7,
                                            },
                                            "location": 110,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "OR_EXPR",
                                  "location": 95,
                                },
                              },
                              {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "hundred",
                                          },
                                        },
                                      ],
                                      "location": 117,
                                    },
                                  },
                                  "location": 127,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 4,
                                      },
                                      "location": 129,
                                    },
                                  },
                                },
                              },
                            ],
                            "boolop": "AND_EXPR",
                            "location": 113,
                          },
                        },
                      ],
                      "boolop": "OR_EXPR",
                      "location": 74,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 27,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1405 1`] = `
[
  "select * from tenk1 t1 left join
  (tenk1 t2 join tenk1 t3 on t2.thousand = t3.unique2)
  on t1.hundred = t2.hundred and t1.ten = t3.ten
where t1.unique1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "hundred",
                                    },
                                  },
                                ],
                                "location": 93,
                              },
                            },
                            "location": 104,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "hundred",
                                    },
                                  },
                                ],
                                "location": 106,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "ten",
                                    },
                                  },
                                ],
                                "location": 121,
                              },
                            },
                            "location": 128,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t3",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "ten",
                                    },
                                  },
                                ],
                                "location": 130,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 117,
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 36,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                          "location": 74,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 50,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t1",
                        },
                      },
                      {
                        "String": {
                          "sval": "unique1",
                        },
                      },
                    ],
                    "location": 143,
                  },
                },
                "location": 154,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 156,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1410 1`] = `
[
  "explain (costs off)
select * from tenk1 t1 left join
  (tenk1 t2 join tenk1 t3 on t2.thousand = t3.unique2)
  on t1.hundred = t2.hundred and t1.ten + t2.ten = t3.ten
where t1.unique1 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "hundred",
                                        },
                                      },
                                    ],
                                    "location": 113,
                                  },
                                },
                                "location": 124,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "hundred",
                                        },
                                      },
                                    ],
                                    "location": 126,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "ten",
                                            },
                                          },
                                        ],
                                        "location": 141,
                                      },
                                    },
                                    "location": 148,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "ten",
                                            },
                                          },
                                        ],
                                        "location": 150,
                                      },
                                    },
                                  },
                                },
                                "location": 157,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 159,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 137,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 56,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "thousand",
                                      },
                                    },
                                  ],
                                  "location": 82,
                                },
                              },
                              "location": 94,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique2",
                                      },
                                    },
                                  ],
                                  "location": 96,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 70,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 172,
                      },
                    },
                    "location": 183,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 185,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1416 1`] = `
[
  "explain (costs off)
select count(*) from
  tenk1 a join tenk1 b on a.unique1 = b.unique2
  left join tenk1 c on a.unique2 = b.unique1 and c.thousand = a.thousand
  join int4_tbl on b.thousand = f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "a",
                                  },
                                  "inh": true,
                                  "location": 43,
                                  "relname": "tenk1",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 67,
                                    },
                                  },
                                  "location": 77,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 79,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "b",
                                  },
                                  "inh": true,
                                  "location": 56,
                                  "relname": "tenk1",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 112,
                                      },
                                    },
                                    "location": 122,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 124,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 138,
                                      },
                                    },
                                    "location": 149,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 151,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 134,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "c",
                              },
                              "inh": true,
                              "location": 101,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 181,
                            },
                          },
                          "location": 192,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 194,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 169,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1422 1`] = `
[
  "select count(*) from
  tenk1 a join tenk1 b on a.unique1 = b.unique2
  left join tenk1 c on a.unique2 = b.unique1 and c.thousand = a.thousand
  join int4_tbl on b.thousand = f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a",
                              },
                              "inh": true,
                              "location": 23,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              "location": 57,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "unique2",
                                      },
                                    },
                                  ],
                                  "location": 59,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "b",
                              },
                              "inh": true,
                              "location": 36,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 92,
                                  },
                                },
                                "location": 102,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 104,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "thousand",
                                        },
                                      },
                                    ],
                                    "location": 118,
                                  },
                                },
                                "location": 129,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "thousand",
                                        },
                                      },
                                    ],
                                    "location": 131,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 114,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 81,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 161,
                        },
                      },
                      "location": 172,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 174,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 149,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1427 1`] = `
[
  "explain (costs off)
select b.unique1 from
  tenk1 a join tenk1 b on a.unique1 = b.unique2
  left join tenk1 c on b.unique1 = 42 and c.thousand = a.thousand
  join int4_tbl i1 on b.thousand = f1
  right join int4_tbl i2 on i2.f1 = b.tenthous
  order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_INNER",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "a",
                                      },
                                      "inh": true,
                                      "location": 44,
                                      "relname": "tenk1",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "unique1",
                                              },
                                            },
                                          ],
                                          "location": 68,
                                        },
                                      },
                                      "location": 78,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "unique2",
                                              },
                                            },
                                          ],
                                          "location": 80,
                                        },
                                      },
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "b",
                                      },
                                      "inh": true,
                                      "location": 57,
                                      "relname": "tenk1",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 113,
                                          },
                                        },
                                        "location": 123,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 42,
                                            },
                                            "location": 125,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "thousand",
                                                },
                                              },
                                            ],
                                            "location": 132,
                                          },
                                        },
                                        "location": 143,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "thousand",
                                                },
                                              },
                                            ],
                                            "location": 145,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 128,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "c",
                                  },
                                  "inh": true,
                                  "location": 102,
                                  "relname": "tenk1",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "thousand",
                                      },
                                    },
                                  ],
                                  "location": 178,
                                },
                              },
                              "location": 189,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 191,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i1",
                              },
                              "inh": true,
                              "location": 163,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 222,
                            },
                          },
                          "location": 228,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 230,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i2",
                          },
                          "inh": true,
                          "location": 207,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 252,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1435 1`] = `
[
  "select b.unique1 from
  tenk1 a join tenk1 b on a.unique1 = b.unique2
  left join tenk1 c on b.unique1 = 42 and c.thousand = a.thousand
  join int4_tbl i1 on b.thousand = f1
  right join int4_tbl i2 on i2.f1 = b.tenthous
  order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "a",
                                  },
                                  "inh": true,
                                  "location": 24,
                                  "relname": "tenk1",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 48,
                                    },
                                  },
                                  "location": 58,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 60,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "b",
                                  },
                                  "inh": true,
                                  "location": 37,
                                  "relname": "tenk1",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "unique1",
                                            },
                                          },
                                        ],
                                        "location": 93,
                                      },
                                    },
                                    "location": 103,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 112,
                                      },
                                    },
                                    "location": 123,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 125,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 108,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "c",
                              },
                              "inh": true,
                              "location": 82,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 158,
                            },
                          },
                          "location": 169,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 171,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i1",
                          },
                          "inh": true,
                          "location": 143,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i2",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 202,
                        },
                      },
                      "location": 208,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 210,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i2",
                      },
                      "inh": true,
                      "location": 187,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 232,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1442 1`] = `
[
  "explain (costs off)
select * from
(
  select unique1, q1, coalesce(unique1, -1) + q1 as fault
  from int8_tbl left join tenk1 on (q2 = unique2)
) ss
where fault = 122
order by fault",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 101,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 130,
                                      },
                                    },
                                    "location": 133,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 135,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 120,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 45,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 45,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 58,
                                "name": "fault",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "CoalesceExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "unique1",
                                                  },
                                                },
                                              ],
                                              "location": 67,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 76,
                                            },
                                          },
                                        ],
                                        "location": 58,
                                      },
                                    },
                                    "location": 80,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "+",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 82,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "fault",
                              },
                            },
                          ],
                          "location": 176,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "fault",
                            },
                          },
                        ],
                        "location": 155,
                      },
                    },
                    "location": 161,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 122,
                        },
                        "location": 163,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1451 1`] = `
[
  "select * from
(
  select unique1, q1, coalesce(unique1, -1) + q1 as fault
  from int8_tbl left join tenk1 on (q2 = unique2)
) ss
where fault = 122
order by fault",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "JoinExpr": {
                            "jointype": "JOIN_LEFT",
                            "larg": {
                              "RangeVar": {
                                "inh": true,
                                "location": 81,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                            "quals": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q2",
                                        },
                                      },
                                    ],
                                    "location": 110,
                                  },
                                },
                                "location": 113,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 115,
                                  },
                                },
                              },
                            },
                            "rarg": {
                              "RangeVar": {
                                "inh": true,
                                "location": 100,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 25,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "unique1",
                                    },
                                  },
                                ],
                                "location": 25,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 34,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 34,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 38,
                            "name": "fault",
                            "val": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "unique1",
                                              },
                                            },
                                          ],
                                          "location": 47,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {},
                                          "location": 56,
                                        },
                                      },
                                    ],
                                    "location": 38,
                                  },
                                },
                                "location": 60,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "+",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 62,
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "fault",
                          },
                        },
                      ],
                      "location": 156,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "fault",
                        },
                      },
                    ],
                    "location": 135,
                  },
                },
                "location": 141,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 122,
                    },
                    "location": 143,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1459 1`] = `
[
  "explain (costs off)
select * from
(values (1, array[10,20]), (2, array[20,30])) as v1(v1x,v1ys)
left join (values (1, 10), (2, 20)) as v2(v2x,v2y) on v2x = v1x
left join unnest(v1ys) as u1(u1y) on u1y = v2y",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "v1",
                                "colnames": [
                                  {
                                    "String": {
                                      "sval": "v1x",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "v1ys",
                                    },
                                  },
                                ],
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "valuesLists": [
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 43,
                                            },
                                          },
                                          {
                                            "A_ArrayExpr": {
                                              "elements": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 10,
                                                    },
                                                    "location": 52,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 20,
                                                    },
                                                    "location": 55,
                                                  },
                                                },
                                              ],
                                              "location": 46,
                                            },
                                          },
                                        ],
                                      },
                                    },
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 62,
                                            },
                                          },
                                          {
                                            "A_ArrayExpr": {
                                              "elements": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 20,
                                                    },
                                                    "location": 71,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 30,
                                                    },
                                                    "location": 74,
                                                  },
                                                },
                                              ],
                                              "location": 65,
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "v2x",
                                      },
                                    },
                                  ],
                                  "location": 150,
                                },
                              },
                              "location": 154,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "v1x",
                                      },
                                    },
                                  ],
                                  "location": 156,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "v2",
                                "colnames": [
                                  {
                                    "String": {
                                      "sval": "v2x",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "v2y",
                                    },
                                  },
                                ],
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "valuesLists": [
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 115,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 10,
                                              },
                                              "location": 118,
                                            },
                                          },
                                        ],
                                      },
                                    },
                                    {
                                      "List": {
                                        "items": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 124,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 20,
                                              },
                                              "location": 127,
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "u1y",
                                  },
                                },
                              ],
                              "location": 197,
                            },
                          },
                          "location": 201,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v2y",
                                  },
                                },
                              ],
                              "location": 203,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeFunction": {
                          "alias": {
                            "aliasname": "u1",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "u1y",
                                },
                              },
                            ],
                          },
                          "functions": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "v1ys",
                                                },
                                              },
                                            ],
                                            "location": 177,
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "unnest",
                                          },
                                        },
                                      ],
                                      "location": 170,
                                    },
                                  },
                                  {},
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1465 1`] = `
[
  "select * from
(values (1, array[10,20]), (2, array[20,30])) as v1(v1x,v1ys)
left join (values (1, 10), (2, 20)) as v2(v2x,v2y) on v2x = v1x
left join unnest(v1ys) as u1(u1y) on u1y = v2y",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "v1",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "v1x",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v1ys",
                                },
                              },
                            ],
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 23,
                                        },
                                      },
                                      {
                                        "A_ArrayExpr": {
                                          "elements": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 10,
                                                },
                                                "location": 32,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 20,
                                                },
                                                "location": 35,
                                              },
                                            },
                                          ],
                                          "location": 26,
                                        },
                                      },
                                    ],
                                  },
                                },
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 2,
                                          },
                                          "location": 42,
                                        },
                                      },
                                      {
                                        "A_ArrayExpr": {
                                          "elements": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 20,
                                                },
                                                "location": 51,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 30,
                                                },
                                                "location": 54,
                                              },
                                            },
                                          ],
                                          "location": 45,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v2x",
                                  },
                                },
                              ],
                              "location": 130,
                            },
                          },
                          "location": 134,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v1x",
                                  },
                                },
                              ],
                              "location": 136,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "v2",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "v2x",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v2y",
                                },
                              },
                            ],
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 95,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 10,
                                          },
                                          "location": 98,
                                        },
                                      },
                                    ],
                                  },
                                },
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 2,
                                          },
                                          "location": 104,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 20,
                                          },
                                          "location": 107,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "u1y",
                              },
                            },
                          ],
                          "location": 177,
                        },
                      },
                      "location": 181,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "v2y",
                              },
                            },
                          ],
                          "location": 183,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "u1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "u1y",
                            },
                          },
                        ],
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "v1ys",
                                            },
                                          },
                                        ],
                                        "location": 157,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "unnest",
                                      },
                                    },
                                  ],
                                  "location": 150,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1475 1`] = `
[
  "select q1, unique2, thousand, hundred
  from int8_tbl a left join tenk1 b on q1 = unique2
  where coalesce(thousand,123) = q1 and q1 = coalesce(hundred,123)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 45,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 77,
                        },
                      },
                      "location": 80,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 82,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 66,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 30,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "hundred",
                          },
                        },
                      ],
                      "location": 30,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "thousand",
                                    },
                                  },
                                ],
                                "location": 107,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 123,
                                },
                                "location": 116,
                              },
                            },
                          ],
                          "location": 98,
                        },
                      },
                      "location": 121,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 123,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 130,
                        },
                      },
                      "location": 133,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "hundred",
                                    },
                                  },
                                ],
                                "location": 144,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 123,
                                },
                                "location": 152,
                              },
                            },
                          ],
                          "location": 135,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 126,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1483 1`] = `
[
  "explain (costs off)
select f1, unique2, case when unique2 is null then f1 else 0 end
  from int4_tbl a left join tenk1 b on f1 = unique2
  where (case when unique2 is null then f1 else 0 end) = 0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 92,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 124,
                            },
                          },
                          "location": 127,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 129,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 113,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "CaseExpr": {
                          "args": [
                            {
                              "CaseWhen": {
                                "expr": {
                                  "NullTest": {
                                    "arg": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "unique2",
                                            },
                                          },
                                        ],
                                        "location": 50,
                                      },
                                    },
                                    "location": 58,
                                    "nulltesttype": "IS_NULL",
                                  },
                                },
                                "location": 45,
                                "result": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 71,
                                  },
                                },
                              },
                            },
                          ],
                          "defresult": {
                            "A_Const": {
                              "ival": {},
                              "location": 79,
                            },
                          },
                          "location": 40,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "CaseExpr": {
                        "args": [
                          {
                            "CaseWhen": {
                              "expr": {
                                "NullTest": {
                                  "arg": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "unique2",
                                          },
                                        },
                                      ],
                                      "location": 156,
                                    },
                                  },
                                  "location": 164,
                                  "nulltesttype": "IS_NULL",
                                },
                              },
                              "location": 151,
                              "result": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 177,
                                },
                              },
                            },
                          },
                        ],
                        "defresult": {
                          "A_Const": {
                            "ival": {},
                            "location": 185,
                          },
                        },
                        "location": 146,
                      },
                    },
                    "location": 192,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 194,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1488 1`] = `
[
  "select f1, unique2, case when unique2 is null then f1 else 0 end
  from int4_tbl a left join tenk1 b on f1 = unique2
  where (case when unique2 is null then f1 else 0 end) = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 72,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 104,
                        },
                      },
                      "location": 107,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 109,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 93,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "CaseExpr": {
                      "args": [
                        {
                          "CaseWhen": {
                            "expr": {
                              "NullTest": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 30,
                                  },
                                },
                                "location": 38,
                                "nulltesttype": "IS_NULL",
                              },
                            },
                            "location": 25,
                            "result": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 51,
                              },
                            },
                          },
                        },
                      ],
                      "defresult": {
                        "A_Const": {
                          "ival": {},
                          "location": 59,
                        },
                      },
                      "location": 20,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "CaseExpr": {
                    "args": [
                      {
                        "CaseWhen": {
                          "expr": {
                            "NullTest": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "unique2",
                                      },
                                    },
                                  ],
                                  "location": 136,
                                },
                              },
                              "location": 144,
                              "nulltesttype": "IS_NULL",
                            },
                          },
                          "location": 131,
                          "result": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 157,
                            },
                          },
                        },
                      },
                    ],
                    "defresult": {
                      "A_Const": {
                        "ival": {},
                        "location": 165,
                      },
                    },
                    "location": 126,
                  },
                },
                "location": 172,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 174,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1497 1`] = `
[
  "select a.unique1, b.unique1, c.unique1, coalesce(b.twothousand, a.twothousand)
  from tenk1 a left join tenk1 b on b.thousand = a.unique1                        left join tenk1 c on c.unique2 = coalesce(b.twothousand, a.twothousand)
  where a.unique2 < 10 and coalesce(b.twothousand, a.twothousand) = 44",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 86,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 115,
                            },
                          },
                          "location": 126,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 104,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 182,
                        },
                      },
                      "location": 192,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "twothousand",
                                    },
                                  },
                                ],
                                "location": 203,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "twothousand",
                                    },
                                  },
                                ],
                                "location": 218,
                              },
                            },
                          ],
                          "location": 194,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "c",
                      },
                      "inh": true,
                      "location": 171,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 29,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 40,
                  "val": {
                    "CoalesceExpr": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "twothousand",
                                },
                              },
                            ],
                            "location": 49,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                              {
                                "String": {
                                  "sval": "twothousand",
                                },
                              },
                            ],
                            "location": 64,
                          },
                        },
                      ],
                      "location": 40,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 241,
                        },
                      },
                      "location": 251,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 253,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "twothousand",
                                    },
                                  },
                                ],
                                "location": 269,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "twothousand",
                                    },
                                  },
                                ],
                                "location": 284,
                              },
                            },
                          ],
                          "location": 260,
                        },
                      },
                      "location": 299,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 44,
                          },
                          "location": 301,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 256,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1508 1`] = `
[
  "select * from int8_tbl t1 left join int8_tbl t2 on t1.q2 = t2.q1,
  lateral (select * from int8_tbl t3 where t2.q1 = t2.q2) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                      "location": 57,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 59,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "t3",
                            },
                            "inh": true,
                            "location": 91,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 84,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 84,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 109,
                            },
                          },
                          "location": 115,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 117,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1519 1`] = `
[
  "select foo1.join_key as foo1_id, foo3.join_key AS foo3_id, bug_field from
  (values (0),(1)) foo1(join_key)
left join
  (select join_key, bug_field from
    (select ss1.join_key, ss1.bug_field from
      (select f1 as join_key, 666 as bug_field from int4_tbl i1) ss1
    ) foo2
   left join
    (select unique2 as join_key from tenk1 i2) ss2
   using (join_key)
  ) foo3
using (join_key)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "foo1",
                        "colnames": [
                          {
                            "String": {
                              "sval": "join_key",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 85,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 89,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "foo3",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "foo2",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeSubselect": {
                                              "alias": {
                                                "aliasname": "ss1",
                                              },
                                              "subquery": {
                                                "SelectStmt": {
                                                  "fromClause": [
                                                    {
                                                      "RangeVar": {
                                                        "alias": {
                                                          "aliasname": "i1",
                                                        },
                                                        "inh": true,
                                                        "location": 250,
                                                        "relname": "int4_tbl",
                                                        "relpersistence": "p",
                                                      },
                                                    },
                                                  ],
                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                  "op": "SETOP_NONE",
                                                  "targetList": [
                                                    {
                                                      "ResTarget": {
                                                        "location": 212,
                                                        "name": "join_key",
                                                        "val": {
                                                          "ColumnRef": {
                                                            "fields": [
                                                              {
                                                                "String": {
                                                                  "sval": "f1",
                                                                },
                                                              },
                                                            ],
                                                            "location": 212,
                                                          },
                                                        },
                                                      },
                                                    },
                                                    {
                                                      "ResTarget": {
                                                        "location": 228,
                                                        "name": "bug_field",
                                                        "val": {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 666,
                                                            },
                                                            "location": 228,
                                                          },
                                                        },
                                                      },
                                                    },
                                                  ],
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 165,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "ss1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "join_key",
                                                      },
                                                    },
                                                  ],
                                                  "location": 165,
                                                },
                                              },
                                            },
                                          },
                                          {
                                            "ResTarget": {
                                              "location": 179,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "ss1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "bug_field",
                                                      },
                                                    },
                                                  ],
                                                  "location": 179,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "ss2",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeVar": {
                                              "alias": {
                                                "aliasname": "i2",
                                              },
                                              "inh": true,
                                              "location": 328,
                                              "relname": "tenk1",
                                              "relpersistence": "p",
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 303,
                                              "name": "join_key",
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "unique2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 303,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "usingClause": [
                                  {
                                    "String": {
                                      "sval": "join_key",
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 128,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "join_key",
                                        },
                                      },
                                    ],
                                    "location": 128,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 138,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "bug_field",
                                        },
                                      },
                                    ],
                                    "location": 138,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "join_key",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "foo1_id",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "foo1",
                          },
                        },
                        {
                          "String": {
                            "sval": "join_key",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 33,
                  "name": "foo3_id",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "foo3",
                          },
                        },
                        {
                          "String": {
                            "sval": "join_key",
                          },
                        },
                      ],
                      "location": 33,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 59,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "bug_field",
                          },
                        },
                      ],
                      "location": 59,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1548 1`] = `
[
  "explain (verbose, costs off)
select * from
int4_tbl i0 left join
( (select *, 123 as x from int4_tbl i1) ss1
  left join
  (select *, q2 as x from int8_tbl i2) ss2
  using (x)
) ss0
on (i0.f1 = ss0.f1)
order by i0.f1, x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i0",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i0",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 186,
                            },
                          },
                          "location": 192,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss0",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 194,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "alias": {
                            "aliasname": "ss0",
                          },
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i1",
                                        },
                                        "inh": true,
                                        "location": 92,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 75,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 75,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 78,
                                        "name": "x",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 123,
                                            },
                                            "location": 78,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss2",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i2",
                                        },
                                        "inh": true,
                                        "location": 147,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 131,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 131,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 134,
                                        "name": "x",
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "q2",
                                                },
                                              },
                                            ],
                                            "location": 134,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "usingClause": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i0",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 211,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 218,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1559 1`] = `
[
  "select * from
int4_tbl i0 left join
( (select *, 123 as x from int4_tbl i1) ss1
  left join
  (select *, q2 as x from int8_tbl i2) ss2
  using (x)
) ss0
on (i0.f1 = ss0.f1)
order by i0.f1, x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i0",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i0",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 157,
                        },
                      },
                      "location": 163,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss0",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 165,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "alias": {
                        "aliasname": "ss0",
                      },
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i1",
                                    },
                                    "inh": true,
                                    "location": 63,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 46,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 46,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 49,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 123,
                                        },
                                        "location": 49,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i2",
                                    },
                                    "inh": true,
                                    "location": 118,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 102,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 102,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 105,
                                    "name": "x",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 105,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i0",
                          },
                        },
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 182,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 189,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1574 1`] = `
[
  "select t1.* from
  text_tbl t1
  left join (select *, '***'::text as d1 from int8_tbl i8b1) b1
    left join int8_tbl i8
      left join (select *, null::int as d2 from int8_tbl i8b2) b2
      on (i8.q1 = b2.q1)
    on (b2.d2 = b1.q2)
  on (t1.f1 = b1.d1)
  left join int4_tbl i4
  on (i8.q2 = i4.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 19,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 241,
                            },
                          },
                          "location": 247,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 249,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "b1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i8b1",
                                        },
                                        "inh": true,
                                        "location": 77,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 51,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 51,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 54,
                                        "name": "d1",
                                        "val": {
                                          "TypeCast": {
                                            "arg": {
                                              "A_Const": {
                                                "location": 54,
                                                "sval": {
                                                  "sval": "***",
                                                },
                                              },
                                            },
                                            "location": 59,
                                            "typeName": {
                                              "location": 61,
                                              "names": [
                                                {
                                                  "String": {
                                                    "sval": "text",
                                                  },
                                                },
                                              ],
                                              "typemod": -1,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "d2",
                                      },
                                    },
                                  ],
                                  "location": 220,
                                },
                              },
                              "location": 226,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 228,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i8",
                                  },
                                  "inh": true,
                                  "location": 109,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i8",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 197,
                                    },
                                  },
                                  "location": 203,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 205,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "b2",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i8b2",
                                            },
                                            "inh": true,
                                            "location": 169,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 145,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 145,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 148,
                                            "name": "d2",
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "isnull": true,
                                                    "location": 148,
                                                  },
                                                },
                                                "location": 152,
                                                "typeName": {
                                                  "location": 154,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "pg_catalog",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "int4",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 286,
                        },
                      },
                      "location": 292,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i4",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 294,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 268,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1596 1`] = `
[
  "explain (verbose, costs off)
select t1.* from
  text_tbl t1
  left join (select *, '***'::text as d1 from int8_tbl i8b1) b1
    left join int8_tbl i8
      left join (select *, null::int as d2 from int8_tbl i8b2, int4_tbl i4b2) b2
      on (i8.q1 = b2.q1)
    on (b2.d2 = b1.q2)
  on (t1.f1 = b1.d1)
  left join int4_tbl i4
  on (i8.q2 = i4.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 48,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 285,
                                },
                              },
                              "location": 291,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "d1",
                                      },
                                    },
                                  ],
                                  "location": 293,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "b1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i8b1",
                                            },
                                            "inh": true,
                                            "location": 106,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 80,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 80,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 83,
                                            "name": "d1",
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "location": 83,
                                                    "sval": {
                                                      "sval": "***",
                                                    },
                                                  },
                                                },
                                                "location": 88,
                                                "typeName": {
                                                  "location": 90,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "text",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "d2",
                                          },
                                        },
                                      ],
                                      "location": 264,
                                    },
                                  },
                                  "location": 270,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 272,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_LEFT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i8",
                                      },
                                      "inh": true,
                                      "location": 138,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i8",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 241,
                                        },
                                      },
                                      "location": 247,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 249,
                                        },
                                      },
                                    },
                                  },
                                  "rarg": {
                                    "RangeSubselect": {
                                      "alias": {
                                        "aliasname": "b2",
                                      },
                                      "subquery": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "i8b2",
                                                },
                                                "inh": true,
                                                "location": 198,
                                                "relname": "int8_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                            {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "i4b2",
                                                },
                                                "inh": true,
                                                "location": 213,
                                                "relname": "int4_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 174,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 174,
                                                  },
                                                },
                                              },
                                            },
                                            {
                                              "ResTarget": {
                                                "location": 177,
                                                "name": "d2",
                                                "val": {
                                                  "TypeCast": {
                                                    "arg": {
                                                      "A_Const": {
                                                        "isnull": true,
                                                        "location": 177,
                                                      },
                                                    },
                                                    "location": 181,
                                                    "typeName": {
                                                      "location": 183,
                                                      "names": [
                                                        {
                                                          "String": {
                                                            "sval": "pg_catalog",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "int4",
                                                          },
                                                        },
                                                      ],
                                                      "typemod": -1,
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 330,
                            },
                          },
                          "location": 336,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 338,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i4",
                          },
                          "inh": true,
                          "location": 312,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1608 1`] = `
[
  "select t1.* from
  text_tbl t1
  left join (select *, '***'::text as d1 from int8_tbl i8b1) b1
    left join int8_tbl i8
      left join (select *, null::int as d2 from int8_tbl i8b2, int4_tbl i4b2) b2
      on (i8.q1 = b2.q1)
    on (b2.d2 = b1.q2)
  on (t1.f1 = b1.d1)
  left join int4_tbl i4
  on (i8.q2 = i4.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 19,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 256,
                            },
                          },
                          "location": 262,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 264,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "b1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i8b1",
                                        },
                                        "inh": true,
                                        "location": 77,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 51,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 51,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 54,
                                        "name": "d1",
                                        "val": {
                                          "TypeCast": {
                                            "arg": {
                                              "A_Const": {
                                                "location": 54,
                                                "sval": {
                                                  "sval": "***",
                                                },
                                              },
                                            },
                                            "location": 59,
                                            "typeName": {
                                              "location": 61,
                                              "names": [
                                                {
                                                  "String": {
                                                    "sval": "text",
                                                  },
                                                },
                                              ],
                                              "typemod": -1,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "d2",
                                      },
                                    },
                                  ],
                                  "location": 235,
                                },
                              },
                              "location": 241,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 243,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i8",
                                  },
                                  "inh": true,
                                  "location": 109,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i8",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 212,
                                    },
                                  },
                                  "location": 218,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 220,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "b2",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i8b2",
                                            },
                                            "inh": true,
                                            "location": 169,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i4b2",
                                            },
                                            "inh": true,
                                            "location": 184,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 145,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 145,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 148,
                                            "name": "d2",
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "isnull": true,
                                                    "location": 148,
                                                  },
                                                },
                                                "location": 152,
                                                "typeName": {
                                                  "location": 154,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "pg_catalog",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "int4",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 301,
                        },
                      },
                      "location": 307,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i4",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 309,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 283,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1619 1`] = `
[
  "explain (verbose, costs off)
select t1.* from
  text_tbl t1
  left join (select *, '***'::text as d1 from int8_tbl i8b1) b1
    left join int8_tbl i8
      left join (select *, null::int as d2 from int8_tbl i8b2, int4_tbl i4b2
                 where q1 = f1) b2
      on (i8.q1 = b2.q1)
    on (b2.d2 = b1.q2)
  on (t1.f1 = b1.d1)
  left join int4_tbl i4
  on (i8.q2 = i4.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 48,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 316,
                                },
                              },
                              "location": 322,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "d1",
                                      },
                                    },
                                  ],
                                  "location": 324,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "b1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i8b1",
                                            },
                                            "inh": true,
                                            "location": 106,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 80,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 80,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 83,
                                            "name": "d1",
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "location": 83,
                                                    "sval": {
                                                      "sval": "***",
                                                    },
                                                  },
                                                },
                                                "location": 88,
                                                "typeName": {
                                                  "location": 90,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "text",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "d2",
                                          },
                                        },
                                      ],
                                      "location": 295,
                                    },
                                  },
                                  "location": 301,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 303,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_LEFT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i8",
                                      },
                                      "inh": true,
                                      "location": 138,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i8",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 272,
                                        },
                                      },
                                      "location": 278,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 280,
                                        },
                                      },
                                    },
                                  },
                                  "rarg": {
                                    "RangeSubselect": {
                                      "alias": {
                                        "aliasname": "b2",
                                      },
                                      "subquery": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "i8b2",
                                                },
                                                "inh": true,
                                                "location": 198,
                                                "relname": "int8_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                            {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "i4b2",
                                                },
                                                "inh": true,
                                                "location": 213,
                                                "relname": "int4_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 174,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 174,
                                                  },
                                                },
                                              },
                                            },
                                            {
                                              "ResTarget": {
                                                "location": 177,
                                                "name": "d2",
                                                "val": {
                                                  "TypeCast": {
                                                    "arg": {
                                                      "A_Const": {
                                                        "isnull": true,
                                                        "location": 177,
                                                      },
                                                    },
                                                    "location": 181,
                                                    "typeName": {
                                                      "location": 183,
                                                      "names": [
                                                        {
                                                          "String": {
                                                            "sval": "pg_catalog",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "int4",
                                                          },
                                                        },
                                                      ],
                                                      "typemod": -1,
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                          "whereClause": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 250,
                                                },
                                              },
                                              "location": 253,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 255,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 361,
                            },
                          },
                          "location": 367,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 369,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i4",
                          },
                          "inh": true,
                          "location": 343,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1632 1`] = `
[
  "select t1.* from
  text_tbl t1
  left join (select *, '***'::text as d1 from int8_tbl i8b1) b1
    left join int8_tbl i8
      left join (select *, null::int as d2 from int8_tbl i8b2, int4_tbl i4b2
                 where q1 = f1) b2
      on (i8.q1 = b2.q1)
    on (b2.d2 = b1.q2)
  on (t1.f1 = b1.d1)
  left join int4_tbl i4
  on (i8.q2 = i4.f1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 19,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 287,
                            },
                          },
                          "location": 293,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 295,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "b1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i8b1",
                                        },
                                        "inh": true,
                                        "location": 77,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 51,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 51,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 54,
                                        "name": "d1",
                                        "val": {
                                          "TypeCast": {
                                            "arg": {
                                              "A_Const": {
                                                "location": 54,
                                                "sval": {
                                                  "sval": "***",
                                                },
                                              },
                                            },
                                            "location": 59,
                                            "typeName": {
                                              "location": 61,
                                              "names": [
                                                {
                                                  "String": {
                                                    "sval": "text",
                                                  },
                                                },
                                              ],
                                              "typemod": -1,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "d2",
                                      },
                                    },
                                  ],
                                  "location": 266,
                                },
                              },
                              "location": 272,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 274,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i8",
                                  },
                                  "inh": true,
                                  "location": 109,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i8",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 243,
                                    },
                                  },
                                  "location": 249,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 251,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "b2",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i8b2",
                                            },
                                            "inh": true,
                                            "location": 169,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i4b2",
                                            },
                                            "inh": true,
                                            "location": 184,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 145,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "A_Star": {},
                                                  },
                                                ],
                                                "location": 145,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 148,
                                            "name": "d2",
                                            "val": {
                                              "TypeCast": {
                                                "arg": {
                                                  "A_Const": {
                                                    "isnull": true,
                                                    "location": 148,
                                                  },
                                                },
                                                "location": 152,
                                                "typeName": {
                                                  "location": 154,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "pg_catalog",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "int4",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 221,
                                            },
                                          },
                                          "location": 224,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "=",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 226,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 332,
                        },
                      },
                      "location": 338,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i4",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 340,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 314,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1644 1`] = `
[
  "explain (verbose, costs off)
select * from
  text_tbl t1
  inner join int8_tbl i8
  on i8.q2 = 456
  right join text_tbl t2
  on t1.f1 = 'doh!'
  left join int4_tbl i4
  on i8.q1 = i4.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_RIGHT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 45,
                                  "relname": "text_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i8",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 87,
                                    },
                                  },
                                  "location": 93,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 456,
                                      },
                                      "location": 95,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i8",
                                  },
                                  "inh": true,
                                  "location": 70,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                              "location": 135,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 137,
                                  "sval": {
                                    "sval": "doh!",
                                  },
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 112,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 173,
                            },
                          },
                          "location": 179,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 181,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i4",
                          },
                          "inh": true,
                          "location": 156,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1654 1`] = `
[
  "select * from
  text_tbl t1
  inner join int8_tbl i8
  on i8.q2 = 456
  right join text_tbl t2
  on t1.f1 = 'doh!'
  left join int4_tbl i4
  on i8.q1 = i4.f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 16,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i8",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 58,
                                },
                              },
                              "location": 64,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 456,
                                  },
                                  "location": 66,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i8",
                              },
                              "inh": true,
                              "location": 41,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                          "location": 106,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "location": 108,
                              "sval": {
                                "sval": "doh!",
                              },
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t2",
                          },
                          "inh": true,
                          "location": 83,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 144,
                        },
                      },
                      "location": 150,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i4",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 152,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 127,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1664 1`] = `
[
  "explain (costs off)
select nspname
from (select 1 as x) ss1
left join
( select n.nspname, c.relname
  from pg_class c left join pg_namespace n on n.oid = c.relnamespace
  where c.relkind = 'r'
) ss2 on false",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 48,
                                    "name": "x",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 48,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {},
                          "location": 202,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "c",
                                        },
                                        "inh": true,
                                        "location": 107,
                                        "relname": "pg_class",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "n",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "oid",
                                                },
                                              },
                                            ],
                                            "location": 146,
                                          },
                                        },
                                        "location": 152,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "relnamespace",
                                                },
                                              },
                                            ],
                                            "location": 154,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "n",
                                        },
                                        "inh": true,
                                        "location": 128,
                                        "relname": "pg_namespace",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 79,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "n",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "nspname",
                                            },
                                          },
                                        ],
                                        "location": 79,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 90,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "relname",
                                            },
                                          },
                                        ],
                                        "location": 90,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "relkind",
                                          },
                                        },
                                      ],
                                      "location": 177,
                                    },
                                  },
                                  "location": 187,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "location": 189,
                                      "sval": {
                                        "sval": "r",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "nspname",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1675 1`] = `
[
  "explain (costs off)
select 1 from
  int4_tbl i4
  left join int8_tbl i8 on i4.f1 is not null
  left join (select 1 as a) ss1 on null
  join int4_tbl i42 on ss1.a is null or i8.q1 <> i8.q2
  right join (select 2 as b) ss2
  on ss2.b < i4.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_LEFT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i4",
                                      },
                                      "inh": true,
                                      "location": 36,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "NullTest": {
                                      "arg": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i4",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 75,
                                        },
                                      },
                                      "location": 81,
                                      "nulltesttype": "IS_NOT_NULL",
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "i8",
                                      },
                                      "inh": true,
                                      "location": 60,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 128,
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 113,
                                            "name": "a",
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 113,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "NullTest": {
                                    "arg": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "ss1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 156,
                                      },
                                    },
                                    "location": 162,
                                    "nulltesttype": "IS_NULL",
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i8",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 173,
                                      },
                                    },
                                    "location": 179,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "<>",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i8",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 182,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "OR_EXPR",
                              "location": 170,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i42",
                              },
                              "inh": true,
                              "location": 140,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 226,
                            },
                          },
                          "location": 232,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 234,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 209,
                                    "name": "b",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 209,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1689 1`] = `
[
  "select * from
  text_tbl t1
  left join int8_tbl i8
  on i8.q2 = 123,
  lateral (select i8.q1, t2.f1 from text_tbl t2 limit 1) as ss
where t1.f1 = ss.f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "text_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                      "location": 63,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 123,
                          },
                          "location": 65,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i8",
                      },
                      "inh": true,
                      "location": 40,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "t2",
                            },
                            "inh": true,
                            "location": 106,
                            "relname": "text_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 124,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 88,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i8",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 88,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 95,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 95,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t1",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 139,
                  },
                },
                "location": 145,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 147,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1703 1`] = `
[
  "explain (verbose, costs off)
select * from
  text_tbl t1
  left join int8_tbl i8
  on i8.q2 = 123,
  lateral (select i8.q1, t2.f1 from text_tbl t2 limit 1) as ss1,
  lateral (select ss1.* from text_tbl t3 limit 1) as ss2
where t1.f1 = ss2.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 86,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 123,
                              },
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i8",
                          },
                          "inh": true,
                          "location": 69,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss1",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t2",
                                },
                                "inh": true,
                                "location": 135,
                                "relname": "text_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 153,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 117,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i8",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 117,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 124,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 124,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t3",
                                },
                                "inh": true,
                                "location": 193,
                                "relname": "text_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 211,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 182,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss1",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 182,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 227,
                      },
                    },
                    "location": 233,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ss2",
                            },
                          },
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 235,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1712 1`] = `
[
  "select * from
  text_tbl t1
  left join int8_tbl i8
  on i8.q2 = 123,
  lateral (select i8.q1, t2.f1 from text_tbl t2 limit 1) as ss1,
  lateral (select ss1.* from text_tbl t3 limit 1) as ss2
where t1.f1 = ss2.f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "text_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                      "location": 63,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 123,
                          },
                          "location": 65,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i8",
                      },
                      "inh": true,
                      "location": 40,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss1",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "t2",
                            },
                            "inh": true,
                            "location": 106,
                            "relname": "text_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 124,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 88,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i8",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 88,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 95,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "t2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 95,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss2",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "t3",
                            },
                            "inh": true,
                            "location": 164,
                            "relname": "text_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 182,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 153,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss1",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 153,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t1",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 198,
                  },
                },
                "location": 204,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss2",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 206,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1720 1`] = `
[
  "explain (verbose, costs off)
select 1 from
  text_tbl as tt1
  inner join text_tbl as tt2 on (tt1.f1 = 'foo')
  left join text_tbl as tt3 on (tt3.f1 = 'foo')
  left join text_tbl as tt4 on (tt3.f1 = tt4.f1),
  lateral (select tt4.f1 as c0 from text_tbl as tt5 limit 1) as ss1
where tt1.f1 = ss1.c0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "tt1",
                                  },
                                  "inh": true,
                                  "location": 45,
                                  "relname": "text_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "tt1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 94,
                                    },
                                  },
                                  "location": 101,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "location": 103,
                                      "sval": {
                                        "sval": "foo",
                                      },
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "tt2",
                                  },
                                  "inh": true,
                                  "location": 74,
                                  "relname": "text_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "tt3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 142,
                                },
                              },
                              "location": 149,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 151,
                                  "sval": {
                                    "sval": "foo",
                                  },
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "tt3",
                              },
                              "inh": true,
                              "location": 122,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 190,
                            },
                          },
                          "location": 197,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tt4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 199,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "tt4",
                          },
                          "inh": true,
                          "location": 170,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss1",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "tt5",
                                },
                                "inh": true,
                                "location": 244,
                                "relname": "text_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 266,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 226,
                                "name": "c0",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tt4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 226,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "tt1",
                            },
                          },
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                        ],
                        "location": 282,
                      },
                    },
                    "location": 289,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ss1",
                            },
                          },
                          {
                            "String": {
                              "sval": "c0",
                            },
                          },
                        ],
                        "location": 291,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1729 1`] = `
[
  "select 1 from
  text_tbl as tt1
  inner join text_tbl as tt2 on (tt1.f1 = 'foo')
  left join text_tbl as tt3 on (tt3.f1 = 'foo')
  left join text_tbl as tt4 on (tt3.f1 = tt4.f1),
  lateral (select tt4.f1 as c0 from text_tbl as tt5 limit 1) as ss1
where tt1.f1 = ss1.c0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "tt1",
                              },
                              "inh": true,
                              "location": 16,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "tt1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 65,
                                },
                              },
                              "location": 72,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "location": 74,
                                  "sval": {
                                    "sval": "foo",
                                  },
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "tt2",
                              },
                              "inh": true,
                              "location": 45,
                              "relname": "text_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tt3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                          "location": 120,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "location": 122,
                              "sval": {
                                "sval": "foo",
                              },
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "tt3",
                          },
                          "inh": true,
                          "location": 93,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt3",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 161,
                        },
                      },
                      "location": 168,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tt4",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 170,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "tt4",
                      },
                      "inh": true,
                      "location": 141,
                      "relname": "text_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss1",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "tt5",
                            },
                            "inh": true,
                            "location": 215,
                            "relname": "text_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 237,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 197,
                            "name": "c0",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "tt4",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 197,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "tt1",
                        },
                      },
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 253,
                  },
                },
                "location": 260,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss1",
                        },
                      },
                      {
                        "String": {
                          "sval": "c0",
                        },
                      },
                    ],
                    "location": 262,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1737 1`] = `
[
  "explain (verbose, costs off)
select 1 from
  int4_tbl as i4
  inner join
    ((select 42 as n from int4_tbl x1 left join int8_tbl x2 on f1 = q1) as ss1
     right join (select 1 as z) as ss2 on true)
  on false,
  lateral (select i4.f1, ss1.n from int8_tbl as i8 limit 1) as ss3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i4",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {},
                          "location": 205,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_RIGHT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "x1",
                                            },
                                            "inh": true,
                                            "location": 99,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 136,
                                              },
                                            },
                                            "location": 139,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 141,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "x2",
                                            },
                                            "inh": true,
                                            "location": 121,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 86,
                                        "name": "n",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 42,
                                            },
                                            "location": 86,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 194,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss2",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 176,
                                        "name": "z",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 176,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss3",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i8",
                                },
                                "inh": true,
                                "location": 248,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitCount": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 269,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 230,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 230,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 237,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "n",
                                        },
                                      },
                                    ],
                                    "location": 237,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1746 1`] = `
[
  "select 1 from
  int4_tbl as i4
  inner join
    ((select 42 as n from int4_tbl x1 left join int8_tbl x2 on f1 = q1) as ss1
     right join (select 1 as z) as ss2 on true)
  on false,
  lateral (select i4.f1, ss1.n from int8_tbl as i8 limit 1) as ss3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {},
                      "location": 176,
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "x1",
                                        },
                                        "inh": true,
                                        "location": 70,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 107,
                                          },
                                        },
                                        "location": 110,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 112,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "x2",
                                        },
                                        "inh": true,
                                        "location": 92,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 57,
                                    "name": "n",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 57,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 165,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 147,
                                    "name": "z",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 147,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss3",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i8",
                            },
                            "inh": true,
                            "location": 219,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 240,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 201,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i4",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 201,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 208,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "n",
                                    },
                                  },
                                ],
                                "location": 208,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1760 1`] = `
[
  "create temp table t (a int unique)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "t",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_UNIQUE",
                        "location": 27,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1762 1`] = `
[
  "explain (costs off)
select 1 from t t1
  join lateral (select t1.a from (select 1) foo offset 0) as s1 on true
  join
    (select 1 from t t2
       inner join (t t3
                   left join (t t4 left join t t5 on t4.a = 1)
                   on t3.a = t4.a)
       on false
     where t3.a = coalesce(t5.a,1)) as s2
  on true",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "t",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 106,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s1",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeSubselect": {
                                        "alias": {
                                          "aliasname": "foo",
                                        },
                                        "subquery": {
                                          "SelectStmt": {
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 80,
                                                  "val": {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 1,
                                                      },
                                                      "location": 80,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOffset": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 94,
                                    },
                                  },
                                  "limitOption": "LIMIT_OPTION_COUNT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 62,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 62,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 327,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s2",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 137,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Const": {
                                        "boolval": {},
                                        "location": 274,
                                      },
                                    },
                                    "rarg": {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 161,
                                            "relname": "t",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 251,
                                              },
                                            },
                                            "location": 256,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t4",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 258,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "JoinExpr": {
                                            "jointype": "JOIN_LEFT",
                                            "larg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t4",
                                                },
                                                "inh": true,
                                                "location": 196,
                                                "relname": "t",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "quals": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "t4",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "a",
                                                        },
                                                      },
                                                    ],
                                                    "location": 219,
                                                  },
                                                },
                                                "location": 224,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 226,
                                                  },
                                                },
                                              },
                                            },
                                            "rarg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t5",
                                                },
                                                "inh": true,
                                                "location": 211,
                                                "relname": "t",
                                                "relpersistence": "p",
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 130,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 130,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 291,
                                    },
                                  },
                                  "location": 296,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "CoalesceExpr": {
                                      "args": [
                                        {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t5",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 307,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 312,
                                          },
                                        },
                                      ],
                                      "location": 298,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1781 1`] = `
[
  "select ss2.* from
  int4_tbl i41
  left join int8_tbl i8
    join (select i42.f1 as c1, i43.f1 as c2, 42 as c3
          from int4_tbl i42, int4_tbl i43) ss1
    on i8.q1 = ss1.c2
  on i41.f1 = ss1.c1,
  lateral (select i41.*, i8.*, ss1.* from text_tbl limit 1) ss2
where ss1.c2 = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i41",
                      },
                      "inh": true,
                      "location": 20,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i41",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 185,
                        },
                      },
                      "location": 192,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss1",
                              },
                            },
                            {
                              "String": {
                                "sval": "c1",
                              },
                            },
                          ],
                          "location": 194,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i8",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 165,
                            },
                          },
                          "location": 171,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c2",
                                  },
                                },
                              ],
                              "location": 173,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i42",
                                    },
                                    "inh": true,
                                    "location": 126,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i43",
                                    },
                                    "inh": true,
                                    "location": 140,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 74,
                                    "name": "c1",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i42",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 74,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 88,
                                    "name": "c2",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i43",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 88,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 102,
                                    "name": "c3",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 102,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss2",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 244,
                            "relname": "text_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitCount": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 259,
                        },
                      },
                      "limitOption": "LIMIT_OPTION_COUNT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 220,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i41",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 220,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 227,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i8",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 227,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 233,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss1",
                                    },
                                  },
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 233,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss2",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss1",
                        },
                      },
                      {
                        "String": {
                          "sval": "c2",
                        },
                      },
                    ],
                    "location": 272,
                  },
                },
                "location": 279,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 281,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1806 1`] = `
[
  "select * from
  (select 1 as id) as xx
  left join
    (tenk1 as a1 full join (select 1 as id) as yy on (a1.unique1 = yy.id))
  on (xx.id = coalesce(yy.id))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "xx",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 24,
                                "name": "id",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 24,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "xx",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 132,
                        },
                      },
                      "location": 138,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "CoalesceExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "yy",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id",
                                    },
                                  },
                                ],
                                "location": 149,
                              },
                            },
                          ],
                          "location": 140,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a1",
                          },
                          "inh": true,
                          "location": 56,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 105,
                            },
                          },
                          "location": 116,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "yy",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 118,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "yy",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 86,
                                    "name": "id",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 86,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1823 1`] = `
[
  "  select * from int4_tbl a left join tenk1 b on f1 = unique2 where f1 = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                      "location": 51,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 53,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 67,
                  },
                },
                "location": 70,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 72,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1825 1`] = `
[
  "explain (costs off)
  select * from tenk1 a full join tenk1 b using(unique2) where unique2 = 42",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 36,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 54,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "usingClause": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique2",
                            },
                          },
                        ],
                        "location": 83,
                      },
                    },
                    "location": 91,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 42,
                        },
                        "location": 93,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1837 1`] = `
[
  "explain (verbose, costs off)
  select a.q2, b.q1
    from int8_tbl a left join int8_tbl b on a.q2 = coalesce(b.q1, 1)
    where coalesce(b.q1, 1) > 0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 58,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 93,
                            },
                          },
                          "location": 98,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "CoalesceExpr": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 109,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 115,
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 79,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 44,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 44,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "CoalesceExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 137,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 143,
                            },
                          },
                        ],
                        "location": 128,
                      },
                    },
                    "location": 146,
                    "name": [
                      {
                        "String": {
                          "sval": ">",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {},
                        "location": 148,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1853 1`] = `
[
  "select a.unique1, b.unique2
  from onek a left join onek b on a.unique1 = b.unique2
  where b.unique2 = any (select q1 from int8_tbl c where c.q1 < b.unique1)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 52,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "SubLink": {
                "location": 102,
                "operName": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "subLinkType": "ANY_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 124,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 116,
                          "val": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 116,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                              {
                                "String": {
                                  "sval": "q1",
                                },
                              },
                            ],
                            "location": 141,
                          },
                        },
                        "location": 146,
                        "name": [
                          {
                            "String": {
                              "sval": "<",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "unique1",
                                },
                              },
                            ],
                            "location": 148,
                          },
                        },
                      },
                    },
                  },
                },
                "testexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "unique2",
                        },
                      },
                    ],
                    "location": 92,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1866 1`] = `
[
  "select a.unique1, b.unique2
  from onek a full join onek b on a.unique1 = b.unique2
  where a.unique1 = 42",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 52,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "unique1",
                        },
                      },
                    ],
                    "location": 92,
                  },
                },
                "location": 102,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 42,
                    },
                    "location": 104,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1874 1`] = `
[
  "explain (costs off)
select a.unique1, b.unique2
  from onek a full join onek b on a.unique1 = b.unique2
  where b.unique2 = 43",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 82,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 72,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                          {
                            "String": {
                              "sval": "unique2",
                            },
                          },
                        ],
                        "location": 112,
                      },
                    },
                    "location": 122,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 43,
                        },
                        "location": 124,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1879 1`] = `
[
  "select a.unique1, b.unique2
  from onek a full join onek b on a.unique1 = b.unique2
  where b.unique2 = 43",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 52,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "unique2",
                        },
                      },
                    ],
                    "location": 92,
                  },
                },
                "location": 102,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 43,
                    },
                    "location": 104,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1883 1`] = `
[
  "explain (costs off)
select a.unique1, b.unique2
  from onek a full join onek b on a.unique1 = b.unique2
  where a.unique1 = 42 and b.unique2 = 42",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 55,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 82,
                            },
                          },
                          "location": 92,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 94,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 72,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 112,
                            },
                          },
                          "location": 122,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 42,
                              },
                              "location": 124,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 131,
                            },
                          },
                          "location": 141,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 42,
                              },
                              "location": 143,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 127,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1888 1`] = `
[
  "select a.unique1, b.unique2
  from onek a full join onek b on a.unique1 = b.unique2
  where a.unique1 = 42 and b.unique2 = 42",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 74,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 52,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 92,
                        },
                      },
                      "location": 102,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 42,
                          },
                          "location": 104,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 111,
                        },
                      },
                      "location": 121,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 42,
                          },
                          "location": 123,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 107,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1897 1`] = `
[
  "select * from
  (select * from int8_tbl i81 join (values(123,2)) v(v1,v2) on q2=v1) ss1
full join
  (select * from (values(456,2)) w(v1,v2) join int8_tbl i82 on q2=v1) ss2
on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_FULL",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i81",
                                    },
                                    "inh": true,
                                    "location": 31,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 77,
                                      },
                                    },
                                    "location": 79,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "v1",
                                            },
                                          },
                                        ],
                                        "location": 80,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "v",
                                      "colnames": [
                                        {
                                          "String": {
                                            "sval": "v1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "v2",
                                          },
                                        },
                                      ],
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "valuesLists": [
                                          {
                                            "List": {
                                              "items": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 123,
                                                    },
                                                    "location": 57,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 2,
                                                    },
                                                    "location": 61,
                                                  },
                                                },
                                              ],
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 24,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 24,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 175,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "w",
                                      "colnames": [
                                        {
                                          "String": {
                                            "sval": "v1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "v2",
                                          },
                                        },
                                      ],
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "valuesLists": [
                                          {
                                            "List": {
                                              "items": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 456,
                                                    },
                                                    "location": 123,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 2,
                                                    },
                                                    "location": 127,
                                                  },
                                                },
                                              ],
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 161,
                                      },
                                    },
                                    "location": 163,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "v1",
                                            },
                                          },
                                        ],
                                        "location": 164,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "i82",
                                    },
                                    "inh": true,
                                    "location": 145,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 108,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 108,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1915 1`] = `
[
  "CREATE TEMP TABLE a (id int PRIMARY KEY, b_id int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "a",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 28,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b_id",
                  "is_local": true,
                  "location": 41,
                  "typeName": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1925 1`] = `
[
  "explain (costs off) SELECT a.* FROM a LEFT JOIN b ON a.b_id = b.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "a",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b_id",
                                  },
                                },
                              ],
                              "location": 53,
                            },
                          },
                          "location": 60,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 48,
                          "relname": "b",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1928 1`] = `
[
  "  SELECT a.* FROM a LEFT JOIN (b left join c on b.c_id = c.id)
  ON (a.b_id = b.id)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 18,
                      "relname": "a",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "b_id",
                              },
                            },
                          ],
                          "location": 69,
                        },
                      },
                      "location": 76,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 78,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 31,
                          "relname": "b",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c_id",
                                  },
                                },
                              ],
                              "location": 48,
                            },
                          },
                          "location": 55,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 57,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "c",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1932 1`] = `
[
  "explain (costs off)
select id from a where id in (
	select b.id from b left join c on b.id = c.id
)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 35,
                      "relname": "a",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "SubLink": {
                    "location": 46,
                    "subLinkType": "ANY_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 69,
                                  "relname": "b",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "id",
                                          },
                                        },
                                      ],
                                      "location": 86,
                                    },
                                  },
                                  "location": 91,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "c",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "id",
                                          },
                                        },
                                      ],
                                      "location": 93,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 81,
                                  "relname": "c",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 59,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 59,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "testexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "id",
                            },
                          },
                        ],
                        "location": 43,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1938 1`] = `
[
  "explain (costs off)
select a1.id from
  (a a1 left join a a2 on true)
  left join
  (a a3 left join a a4 on a3.id = a4.id)
  on a2.id = a3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a1",
                              },
                              "inh": true,
                              "location": 41,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 64,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a2",
                              },
                              "inh": true,
                              "location": 56,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 128,
                            },
                          },
                          "location": 134,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 136,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a3",
                              },
                              "inh": true,
                              "location": 85,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 108,
                                },
                              },
                              "location": 114,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a4",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 116,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a4",
                              },
                              "inh": true,
                              "location": 100,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a1",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1945 1`] = `
[
  "explain (costs off)
select a1.id from
  (a a1 left join a a2 on a1.id = a2.id)
  left join
  (a a3 left join a a4 on a3.id = a4.id)
  on a2.id = a3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a1",
                              },
                              "inh": true,
                              "location": 41,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 64,
                                },
                              },
                              "location": 70,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 72,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a2",
                              },
                              "inh": true,
                              "location": 56,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 137,
                            },
                          },
                          "location": 143,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a3",
                              },
                              "inh": true,
                              "location": 94,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a3",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 117,
                                },
                              },
                              "location": 123,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a4",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 125,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "a4",
                              },
                              "inh": true,
                              "location": 109,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a1",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1952 1`] = `
[
  "explain (costs off)
select 1 from a t1
    left join a t2 on true
   inner join a t3 on true
    left join a t4 on t2.id = t4.id and t2.id = t3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t1",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "a",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 61,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 53,
                                  "relname": "a",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 88,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 80,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 115,
                                  },
                                },
                                "location": 121,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t4",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 123,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 133,
                                  },
                                },
                                "location": 139,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 141,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 129,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 107,
                          "relname": "a",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1959 1`] = `
[
  "explain (costs off)
select ss1.f1
from int4_tbl as t1
  left join (int4_tbl as t2
             right join int4_tbl as t3 on null
             left join (int4_tbl as t4
                        right join int8_tbl as t5 on null)
               on t2.f1 = t4.f1
             left join ((select null as f1 from int4_tbl as t6) as ss1
                        inner join int8_tbl as t7 on null)
               on t5.q1 = t7.q2)
    on false",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {},
                          "location": 429,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_RIGHT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t2",
                                      },
                                      "inh": true,
                                      "location": 67,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Const": {
                                      "isnull": true,
                                      "location": 124,
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t3",
                                      },
                                      "inh": true,
                                      "location": 106,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 245,
                                    },
                                  },
                                  "location": 251,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t4",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 253,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_RIGHT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t4",
                                      },
                                      "inh": true,
                                      "location": 153,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Const": {
                                      "isnull": true,
                                      "location": 221,
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t5",
                                      },
                                      "inh": true,
                                      "location": 203,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t5",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 407,
                                },
                              },
                              "location": 413,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t7",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 415,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t6",
                                            },
                                            "inh": true,
                                            "location": 307,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 291,
                                            "name": "f1",
                                            "val": {
                                              "A_Const": {
                                                "isnull": true,
                                                "location": 291,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 383,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t7",
                                  },
                                  "inh": true,
                                  "location": 365,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss1",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1973 1`] = `
[
  "explain (costs off)
select ss1.f1
from int4_tbl as t1
  left join (int4_tbl as t2
             right join int4_tbl as t3 on null
             left join (int4_tbl as t4
                        right join int8_tbl as t5 on null)
               on t2.f1 = t4.f1
             left join ((select f1 from int4_tbl as t6) as ss1
                        inner join int8_tbl as t7 on null)
               on t5.q1 = t7.q2)
    on false",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {},
                          "location": 421,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_RIGHT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t2",
                                      },
                                      "inh": true,
                                      "location": 67,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Const": {
                                      "isnull": true,
                                      "location": 124,
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t3",
                                      },
                                      "inh": true,
                                      "location": 106,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 245,
                                    },
                                  },
                                  "location": 251,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t4",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 253,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "JoinExpr": {
                                  "jointype": "JOIN_RIGHT",
                                  "larg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t4",
                                      },
                                      "inh": true,
                                      "location": 153,
                                      "relname": "int4_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                  "quals": {
                                    "A_Const": {
                                      "isnull": true,
                                      "location": 221,
                                    },
                                  },
                                  "rarg": {
                                    "RangeVar": {
                                      "alias": {
                                        "aliasname": "t5",
                                      },
                                      "inh": true,
                                      "location": 203,
                                      "relname": "int8_tbl",
                                      "relpersistence": "p",
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t5",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 399,
                                },
                              },
                              "location": 405,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t7",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 407,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t6",
                                            },
                                            "inh": true,
                                            "location": 299,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 291,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 291,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 375,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t7",
                                  },
                                  "inh": true,
                                  "location": 357,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss1",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1987 1`] = `
[
  "explain (costs off)
select ss1.x
from (select f1/2 as x from int4_tbl i4 left join a on a.id = i4.f1) ss1
     right join int8_tbl i8 on true
where current_user is not null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss1",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i4",
                                        },
                                        "inh": true,
                                        "location": 61,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "id",
                                                },
                                              },
                                            ],
                                            "location": 88,
                                          },
                                        },
                                        "location": 93,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i4",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 95,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 83,
                                        "relname": "a",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 46,
                                    "name": "x",
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 46,
                                          },
                                        },
                                        "location": 48,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "/",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 49,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 137,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i8",
                          },
                          "inh": true,
                          "location": 122,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss1",
                              },
                            },
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "SQLValueFunction": {
                        "location": 148,
                        "op": "SVFOP_CURRENT_USER",
                        "typmod": -1,
                      },
                    },
                    "location": 161,
                    "nulltesttype": "IS_NOT_NULL",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 1991 1`] = `
[
  "  -- this is to add a Result node

-- and further discussion of bug #17781
explain (costs off)
select *
from int8_tbl t1
  left join (int8_tbl t2 left join onek t3 on t2.q1 > t3.unique1)
    on t1.q2 = t2.q2
  left join onek t4
    on t2.q2 < t3.unique2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 84,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 109,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 194,
                                },
                              },
                              "location": 200,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 202,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 134,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t2",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 167,
                                    },
                                  },
                                  "location": 173,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": ">",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "t3",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 175,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t3",
                                  },
                                  "inh": true,
                                  "location": 156,
                                  "relname": "onek",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 235,
                            },
                          },
                          "location": 241,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 243,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 220,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 102,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 102,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2005 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1 left join
  (int8_tbl t2 inner join int8_tbl t3 on false
   left join int8_tbl t4 on t2.q2 = t4.q2)
on t1.q1 = t2.q1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 149,
                            },
                          },
                          "location": 155,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 157,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 59,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Const": {
                                  "boolval": {},
                                  "location": 97,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t3",
                                  },
                                  "inh": true,
                                  "location": 82,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 131,
                                },
                              },
                              "location": 137,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t4",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 139,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t4",
                              },
                              "inh": true,
                              "location": 116,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2012 1`] = `
[
  "explain (costs off)
select * from int8_tbl t1 left join
  (int8_tbl t2 inner join int8_tbl t3 on (t2.q1-t3.q2) = 0 and (t2.q1-t3.q2) = 1
   left join int8_tbl t4 on t2.q2 = t4.q2)
on t1.q1 = t2.q1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 183,
                            },
                          },
                          "location": 189,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 191,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_INNER",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t2",
                                  },
                                  "inh": true,
                                  "location": 59,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 98,
                                              },
                                            },
                                            "location": 103,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "-",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q2",
                                                    },
                                                  },
                                                ],
                                                "location": 104,
                                              },
                                            },
                                          },
                                        },
                                        "location": 111,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 113,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 120,
                                              },
                                            },
                                            "location": 125,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "-",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q2",
                                                    },
                                                  },
                                                ],
                                                "location": 126,
                                              },
                                            },
                                          },
                                        },
                                        "location": 133,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 135,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 115,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "t3",
                                  },
                                  "inh": true,
                                  "location": 82,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 165,
                                },
                              },
                              "location": 171,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t4",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 173,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t4",
                              },
                              "inh": true,
                              "location": 150,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2019 1`] = `
[
  "explain (costs off)
select exists(
  select * from int8_tbl t1 left join
    (int8_tbl t2 inner join int8_tbl t3 on x0.f1 = 1
     left join int8_tbl t4 on t2.q2 = t4.q2)
  on t1.q1 = t2.q1
) from int4_tbl x0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x0",
                      },
                      "inh": true,
                      "location": 197,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "SubLink": {
                          "location": 27,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t1",
                                        },
                                        "inh": true,
                                        "location": 51,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 176,
                                          },
                                        },
                                        "location": 182,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 184,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "JoinExpr": {
                                            "jointype": "JOIN_INNER",
                                            "larg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t2",
                                                },
                                                "inh": true,
                                                "location": 78,
                                                "relname": "int8_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                            "quals": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "x0",
                                                        },
                                                      },
                                                      {
                                                        "String": {
                                                          "sval": "f1",
                                                        },
                                                      },
                                                    ],
                                                    "location": 116,
                                                  },
                                                },
                                                "location": 122,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "=",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 124,
                                                  },
                                                },
                                              },
                                            },
                                            "rarg": {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t3",
                                                },
                                                "inh": true,
                                                "location": 101,
                                                "relname": "int8_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q2",
                                                    },
                                                  },
                                                ],
                                                "location": 156,
                                              },
                                            },
                                            "location": 162,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t4",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "q2",
                                                    },
                                                  },
                                                ],
                                                "location": 164,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t4",
                                            },
                                            "inh": true,
                                            "location": 141,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 44,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 44,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2029 1`] = `
[
  "explain (costs off)
select d.* from d left join (select * from b group by b.id, b.c_id) s
  on d.a = s.id and d.b = s.c_id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "d",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 95,
                                  },
                                },
                                "location": 99,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 101,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 110,
                                  },
                                },
                                "location": 114,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c_id",
                                        },
                                      },
                                    ],
                                    "location": 116,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 106,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 63,
                                    "relname": "b",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "groupClause": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c_id",
                                        },
                                      },
                                    ],
                                    "location": 80,
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 56,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 56,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2034 1`] = `
[
  "explain (costs off)
select d.* from d left join (select distinct * from b) s
  on d.a = s.id and d.b = s.c_id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "d",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 82,
                                  },
                                },
                                "location": 86,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 88,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "d",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 97,
                                  },
                                },
                                "location": 101,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c_id",
                                        },
                                      },
                                    ],
                                    "location": 103,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 93,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "distinctClause": [
                                {},
                              ],
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 72,
                                    "relname": "b",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 65,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 65,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2042 1`] = `
[
  "explain (costs off)
select d.* from d left join (select * from b group by b.id, b.c_id) s
  on d.a = s.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "d",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "d",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                          "location": 99,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 101,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 63,
                                    "relname": "b",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "groupClause": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "c_id",
                                        },
                                      },
                                    ],
                                    "location": 80,
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 56,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 56,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2047 1`] = `
[
  "explain (costs off)
select d.* from d left join (select distinct * from b) s
  on d.a = s.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "d",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "d",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 82,
                            },
                          },
                          "location": 86,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "distinctClause": [
                                {},
                              ],
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 72,
                                    "relname": "b",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 65,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 65,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2052 1`] = `
[
  "explain (costs off)
select 1 from a t1
  left join (a t2 left join a t3 on t2.id = 1) on t2.id = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "a",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 89,
                            },
                          },
                          "location": 95,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 97,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "inh": true,
                              "location": 52,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id",
                                      },
                                    },
                                  ],
                                  "location": 75,
                                },
                              },
                              "location": 81,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 83,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t3",
                              },
                              "inh": true,
                              "location": 67,
                              "relname": "a",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2058 1`] = `
[
  "explain (costs off)
select d.* from d left join (select id from a union select id from b) s
  on d.a = s.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "d",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "d",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 97,
                            },
                          },
                          "location": 101,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "s",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 103,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "larg": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 64,
                                      "relname": "a",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 56,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "id",
                                              },
                                            },
                                          ],
                                          "location": 56,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_UNION",
                              "rarg": {
                                "fromClause": [
                                  {
                                    "RangeVar": {
                                      "inh": true,
                                      "location": 87,
                                      "relname": "b",
                                      "relpersistence": "p",
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 79,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "id",
                                              },
                                            },
                                          ],
                                          "location": 79,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2063 1`] = `
[
  "explain (costs off)
select i8.* from int8_tbl i8 left join (select f1 from int4_tbl group by f1) i4
  on i8.q1 = i4.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i8",
                          },
                          "inh": true,
                          "location": 37,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i8",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 105,
                            },
                          },
                          "location": 111,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "i4",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 113,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "i4",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 75,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "groupClause": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 93,
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 67,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 67,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2068 1`] = `
[
  "explain (costs off)
select 1 from (select a.id FROM a left join b on a.b_id = b.id) q,
			  lateral generate_series(1, q.id) gs(i) where q.id = gs.i",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "q",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 52,
                                    "relname": "a",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b_id",
                                            },
                                          },
                                        ],
                                        "location": 69,
                                      },
                                    },
                                    "location": 76,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 78,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 64,
                                    "relname": "b",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 42,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 42,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "gs",
                        "colnames": [
                          {
                            "String": {
                              "sval": "i",
                            },
                          },
                        ],
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 116,
                                      },
                                    },
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 119,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 100,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                      "lateral": true,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "q",
                            },
                          },
                          {
                            "String": {
                              "sval": "id",
                            },
                          },
                        ],
                        "location": 137,
                      },
                    },
                    "location": 142,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "gs",
                            },
                          },
                          {
                            "String": {
                              "sval": "i",
                            },
                          },
                        ],
                        "location": 144,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2073 1`] = `
[
  "explain (costs off)
select c.id, ss.a from c
  left join (select d.a from onerow, d left join b on d.a = b.id) ss
  on c.id = ss.a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "c",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 119,
                            },
                          },
                          "location": 124,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 126,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 74,
                                    "relname": "onerow",
                                    "relpersistence": "p",
                                  },
                                },
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 82,
                                        "relname": "d",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "d",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 99,
                                          },
                                        },
                                        "location": 103,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "id",
                                                },
                                              },
                                            ],
                                            "location": 105,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 94,
                                        "relname": "b",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 65,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "d",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 65,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2078 1`] = `
[
  "CREATE TEMP TABLE parted_b (id int PRIMARY KEY) partition by range(id)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 48,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 67,
                    "name": "id",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "parted_b",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 35,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2082 1`] = `
[
  "explain (costs off)
select a.* from a left join parted_b pb on a.b_id = pb.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 36,
                          "relname": "a",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b_id",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 70,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "pb",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "pb",
                          },
                          "inh": true,
                          "location": 48,
                          "relname": "parted_b",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2087 1`] = `
[
  "create temp table parent (k int primary key, pd int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "parent",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "k",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 32,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "pd",
                  "is_local": true,
                  "location": 45,
                  "typeName": {
                    "location": 48,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2093 1`] = `
[
  "select p.* from parent p left join child c on (p.k = c.k)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "parent",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                      "location": 51,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 53,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "c",
                      },
                      "inh": true,
                      "location": 35,
                      "relname": "child",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2098 1`] = `
[
  "select p.*, linked from parent p
  left join (select c.*, true as linked from child c) as ss
  on (p.k = ss.k)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 24,
                      "relname": "parent",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 99,
                        },
                      },
                      "location": 103,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "c",
                                },
                                "inh": true,
                                "location": 78,
                                "relname": "child",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "c",
                                        },
                                      },
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 58,
                                "name": "linked",
                                "val": {
                                  "A_Const": {
                                    "boolval": {
                                      "boolval": true,
                                    },
                                    "location": 58,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "linked",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2107 1`] = `
[
  "select p.* from
  parent p left join child c on (p.k = c.k)
  where p.k = 1 and p.k = 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 18,
                      "relname": "parent",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 49,
                        },
                      },
                      "location": 53,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 55,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "c",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "child",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 68,
                        },
                      },
                      "location": 72,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 74,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 80,
                        },
                      },
                      "location": 84,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 86,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 76,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2115 1`] = `
[
  "select p.* from
  (parent p left join child c on (p.k = c.k)) join parent x on p.k = x.k
  where p.k = 1 and p.k = 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "p",
                          },
                          "inh": true,
                          "location": 19,
                          "relname": "parent",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "p",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "k",
                                  },
                                },
                              ],
                              "location": 50,
                            },
                          },
                          "location": 54,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "k",
                                  },
                                },
                              ],
                              "location": 56,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 38,
                          "relname": "child",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 79,
                        },
                      },
                      "location": 83,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 85,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 67,
                      "relname": "parent",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 97,
                        },
                      },
                      "location": 101,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 103,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "p",
                              },
                            },
                            {
                              "String": {
                                "sval": "k",
                              },
                            },
                          ],
                          "location": 109,
                        },
                      },
                      "location": 113,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 2,
                          },
                          "location": 115,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 105,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2126 1`] = `
[
  "CREATE TEMP TABLE a (id int PRIMARY KEY)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "a",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 28,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 24,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2131 1`] = `
[
  "SELECT * FROM b LEFT JOIN a ON (b.a_id = a.id) WHERE (a.id IS NULL OR a.id > 0)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "b",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "a_id",
                              },
                            },
                          ],
                          "location": 32,
                        },
                      },
                      "location": 39,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 41,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 26,
                      "relname": "a",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 54,
                        },
                      },
                      "location": 59,
                      "nulltesttype": "IS_NULL",
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "id",
                              },
                            },
                          ],
                          "location": 70,
                        },
                      },
                      "location": 75,
                      "name": [
                        {
                          "String": {
                            "sval": ">",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 77,
                        },
                      },
                    },
                  },
                ],
                "boolop": "OR_EXPR",
                "location": 67,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2139 1`] = `
[
  "create temp table innertab (id int8 primary key, dat1 int8)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "innertab",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 36,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "dat1",
                  "is_local": true,
                  "location": 49,
                  "typeName": {
                    "location": 54,
                    "names": [
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2142 1`] = `
[
  "SELECT * FROM
    (SELECT 1 AS x) ss1
  LEFT JOIN
    (SELECT q1, q2, COALESCE(dat1, q1) AS y
     FROM int8_tbl LEFT JOIN innertab ON q2 = id) ss2
  ON true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 26,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 26,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 153,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss2",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 104,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 135,
                                      },
                                    },
                                    "location": 138,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 140,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 123,
                                    "relname": "innertab",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 62,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 66,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q2",
                                        },
                                      },
                                    ],
                                    "location": 66,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 70,
                                "name": "y",
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "dat1",
                                              },
                                            },
                                          ],
                                          "location": 79,
                                        },
                                      },
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 85,
                                        },
                                      },
                                    ],
                                    "location": 70,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2150 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT q2 FROM
  (SELECT *
   FROM int8_tbl LEFT JOIN innertab ON q2 = id) ss
 WHERE COALESCE(dat1, 0) = q1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 55,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 86,
                                      },
                                    },
                                    "location": 89,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 91,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 74,
                                    "relname": "innertab",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 45,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 45,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "CoalesceExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "dat1",
                                  },
                                },
                              ],
                              "location": 114,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {},
                              "location": 120,
                            },
                          },
                        ],
                        "location": 105,
                      },
                    },
                    "location": 123,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "q1",
                            },
                          },
                        ],
                        "location": 125,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2157 1`] = `
[
  "EXPLAIN (VERBOSE, COSTS OFF)
SELECT q2 FROM
  (SELECT q2, 'constant'::text AS x
   FROM int8_tbl LEFT JOIN innertab ON q2 = id) ss
  RIGHT JOIN int4_tbl ON NULL
 WHERE x >= x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 88,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "q2",
                                                },
                                              },
                                            ],
                                            "location": 119,
                                          },
                                        },
                                        "location": 122,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "id",
                                                },
                                              },
                                            ],
                                            "location": 124,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 107,
                                        "relname": "innertab",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 54,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 54,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 58,
                                    "name": "x",
                                    "val": {
                                      "TypeCast": {
                                        "arg": {
                                          "A_Const": {
                                            "location": 58,
                                            "sval": {
                                              "sval": "constant",
                                            },
                                          },
                                        },
                                        "location": 68,
                                        "typeName": {
                                          "location": 70,
                                          "names": [
                                            {
                                              "String": {
                                                "sval": "text",
                                              },
                                            },
                                          ],
                                          "typemod": -1,
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "isnull": true,
                          "location": 156,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 144,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 168,
                      },
                    },
                    "location": 170,
                    "name": [
                      {
                        "String": {
                          "sval": ">=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 173,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2165 1`] = `
[
  "EXPLAIN (COSTS OFF)
SELECT f1, x
FROM int4_tbl
     JOIN ((SELECT 42 AS x FROM int8_tbl LEFT JOIN innertab ON q1 = id) AS ss1
           RIGHT JOIN tenk1 ON NULL)
        ON tenk1.unique1 = ss1.x OR tenk1.unique2 = ss1.x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 38,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tenk1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 174,
                                  },
                                },
                                "location": 188,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                    ],
                                    "location": 190,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tenk1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 199,
                                  },
                                },
                                "location": 213,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                    ],
                                    "location": 215,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "OR_EXPR",
                          "location": 196,
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_RIGHT",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss1",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 79,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 110,
                                              },
                                            },
                                            "location": 113,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "id",
                                                    },
                                                  },
                                                ],
                                                "location": 115,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "inh": true,
                                            "location": 98,
                                            "relname": "innertab",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 66,
                                        "name": "x",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 42,
                                            },
                                            "location": 66,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "isnull": true,
                              "location": 157,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "inh": true,
                              "location": 148,
                              "relname": "tenk1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2177 1`] = `
[
  "create temp table uniquetbl (f1 text unique)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "uniquetbl",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "f1",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_UNIQUE",
                        "location": 37,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2179 1`] = `
[
  "explain (costs off)
select t1.* from
  uniquetbl as t1
  left join (select *, '***'::text as d1 from uniquetbl) t2
  on t1.f1 = t2.f1
  left join uniquetbl t3
  on t2.d1 = t3.f1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 39,
                              "relname": "uniquetbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 120,
                                },
                              },
                              "location": 126,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 128,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "t2",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 101,
                                        "relname": "uniquetbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 75,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "A_Star": {},
                                              },
                                            ],
                                            "location": 75,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 78,
                                        "name": "d1",
                                        "val": {
                                          "TypeCast": {
                                            "arg": {
                                              "A_Const": {
                                                "location": 78,
                                                "sval": {
                                                  "sval": "***",
                                                },
                                              },
                                            },
                                            "location": 83,
                                            "typeName": {
                                              "location": 85,
                                              "names": [
                                                {
                                                  "String": {
                                                    "sval": "text",
                                                  },
                                                },
                                              ],
                                              "typemod": -1,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "d1",
                                  },
                                },
                              ],
                              "location": 164,
                            },
                          },
                          "location": 170,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 172,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t3",
                          },
                          "inh": true,
                          "location": 146,
                          "relname": "uniquetbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2187 1`] = `
[
  "explain (costs off)
select t0.*
from
 text_tbl t0
 left join
   (select case t1.ten when 0 then 'doh!'::text else null::text end as case1,
           t1.stringu2
     from tenk1 t1
     join int4_tbl i4 ON i4.f1 = t1.unique2
     left join uniquetbl u1 ON u1.f1 = t1.string4) ss
  on t0.f1 = ss.case1
where ss.stringu2 !~* ss.case1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t0",
                          },
                          "inh": true,
                          "location": 38,
                          "relname": "text_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t0",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 284,
                            },
                          },
                          "location": 290,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "case1",
                                  },
                                },
                              ],
                              "location": 292,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "JoinExpr": {
                                        "jointype": "JOIN_INNER",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t1",
                                            },
                                            "inh": true,
                                            "location": 172,
                                            "relname": "tenk1",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "i4",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 206,
                                              },
                                            },
                                            "location": 212,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t1",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "unique2",
                                                    },
                                                  },
                                                ],
                                                "location": 214,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "i4",
                                            },
                                            "inh": true,
                                            "location": 191,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "u1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 256,
                                          },
                                        },
                                        "location": 262,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "string4",
                                                },
                                              },
                                            ],
                                            "location": 264,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "u1",
                                        },
                                        "inh": true,
                                        "location": 240,
                                        "relname": "uniquetbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 72,
                                    "name": "case1",
                                    "val": {
                                      "CaseExpr": {
                                        "arg": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "ten",
                                                },
                                              },
                                            ],
                                            "location": 77,
                                          },
                                        },
                                        "args": [
                                          {
                                            "CaseWhen": {
                                              "expr": {
                                                "A_Const": {
                                                  "ival": {},
                                                  "location": 89,
                                                },
                                              },
                                              "location": 84,
                                              "result": {
                                                "TypeCast": {
                                                  "arg": {
                                                    "A_Const": {
                                                      "location": 96,
                                                      "sval": {
                                                        "sval": "doh!",
                                                      },
                                                    },
                                                  },
                                                  "location": 102,
                                                  "typeName": {
                                                    "location": 104,
                                                    "names": [
                                                      {
                                                        "String": {
                                                          "sval": "text",
                                                        },
                                                      },
                                                    ],
                                                    "typemod": -1,
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "defresult": {
                                          "TypeCast": {
                                            "arg": {
                                              "A_Const": {
                                                "isnull": true,
                                                "location": 114,
                                              },
                                            },
                                            "location": 118,
                                            "typeName": {
                                              "location": 120,
                                              "names": [
                                                {
                                                  "String": {
                                                    "sval": "text",
                                                  },
                                                },
                                              ],
                                              "typemod": -1,
                                            },
                                          },
                                        },
                                        "location": 72,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 150,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "stringu2",
                                            },
                                          },
                                        ],
                                        "location": 150,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t0",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ss",
                            },
                          },
                          {
                            "String": {
                              "sval": "stringu2",
                            },
                          },
                        ],
                        "location": 307,
                      },
                    },
                    "location": 319,
                    "name": [
                      {
                        "String": {
                          "sval": "!~*",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ss",
                            },
                          },
                          {
                            "String": {
                              "sval": "case1",
                            },
                          },
                        ],
                        "location": 323,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2200 1`] = `
[
  "select t0.*
from
 text_tbl t0
 left join
   (select case t1.ten when 0 then 'doh!'::text else null::text end as case1,
           t1.stringu2
     from tenk1 t1
     join int4_tbl i4 ON i4.f1 = t1.unique2
     left join uniquetbl u1 ON u1.f1 = t1.string4) ss
  on t0.f1 = ss.case1
where ss.stringu2 !~* ss.case1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t0",
                      },
                      "inh": true,
                      "location": 18,
                      "relname": "text_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t0",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 264,
                        },
                      },
                      "location": 270,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "case1",
                              },
                            },
                          ],
                          "location": 272,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t1",
                                        },
                                        "inh": true,
                                        "location": 152,
                                        "relname": "tenk1",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i4",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 186,
                                          },
                                        },
                                        "location": 192,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique2",
                                                },
                                              },
                                            ],
                                            "location": 194,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "i4",
                                        },
                                        "inh": true,
                                        "location": 171,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "u1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 236,
                                      },
                                    },
                                    "location": 242,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "string4",
                                            },
                                          },
                                        ],
                                        "location": 244,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "u1",
                                    },
                                    "inh": true,
                                    "location": 220,
                                    "relname": "uniquetbl",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 52,
                                "name": "case1",
                                "val": {
                                  "CaseExpr": {
                                    "arg": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "ten",
                                            },
                                          },
                                        ],
                                        "location": 57,
                                      },
                                    },
                                    "args": [
                                      {
                                        "CaseWhen": {
                                          "expr": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 69,
                                            },
                                          },
                                          "location": 64,
                                          "result": {
                                            "TypeCast": {
                                              "arg": {
                                                "A_Const": {
                                                  "location": 76,
                                                  "sval": {
                                                    "sval": "doh!",
                                                  },
                                                },
                                              },
                                              "location": 82,
                                              "typeName": {
                                                "location": 84,
                                                "names": [
                                                  {
                                                    "String": {
                                                      "sval": "text",
                                                    },
                                                  },
                                                ],
                                                "typemod": -1,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "defresult": {
                                      "TypeCast": {
                                        "arg": {
                                          "A_Const": {
                                            "isnull": true,
                                            "location": 94,
                                          },
                                        },
                                        "location": 98,
                                        "typeName": {
                                          "location": 100,
                                          "names": [
                                            {
                                              "String": {
                                                "sval": "text",
                                              },
                                            },
                                          ],
                                          "typemod": -1,
                                        },
                                      },
                                    },
                                    "location": 52,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 130,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "stringu2",
                                        },
                                      },
                                    ],
                                    "location": 130,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t0",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss",
                        },
                      },
                      {
                        "String": {
                          "sval": "stringu2",
                        },
                      },
                    ],
                    "location": 287,
                  },
                },
                "location": 299,
                "name": [
                  {
                    "String": {
                      "sval": "!~*",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "ss",
                        },
                      },
                      {
                        "String": {
                          "sval": "case1",
                        },
                      },
                    ],
                    "location": 303,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2220 1`] = `
[
  "explain (costs off)
select 1
from t t1
  left join (select 2 as c
             from t t2 left join t t3 on t2.a = t3.a) s
    on true
where t1.a = s.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 34,
                          "relname": "t",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 129,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 84,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 107,
                                          },
                                        },
                                        "location": 112,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 114,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 99,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 59,
                                    "name": "c",
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 59,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "t1",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 140,
                      },
                    },
                    "location": 145,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 147,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2228 1`] = `
[
  "select 1
from t t1
  left join (select 2 as c
             from t t2 left join t t3 on t2.a = t3.a) s
    on true
where t1.a = s.c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 109,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_LEFT",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 64,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 87,
                                      },
                                    },
                                    "location": 92,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 94,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 79,
                                    "relname": "t",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 39,
                                "name": "c",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 39,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "t1",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 120,
                  },
                },
                "location": 125,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "s",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                    "location": 127,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2240 1`] = `
[
  "create temp table t (a int unique, b int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "t",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_UNIQUE",
                        "location": 27,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 21,
                  "typeName": {
                    "location": 23,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2243 1`] = `
[
  "explain (costs off)
select 1
from t t1
  left join (select t2.a, 1 as c
             from t t2 left join t t3 on t2.a = t3.a) s
  on true
  left join t t4 on true
where s.a < s.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "t",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 133,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t2",
                                            },
                                            "inh": true,
                                            "location": 90,
                                            "relname": "t",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 113,
                                              },
                                            },
                                            "location": 118,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 120,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 105,
                                            "relname": "t",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 59,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 59,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 65,
                                        "name": "c",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 65,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 158,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 150,
                          "relname": "t",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 169,
                      },
                    },
                    "location": 173,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 175,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2252 1`] = `
[
  "explain (costs off)
select t1.a, s.*
from t t1
  left join lateral (select t2.a, coalesce(t1.a, 1) as c
                     from t t2 left join t t3 on t2.a = t3.a) s
  on true
  left join t t4 on true
where s.a < s.c",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "t1",
                              },
                              "inh": true,
                              "location": 42,
                              "relname": "t",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 173,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "JoinExpr": {
                                        "jointype": "JOIN_LEFT",
                                        "larg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t2",
                                            },
                                            "inh": true,
                                            "location": 130,
                                            "relname": "t",
                                            "relpersistence": "p",
                                          },
                                        },
                                        "quals": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t2",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 153,
                                              },
                                            },
                                            "location": 158,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "=",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "t3",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "a",
                                                    },
                                                  },
                                                ],
                                                "location": 160,
                                              },
                                            },
                                          },
                                        },
                                        "rarg": {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "t3",
                                            },
                                            "inh": true,
                                            "location": 145,
                                            "relname": "t",
                                            "relpersistence": "p",
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 75,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 75,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 81,
                                        "name": "c",
                                        "val": {
                                          "CoalesceExpr": {
                                            "args": [
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "t1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "a",
                                                      },
                                                    },
                                                  ],
                                                  "location": 90,
                                                },
                                              },
                                              {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 1,
                                                  },
                                                  "location": 96,
                                                },
                                              },
                                            ],
                                            "location": 81,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 198,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t4",
                          },
                          "inh": true,
                          "location": 190,
                          "relname": "t",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 209,
                      },
                    },
                    "location": 213,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "s",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 215,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2261 1`] = `
[
  "select t1.a, s.*
from t t1
  left join lateral (select t2.a, coalesce(t1.a, 1) as c
                     from t t2 left join t t3 on t2.a = t3.a) s
  on true
  left join t t4 on true
where s.a < s.c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t1",
                          },
                          "inh": true,
                          "location": 22,
                          "relname": "t",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 153,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 110,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 133,
                                          },
                                        },
                                        "location": 138,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 140,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 125,
                                        "relname": "t",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 55,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 55,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 61,
                                    "name": "c",
                                    "val": {
                                      "CoalesceExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "t1",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                              ],
                                              "location": 70,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 76,
                                            },
                                          },
                                        ],
                                        "location": 61,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 178,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t4",
                      },
                      "inh": true,
                      "location": 170,
                      "relname": "t",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "s",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "s",
                        },
                      },
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 189,
                  },
                },
                "location": 193,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "s",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                    "location": 195,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2272 1`] = `
[
  "explain (verbose, costs off)
select i8.*, ss.v, t.unique2
  from int8_tbl i8
    left join int4_tbl i4 on i4.f1 = 1
    left join lateral (select i4.f1 + 1 as v) as ss on true
    left join tenk1 t on t.unique2 = ss.v
where q2 = 456",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i8",
                                  },
                                  "inh": true,
                                  "location": 65,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i4",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 106,
                                    },
                                  },
                                  "location": 112,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 114,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "i4",
                                  },
                                  "inh": true,
                                  "location": 91,
                                  "relname": "int4_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "A_Const": {
                              "boolval": {
                                "boolval": true,
                              },
                              "location": 171,
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 146,
                                        "name": "v",
                                        "val": {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "i4",
                                                    },
                                                  },
                                                  {
                                                    "String": {
                                                      "sval": "f1",
                                                    },
                                                  },
                                                ],
                                                "location": 146,
                                              },
                                            },
                                            "location": 152,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "+",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 154,
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 201,
                            },
                          },
                          "location": 211,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "v",
                                  },
                                },
                              ],
                              "location": 213,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "t",
                          },
                          "inh": true,
                          "location": 190,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "i8",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 42,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "v",
                              },
                            },
                          ],
                          "location": 42,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 48,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "q2",
                            },
                          },
                        ],
                        "location": 224,
                      },
                    },
                    "location": 227,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 456,
                        },
                        "location": 229,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2280 1`] = `
[
  "select i8.*, ss.v, t.unique2
  from int8_tbl i8
    left join int4_tbl i4 on i4.f1 = 1
    left join lateral (select i4.f1 + 1 as v) as ss on true
    left join tenk1 t on t.unique2 = ss.v
where q2 = 456",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i8",
                              },
                              "inh": true,
                              "location": 36,
                              "relname": "int8_tbl",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i4",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 77,
                                },
                              },
                              "location": 83,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 85,
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "i4",
                              },
                              "inh": true,
                              "location": 62,
                              "relname": "int4_tbl",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 142,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 117,
                                    "name": "v",
                                    "val": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "i4",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 117,
                                          },
                                        },
                                        "location": 123,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "+",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 125,
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique2",
                              },
                            },
                          ],
                          "location": 172,
                        },
                      },
                      "location": 182,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "v",
                              },
                            },
                          ],
                          "location": 184,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 161,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i8",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t",
                          },
                        },
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "q2",
                        },
                      },
                    ],
                    "location": 195,
                  },
                },
                "location": 198,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 456,
                    },
                    "location": 200,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2289 1`] = `
[
  "create temp table parttbl (a integer primary key) partition by range (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 50,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 70,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "parttbl",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 37,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2293 1`] = `
[
  "select * from
  (select *, 12 as phv from parttbl) as ss
  right join int4_tbl on true
where ss.a = ss.phv and f1 = 0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 42,
                                "relname": "parttbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 24,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 24,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 27,
                                "name": "phv",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 12,
                                    },
                                    "location": 27,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 82,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 70,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 93,
                        },
                      },
                      "location": 98,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "phv",
                              },
                            },
                          ],
                          "location": 100,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 111,
                        },
                      },
                      "location": 114,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {},
                          "location": 116,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 107,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2306 1`] = `
[
  " -- error
select * from
  int8_tbl x join (int4_tbl x cross join int4_tbl y) j on q1 = y.f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 26,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 82,
                        },
                      },
                      "location": 85,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "y",
                              },
                            },
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 87,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "alias": {
                        "aliasname": "j",
                      },
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "y",
                          },
                          "inh": true,
                          "location": 65,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2308 1`] = `
[
  " -- error
select * from
  int8_tbl x join (int4_tbl x cross join int4_tbl y(ff)) j on q1 = f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 26,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 86,
                        },
                      },
                      "location": 89,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 91,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "alias": {
                        "aliasname": "j",
                      },
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "y",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "ff",
                                },
                              },
                            ],
                          },
                          "inh": true,
                          "location": 65,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2310 1`] = `
[
  " -- ok

--
-- Test hints given on incorrect column references are useful
--

select t1.uunique1 from
  tenk1 t1 join tenk2 t2 on t1.two = t2.two",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 103,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 129,
                        },
                      },
                      "location": 136,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 138,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 117,
                      "relname": "tenk2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 84,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "uunique1",
                          },
                        },
                      ],
                      "location": 84,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2317 1`] = `
[
  " -- error, prefer "t1" suggestion
select t2.uunique1 from
  tenk1 t1 join tenk2 t2 on t1.two = t2.two",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 60,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 86,
                        },
                      },
                      "location": 93,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 95,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 74,
                      "relname": "tenk2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 41,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "uunique1",
                          },
                        },
                      ],
                      "location": 41,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2319 1`] = `
[
  " -- error, prefer "t2" suggestion
select uunique1 from
  tenk1 t1 join tenk2 t2 on t1.two = t2.two",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 57,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 83,
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 92,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 71,
                      "relname": "tenk2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 41,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "uunique1",
                          },
                        },
                      ],
                      "location": 41,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2321 1`] = `
[
  " -- error, suggest both at once
select ctid from
  tenk1 t1 join tenk2 t2 on t1.two = t2.two",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 51,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 77,
                        },
                      },
                      "location": 84,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "two",
                              },
                            },
                          ],
                          "location": 86,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 65,
                      "relname": "tenk2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 39,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ctid",
                          },
                        },
                      ],
                      "location": 39,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2323 1`] = `
[
  " -- error, need qualification

--
-- Take care to reference the correct RTE
--

select atts.relid::regclass, s.* from pg_stats s join
    pg_attribute a on s.attname = a.attname and s.tablename =
    a.attrelid::regclass::text join (select unnest(indkey) attnum,
    indexrelid from pg_index i) atts on atts.attnum = a.attnum where
    schemaname != 'pg_catalog'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "s",
                          },
                          "inh": true,
                          "location": 118,
                          "relname": "pg_stats",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "attname",
                                        },
                                      },
                                    ],
                                    "location": 156,
                                  },
                                },
                                "location": 166,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "attname",
                                        },
                                      },
                                    ],
                                    "location": 168,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "s",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "tablename",
                                        },
                                      },
                                    ],
                                    "location": 182,
                                  },
                                },
                                "location": 194,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "TypeCast": {
                                    "arg": {
                                      "TypeCast": {
                                        "arg": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "attrelid",
                                                },
                                              },
                                            ],
                                            "location": 200,
                                          },
                                        },
                                        "location": 210,
                                        "typeName": {
                                          "location": 212,
                                          "names": [
                                            {
                                              "String": {
                                                "sval": "regclass",
                                              },
                                            },
                                          ],
                                          "typemod": -1,
                                        },
                                      },
                                    },
                                    "location": 220,
                                    "typeName": {
                                      "location": 222,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "text",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 178,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 138,
                          "relname": "pg_attribute",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "atts",
                              },
                            },
                            {
                              "String": {
                                "sval": "attnum",
                              },
                            },
                          ],
                          "location": 303,
                        },
                      },
                      "location": 315,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "attnum",
                              },
                            },
                          ],
                          "location": 317,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "atts",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i",
                                },
                                "inh": true,
                                "location": 283,
                                "relname": "pg_index",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 240,
                                "name": "attnum",
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "indkey",
                                              },
                                            },
                                          ],
                                          "location": 247,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "unnest",
                                        },
                                      },
                                    ],
                                    "location": 240,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 267,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "indexrelid",
                                        },
                                      },
                                    ],
                                    "location": 267,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 87,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "atts",
                              },
                            },
                            {
                              "String": {
                                "sval": "relid",
                              },
                            },
                          ],
                          "location": 87,
                        },
                      },
                      "location": 97,
                      "typeName": {
                        "location": 99,
                        "names": [
                          {
                            "String": {
                              "sval": "regclass",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 109,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "s",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 109,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "schemaname",
                        },
                      },
                    ],
                    "location": 336,
                  },
                },
                "location": 347,
                "name": [
                  {
                    "String": {
                      "sval": "<>",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 350,
                    "sval": {
                      "sval": "pg_catalog",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2336 1`] = `
[
  "explain (verbose, costs off)
select 1 from
  (select * from int8_tbl where q1 <> (select 42) offset 0) ss
where false",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 60,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOffset": {
                            "A_Const": {
                              "ival": {},
                              "location": 100,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 75,
                                },
                              },
                              "location": 78,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<>",
                                  },
                                },
                              ],
                              "rexpr": {
                                "SubLink": {
                                  "location": 81,
                                  "subLinkType": "EXPR_SUBLINK",
                                  "subselect": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 89,
                                            "val": {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 42,
                                                },
                                                "location": 89,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Const": {
                    "boolval": {},
                    "location": 112,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2348 1`] = `
[
  "  select unique2, x.*
  from tenk1 a, lateral (select * from int4_tbl b where f1 = a.unique1) x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 29,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "x",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "b",
                            },
                            "inh": true,
                            "location": 61,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 54,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 54,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                          "location": 81,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 83,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2353 1`] = `
[
  "  select unique2, x.*
  from int4_tbl x, lateral (select unique2 from tenk1 where f1 = unique1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "x",
                  },
                  "inh": true,
                  "location": 29,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 70,
                            "relname": "tenk1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 57,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "unique2",
                                    },
                                  },
                                ],
                                "location": 57,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 82,
                            },
                          },
                          "location": 85,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 87,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2356 1`] = `
[
  "  select unique2, x.*
  from int4_tbl x cross join lateral (select unique2 from tenk1 where f1 = unique1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 29,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 80,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 67,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 92,
                                },
                              },
                              "location": 95,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 97,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2361 1`] = `
[
  "  select unique2, x.*
  from int4_tbl x left join lateral (select unique1, unique2 from tenk1 where f1 = unique1) ss on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 29,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 120,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 88,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 66,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique1",
                                        },
                                      },
                                    ],
                                    "location": 66,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 75,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "unique2",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 100,
                                },
                              },
                              "location": 103,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "unique1",
                                      },
                                    },
                                  ],
                                  "location": 105,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2366 1`] = `
[
  "select *, (select r from (select q1 as q2) x, (select q2 as r) y) from int8_tbl",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 71,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "SubLink": {
                      "location": 10,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "x",
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 33,
                                          "name": "q2",
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 33,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "y",
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 54,
                                          "name": "r",
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q2",
                                                  },
                                                },
                                              ],
                                              "location": 54,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 18,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "r",
                                        },
                                      },
                                    ],
                                    "location": 18,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2370 1`] = `
[
  "select count(*) from tenk1 a, lateral generate_series(1,two) g",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 21,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "g",
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 54,
                                  },
                                },
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "two",
                                        },
                                      },
                                    ],
                                    "location": 56,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 38,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                  "lateral": true,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2374 1`] = `
[
  "  select count(*) from tenk1 a cross join lateral generate_series(1,two) g",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 23,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 66,
                                      },
                                    },
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "two",
                                            },
                                          },
                                        ],
                                        "location": 68,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 50,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                      "lateral": true,
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2376 1`] = `
[
  "explain (costs off)
  select count(*) from tenk1 a, generate_series(1,two) g",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 43,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 68,
                                      },
                                    },
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "two",
                                            },
                                          },
                                        ],
                                        "location": 70,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 52,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2380 1`] = `
[
  "explain (costs off)
  select * from generate_series(100,200) g,
    lateral (select * from int8_tbl a where g = q1 union all
             select * from int8_tbl b where g = q2) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 100,
                                        },
                                        "location": 52,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 200,
                                        },
                                        "location": 56,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 36,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "a",
                                  },
                                  "inh": true,
                                  "location": 91,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 84,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 84,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 108,
                                  },
                                },
                                "location": 110,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 112,
                                  },
                                },
                              },
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "b",
                                  },
                                  "inh": true,
                                  "location": 152,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 145,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 145,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 169,
                                  },
                                },
                                "location": 171,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q2",
                                        },
                                      },
                                    ],
                                    "location": 173,
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2389 1`] = `
[
  "explain (costs off)
  select count(*) from tenk1 a,
    tenk1 b join lateral (values(a.unique1)) ss(x) on b.unique2 = ss.x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 43,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 56,
                          "relname": "tenk1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique2",
                                  },
                                },
                              ],
                              "location": 106,
                            },
                          },
                          "location": 116,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 118,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "valuesLists": [
                                {
                                  "List": {
                                    "items": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "unique1",
                                              },
                                            },
                                          ],
                                          "location": 85,
                                        },
                                      },
                                    ],
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2403 1`] = `
[
  "explain (costs off)
  select * from int8_tbl a,
    int8_tbl x left join lateral (select a.q1 from int4_tbl y) ss(z)
      on x.q2 = ss.z
  order by a.q1, a.q2, x.q1, x.q2, ss.z",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 52,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 126,
                            },
                          },
                          "location": 131,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "z",
                                  },
                                },
                              ],
                              "location": 133,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                            "colnames": [
                              {
                                "String": {
                                  "sval": "z",
                                },
                              },
                            ],
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "y",
                                    },
                                    "inh": true,
                                    "location": 99,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 89,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 89,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 149,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 155,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 161,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 167,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "z",
                              },
                            },
                          ],
                          "location": 173,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2414 1`] = `
[
  "select * from (select f1/2 as x from int4_tbl) ss1 join int4_tbl i4 on x = f1,
  lateral (select x) ss2(y)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 37,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 22,
                                "name": "x",
                                "val": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 22,
                                      },
                                    },
                                    "location": 24,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "/",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 25,
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                      "location": 73,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "f1",
                              },
                            },
                          ],
                          "location": 75,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i4",
                      },
                      "inh": true,
                      "location": 56,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss2",
                    "colnames": [
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                    ],
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 97,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                ],
                                "location": 97,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2422 1`] = `
[
  "select * from (values(1)) x(lb),
  lateral generate_series(lb,4) x4",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "x",
                    "colnames": [
                      {
                        "String": {
                          "sval": "lb",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 22,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "x4",
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "lb",
                                        },
                                      },
                                    ],
                                    "location": 59,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 4,
                                    },
                                    "location": 62,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 43,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                  "lateral": true,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2452 1`] = `
[
  "explain (verbose, costs off)
select * from
  int8_tbl a left join
  lateral (select *, a.q2 as x from int8_tbl b) ss on a.q2 = ss.q1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 120,
                            },
                          },
                          "location": 125,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 127,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "b",
                                    },
                                    "inh": true,
                                    "location": 102,
                                    "relname": "int8_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 84,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 84,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 87,
                                    "name": "x",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 87,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2460 1`] = `
[
  "select * from
  int8_tbl a left join
  lateral (select *, coalesce(a.q2, 42) as x from int8_tbl b) ss on a.q2 = ss.q1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "q2",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                      "location": 110,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 112,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "b",
                                },
                                "inh": true,
                                "location": 87,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 55,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 55,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 58,
                                "name": "x",
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "q2",
                                              },
                                            },
                                          ],
                                          "location": 67,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 42,
                                          },
                                          "location": 73,
                                        },
                                      },
                                    ],
                                    "location": 58,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2469 1`] = `
[
  "explain (verbose, costs off)
select * from int4_tbl i left join
  lateral (select * from int2_tbl j where i.f1 = j.f1) k on true",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 124,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "k",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "j",
                                    },
                                    "inh": true,
                                    "location": 89,
                                    "relname": "int2_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 82,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 82,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "i",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 106,
                                    },
                                  },
                                  "location": 111,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "j",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "f1",
                                          },
                                        },
                                      ],
                                      "location": 113,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2475 1`] = `
[
  "select * from int4_tbl i left join
  lateral (select coalesce(i) from int2_tbl j where i.f1 = j.f1) k on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 105,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "k",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "j",
                                },
                                "inh": true,
                                "location": 70,
                                "relname": "int2_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 53,
                                "val": {
                                  "CoalesceExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "i",
                                              },
                                            },
                                          ],
                                          "location": 62,
                                        },
                                      },
                                    ],
                                    "location": 53,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 87,
                                },
                              },
                              "location": 92,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 94,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2480 1`] = `
[
  "select * from int4_tbl a,
  lateral (
    select * from int4_tbl b left join int8_tbl c on (b.f1 = q1 and a.f1 = q2)
  ) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "JoinExpr": {
                            "jointype": "JOIN_LEFT",
                            "larg": {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "b",
                                },
                                "inh": true,
                                "location": 56,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                            "quals": {
                              "BoolExpr": {
                                "args": [
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 92,
                                        },
                                      },
                                      "location": 97,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "q1",
                                              },
                                            },
                                          ],
                                          "location": 99,
                                        },
                                      },
                                    },
                                  },
                                  {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "f1",
                                              },
                                            },
                                          ],
                                          "location": 106,
                                        },
                                      },
                                      "location": 111,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "q2",
                                              },
                                            },
                                          ],
                                          "location": 113,
                                        },
                                      },
                                    },
                                  },
                                ],
                                "boolop": "AND_EXPR",
                                "location": 102,
                              },
                            },
                            "rarg": {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "c",
                                },
                                "inh": true,
                                "location": 77,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 49,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 49,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2490 1`] = `
[
  "explain (verbose, costs off)
select * from
  int8_tbl a left join lateral
  (select b.q1 as bq1, c.q1 as cq1, least(a.q1,b.q1,c.q1) from
   int8_tbl b cross join int8_tbl c) ss
  on a.q2 = ss.bq1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "a",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 182,
                            },
                          },
                          "location": 187,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "bq1",
                                  },
                                },
                              ],
                              "location": 189,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "b",
                                        },
                                        "inh": true,
                                        "location": 140,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "c",
                                        },
                                        "inh": true,
                                        "location": 162,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 84,
                                    "name": "bq1",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 84,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 97,
                                    "name": "cq1",
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "c",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q1",
                                            },
                                          },
                                        ],
                                        "location": 97,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 110,
                                    "val": {
                                      "MinMaxExpr": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "a",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 116,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "b",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 121,
                                            },
                                          },
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "c",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 126,
                                            },
                                          },
                                        ],
                                        "location": 110,
                                        "op": "IS_LEAST",
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2503 1`] = `
[
  "explain (verbose, costs off)
select * from
  int8_tbl c left join (
    int8_tbl a left join (select q1, coalesce(q2,42) as x from int8_tbl b) ss1
      on a.q2 = ss1.q1
    cross join
    lateral (select q1, coalesce(ss1.x,q2) as y from int8_tbl d) ss2
  ) on c.q2 = ss2.q1,
  lateral (select ss2.y offset 0) ss3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 45,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 261,
                            },
                          },
                          "location": 266,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 268,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "a",
                                  },
                                  "inh": true,
                                  "location": 72,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 156,
                                    },
                                  },
                                  "location": 161,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "ss1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 163,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "b",
                                            },
                                            "inh": true,
                                            "location": 131,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 101,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 101,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 105,
                                            "name": "x",
                                            "val": {
                                              "CoalesceExpr": {
                                                "args": [
                                                  {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "q2",
                                                          },
                                                        },
                                                      ],
                                                      "location": 114,
                                                    },
                                                  },
                                                  {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 42,
                                                      },
                                                      "location": 117,
                                                    },
                                                  },
                                                ],
                                                "location": 105,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss2",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "d",
                                        },
                                        "inh": true,
                                        "location": 238,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 205,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 205,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 209,
                                        "name": "y",
                                        "val": {
                                          "CoalesceExpr": {
                                            "args": [
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "ss1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "x",
                                                      },
                                                    },
                                                  ],
                                                  "location": 218,
                                                },
                                              },
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 224,
                                                },
                                              },
                                            ],
                                            "location": 209,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss3",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "limitOffset": {
                            "A_Const": {
                              "ival": {},
                              "location": 307,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 294,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ss2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "y",
                                        },
                                      },
                                    ],
                                    "location": 294,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2514 1`] = `
[
  "explain (verbose, costs off)
select c.*,a.*,ss1.q1,ss2.q1,ss3.* from
  int8_tbl c left join (
    int8_tbl a left join
      (select q1, coalesce(q2,f1) as x from int8_tbl b, int4_tbl b2
       where q1 < f1) ss1
      on a.q2 = ss1.q1
    cross join
    lateral (select q1, coalesce(ss1.x,q2) as y from int8_tbl d) ss2
  ) on c.q2 = ss2.q1,
  lateral (select * from int4_tbl i where ss2.y > f1) ss3",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 71,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 327,
                            },
                          },
                          "location": 332,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 334,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "a",
                                  },
                                  "inh": true,
                                  "location": 98,
                                  "relname": "int8_tbl",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 222,
                                    },
                                  },
                                  "location": 227,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "ss1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                      ],
                                      "location": 229,
                                    },
                                  },
                                },
                              },
                              "rarg": {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "ss1",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "fromClause": [
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "b",
                                            },
                                            "inh": true,
                                            "location": 163,
                                            "relname": "int8_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                        {
                                          "RangeVar": {
                                            "alias": {
                                              "aliasname": "b2",
                                            },
                                            "inh": true,
                                            "location": 175,
                                            "relname": "int4_tbl",
                                            "relpersistence": "p",
                                          },
                                        },
                                      ],
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 133,
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "q1",
                                                    },
                                                  },
                                                ],
                                                "location": 133,
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "ResTarget": {
                                            "location": 137,
                                            "name": "x",
                                            "val": {
                                              "CoalesceExpr": {
                                                "args": [
                                                  {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "q2",
                                                          },
                                                        },
                                                      ],
                                                      "location": 146,
                                                    },
                                                  },
                                                  {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "f1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 149,
                                                    },
                                                  },
                                                ],
                                                "location": 137,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                      "whereClause": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "q1",
                                                  },
                                                },
                                              ],
                                              "location": 200,
                                            },
                                          },
                                          "location": 203,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": "<",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                              "location": 205,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "ss2",
                              },
                              "lateral": true,
                              "subquery": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "d",
                                        },
                                        "inh": true,
                                        "location": 304,
                                        "relname": "int8_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 271,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "q1",
                                                },
                                              },
                                            ],
                                            "location": 271,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "ResTarget": {
                                        "location": 275,
                                        "name": "y",
                                        "val": {
                                          "CoalesceExpr": {
                                            "args": [
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "ss1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "x",
                                                      },
                                                    },
                                                  ],
                                                  "location": 284,
                                                },
                                              },
                                              {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q2",
                                                      },
                                                    },
                                                  ],
                                                  "location": 290,
                                                },
                                              },
                                            ],
                                            "location": 275,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss3",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i",
                                },
                                "inh": true,
                                "location": 367,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 360,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 360,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "ss2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "y",
                                      },
                                    },
                                  ],
                                  "location": 384,
                                },
                              },
                              "location": 390,
                              "name": [
                                {
                                  "String": {
                                    "sval": ">",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 392,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 44,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss1",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 44,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 51,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss2",
                              },
                            },
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 51,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 58,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss3",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 58,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2527 1`] = `
[
  "explain (verbose, costs off)
select * from
  (select 1 as x offset 0) x cross join (select 2 as y offset 0) y
  left join lateral (
    select * from (select 3 as z offset 0) z where z.z = x.x
  ) zz on zz.z = y.y",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "x",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOffset": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 67,
                                    },
                                  },
                                  "limitOption": "LIMIT_OPTION_COUNT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 53,
                                        "name": "x",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 53,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                          "rarg": {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "y",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOffset": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 105,
                                    },
                                  },
                                  "limitOption": "LIMIT_OPTION_COUNT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 91,
                                        "name": "y",
                                        "val": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 91,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "zz",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "z",
                                  },
                                },
                              ],
                              "location": 203,
                            },
                          },
                          "location": 208,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                              ],
                              "location": 210,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "zz",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeSubselect": {
                                    "alias": {
                                      "aliasname": "z",
                                    },
                                    "subquery": {
                                      "SelectStmt": {
                                        "limitOffset": {
                                          "A_Const": {
                                            "ival": {},
                                            "location": 172,
                                          },
                                        },
                                        "limitOption": "LIMIT_OPTION_COUNT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 158,
                                              "name": "z",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 3,
                                                  },
                                                  "location": 158,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 143,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 143,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Expr": {
                                  "kind": "AEXPR_OP",
                                  "lexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "z",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "z",
                                          },
                                        },
                                      ],
                                      "location": 183,
                                    },
                                  },
                                  "location": 187,
                                  "name": [
                                    {
                                      "String": {
                                        "sval": "=",
                                      },
                                    },
                                  ],
                                  "rexpr": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "x",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "x",
                                          },
                                        },
                                      ],
                                      "location": 189,
                                    },
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2535 1`] = `
[
  "explain (costs off)
select * from int4_tbl t1,
  lateral (select * from int4_tbl t2 inner join int4_tbl t3 on t1.f1 = 1
           inner join (int4_tbl t4 left join int4_tbl t5 on true) on true) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 34,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "JoinExpr": {
                                    "jointype": "JOIN_INNER",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t2",
                                        },
                                        "inh": true,
                                        "location": 72,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                            ],
                                            "location": 110,
                                          },
                                        },
                                        "location": 116,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 118,
                                          },
                                        },
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t3",
                                        },
                                        "inh": true,
                                        "location": 95,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                                "quals": {
                                  "A_Const": {
                                    "boolval": {
                                      "boolval": true,
                                    },
                                    "location": 189,
                                  },
                                },
                                "rarg": {
                                  "JoinExpr": {
                                    "jointype": "JOIN_LEFT",
                                    "larg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t4",
                                        },
                                        "inh": true,
                                        "location": 143,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                    "quals": {
                                      "A_Const": {
                                        "boolval": {
                                          "boolval": true,
                                        },
                                        "location": 180,
                                      },
                                    },
                                    "rarg": {
                                      "RangeVar": {
                                        "alias": {
                                          "aliasname": "t5",
                                        },
                                        "inh": true,
                                        "location": 165,
                                        "relname": "int4_tbl",
                                        "relpersistence": "p",
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 65,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 65,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2541 1`] = `
[
  "explain (verbose, costs off)
select * from int8_tbl i8 left join lateral
  (select *, i8.q2 from int4_tbl where false) ss on true",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i8",
                          },
                          "inh": true,
                          "location": 43,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Const": {
                          "boolval": {
                            "boolval": true,
                          },
                          "location": 125,
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 97,
                                    "relname": "int4_tbl",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 83,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "A_Star": {},
                                          },
                                        ],
                                        "location": 83,
                                      },
                                    },
                                  },
                                },
                                {
                                  "ResTarget": {
                                    "location": 86,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "i8",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "q2",
                                            },
                                          },
                                        ],
                                        "location": 86,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "A_Const": {
                                  "boolval": {},
                                  "location": 112,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2545 1`] = `
[
  "select * from int8_tbl i8 left join lateral
  (select *, i8.q2 from int4_tbl i1, int4_tbl i2 where false) ss on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i8",
                      },
                      "inh": true,
                      "location": 14,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 112,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i1",
                                },
                                "inh": true,
                                "location": 68,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i2",
                                },
                                "inh": true,
                                "location": 81,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "i8",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "q2",
                                        },
                                      },
                                    ],
                                    "location": 57,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Const": {
                              "boolval": {},
                              "location": 99,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2549 1`] = `
[
  "select * from
  ((select 2 as v) union all (select 3 as v)) as q1
  cross join lateral
  ((select * from
      ((select 4 as v) union all (select 5 as v)) as q3)
   union all
   (select q1.v)
  ) as q2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "q1",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 25,
                                  "name": "v",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 25,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 51,
                                  "name": "v",
                                  "val": {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 3,
                                      },
                                      "location": 51,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "q2",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "all": true,
                          "larg": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "q3",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "all": true,
                                      "larg": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 120,
                                              "name": "v",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 4,
                                                  },
                                                  "location": 120,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_UNION",
                                      "rarg": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 146,
                                              "name": "v",
                                              "val": {
                                                "A_Const": {
                                                  "ival": {
                                                    "ival": 5,
                                                  },
                                                  "location": 146,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 98,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 98,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_UNION",
                          "rarg": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 186,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "q1",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "v",
                                          },
                                        },
                                      ],
                                      "location": 186,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2559 1`] = `
[
  "SELECT * FROM (int8_tbl i cross join int4_tbl j) ss(a,b,c,d)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "alias": {
                    "aliasname": "ss",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                      {
                        "String": {
                          "sval": "d",
                        },
                      },
                    ],
                  },
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i",
                      },
                      "inh": true,
                      "location": 15,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "j",
                      },
                      "inh": true,
                      "location": 37,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2562 1`] = `
[
  "explain (verbose, costs off)
select * from
  (values (0,9998), (1,1000)) v(id,x),
  lateral (select f1 from int4_tbl
           where f1 = any (select unique1 from tenk1
                           where unique2 = v.x offset 0)) ss",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "id",
                            },
                          },
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 54,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 9998,
                                      },
                                      "location": 56,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 64,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1000,
                                      },
                                      "location": 66,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 108,
                                "relname": "int4_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 100,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 100,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "SubLink": {
                              "location": 137,
                              "operName": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "subLinkType": "ANY_SUBLINK",
                              "subselect": {
                                "SelectStmt": {
                                  "fromClause": [
                                    {
                                      "RangeVar": {
                                        "inh": true,
                                        "location": 164,
                                        "relname": "tenk1",
                                        "relpersistence": "p",
                                      },
                                    },
                                  ],
                                  "limitOffset": {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 224,
                                    },
                                  },
                                  "limitOption": "LIMIT_OPTION_COUNT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 151,
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 151,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "whereClause": {
                                    "A_Expr": {
                                      "kind": "AEXPR_OP",
                                      "lexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "unique2",
                                              },
                                            },
                                          ],
                                          "location": 203,
                                        },
                                      },
                                      "location": 211,
                                      "name": [
                                        {
                                          "String": {
                                            "sval": "=",
                                          },
                                        },
                                      ],
                                      "rexpr": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "v",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "x",
                                              },
                                            },
                                          ],
                                          "location": 213,
                                        },
                                      },
                                    },
                                  },
                                },
                              },
                              "testexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "f1",
                                      },
                                    },
                                  ],
                                  "location": 134,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2576 1`] = `
[
  "explain (verbose, costs off)
select * from (values (0), (1)) v(id),
lateral (select * from int8_tbl t1,
         lateral (select * from
                    (select * from int8_tbl t2
                     where q1 = any (select q2 from int8_tbl t3
                                     where q2 = (select greatest(t1.q1,t2.q2))
                                       and (select v.id=0)) offset 0) ss2) ss
         where t1.q1 = ss.q2) ss0",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "id",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 52,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 57,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss0",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "t1",
                                },
                                "inh": true,
                                "location": 91,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "ss",
                                },
                                "lateral": true,
                                "subquery": {
                                  "SelectStmt": {
                                    "fromClause": [
                                      {
                                        "RangeSubselect": {
                                          "alias": {
                                            "aliasname": "ss2",
                                          },
                                          "subquery": {
                                            "SelectStmt": {
                                              "fromClause": [
                                                {
                                                  "RangeVar": {
                                                    "alias": {
                                                      "aliasname": "t2",
                                                    },
                                                    "inh": true,
                                                    "location": 171,
                                                    "relname": "int8_tbl",
                                                    "relpersistence": "p",
                                                  },
                                                },
                                              ],
                                              "limitOffset": {
                                                "A_Const": {
                                                  "ival": {},
                                                  "location": 393,
                                                },
                                              },
                                              "limitOption": "LIMIT_OPTION_COUNT",
                                              "op": "SETOP_NONE",
                                              "targetList": [
                                                {
                                                  "ResTarget": {
                                                    "location": 164,
                                                    "val": {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "A_Star": {},
                                                          },
                                                        ],
                                                        "location": 164,
                                                      },
                                                    },
                                                  },
                                                },
                                              ],
                                              "whereClause": {
                                                "SubLink": {
                                                  "location": 213,
                                                  "operName": [
                                                    {
                                                      "String": {
                                                        "sval": "=",
                                                      },
                                                    },
                                                  ],
                                                  "subLinkType": "ANY_SUBLINK",
                                                  "subselect": {
                                                    "SelectStmt": {
                                                      "fromClause": [
                                                        {
                                                          "RangeVar": {
                                                            "alias": {
                                                              "aliasname": "t3",
                                                            },
                                                            "inh": true,
                                                            "location": 235,
                                                            "relname": "int8_tbl",
                                                            "relpersistence": "p",
                                                          },
                                                        },
                                                      ],
                                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                                      "op": "SETOP_NONE",
                                                      "targetList": [
                                                        {
                                                          "ResTarget": {
                                                            "location": 227,
                                                            "val": {
                                                              "ColumnRef": {
                                                                "fields": [
                                                                  {
                                                                    "String": {
                                                                      "sval": "q2",
                                                                    },
                                                                  },
                                                                ],
                                                                "location": 227,
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                      "whereClause": {
                                                        "BoolExpr": {
                                                          "args": [
                                                            {
                                                              "A_Expr": {
                                                                "kind": "AEXPR_OP",
                                                                "lexpr": {
                                                                  "ColumnRef": {
                                                                    "fields": [
                                                                      {
                                                                        "String": {
                                                                          "sval": "q2",
                                                                        },
                                                                      },
                                                                    ],
                                                                    "location": 290,
                                                                  },
                                                                },
                                                                "location": 293,
                                                                "name": [
                                                                  {
                                                                    "String": {
                                                                      "sval": "=",
                                                                    },
                                                                  },
                                                                ],
                                                                "rexpr": {
                                                                  "SubLink": {
                                                                    "location": 295,
                                                                    "subLinkType": "EXPR_SUBLINK",
                                                                    "subselect": {
                                                                      "SelectStmt": {
                                                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                        "op": "SETOP_NONE",
                                                                        "targetList": [
                                                                          {
                                                                            "ResTarget": {
                                                                              "location": 303,
                                                                              "val": {
                                                                                "MinMaxExpr": {
                                                                                  "args": [
                                                                                    {
                                                                                      "ColumnRef": {
                                                                                        "fields": [
                                                                                          {
                                                                                            "String": {
                                                                                              "sval": "t1",
                                                                                            },
                                                                                          },
                                                                                          {
                                                                                            "String": {
                                                                                              "sval": "q1",
                                                                                            },
                                                                                          },
                                                                                        ],
                                                                                        "location": 312,
                                                                                      },
                                                                                    },
                                                                                    {
                                                                                      "ColumnRef": {
                                                                                        "fields": [
                                                                                          {
                                                                                            "String": {
                                                                                              "sval": "t2",
                                                                                            },
                                                                                          },
                                                                                          {
                                                                                            "String": {
                                                                                              "sval": "q2",
                                                                                            },
                                                                                          },
                                                                                        ],
                                                                                        "location": 318,
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                  "location": 303,
                                                                                  "op": "IS_GREATEST",
                                                                                },
                                                                              },
                                                                            },
                                                                          },
                                                                        ],
                                                                      },
                                                                    },
                                                                  },
                                                                },
                                                              },
                                                            },
                                                            {
                                                              "SubLink": {
                                                                "location": 369,
                                                                "subLinkType": "EXPR_SUBLINK",
                                                                "subselect": {
                                                                  "SelectStmt": {
                                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                    "op": "SETOP_NONE",
                                                                    "targetList": [
                                                                      {
                                                                        "ResTarget": {
                                                                          "location": 377,
                                                                          "val": {
                                                                            "A_Expr": {
                                                                              "kind": "AEXPR_OP",
                                                                              "lexpr": {
                                                                                "ColumnRef": {
                                                                                  "fields": [
                                                                                    {
                                                                                      "String": {
                                                                                        "sval": "v",
                                                                                      },
                                                                                    },
                                                                                    {
                                                                                      "String": {
                                                                                        "sval": "id",
                                                                                      },
                                                                                    },
                                                                                  ],
                                                                                  "location": 377,
                                                                                },
                                                                              },
                                                                              "location": 381,
                                                                              "name": [
                                                                                {
                                                                                  "String": {
                                                                                    "sval": "=",
                                                                                  },
                                                                                },
                                                                              ],
                                                                              "rexpr": {
                                                                                "A_Const": {
                                                                                  "ival": {},
                                                                                  "location": 382,
                                                                                },
                                                                              },
                                                                            },
                                                                          },
                                                                        },
                                                                      },
                                                                    ],
                                                                  },
                                                                },
                                                              },
                                                            },
                                                          ],
                                                          "boolop": "AND_EXPR",
                                                          "location": 365,
                                                        },
                                                      },
                                                    },
                                                  },
                                                  "testexpr": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "q1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 210,
                                                    },
                                                  },
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 129,
                                          "val": {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "A_Star": {},
                                                },
                                              ],
                                              "location": 129,
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 84,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "A_Star": {},
                                      },
                                    ],
                                    "location": 84,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "t1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q1",
                                      },
                                    },
                                  ],
                                  "location": 419,
                                },
                              },
                              "location": 425,
                              "name": [
                                {
                                  "String": {
                                    "sval": "=",
                                  },
                                },
                              ],
                              "rexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "ss",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "q2",
                                      },
                                    },
                                  ],
                                  "location": 427,
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2586 1`] = `
[
  "select * from (values (0), (1)) v(id),
lateral (select * from int8_tbl t1,
         lateral (select * from
                    (select * from int8_tbl t2
                     where q1 = any (select q2 from int8_tbl t3
                                     where q2 = (select greatest(t1.q1,t2.q2))
                                       and (select v.id=0)) offset 0) ss2) ss
         where t1.q1 = ss.q2) ss0",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "id",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {},
                                  "location": 23,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 28,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss0",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "t1",
                            },
                            "inh": true,
                            "location": 62,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                        {
                          "RangeSubselect": {
                            "alias": {
                              "aliasname": "ss",
                            },
                            "lateral": true,
                            "subquery": {
                              "SelectStmt": {
                                "fromClause": [
                                  {
                                    "RangeSubselect": {
                                      "alias": {
                                        "aliasname": "ss2",
                                      },
                                      "subquery": {
                                        "SelectStmt": {
                                          "fromClause": [
                                            {
                                              "RangeVar": {
                                                "alias": {
                                                  "aliasname": "t2",
                                                },
                                                "inh": true,
                                                "location": 142,
                                                "relname": "int8_tbl",
                                                "relpersistence": "p",
                                              },
                                            },
                                          ],
                                          "limitOffset": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 364,
                                            },
                                          },
                                          "limitOption": "LIMIT_OPTION_COUNT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 135,
                                                "val": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "A_Star": {},
                                                      },
                                                    ],
                                                    "location": 135,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                          "whereClause": {
                                            "SubLink": {
                                              "location": 184,
                                              "operName": [
                                                {
                                                  "String": {
                                                    "sval": "=",
                                                  },
                                                },
                                              ],
                                              "subLinkType": "ANY_SUBLINK",
                                              "subselect": {
                                                "SelectStmt": {
                                                  "fromClause": [
                                                    {
                                                      "RangeVar": {
                                                        "alias": {
                                                          "aliasname": "t3",
                                                        },
                                                        "inh": true,
                                                        "location": 206,
                                                        "relname": "int8_tbl",
                                                        "relpersistence": "p",
                                                      },
                                                    },
                                                  ],
                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                  "op": "SETOP_NONE",
                                                  "targetList": [
                                                    {
                                                      "ResTarget": {
                                                        "location": 198,
                                                        "val": {
                                                          "ColumnRef": {
                                                            "fields": [
                                                              {
                                                                "String": {
                                                                  "sval": "q2",
                                                                },
                                                              },
                                                            ],
                                                            "location": 198,
                                                          },
                                                        },
                                                      },
                                                    },
                                                  ],
                                                  "whereClause": {
                                                    "BoolExpr": {
                                                      "args": [
                                                        {
                                                          "A_Expr": {
                                                            "kind": "AEXPR_OP",
                                                            "lexpr": {
                                                              "ColumnRef": {
                                                                "fields": [
                                                                  {
                                                                    "String": {
                                                                      "sval": "q2",
                                                                    },
                                                                  },
                                                                ],
                                                                "location": 261,
                                                              },
                                                            },
                                                            "location": 264,
                                                            "name": [
                                                              {
                                                                "String": {
                                                                  "sval": "=",
                                                                },
                                                              },
                                                            ],
                                                            "rexpr": {
                                                              "SubLink": {
                                                                "location": 266,
                                                                "subLinkType": "EXPR_SUBLINK",
                                                                "subselect": {
                                                                  "SelectStmt": {
                                                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                    "op": "SETOP_NONE",
                                                                    "targetList": [
                                                                      {
                                                                        "ResTarget": {
                                                                          "location": 274,
                                                                          "val": {
                                                                            "MinMaxExpr": {
                                                                              "args": [
                                                                                {
                                                                                  "ColumnRef": {
                                                                                    "fields": [
                                                                                      {
                                                                                        "String": {
                                                                                          "sval": "t1",
                                                                                        },
                                                                                      },
                                                                                      {
                                                                                        "String": {
                                                                                          "sval": "q1",
                                                                                        },
                                                                                      },
                                                                                    ],
                                                                                    "location": 283,
                                                                                  },
                                                                                },
                                                                                {
                                                                                  "ColumnRef": {
                                                                                    "fields": [
                                                                                      {
                                                                                        "String": {
                                                                                          "sval": "t2",
                                                                                        },
                                                                                      },
                                                                                      {
                                                                                        "String": {
                                                                                          "sval": "q2",
                                                                                        },
                                                                                      },
                                                                                    ],
                                                                                    "location": 289,
                                                                                  },
                                                                                },
                                                                              ],
                                                                              "location": 274,
                                                                              "op": "IS_GREATEST",
                                                                            },
                                                                          },
                                                                        },
                                                                      },
                                                                    ],
                                                                  },
                                                                },
                                                              },
                                                            },
                                                          },
                                                        },
                                                        {
                                                          "SubLink": {
                                                            "location": 340,
                                                            "subLinkType": "EXPR_SUBLINK",
                                                            "subselect": {
                                                              "SelectStmt": {
                                                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                                                "op": "SETOP_NONE",
                                                                "targetList": [
                                                                  {
                                                                    "ResTarget": {
                                                                      "location": 348,
                                                                      "val": {
                                                                        "A_Expr": {
                                                                          "kind": "AEXPR_OP",
                                                                          "lexpr": {
                                                                            "ColumnRef": {
                                                                              "fields": [
                                                                                {
                                                                                  "String": {
                                                                                    "sval": "v",
                                                                                  },
                                                                                },
                                                                                {
                                                                                  "String": {
                                                                                    "sval": "id",
                                                                                  },
                                                                                },
                                                                              ],
                                                                              "location": 348,
                                                                            },
                                                                          },
                                                                          "location": 352,
                                                                          "name": [
                                                                            {
                                                                              "String": {
                                                                                "sval": "=",
                                                                              },
                                                                            },
                                                                          ],
                                                                          "rexpr": {
                                                                            "A_Const": {
                                                                              "ival": {},
                                                                              "location": 353,
                                                                            },
                                                                          },
                                                                        },
                                                                      },
                                                                    },
                                                                  },
                                                                ],
                                                              },
                                                            },
                                                          },
                                                        },
                                                      ],
                                                      "boolop": "AND_EXPR",
                                                      "location": 336,
                                                    },
                                                  },
                                                },
                                              },
                                              "testexpr": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "q1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 181,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 100,
                                      "val": {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "A_Star": {},
                                            },
                                          ],
                                          "location": 100,
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 55,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 55,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 390,
                            },
                          },
                          "location": 396,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ss",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "q2",
                                  },
                                },
                              ],
                              "location": 398,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2596 1`] = `
[
  "select f1,g from int4_tbl a, (select f1 as g) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 17,
                  "relname": "int4_tbl",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 37,
                            "name": "g",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "f1",
                                    },
                                  },
                                ],
                                "location": 37,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "g",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2601 1`] = `
[
  "select f1,g from int4_tbl a right join lateral generate_series(0, a.f1) g on true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_RIGHT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 17,
                      "relname": "int4_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 77,
                    },
                  },
                  "rarg": {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {},
                                        "location": 63,
                                      },
                                    },
                                    {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 66,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                      "lateral": true,
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "g",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2604 1`] = `
[
  "select * from
  int8_tbl x cross join (int4_tbl x cross join lateral (select x.f1) ss)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "inh": true,
                      "location": 16,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "x",
                          },
                          "inh": true,
                          "location": 39,
                          "relname": "int4_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 77,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                        ],
                                        "location": 77,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2607 1`] = `
[
  "select 1 from tenk1 a, lateral (select max(a.unique1) from int4_tbl b) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "b",
                            },
                            "inh": true,
                            "location": 59,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 39,
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "unique1",
                                          },
                                        },
                                      ],
                                      "location": 43,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "max",
                                    },
                                  },
                                ],
                                "location": 39,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2614 1`] = `
[
  "update xx1 set x2 = f1 from (select * from int4_tbl where f1 = x1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 43,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 36,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 36,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 58,
                            },
                          },
                          "location": 61,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "xx1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 15,
                  "name": "x2",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2617 1`] = `
[
  "update xx1 set x2 = f1 from lateral (select * from int4_tbl where f1 = x1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 51,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 44,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 44,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 66,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "xx1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 15,
                  "name": "x2",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2619 1`] = `
[
  "update xx1 set x2 = f1 from xx1, lateral (select * from int4_tbl where f1 = x1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 28,
                  "relname": "xx1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 56,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 49,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 49,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                          "location": 74,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "xx1",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 15,
                  "name": "x2",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2622 1`] = `
[
  "delete from xx1 using (select * from int4_tbl where f1 = x1) ss",
  {
    "stmts": [
      {
        "stmt": {
          "DeleteStmt": {
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "xx1",
              "relpersistence": "p",
            },
            "usingClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 37,
                            "relname": "int4_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 30,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 30,
                              },
                            },
                          },
                        },
                      ],
                      "whereClause": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                              ],
                              "location": 52,
                            },
                          },
                          "location": 55,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x1",
                                  },
                                },
                              ],
                              "location": 57,
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2630 1`] = `
[
  "create table join_pt1 (a int, b int, c varchar) partition by range(a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 48,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 67,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "join_pt1",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "varchar",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2638 1`] = `
[
  "select t1.b, ss.phv from join_ut1 t1 left join lateral
              (select t2.a as t2a, t3.a t3a, least(t1.a, t2.a, t3.a) phv
					  from join_pt1 t2 join join_ut1 t3 on t2.a = t3.b) ss
              on t1.a = ss.t2a order by t1.a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 25,
                      "relname": "join_ut1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 205,
                        },
                      },
                      "location": 210,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ss",
                              },
                            },
                            {
                              "String": {
                                "sval": "t2a",
                              },
                            },
                          ],
                          "location": 212,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "JoinExpr": {
                                "jointype": "JOIN_INNER",
                                "larg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t2",
                                    },
                                    "inh": true,
                                    "location": 140,
                                    "relname": "join_pt1",
                                    "relpersistence": "p",
                                  },
                                },
                                "quals": {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 172,
                                      },
                                    },
                                    "location": 177,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "t3",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 179,
                                      },
                                    },
                                  },
                                },
                                "rarg": {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 157,
                                    "relname": "join_ut1",
                                    "relpersistence": "p",
                                  },
                                },
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 77,
                                "name": "t2a",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 77,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 90,
                                "name": "t3a",
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "t3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 90,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 100,
                                "name": "phv",
                                "val": {
                                  "MinMaxExpr": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t1",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 106,
                                        },
                                      },
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t2",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 112,
                                        },
                                      },
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "t3",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 118,
                                        },
                                      },
                                    ],
                                    "location": 100,
                                    "op": "IS_LEAST",
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 228,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "phv",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2647 1`] = `
[
  "drop table join_pt1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "join_pt1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2656 1`] = `
[
  "create table fkest (x integer, x10 integer, x10b integer, x100 integer)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "fkest",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "x",
                  "is_local": true,
                  "location": 20,
                  "typeName": {
                    "location": 22,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "x10",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "x10b",
                  "is_local": true,
                  "location": 44,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "x100",
                  "is_local": true,
                  "location": 58,
                  "typeName": {
                    "location": 63,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2661 1`] = `
[
  "explain (costs off)
select * from fkest f1
  join fkest f2 on (f1.x = f2.x and f1.x10 = f2.x10b and f1.x100 = f2.x100)
  join fkest f3 on f1.x = f3.x
  where f1.x100 = 2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_INNER",
                          "larg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "f1",
                              },
                              "inh": true,
                              "location": 34,
                              "relname": "fkest",
                              "relpersistence": "p",
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                        ],
                                        "location": 63,
                                      },
                                    },
                                    "location": 68,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x",
                                            },
                                          },
                                        ],
                                        "location": 70,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x10",
                                            },
                                          },
                                        ],
                                        "location": 79,
                                      },
                                    },
                                    "location": 86,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x10b",
                                            },
                                          },
                                        ],
                                        "location": 88,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f1",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x100",
                                            },
                                          },
                                        ],
                                        "location": 100,
                                      },
                                    },
                                    "location": 108,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "x100",
                                            },
                                          },
                                        ],
                                        "location": 110,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 75,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "f2",
                              },
                              "inh": true,
                              "location": 50,
                              "relname": "fkest",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 138,
                            },
                          },
                          "location": 143,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "f3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "f3",
                          },
                          "inh": true,
                          "location": 126,
                          "relname": "fkest",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f1",
                            },
                          },
                          {
                            "String": {
                              "sval": "x100",
                            },
                          },
                        ],
                        "location": 158,
                      },
                    },
                    "location": 166,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 2,
                        },
                        "location": 168,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2667 1`] = `
[
  "alter table fkest add constraint fk
  foreign key (x, x10b, x100) references fkest (x, x10, x100)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "Constraint": {
                      "conname": "fk",
                      "contype": "CONSTR_FOREIGN",
                      "fk_attrs": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "String": {
                            "sval": "x10b",
                          },
                        },
                        {
                          "String": {
                            "sval": "x100",
                          },
                        },
                      ],
                      "fk_del_action": "a",
                      "fk_matchtype": "s",
                      "fk_upd_action": "a",
                      "initially_valid": true,
                      "location": 22,
                      "pk_attrs": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                        {
                          "String": {
                            "sval": "x10",
                          },
                        },
                        {
                          "String": {
                            "sval": "x100",
                          },
                        },
                      ],
                      "pktable": {
                        "inh": true,
                        "location": 77,
                        "relname": "fkest",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AddConstraint",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fkest",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2684 1`] = `
[
  "create table fkest (a int, b int, c int unique, primary key(a,b))",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "fkest",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 20,
                  "typeName": {
                    "location": 22,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_UNIQUE",
                        "location": 40,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 34,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "Constraint": {
                  "contype": "CONSTR_PRIMARY",
                  "keys": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                    {
                      "String": {
                        "sval": "b",
                      },
                    },
                  ],
                  "location": 48,
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2687 1`] = `
[
  "insert into fkest select x/10, x%10, x from generate_series(1,1000) x",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fkest",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "x",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 60,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1000,
                                        },
                                        "location": 62,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 44,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 25,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 25,
                            },
                          },
                          "location": 26,
                          "name": [
                            {
                              "String": {
                                "sval": "/",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 27,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 31,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 31,
                            },
                          },
                          "location": 32,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 33,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2690 1`] = `
[
  "alter table fkest1
  add constraint fkest1_a_b_fkey foreign key (a,b) references fkest",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "Constraint": {
                      "conname": "fkest1_a_b_fkey",
                      "contype": "CONSTR_FOREIGN",
                      "fk_attrs": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "fk_del_action": "a",
                      "fk_matchtype": "s",
                      "fk_upd_action": "a",
                      "initially_valid": true,
                      "location": 25,
                      "pktable": {
                        "inh": true,
                        "location": 81,
                        "relname": "fkest",
                        "relpersistence": "p",
                      },
                    },
                  },
                  "subtype": "AT_AddConstraint",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fkest1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2693 1`] = `
[
  "analyze fkest",
  {
    "stmts": [
      {
        "stmt": {
          "VacuumStmt": {
            "rels": [
              {
                "VacuumRelation": {
                  "relation": {
                    "inh": true,
                    "location": 8,
                    "relname": "fkest",
                    "relpersistence": "p",
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2696 1`] = `
[
  "explain (costs off)
select *
from fkest f
  left join fkest1 f1 on f.a = f1.a and f.b = f1.b
  left join fkest1 f2 on f.a = f2.a and f.b = f2.b
  left join fkest1 f3 on f.a = f3.a and f.b = f3.b
where f.c = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "JoinExpr": {
                          "jointype": "JOIN_LEFT",
                          "larg": {
                            "JoinExpr": {
                              "jointype": "JOIN_LEFT",
                              "larg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "f",
                                  },
                                  "inh": true,
                                  "location": 34,
                                  "relname": "fkest",
                                  "relpersistence": "p",
                                },
                              },
                              "quals": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 67,
                                          },
                                        },
                                        "location": 71,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "a",
                                                },
                                              },
                                            ],
                                            "location": 73,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 82,
                                          },
                                        },
                                        "location": 86,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "f1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "b",
                                                },
                                              },
                                            ],
                                            "location": 88,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 78,
                                },
                              },
                              "rarg": {
                                "RangeVar": {
                                  "alias": {
                                    "aliasname": "f1",
                                  },
                                  "inh": true,
                                  "location": 54,
                                  "relname": "fkest1",
                                  "relpersistence": "p",
                                },
                              },
                            },
                          },
                          "quals": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 118,
                                      },
                                    },
                                    "location": 122,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "a",
                                            },
                                          },
                                        ],
                                        "location": 124,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 133,
                                      },
                                    },
                                    "location": 137,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "f2",
                                            },
                                          },
                                          {
                                            "String": {
                                              "sval": "b",
                                            },
                                          },
                                        ],
                                        "location": 139,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 129,
                            },
                          },
                          "rarg": {
                            "RangeVar": {
                              "alias": {
                                "aliasname": "f2",
                              },
                              "inh": true,
                              "location": 105,
                              "relname": "fkest1",
                              "relpersistence": "p",
                            },
                          },
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 169,
                                  },
                                },
                                "location": 173,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 175,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 184,
                                  },
                                },
                                "location": 188,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f3",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                    ],
                                    "location": 190,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 180,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "f3",
                          },
                          "inh": true,
                          "location": 156,
                          "relname": "fkest1",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 201,
                      },
                    },
                    "location": 205,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 207,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2714 1`] = `
[
  "insert into j1 values(1),(2),(3)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "j1",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 22,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 26,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 30,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2718 1`] = `
[
  "analyze j1",
  {
    "stmts": [
      {
        "stmt": {
          "VacuumStmt": {
            "rels": [
              {
                "VacuumRelation": {
                  "relation": {
                    "inh": true,
                    "location": 8,
                    "relname": "j1",
                    "relpersistence": "p",
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2723 1`] = `
[
  "explain (verbose, costs off)
select * from j1 inner join j2 on j1.id = j2.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2727 1`] = `
[
  "explain (verbose, costs off)
select * from j1 inner join j2 on j1.id > j2.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": ">",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2731 1`] = `
[
  "explain (verbose, costs off)
select * from j1 inner join j3 on j1.id = j3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j3",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2735 1`] = `
[
  "explain (verbose, costs off)
select * from j1 left join j2 on j1.id = j2.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                          "location": 68,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 70,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 56,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2739 1`] = `
[
  "explain (verbose, costs off)
select * from j1 right join j2 on j1.id = j2.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_RIGHT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2743 1`] = `
[
  "explain (verbose, costs off)
select * from j1 full join j2 on j1.id = j2.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_FULL",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                          "location": 68,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 70,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 56,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2747 1`] = `
[
  "explain (verbose, costs off)
select * from j1 cross join j2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2751 1`] = `
[
  "explain (verbose, costs off)
select * from j1 natural join j2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "isNatural": true,
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 59,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2755 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join (select distinct id from j3) j3 on j1.id = j3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 92,
                            },
                          },
                          "location": 98,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 100,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "j3",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "distinctClause": [
                                {},
                              ],
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 82,
                                    "relname": "j3",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 74,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 74,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2760 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join (select id from j3 group by id) j3 on j1.id = j3.id",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                          "location": 101,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j3",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id",
                                  },
                                },
                              ],
                              "location": 103,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "j3",
                          },
                          "subquery": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 73,
                                    "relname": "j3",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "groupClause": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "id",
                                        },
                                      },
                                    ],
                                    "location": 85,
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 65,
                                    "val": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "id",
                                            },
                                          },
                                        ],
                                        "location": 65,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2764 1`] = `
[
  "drop table j1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "j1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2784 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join j2 on j1.id1 = j2.id1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 70,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2789 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 63,
                                  },
                                },
                                "location": 70,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 72,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                                "location": 90,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 92,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 79,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2795 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join j2 on j1.id1 = j2.id1 where j1.id2 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 70,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "j1",
                            },
                          },
                          {
                            "String": {
                              "sval": "id2",
                            },
                          },
                        ],
                        "location": 85,
                      },
                    },
                    "location": 92,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 94,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2800 1`] = `
[
  "explain (verbose, costs off)
select * from j1
left join j2 on j1.id1 = j2.id1 where j1.id2 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_LEFT",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                          "location": 69,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 56,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "j1",
                            },
                          },
                          {
                            "String": {
                              "sval": "id2",
                            },
                          },
                        ],
                        "location": 84,
                      },
                    },
                    "location": 91,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 93,
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2804 1`] = `
[
  "create unique index j1_id2_idx on j1(id2) where id2 is not null",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "j1_id2_idx",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "id2",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 34,
              "relname": "j1",
              "relpersistence": "p",
            },
            "unique": true,
            "whereClause": {
              "NullTest": {
                "arg": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "id2",
                        },
                      },
                    ],
                    "location": 48,
                  },
                },
                "location": 52,
                "nulltesttype": "IS_NOT_NULL",
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2807 1`] = `
[
  "explain (verbose, costs off)
select * from j1
inner join j2 on j1.id2 = j2.id2",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 43,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id2",
                                  },
                                },
                              ],
                              "location": 63,
                            },
                          },
                          "location": 70,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id2",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 57,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2811 1`] = `
[
  "drop index j1_id2_idx",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "j1_id2_idx",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_INDEX",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2821 1`] = `
[
  "create index j1_id1_idx on j1 (id1) where id1 % 1000 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "j1_id1_idx",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "id1",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 27,
              "relname": "j1",
              "relpersistence": "p",
            },
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "id1",
                            },
                          },
                        ],
                        "location": 42,
                      },
                    },
                    "location": 46,
                    "name": [
                      {
                        "String": {
                          "sval": "%",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "ival": {
                          "ival": 1000,
                        },
                        "location": 48,
                      },
                    },
                  },
                },
                "location": 53,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 55,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2825 1`] = `
[
  "insert into j2 values(1,2)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "j2",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 22,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 24,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2828 1`] = `
[
  "explain (costs off) select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 34,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                                "location": 61,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 63,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                                "location": 81,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 70,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 48,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 96,
                                },
                              },
                              "location": 103,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 105,
                                },
                              },
                            },
                          },
                          "location": 110,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 112,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 118,
                                },
                              },
                              "location": 125,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 127,
                                },
                              },
                            },
                          },
                          "location": 132,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 134,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 114,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2832 1`] = `
[
  "select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "j1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 34,
                              },
                            },
                            "location": 41,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 43,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 54,
                              },
                            },
                            "location": 61,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 50,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 28,
                      "relname": "j2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 85,
                            },
                          },
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 92,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 98,
                            },
                          },
                          "location": 105,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 107,
                            },
                          },
                        },
                      },
                      "location": 112,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 114,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 94,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2837 1`] = `
[
  "explain (costs off) select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1 and j2.id1 = any (array[1])",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 34,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                                "location": 61,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 63,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                                "location": 81,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 70,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 48,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 96,
                                },
                              },
                              "location": 103,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 105,
                                },
                              },
                            },
                          },
                          "location": 110,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 112,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 118,
                                },
                              },
                              "location": 125,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 127,
                                },
                              },
                            },
                          },
                          "location": 132,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 134,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP_ANY",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 140,
                            },
                          },
                          "location": 147,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_ArrayExpr": {
                              "elements": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 160,
                                  },
                                },
                              ],
                              "location": 154,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 114,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2841 1`] = `
[
  "select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1 and j2.id1 = any (array[1])",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "j1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 34,
                              },
                            },
                            "location": 41,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 43,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 54,
                              },
                            },
                            "location": 61,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 50,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 28,
                      "relname": "j2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 85,
                            },
                          },
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 92,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 98,
                            },
                          },
                          "location": 105,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 107,
                            },
                          },
                        },
                      },
                      "location": 112,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 114,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP_ANY",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "j2",
                              },
                            },
                            {
                              "String": {
                                "sval": "id1",
                              },
                            },
                          ],
                          "location": 120,
                        },
                      },
                      "location": 127,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_ArrayExpr": {
                          "elements": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 140,
                              },
                            },
                          ],
                          "location": 134,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 94,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2846 1`] = `
[
  "explain (costs off) select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1 and j2.id1 >= any (array[1,5])",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 34,
                          "relname": "j1",
                          "relpersistence": "p",
                        },
                      },
                      "quals": {
                        "BoolExpr": {
                          "args": [
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 54,
                                  },
                                },
                                "location": 61,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id1",
                                        },
                                      },
                                    ],
                                    "location": 63,
                                  },
                                },
                              },
                            },
                            {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j1",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                                "location": 81,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "j2",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "id2",
                                        },
                                      },
                                    ],
                                    "location": 83,
                                  },
                                },
                              },
                            },
                          ],
                          "boolop": "AND_EXPR",
                          "location": 70,
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "inh": true,
                          "location": 48,
                          "relname": "j2",
                          "relpersistence": "p",
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j1",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 96,
                                },
                              },
                              "location": 103,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 105,
                                },
                              },
                            },
                          },
                          "location": 110,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 112,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j2",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "id1",
                                      },
                                    },
                                  ],
                                  "location": 118,
                                },
                              },
                              "location": 125,
                              "name": [
                                {
                                  "String": {
                                    "sval": "%",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1000,
                                  },
                                  "location": 127,
                                },
                              },
                            },
                          },
                          "location": 132,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 134,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP_ANY",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 140,
                            },
                          },
                          "location": 147,
                          "name": [
                            {
                              "String": {
                                "sval": ">=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_ArrayExpr": {
                              "elements": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 161,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 5,
                                    },
                                    "location": 163,
                                  },
                                },
                              ],
                              "location": 155,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 114,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2850 1`] = `
[
  "select * from j1
inner join j2 on j1.id1 = j2.id1 and j1.id2 = j2.id2
where j1.id1 % 1000 = 1 and j2.id1 % 1000 = 1 and j2.id1 >= any (array[1,5])",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 14,
                      "relname": "j1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "BoolExpr": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 34,
                              },
                            },
                            "location": 41,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id1",
                                    },
                                  },
                                ],
                                "location": 43,
                              },
                            },
                          },
                        },
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j1",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 54,
                              },
                            },
                            "location": 61,
                            "name": [
                              {
                                "String": {
                                  "sval": "=",
                                },
                              },
                            ],
                            "rexpr": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j2",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "id2",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                          },
                        },
                      ],
                      "boolop": "AND_EXPR",
                      "location": 50,
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "inh": true,
                      "location": 28,
                      "relname": "j2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                          "location": 83,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 85,
                            },
                          },
                        },
                      },
                      "location": 90,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 92,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "j2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "id1",
                                  },
                                },
                              ],
                              "location": 98,
                            },
                          },
                          "location": 105,
                          "name": [
                            {
                              "String": {
                                "sval": "%",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1000,
                              },
                              "location": 107,
                            },
                          },
                        },
                      },
                      "location": 112,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 114,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP_ANY",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "j2",
                              },
                            },
                            {
                              "String": {
                                "sval": "id1",
                              },
                            },
                          ],
                          "location": 120,
                        },
                      },
                      "location": 127,
                      "name": [
                        {
                          "String": {
                            "sval": ">=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_ArrayExpr": {
                          "elements": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 141,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 5,
                                },
                                "location": 143,
                              },
                            },
                          ],
                          "location": 135,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 94,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2863 1`] = `
[
  "explain (verbose, costs off)
select t1.unique1, t2.hundred
from onek t1, tenk1 t2
where exists (select 1 from tenk1 t3
              where t3.thousand = t1.unique1 and t3.tenthous = t2.hundred)
      and t1.unique1 < 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 73,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 48,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "hundred",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 88,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "alias": {
                                      "aliasname": "t3",
                                    },
                                    "inh": true,
                                    "location": 110,
                                    "relname": "tenk1",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 103,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 103,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "thousand",
                                                },
                                              },
                                            ],
                                            "location": 139,
                                          },
                                        },
                                        "location": 151,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 153,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "tenthous",
                                                },
                                              },
                                            ],
                                            "location": 168,
                                          },
                                        },
                                        "location": 180,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "hundred",
                                                },
                                              },
                                            ],
                                            "location": 182,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 164,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 204,
                            },
                          },
                          "location": 215,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 217,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 200,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2871 1`] = `
[
  "create table j3 as select unique1, tenthous from onek",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "j3",
                "relpersistence": "p",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 49,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 26,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 26,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2875 1`] = `
[
  "explain (verbose, costs off)
select t1.unique1, t2.hundred
from onek t1, tenk1 t2
where exists (select 1 from j3
              where j3.unique1 = t1.unique1 and j3.tenthous = t2.hundred)
      and t1.unique1 < 1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 64,
                      "relname": "onek",
                      "relpersistence": "p",
                    },
                  },
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 73,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 48,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "hundred",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "SubLink": {
                          "location": 88,
                          "subLinkType": "EXISTS_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "fromClause": [
                                {
                                  "RangeVar": {
                                    "inh": true,
                                    "location": 110,
                                    "relname": "j3",
                                    "relpersistence": "p",
                                  },
                                },
                              ],
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 103,
                                    "val": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 103,
                                      },
                                    },
                                  },
                                },
                              ],
                              "whereClause": {
                                "BoolExpr": {
                                  "args": [
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "j3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 133,
                                          },
                                        },
                                        "location": 144,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t1",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "unique1",
                                                },
                                              },
                                            ],
                                            "location": 146,
                                          },
                                        },
                                      },
                                    },
                                    {
                                      "A_Expr": {
                                        "kind": "AEXPR_OP",
                                        "lexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "j3",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "tenthous",
                                                },
                                              },
                                            ],
                                            "location": 161,
                                          },
                                        },
                                        "location": 173,
                                        "name": [
                                          {
                                            "String": {
                                              "sval": "=",
                                            },
                                          },
                                        ],
                                        "rexpr": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "t2",
                                                },
                                              },
                                              {
                                                "String": {
                                                  "sval": "hundred",
                                                },
                                              },
                                            ],
                                            "location": 175,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                  "boolop": "AND_EXPR",
                                  "location": 157,
                                },
                              },
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "unique1",
                                  },
                                },
                              ],
                              "location": 197,
                            },
                          },
                          "location": 208,
                          "name": [
                            {
                              "String": {
                                "sval": "<",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 210,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 193,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`join.sql > line 2882 1`] = `
[
  "drop table j3",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "j3",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
