// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`tablespace.sql > line 2 1`] = `
[
  "CREATE TABLESPACE regress_tblspace LOCATION 'relative'",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableSpaceStmt": {
            "location": "relative",
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 5 1`] = `
[
  " -- fail

-- as a special developer-only option to allow us to use tablespaces
-- with streaming replication on the same server, an empty location
-- can be allowed as a way to say that the tablespace should be created
-- as a directory in pg_tblspc, rather than being a symlink
SET allow_in_place_tablespaces = true",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 312,
                  "sval": {
                    "sval": "true",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "allow_in_place_tablespaces",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 14 1`] = `
[
  "CREATE TABLESPACE regress_tblspacewith LOCATION '' WITH (some_nonexistent_parameter = true)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableSpaceStmt": {
            "location": "",
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "true",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "some_nonexistent_parameter",
                  "location": 57,
                },
              },
            ],
            "tablespacename": "regress_tblspacewith",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 14 2`] = `
[
  " -- fail
CREATE TABLESPACE regress_tblspacewith LOCATION '' WITH (random_page_cost = 3.0)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableSpaceStmt": {
            "location": "",
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "Float": {
                      "fval": "3.0",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "random_page_cost",
                  "location": 66,
                },
              },
            ],
            "tablespacename": "regress_tblspacewith",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 15 1`] = `
[
  " -- ok

-- check to see the parameter was used
SELECT spcoptions FROM pg_tablespace WHERE spcname = 'regress_tblspacewith'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 70,
                  "relname": "pg_tablespace",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 54,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "spcoptions",
                          },
                        },
                      ],
                      "location": 54,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "spcname",
                        },
                      },
                    ],
                    "location": 90,
                  },
                },
                "location": 98,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 100,
                    "sval": {
                      "sval": "regress_tblspacewith",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 21 1`] = `
[
  "DROP TABLESPACE regress_tblspacewith",
  {
    "stmts": [
      {
        "stmt": {
          "DropTableSpaceStmt": {
            "tablespacename": "regress_tblspacewith",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 25 1`] = `
[
  "SELECT regexp_replace(pg_tablespace_location(oid), '(pg_tblspc)/(\\d+)', '\\1/NNN')
  FROM pg_tablespace  WHERE spcname = 'regress_tblspace'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 89,
                  "relname": "pg_tablespace",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "FuncCall": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "oid",
                                      },
                                    },
                                  ],
                                  "location": 45,
                                },
                              },
                            ],
                            "funcformat": "COERCE_EXPLICIT_CALL",
                            "funcname": [
                              {
                                "String": {
                                  "sval": "pg_tablespace_location",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "A_Const": {
                            "location": 51,
                            "sval": {
                              "sval": "(pg_tblspc)/(\\d+)",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 72,
                            "sval": {
                              "sval": "\\1/NNN",
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "regexp_replace",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "spcname",
                        },
                      },
                    ],
                    "location": 110,
                  },
                },
                "location": 118,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 120,
                    "sval": {
                      "sval": "regress_tblspace",
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 29 1`] = `
[
  "ALTER TABLESPACE regress_tblspace SET (random_page_cost = 1.0, seq_page_cost = 1.1)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableSpaceOptionsStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "Float": {
                      "fval": "1.0",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "random_page_cost",
                  "location": 39,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "Float": {
                      "fval": "1.1",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "seq_page_cost",
                  "location": 63,
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 30 1`] = `
[
  "  -- fail
ALTER TABLESPACE regress_tblspace RESET (random_page_cost = 2.0)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableSpaceOptionsStmt": {
            "isReset": true,
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "Float": {
                      "fval": "2.0",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "random_page_cost",
                  "location": 51,
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 31 1`] = `
[
  " -- fail
ALTER TABLESPACE regress_tblspace RESET (random_page_cost, effective_io_concurrency)",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableSpaceOptionsStmt": {
            "isReset": true,
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "random_page_cost",
                  "location": 50,
                },
              },
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "effective_io_concurrency",
                  "location": 68,
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 32 1`] = `
[
  " -- ok

-- REINDEX (TABLESPACE)
-- catalogs and system tablespaces
-- system catalog, fail
REINDEX (TABLESPACE regress_tblspace) TABLE pg_am",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_TABLE",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "regress_tblspace",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 100,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 135,
              "relname": "pg_am",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 40 1`] = `
[
  "REINDEX (TABLESPACE regress_tblspace) TABLE pg_authid",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_TABLE",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "regress_tblspace",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 9,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 44,
              "relname": "pg_authid",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 43 1`] = `
[
  "REINDEX (TABLESPACE regress_tblspace) INDEX pg_toast.pg_toast_1260_index",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_INDEX",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "regress_tblspace",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 9,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 44,
              "relname": "pg_toast_1260_index",
              "relpersistence": "p",
              "schemaname": "pg_toast",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 48 1`] = `
[
  "REINDEX (TABLESPACE pg_global) TABLE pg_authid",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_TABLE",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "pg_global",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 9,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 37,
              "relname": "pg_authid",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 52 1`] = `
[
  "CREATE TABLE regress_tblspace_test_tbl (num1 bigint, num2 double precision, t text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "regress_tblspace_test_tbl",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "num1",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "num2",
                  "is_local": true,
                  "location": 53,
                  "typeName": {
                    "location": 58,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "t",
                  "is_local": true,
                  "location": 76,
                  "typeName": {
                    "location": 78,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 54 1`] = `
[
  "  SELECT round(random()*100), random(), 'text'
  FROM generate_series(1, 10) s(i)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "s",
                    "colnames": [
                      {
                        "String": {
                          "sval": "i",
                        },
                      },
                    ],
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 70,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 10,
                                    },
                                    "location": 73,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 54,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Expr": {
                            "kind": "AEXPR_OP",
                            "lexpr": {
                              "FuncCall": {
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "random",
                                    },
                                  },
                                ],
                                "location": 15,
                              },
                            },
                            "location": 23,
                            "name": [
                              {
                                "String": {
                                  "sval": "*",
                                },
                              },
                            ],
                            "rexpr": {
                              "A_Const": {
                                "ival": {
                                  "ival": 100,
                                },
                                "location": 24,
                              },
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "round",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 30,
                  "val": {
                    "FuncCall": {
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "random",
                          },
                        },
                      ],
                      "location": 30,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 40,
                  "val": {
                    "A_Const": {
                      "location": 40,
                      "sval": {
                        "sval": "text",
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 58 1`] = `
[
  "REINDEX (TABLESPACE pg_global) INDEX regress_tblspace_test_tbl_idx",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_INDEX",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "pg_global",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 9,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 37,
              "relname": "regress_tblspace_test_tbl_idx",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 62 1`] = `
[
  "BEGIN",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_BEGIN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 67 1`] = `
[
  "SELECT c.relname FROM pg_class c, pg_tablespace s
  WHERE c.reltablespace = s.oid AND s.spcname = 'regress_tblspace'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "c",
                  },
                  "inh": true,
                  "location": 22,
                  "relname": "pg_class",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "inh": true,
                  "location": 34,
                  "relname": "pg_tablespace",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                        {
                          "String": {
                            "sval": "relname",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "reltablespace",
                              },
                            },
                          ],
                          "location": 58,
                        },
                      },
                      "location": 74,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "oid",
                              },
                            },
                          ],
                          "location": 76,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "s",
                              },
                            },
                            {
                              "String": {
                                "sval": "spcname",
                              },
                            },
                          ],
                          "location": 86,
                        },
                      },
                      "location": 96,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "location": 98,
                          "sval": {
                            "sval": "regress_tblspace",
                          },
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 82,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 92 1`] = `
[
  "ALTER INDEX regress_tblspace_test_tbl_idx SET TABLESPACE pg_default",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "name": "pg_default",
                  "subtype": "AT_SetTableSpace",
                },
              },
            ],
            "objtype": "OBJECT_INDEX",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "regress_tblspace_test_tbl_idx",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 114 1`] = `
[
  "CREATE TABLE tbspace_reindex_part (c1 int, c2 int) PARTITION BY RANGE (c1)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 51,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 71,
                    "name": "c1",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_RANGE",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "tbspace_reindex_part",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "c1",
                  "is_local": true,
                  "location": 35,
                  "typeName": {
                    "location": 38,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c2",
                  "is_local": true,
                  "location": 43,
                  "typeName": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 122 1`] = `
[
  "CREATE TABLE tbspace_reindex_part_10 PARTITION OF tbspace_reindex_part
   FOR VALUES FROM (10) TO (20) PARTITION BY list (c2)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 50,
                  "relname": "tbspace_reindex_part",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "partbound": {
              "location": 85,
              "lowerdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 10,
                    },
                    "location": 91,
                  },
                },
              ],
              "strategy": "r",
              "upperdatums": [
                {
                  "A_Const": {
                    "ival": {
                      "ival": 20,
                    },
                    "location": 99,
                  },
                },
              ],
            },
            "partspec": {
              "location": 103,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 122,
                    "name": "c2",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "tbspace_reindex_part_10",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 125 1`] = `
[
  "CREATE INDEX tbspace_reindex_part_index ON ONLY tbspace_reindex_part (c1)",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "tbspace_reindex_part_index",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "c1",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "location": 48,
              "relname": "tbspace_reindex_part",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 129 1`] = `
[
  "CREATE INDEX tbspace_reindex_part_index_10 ON ONLY tbspace_reindex_part_10 (c1)",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "tbspace_reindex_part_index_10",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "c1",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "location": 51,
              "relname": "tbspace_reindex_part_10",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 139 1`] = `
[
  "CREATE TEMP TABLE reindex_temp_before AS
  SELECT oid, relname, relfilenode, reltablespace
  FROM pg_class
    WHERE relname ~ 'tbspace_reindex_part_index'",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 18,
                "relname": "reindex_temp_before",
                "relpersistence": "t",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 98,
                      "relname": "pg_class",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 50,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "oid",
                              },
                            },
                          ],
                          "location": 50,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "relname",
                              },
                            },
                          ],
                          "location": 55,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 64,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "relfilenode",
                              },
                            },
                          ],
                          "location": 64,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 77,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "reltablespace",
                              },
                            },
                          ],
                          "location": 77,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "relname",
                            },
                          },
                        ],
                        "location": 117,
                      },
                    },
                    "location": 125,
                    "name": [
                      {
                        "String": {
                          "sval": "~",
                        },
                      },
                    ],
                    "rexpr": {
                      "A_Const": {
                        "location": 127,
                        "sval": {
                          "sval": "tbspace_reindex_part_index",
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 146 1`] = `
[
  "SELECT b.relname,
       CASE WHEN a.relfilenode = b.relfilenode THEN 'relfilenode is unchanged'
       ELSE 'relfilenode has changed' END AS filenode,
       CASE WHEN a.reltablespace = b.reltablespace THEN 'reltablespace is unchanged'
       ELSE 'reltablespace has changed' END AS tbspace
  FROM reindex_temp_before b JOIN pg_class a ON b.relname = a.relname
  ORDER BY 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 299,
                      "relname": "reindex_temp_before",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                            {
                              "String": {
                                "sval": "relname",
                              },
                            },
                          ],
                          "location": 340,
                        },
                      },
                      "location": 350,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                            {
                              "String": {
                                "sval": "relname",
                              },
                            },
                          ],
                          "location": 352,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "a",
                      },
                      "inh": true,
                      "location": 326,
                      "relname": "pg_class",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 373,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "relname",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 25,
                  "name": "filenode",
                  "val": {
                    "CaseExpr": {
                      "args": [
                        {
                          "CaseWhen": {
                            "expr": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "relfilenode",
                                        },
                                      },
                                    ],
                                    "location": 35,
                                  },
                                },
                                "location": 49,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "relfilenode",
                                        },
                                      },
                                    ],
                                    "location": 51,
                                  },
                                },
                              },
                            },
                            "location": 30,
                            "result": {
                              "A_Const": {
                                "location": 70,
                                "sval": {
                                  "sval": "relfilenode is unchanged",
                                },
                              },
                            },
                          },
                        },
                      ],
                      "defresult": {
                        "A_Const": {
                          "location": 109,
                          "sval": {
                            "sval": "relfilenode has changed",
                          },
                        },
                      },
                      "location": 25,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 159,
                  "name": "tbspace",
                  "val": {
                    "CaseExpr": {
                      "args": [
                        {
                          "CaseWhen": {
                            "expr": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "reltablespace",
                                        },
                                      },
                                    ],
                                    "location": 169,
                                  },
                                },
                                "location": 185,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "b",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "reltablespace",
                                        },
                                      },
                                    ],
                                    "location": 187,
                                  },
                                },
                              },
                            },
                            "location": 164,
                            "result": {
                              "A_Const": {
                                "location": 208,
                                "sval": {
                                  "sval": "reltablespace is unchanged",
                                },
                              },
                            },
                          },
                        },
                      ],
                      "defresult": {
                        "A_Const": {
                          "location": 249,
                          "sval": {
                            "sval": "reltablespace has changed",
                          },
                        },
                      },
                      "location": 159,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 156 1`] = `
[
  "CREATE SCHEMA testschema",
  {
    "stmts": [
      {
        "stmt": {
          "CreateSchemaStmt": {
            "schemaname": "testschema",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 159 1`] = `
[
  "CREATE TABLE testschema.foo (i int) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "foo",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 163 1`] = `
[
  "INSERT INTO testschema.foo VALUES(1)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "foo",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 34,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 167 1`] = `
[
  "CREATE TABLE testschema.asselect TABLESPACE regress_tblspace AS SELECT 1",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "asselect",
                "relpersistence": "p",
                "schemaname": "testschema",
              },
              "tableSpaceName": "regress_tblspace",
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 71,
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 71,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 171 1`] = `
[
  "PREPARE selectsource(int) AS SELECT $1",
  {
    "stmts": [
      {
        "stmt": {
          "PrepareStmt": {
            "argtypes": [
              {
                "TypeName": {
                  "location": 21,
                  "names": [
                    {
                      "String": {
                        "sval": "pg_catalog",
                      },
                    },
                    {
                      "String": {
                        "sval": "int4",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
            ],
            "name": "selectsource",
            "query": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ParamRef": {
                          "location": 36,
                          "number": 1,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 178 1`] = `
[
  "CREATE INDEX foo_idx on testschema.foo(i) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "foo_idx",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "i",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 24,
              "relname": "foo",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableSpace": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 213 1`] = `
[
  "SELECT relname, spcname FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON (c.relnamespace = n.oid)
    LEFT JOIN pg_catalog.pg_tablespace t ON c.reltablespace = t.oid
    where c.relname LIKE 'part%' AND n.nspname = 'testschema' order by relname",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "c",
                          },
                          "inh": true,
                          "location": 29,
                          "relname": "pg_class",
                          "relpersistence": "p",
                          "schemaname": "pg_catalog",
                        },
                      },
                      "quals": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "relnamespace",
                                  },
                                },
                              ],
                              "location": 90,
                            },
                          },
                          "location": 105,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "n",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "oid",
                                  },
                                },
                              ],
                              "location": 107,
                            },
                          },
                        },
                      },
                      "rarg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "n",
                          },
                          "inh": true,
                          "location": 60,
                          "relname": "pg_namespace",
                          "relpersistence": "p",
                          "schemaname": "pg_catalog",
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "reltablespace",
                              },
                            },
                          ],
                          "location": 158,
                        },
                      },
                      "location": 174,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t",
                              },
                            },
                            {
                              "String": {
                                "sval": "oid",
                              },
                            },
                          ],
                          "location": 176,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 128,
                      "relname": "pg_tablespace",
                      "relpersistence": "p",
                      "schemaname": "pg_catalog",
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "relname",
                          },
                        },
                      ],
                      "location": 253,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "relname",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "spcname",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_LIKE",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                            {
                              "String": {
                                "sval": "relname",
                              },
                            },
                          ],
                          "location": 192,
                        },
                      },
                      "location": 202,
                      "name": [
                        {
                          "String": {
                            "sval": "~~",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "location": 207,
                          "sval": {
                            "sval": "part%",
                          },
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "n",
                              },
                            },
                            {
                              "String": {
                                "sval": "nspname",
                              },
                            },
                          ],
                          "location": 219,
                        },
                      },
                      "location": 229,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "location": 231,
                          "sval": {
                            "sval": "testschema",
                          },
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 215,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 221 1`] = `
[
  "CREATE TABLE testschema.part (a int) PARTITION BY LIST (a)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 37,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 56,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "part",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 241 1`] = `
[
  "CREATE TABLE testschema.dflt (a int PRIMARY KEY USING INDEX TABLESPACE regress_tblspace) PARTITION BY LIST (a) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 89,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 108,
                    "name": "a",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "dflt",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "indexspace": "regress_tblspace",
                        "location": 36,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 247 1`] = `
[
  "CREATE TABLE testschema.test_default_tab(id bigint) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "test_default_tab",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 41,
                  "typeName": {
                    "location": 44,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 261 1`] = `
[
  "ALTER TABLE testschema.test_default_tab ALTER id TYPE bigint",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "location": 46,
                      "typeName": {
                        "location": 54,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int8",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "name": "id",
                  "subtype": "AT_AlterColumnType",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "test_default_tab",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 268 1`] = `
[
  "ALTER TABLE testschema.test_default_tab ALTER id TYPE int",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "location": 46,
                      "typeName": {
                        "location": 54,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int4",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "name": "id",
                  "subtype": "AT_AlterColumnType",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "test_default_tab",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 275 1`] = `
[
  "SET default_tablespace TO ''",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 26,
                  "sval": {
                    "sval": "",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "default_tablespace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 292 1`] = `
[
  "CREATE TABLE testschema.test_default_tab_p(id bigint, val bigint)
    PARTITION BY LIST (id) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "partspec": {
              "location": 70,
              "partParams": [
                {
                  "PartitionElem": {
                    "location": 89,
                    "name": "id",
                  },
                },
              ],
              "strategy": "PARTITION_STRATEGY_LIST",
            },
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "test_default_tab_p",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 43,
                  "typeName": {
                    "location": 46,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "val",
                  "is_local": true,
                  "location": 54,
                  "typeName": {
                    "location": 58,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 309 1`] = `
[
  "ALTER TABLE testschema.test_default_tab_p ALTER val TYPE bigint",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "location": 48,
                      "typeName": {
                        "location": 57,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int8",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "name": "val",
                  "subtype": "AT_AlterColumnType",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "test_default_tab_p",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 316 1`] = `
[
  "ALTER TABLE testschema.test_default_tab_p ALTER val TYPE int",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "location": 48,
                      "typeName": {
                        "location": 57,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int4",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "name": "val",
                  "subtype": "AT_AlterColumnType",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "test_default_tab_p",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 339 1`] = `
[
  "CREATE TABLE testschema.test_tab(id int) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "test_tab",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 352 1`] = `
[
  "CREATE TABLE testschema.test_tab(a int, b int, c int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "test_tab",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 47,
                  "typeName": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 368 1`] = `
[
  "CREATE TABLE testschema.atable AS VALUES (1), (2)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "atable",
                "relpersistence": "p",
                "schemaname": "testschema",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 42,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 47,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 371 1`] = `
[
  "ALTER TABLE testschema.atable SET TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "name": "regress_tblspace",
                  "subtype": "AT_SetTableSpace",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "atable",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 377 1`] = `
[
  "INSERT INTO testschema.atable VALUES(3)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "atable",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 3,
                            },
                            "location": 37,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 378 1`] = `
[
  "	-- fail (checks index)
SELECT COUNT(*) FROM testschema.atable",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 45,
                  "relname": "atable",
                  "relpersistence": "p",
                  "schemaname": "testschema",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 31,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 31,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 379 1`] = `
[
  "		-- checks heap

-- let's try moving a materialized view from one place to another
CREATE MATERIALIZED VIEW testschema.amv AS SELECT * FROM testschema.atable",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 109,
                "relname": "amv",
                "relpersistence": "p",
                "schemaname": "testschema",
              },
            },
            "objtype": "OBJECT_MATVIEW",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 141,
                      "relname": "atable",
                      "relpersistence": "p",
                      "schemaname": "testschema",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 134,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 134,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 388 1`] = `
[
  "CREATE TABLESPACE regress_badspace LOCATION '/no/such/location'",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableSpaceStmt": {
            "location": "/no/such/location",
            "tablespacename": "regress_badspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 391 1`] = `
[
  "CREATE TABLE bar (i int) TABLESPACE regress_nosuchspace",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "bar",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 18,
                  "typeName": {
                    "location": 20,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "tablespacename": "regress_nosuchspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 394 1`] = `
[
  "DROP TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "DropTableSpaceStmt": {
            "tablespacename": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 399 1`] = `
[
  "CREATE ROLE regress_tablespace_user1 login",
  {
    "stmts": [
      {
        "stmt": {
          "CreateRoleStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "Boolean": {
                      "boolval": true,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "canlogin",
                  "location": 37,
                },
              },
            ],
            "role": "regress_tablespace_user1",
            "stmt_type": "ROLESTMT_ROLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 403 1`] = `
[
  "ALTER TABLESPACE regress_tblspace OWNER TO regress_tablespace_user1",
  {
    "stmts": [
      {
        "stmt": {
          "AlterOwnerStmt": {
            "newowner": {
              "location": 43,
              "rolename": "regress_tablespace_user1",
              "roletype": "ROLESPEC_CSTRING",
            },
            "object": {
              "String": {
                "sval": "regress_tblspace",
              },
            },
            "objectType": "OBJECT_TABLESPACE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 405 1`] = `
[
  "CREATE TABLE testschema.tablespace_acl (c int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "tablespace_acl",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 407 1`] = `
[
  "CREATE INDEX k ON testschema.tablespace_acl (c) TABLESPACE regress_tblspace",
  {
    "stmts": [
      {
        "stmt": {
          "IndexStmt": {
            "accessMethod": "btree",
            "idxname": "k",
            "indexParams": [
              {
                "IndexElem": {
                  "name": "c",
                  "nulls_ordering": "SORTBY_NULLS_DEFAULT",
                  "ordering": "SORTBY_DEFAULT",
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tablespace_acl",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
            "tableSpace": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 410 1`] = `
[
  "SET SESSION ROLE regress_tablespace_user2",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 17,
                  "sval": {
                    "sval": "regress_tablespace_user2",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "role",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 411 1`] = `
[
  " -- fail
ALTER TABLE testschema.tablespace_acl ALTER c TYPE bigint",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "location": 53,
                      "typeName": {
                        "location": 60,
                        "names": [
                          {
                            "String": {
                              "sval": "pg_catalog",
                            },
                          },
                          {
                            "String": {
                              "sval": "int8",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "name": "c",
                  "subtype": "AT_AlterColumnType",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 21,
              "relname": "tablespace_acl",
              "relpersistence": "p",
              "schemaname": "testschema",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 413 1`] = `
[
  " -- fail
REINDEX (TABLESPACE regress_tblspace, CONCURRENTLY) TABLE tablespace_table",
  {
    "stmts": [
      {
        "stmt": {
          "ReindexStmt": {
            "kind": "REINDEX_OBJECT_TABLE",
            "params": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "regress_tblspace",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "tablespace",
                  "location": 18,
                },
              },
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "concurrently",
                  "location": 47,
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 67,
              "relname": "tablespace_table",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 414 1`] = `
[
  " -- fail
RESET ROLE",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "role",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 417 1`] = `
[
  "ALTER TABLESPACE regress_tblspace RENAME TO regress_tblspace_renamed",
  {
    "stmts": [
      {
        "stmt": {
          "RenameStmt": {
            "behavior": "DROP_RESTRICT",
            "newname": "regress_tblspace_renamed",
            "relationType": "OBJECT_ACCESS_METHOD",
            "renameType": "OBJECT_TABLESPACE",
            "subname": "regress_tblspace",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 419 1`] = `
[
  "ALTER TABLE ALL IN TABLESPACE regress_tblspace_renamed SET TABLESPACE pg_default",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableMoveAllStmt": {
            "new_tablespacename": "pg_default",
            "objtype": "OBJECT_TABLE",
            "orig_tablespacename": "regress_tblspace_renamed",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 428 1`] = `
[
  "DROP TABLESPACE regress_tblspace_renamed",
  {
    "stmts": [
      {
        "stmt": {
          "DropTableSpaceStmt": {
            "tablespacename": "regress_tblspace_renamed",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 430 1`] = `
[
  "DROP SCHEMA testschema CASCADE",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_CASCADE",
            "objects": [
              {
                "String": {
                  "sval": "testschema",
                },
              },
            ],
            "removeType": "OBJECT_SCHEMA",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`tablespace.sql > line 432 1`] = `
[
  "DROP ROLE regress_tablespace_user1",
  {
    "stmts": [
      {
        "stmt": {
          "DropRoleStmt": {
            "roles": [
              {
                "RoleSpec": {
                  "location": 10,
                  "rolename": "regress_tablespace_user1",
                  "roletype": "ROLESPEC_CSTRING",
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
