// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`conversion.sql > line 15 1`] = `
[
  "CREATE USER regress_conversion_user WITH NOCREATEDB NOCREATEROLE",
  {
    "stmts": [
      {
        "stmt": {
          "CreateRoleStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "Boolean": {
                      "boolval": false,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "createdb",
                  "location": 41,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "Boolean": {
                      "boolval": false,
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "createrole",
                  "location": 52,
                },
              },
            ],
            "role": "regress_conversion_user",
            "stmt_type": "ROLESTMT_USER",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 21 1`] = `
[
  "CREATE CONVERSION myconv FOR 'LATIN1' TO 'UTF8' FROM iso8859_1_to_utf8",
  {
    "stmts": [
      {
        "stmt": {
          "CreateConversionStmt": {
            "conversion_name": [
              {
                "String": {
                  "sval": "myconv",
                },
              },
            ],
            "for_encoding_name": "LATIN1",
            "func_name": [
              {
                "String": {
                  "sval": "iso8859_1_to_utf8",
                },
              },
            ],
            "to_encoding_name": "UTF8",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 25 1`] = `
[
  "CREATE DEFAULT CONVERSION public.mydef FOR 'LATIN1' TO 'UTF8' FROM iso8859_1_to_utf8",
  {
    "stmts": [
      {
        "stmt": {
          "CreateConversionStmt": {
            "conversion_name": [
              {
                "String": {
                  "sval": "public",
                },
              },
              {
                "String": {
                  "sval": "mydef",
                },
              },
            ],
            "def": true,
            "for_encoding_name": "LATIN1",
            "func_name": [
              {
                "String": {
                  "sval": "iso8859_1_to_utf8",
                },
              },
            ],
            "to_encoding_name": "UTF8",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 29 1`] = `
[
  "CREATE DEFAULT CONVERSION public.mydef2 FOR 'LATIN1' TO 'UTF8' FROM iso8859_1_to_utf8",
  {
    "stmts": [
      {
        "stmt": {
          "CreateConversionStmt": {
            "conversion_name": [
              {
                "String": {
                  "sval": "public",
                },
              },
              {
                "String": {
                  "sval": "mydef2",
                },
              },
            ],
            "def": true,
            "for_encoding_name": "LATIN1",
            "func_name": [
              {
                "String": {
                  "sval": "iso8859_1_to_utf8",
                },
              },
            ],
            "to_encoding_name": "UTF8",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 31 1`] = `
[
  "COMMENT ON CONVERSION myconv_bad IS 'foo'",
  {
    "stmts": [
      {
        "stmt": {
          "CommentStmt": {
            "comment": "foo",
            "object": {
              "List": {
                "items": [
                  {
                    "String": {
                      "sval": "myconv_bad",
                    },
                  },
                ],
              },
            },
            "objtype": "OBJECT_CONVERSION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 37 1`] = `
[
  "DROP CONVERSION myconv",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "myconv",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_CONVERSION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 46 1`] = `
[
  "RESET SESSION AUTHORIZATION",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "session_authorization",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 55 1`] = `
[
  "create or replace function test_conv(
  input IN bytea,
  src_encoding IN text,
  dst_encoding IN text,

  result OUT bytea,
  errorat OUT bytea,
  error OUT text)
language plpgsql as
$$
declare
  validlen int;
begin
  -- First try to perform the conversion with noError = false. If that errors out,
  -- capture the error message, and try again with noError = true. The second call
  -- should succeed and return the position of the error, return that too.
  begin
    select * into validlen, result from test_enc_conversion(input, src_encoding, dst_encoding, false);
    errorat = NULL;
    error := NULL;
  exception when others then
    error := sqlerrm;
    select * into validlen, result from test_enc_conversion(input, src_encoding, dst_encoding, true);
    errorat = substr(input, validlen + 1);
  end;
  return;
end;
$$",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "test_conv",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 164,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
declare
  validlen int;
begin
  -- First try to perform the conversion with noError = false. If that errors out,
  -- capture the error message, and try again with noError = true. The second call
  -- should succeed and return the position of the error, return that too.
  begin
    select * into validlen, result from test_enc_conversion(input, src_encoding, dst_encoding, false);
    errorat = NULL;
    error := NULL;
  exception when others then
    error := sqlerrm;
    select * into validlen, result from test_enc_conversion(input, src_encoding, dst_encoding, true);
    errorat = substr(input, validlen + 1);
  end;
  return;
end;
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 181,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 49,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_IN",
                  "name": "input",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 74,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_IN",
                  "name": "src_encoding",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 98,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_IN",
                  "name": "dst_encoding",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 118,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_OUT",
                  "name": "result",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 139,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_OUT",
                  "name": "errorat",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 158,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_OUT",
                  "name": "error",
                },
              },
            ],
            "replace": true,
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 89 1`] = `
[
  "CREATE TABLE utf8_verification_inputs (inbytes bytea, description text PRIMARY KEY)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "utf8_verification_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 47,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 71,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 54,
                  "typeName": {
                    "location": 66,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 116 1`] = `
[
  "select description, (test_conv(inbytes, 'utf8', 'utf8')).* from utf8_verification_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 64,
                  "relname": "utf8_verification_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 40,
                                "sval": {
                                  "sval": "utf8",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 48,
                                "sval": {
                                  "sval": "utf8",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 21,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 127 1`] = `
[
  "with test_bytes as (
  select
    inbytes,
    description,
    (test_conv(inbytes || repeat('.', 3)::bytea, 'utf8', 'utf8')).error
  from utf8_verification_inputs
), test_padded as (
  select
    description,
    (test_conv(inbytes || repeat('.', 64)::bytea, 'utf8', 'utf8')).error
  from test_bytes
)
select
  description,
  b.error as orig_error,
  p.error as error_after_padding
from test_padded p
join test_bytes b
using (description)
where p.error is distinct from b.error
order by description",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 388,
                      "relname": "test_padded",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 407,
                      "relname": "test_bytes",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "description",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 488,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 312,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 312,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 327,
                  "name": "orig_error",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 327,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 352,
                  "name": "error_after_padding",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 352,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_DISTINCT",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "p",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 446,
                  },
                },
                "location": 454,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 471,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_bytes",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 139,
                              "relname": "utf8_verification_inputs",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 34,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "inbytes",
                                      },
                                    },
                                  ],
                                  "location": 34,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 47,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 64,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "inbytes",
                                                    },
                                                  },
                                                ],
                                                "location": 75,
                                              },
                                            },
                                            "location": 83,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 93,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 3,
                                                          },
                                                          "location": 98,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 86,
                                                  },
                                                },
                                                "location": 100,
                                                "typeName": {
                                                  "location": 102,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 109,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 117,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 65,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_padded",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 290,
                              "relname": "test_bytes",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 197,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 197,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 214,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "inbytes",
                                                    },
                                                  },
                                                ],
                                                "location": 225,
                                              },
                                            },
                                            "location": 233,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 243,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 64,
                                                          },
                                                          "location": 248,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 236,
                                                  },
                                                },
                                                "location": 251,
                                                "typeName": {
                                                  "location": 253,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 260,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 268,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 215,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 167,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 151 1`] = `
[
  "with test_bytes as (
  select
    inbytes,
    description,
    (test_conv(inbytes || repeat('.', 3)::bytea, 'utf8', 'utf8')).error
  from utf8_verification_inputs
), test_padded as (
  select
    description,
    (test_conv(repeat('.', 64 - length(inbytes))::bytea || inbytes || repeat('.', 64)::bytea, 'utf8', 'utf8')).error
  from test_bytes
)
select
  description,
  b.error as orig_error,
  p.error as error_after_padding
from test_padded p
join test_bytes b
using (description)
where p.error is distinct from b.error
order by description",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 432,
                      "relname": "test_padded",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 451,
                      "relname": "test_bytes",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "description",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 532,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 356,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 356,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 371,
                  "name": "orig_error",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 371,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 396,
                  "name": "error_after_padding",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 396,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_DISTINCT",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "p",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 490,
                  },
                },
                "location": 498,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 515,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_bytes",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 139,
                              "relname": "utf8_verification_inputs",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 34,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "inbytes",
                                      },
                                    },
                                  ],
                                  "location": 34,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 47,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 64,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "inbytes",
                                                    },
                                                  },
                                                ],
                                                "location": 75,
                                              },
                                            },
                                            "location": 83,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 93,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 3,
                                                          },
                                                          "location": 98,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 86,
                                                  },
                                                },
                                                "location": 100,
                                                "typeName": {
                                                  "location": 102,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 109,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 117,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 65,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_padded",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 334,
                              "relname": "test_bytes",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 197,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 197,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 214,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "TypeCast": {
                                                    "arg": {
                                                      "FuncCall": {
                                                        "args": [
                                                          {
                                                            "A_Const": {
                                                              "location": 232,
                                                              "sval": {
                                                                "sval": ".",
                                                              },
                                                            },
                                                          },
                                                          {
                                                            "A_Expr": {
                                                              "kind": "AEXPR_OP",
                                                              "lexpr": {
                                                                "A_Const": {
                                                                  "ival": {
                                                                    "ival": 64,
                                                                  },
                                                                  "location": 237,
                                                                },
                                                              },
                                                              "location": 240,
                                                              "name": [
                                                                {
                                                                  "String": {
                                                                    "sval": "-",
                                                                  },
                                                                },
                                                              ],
                                                              "rexpr": {
                                                                "FuncCall": {
                                                                  "args": [
                                                                    {
                                                                      "ColumnRef": {
                                                                        "fields": [
                                                                          {
                                                                            "String": {
                                                                              "sval": "inbytes",
                                                                            },
                                                                          },
                                                                        ],
                                                                        "location": 249,
                                                                      },
                                                                    },
                                                                  ],
                                                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                                                  "funcname": [
                                                                    {
                                                                      "String": {
                                                                        "sval": "length",
                                                                      },
                                                                    },
                                                                  ],
                                                                  "location": 242,
                                                                },
                                                              },
                                                            },
                                                          },
                                                        ],
                                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                                        "funcname": [
                                                          {
                                                            "String": {
                                                              "sval": "repeat",
                                                            },
                                                          },
                                                        ],
                                                        "location": 225,
                                                      },
                                                    },
                                                    "location": 258,
                                                    "typeName": {
                                                      "location": 260,
                                                      "names": [
                                                        {
                                                          "String": {
                                                            "sval": "bytea",
                                                          },
                                                        },
                                                      ],
                                                      "typemod": -1,
                                                    },
                                                  },
                                                },
                                                "location": 266,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "||",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "inbytes",
                                                        },
                                                      },
                                                    ],
                                                    "location": 269,
                                                  },
                                                },
                                              },
                                            },
                                            "location": 277,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 287,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 64,
                                                          },
                                                          "location": 292,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 280,
                                                  },
                                                },
                                                "location": 295,
                                                "typeName": {
                                                  "location": 297,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 304,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 312,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 215,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 167,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 175 1`] = `
[
  "with test_bytes as (
  select
    inbytes,
    description,
    (test_conv(inbytes || repeat('.', 3)::bytea, 'utf8', 'utf8')).error
  from utf8_verification_inputs
), test_padded as (
  select
    description,
    (test_conv(repeat('.', 64)::bytea || inbytes || repeat('.', 3)::bytea, 'utf8', 'utf8')).error
  from test_bytes
)
select
  description,
  b.error as orig_error,
  p.error as error_after_padding
from test_padded p
join test_bytes b
using (description)
where p.error is distinct from b.error
order by description",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "p",
                      },
                      "inh": true,
                      "location": 413,
                      "relname": "test_padded",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "b",
                      },
                      "inh": true,
                      "location": 432,
                      "relname": "test_bytes",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "description",
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 513,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 337,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 337,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 352,
                  "name": "orig_error",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 352,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 377,
                  "name": "error_after_padding",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "p",
                          },
                        },
                        {
                          "String": {
                            "sval": "error",
                          },
                        },
                      ],
                      "location": 377,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_DISTINCT",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "p",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 471,
                  },
                },
                "location": 479,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "error",
                        },
                      },
                    ],
                    "location": 496,
                  },
                },
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_bytes",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 139,
                              "relname": "utf8_verification_inputs",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 34,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "inbytes",
                                      },
                                    },
                                  ],
                                  "location": 34,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 47,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 47,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 64,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "inbytes",
                                                    },
                                                  },
                                                ],
                                                "location": 75,
                                              },
                                            },
                                            "location": 83,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 93,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 3,
                                                          },
                                                          "location": 98,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 86,
                                                  },
                                                },
                                                "location": 100,
                                                "typeName": {
                                                  "location": 102,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 109,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 117,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 65,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
                {
                  "CommonTableExpr": {
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "test_padded",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 315,
                              "relname": "test_bytes",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 197,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "description",
                                      },
                                    },
                                  ],
                                  "location": 197,
                                },
                              },
                            },
                          },
                          {
                            "ResTarget": {
                              "location": 214,
                              "val": {
                                "A_Indirection": {
                                  "arg": {
                                    "FuncCall": {
                                      "args": [
                                        {
                                          "A_Expr": {
                                            "kind": "AEXPR_OP",
                                            "lexpr": {
                                              "A_Expr": {
                                                "kind": "AEXPR_OP",
                                                "lexpr": {
                                                  "TypeCast": {
                                                    "arg": {
                                                      "FuncCall": {
                                                        "args": [
                                                          {
                                                            "A_Const": {
                                                              "location": 232,
                                                              "sval": {
                                                                "sval": ".",
                                                              },
                                                            },
                                                          },
                                                          {
                                                            "A_Const": {
                                                              "ival": {
                                                                "ival": 64,
                                                              },
                                                              "location": 237,
                                                            },
                                                          },
                                                        ],
                                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                                        "funcname": [
                                                          {
                                                            "String": {
                                                              "sval": "repeat",
                                                            },
                                                          },
                                                        ],
                                                        "location": 225,
                                                      },
                                                    },
                                                    "location": 240,
                                                    "typeName": {
                                                      "location": 242,
                                                      "names": [
                                                        {
                                                          "String": {
                                                            "sval": "bytea",
                                                          },
                                                        },
                                                      ],
                                                      "typemod": -1,
                                                    },
                                                  },
                                                },
                                                "location": 248,
                                                "name": [
                                                  {
                                                    "String": {
                                                      "sval": "||",
                                                    },
                                                  },
                                                ],
                                                "rexpr": {
                                                  "ColumnRef": {
                                                    "fields": [
                                                      {
                                                        "String": {
                                                          "sval": "inbytes",
                                                        },
                                                      },
                                                    ],
                                                    "location": 251,
                                                  },
                                                },
                                              },
                                            },
                                            "location": 259,
                                            "name": [
                                              {
                                                "String": {
                                                  "sval": "||",
                                                },
                                              },
                                            ],
                                            "rexpr": {
                                              "TypeCast": {
                                                "arg": {
                                                  "FuncCall": {
                                                    "args": [
                                                      {
                                                        "A_Const": {
                                                          "location": 269,
                                                          "sval": {
                                                            "sval": ".",
                                                          },
                                                        },
                                                      },
                                                      {
                                                        "A_Const": {
                                                          "ival": {
                                                            "ival": 3,
                                                          },
                                                          "location": 274,
                                                        },
                                                      },
                                                    ],
                                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                                    "funcname": [
                                                      {
                                                        "String": {
                                                          "sval": "repeat",
                                                        },
                                                      },
                                                    ],
                                                    "location": 262,
                                                  },
                                                },
                                                "location": 276,
                                                "typeName": {
                                                  "location": 278,
                                                  "names": [
                                                    {
                                                      "String": {
                                                        "sval": "bytea",
                                                      },
                                                    },
                                                  ],
                                                  "typemod": -1,
                                                },
                                              },
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 285,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "location": 293,
                                            "sval": {
                                              "sval": "utf8",
                                            },
                                          },
                                        },
                                      ],
                                      "funcformat": "COERCE_EXPLICIT_CALL",
                                      "funcname": [
                                        {
                                          "String": {
                                            "sval": "test_conv",
                                          },
                                        },
                                      ],
                                      "location": 215,
                                    },
                                  },
                                  "indirection": [
                                    {
                                      "String": {
                                        "sval": "error",
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 167,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 221 1`] = `
[
  "CREATE TABLE utf8_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "utf8_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 41,
                  "typeName": {
                    "location": 53,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 238 1`] = `
[
  "select description, (test_conv(inbytes, 'utf8', 'utf8')).* from utf8_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 64,
                  "relname": "utf8_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 31,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 40,
                                "sval": {
                                  "sval": "utf8",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 48,
                                "sval": {
                                  "sval": "utf8",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 21,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 240 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'utf8', 'euc_jis_2004')).* from utf8_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 81,
                  "relname": "utf8_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "utf8",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 57,
                                "sval": {
                                  "sval": "euc_jis_2004",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 250 1`] = `
[
  "CREATE TABLE euc_jis_2004_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "euc_jis_2004_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 34,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 49,
                  "typeName": {
                    "location": 61,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 262 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'euc_jis_2004', 'euc_jis_2004')).* from euc_jis_2004_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 89,
                  "relname": "euc_jis_2004_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "euc_jis_2004",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 65,
                                "sval": {
                                  "sval": "euc_jis_2004",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 269 1`] = `
[
  "CREATE TABLE shiftjis2004_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "shiftjis2004_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 34,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 49,
                  "typeName": {
                    "location": 61,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 282 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'shiftjis2004', 'shiftjis2004')).* from shiftjis2004_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 89,
                  "relname": "shiftjis2004_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "shiftjis2004",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 65,
                                "sval": {
                                  "sval": "shiftjis2004",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 290 1`] = `
[
  "CREATE TABLE gb18030_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "gb18030_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 29,
                  "typeName": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 44,
                  "typeName": {
                    "location": 56,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 302 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'gb18030', 'gb18030')).* from gb18030_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 79,
                  "relname": "gb18030_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "gb18030",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 60,
                                "sval": {
                                  "sval": "gb18030",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 310 1`] = `
[
  "CREATE TABLE iso8859_5_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "iso8859_5_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 46,
                  "typeName": {
                    "location": 58,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 319 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'iso8859-5', 'iso8859-5')).* from iso8859_5_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 83,
                  "relname": "iso8859_5_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "iso8859-5",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 62,
                                "sval": {
                                  "sval": "iso8859-5",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 328 1`] = `
[
  "CREATE TABLE big5_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "big5_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 41,
                  "typeName": {
                    "location": 53,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 337 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'big5', 'big5')).* from big5_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 73,
                  "relname": "big5_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "big5",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 57,
                                "sval": {
                                  "sval": "big5",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 345 1`] = `
[
  "CREATE TABLE mic_inputs (inbytes bytea, description text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "mic_inputs",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "inbytes",
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 33,
                    "names": [
                      {
                        "String": {
                          "sval": "bytea",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "description",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 52,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`conversion.sql > line 359 1`] = `
[
  "select description, inbytes, (test_conv(inbytes, 'mule_internal', 'mule_internal')).* from mic_inputs",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 91,
                  "relname": "mic_inputs",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "description",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "inbytes",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "inbytes",
                                    },
                                  },
                                ],
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 49,
                                "sval": {
                                  "sval": "mule_internal",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 66,
                                "sval": {
                                  "sval": "mule_internal",
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "test_conv",
                              },
                            },
                          ],
                          "location": 30,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
