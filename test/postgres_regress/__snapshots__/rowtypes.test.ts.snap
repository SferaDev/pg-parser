// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`rowtypes.sql > line 9 1`] = `
[
  "create temp table fullname (first text, last text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "fullname",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "first",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "last",
                  "is_local": true,
                  "location": 40,
                  "typeName": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 19 1`] = `
[
  "select row('Joe', 'Blow')::fullname, '(Joe,Blow)'::fullname",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "location": 11,
                                "sval": {
                                  "sval": "Joe",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 18,
                                "sval": {
                                  "sval": "Blow",
                                },
                              },
                            },
                          ],
                          "location": 7,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 25,
                      "typeName": {
                        "location": 27,
                        "names": [
                          {
                            "String": {
                              "sval": "fullname",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 37,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "A_Const": {
                          "location": 37,
                          "sval": {
                            "sval": "(Joe,Blow)",
                          },
                        },
                      },
                      "location": 49,
                      "typeName": {
                        "location": 51,
                        "names": [
                          {
                            "String": {
                              "sval": "fullname",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 21 1`] = `
[
  "select '(Joe,von Blow)'::fullname, '(Joe,d''Blow)'::fullname",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "A_Const": {
                          "location": 7,
                          "sval": {
                            "sval": "(Joe,von Blow)",
                          },
                        },
                      },
                      "location": 23,
                      "typeName": {
                        "location": 25,
                        "names": [
                          {
                            "String": {
                              "sval": "fullname",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 35,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "A_Const": {
                          "location": 35,
                          "sval": {
                            "sval": "(Joe,d'Blow)",
                          },
                        },
                      },
                      "location": 50,
                      "typeName": {
                        "location": 52,
                        "names": [
                          {
                            "String": {
                              "sval": "fullname",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 32 1`] = `
[
  "  -- bad

-- test non-error-throwing API
SELECT pg_input_is_valid('(1,2)', 'complex')",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 48,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Const": {
                            "location": 66,
                            "sval": {
                              "sval": "(1,2)",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 75,
                            "sval": {
                              "sval": "complex",
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_input_is_valid",
                          },
                        },
                      ],
                      "location": 48,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 41 1`] = `
[
  "create temp table quadtable(f1 int, q quad)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "quadtable",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "f1",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 31,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "q",
                  "is_local": true,
                  "location": 36,
                  "typeName": {
                    "location": 38,
                    "names": [
                      {
                        "String": {
                          "sval": "quad",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 43 1`] = `
[
  "insert into quadtable values (1, ((3.3,4.4),(5.5,6.6)))",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "quadtable",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 30,
                          },
                        },
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "fval": {
                                          "fval": "3.3",
                                        },
                                        "location": 35,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "fval": {
                                          "fval": "4.4",
                                        },
                                        "location": 39,
                                      },
                                    },
                                  ],
                                  "location": 34,
                                  "row_format": "COERCE_IMPLICIT_CAST",
                                },
                              },
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "fval": {
                                          "fval": "5.5",
                                        },
                                        "location": 45,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "fval": {
                                          "fval": "6.6",
                                        },
                                        "location": 49,
                                      },
                                    },
                                  ],
                                  "location": 44,
                                  "row_format": "COERCE_IMPLICIT_CAST",
                                },
                              },
                            ],
                            "location": 33,
                            "row_format": "COERCE_IMPLICIT_CAST",
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 46 1`] = `
[
  "select * from quadtable",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "quadtable",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 48 1`] = `
[
  "select f1, q.c1 from quadtable",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 21,
                  "relname": "quadtable",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q",
                          },
                        },
                        {
                          "String": {
                            "sval": "c1",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 48 2`] = `
[
  "		-- fails, q is a table reference

select f1, (q).c1, (qq.q).c1.i from quadtable qq",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "qq",
                  },
                  "inh": true,
                  "location": 72,
                  "relname": "quadtable",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 43,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                      "location": 43,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 47,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q",
                              },
                            },
                          ],
                          "location": 48,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "c1",
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 55,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "qq",
                              },
                            },
                            {
                              "String": {
                                "sval": "q",
                              },
                            },
                          ],
                          "location": 56,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "c1",
                          },
                        },
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 52 1`] = `
[
  "create temp table people (fn fullname, bd date)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "people",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "fn",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "fullname",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "bd",
                  "is_local": true,
                  "location": 39,
                  "typeName": {
                    "location": 42,
                    "names": [
                      {
                        "String": {
                          "sval": "date",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 54 1`] = `
[
  "insert into people values ('(Joe,Blow)', '1984-01-10')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "people",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 27,
                            "sval": {
                              "sval": "(Joe,Blow)",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 41,
                            "sval": {
                              "sval": "1984-01-10",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 56 1`] = `
[
  "select * from people",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "people",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 59 1`] = `
[
  "alter table fullname add column suffix text default ''",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "colname": "suffix",
                      "constraints": [
                        {
                          "Constraint": {
                            "contype": "CONSTR_DEFAULT",
                            "location": 44,
                            "raw_expr": {
                              "A_Const": {
                                "location": 52,
                                "sval": {
                                  "sval": "",
                                },
                              },
                            },
                          },
                        },
                      ],
                      "is_local": true,
                      "location": 32,
                      "typeName": {
                        "location": 39,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "subtype": "AT_AddColumn",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fullname",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 67 1`] = `
[
  "update people set fn.suffix = 'Jr'",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "people",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "suffix",
                      },
                    },
                  ],
                  "location": 18,
                  "name": "fn",
                  "val": {
                    "A_Const": {
                      "location": 30,
                      "sval": {
                        "sval": "Jr",
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 71 1`] = `
[
  "insert into quadtable (f1, q.c1.r, q.c2.i) values(44,55,66)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "cols": [
              {
                "ResTarget": {
                  "location": 23,
                  "name": "f1",
                },
              },
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "c1",
                      },
                    },
                    {
                      "String": {
                        "sval": "r",
                      },
                    },
                  ],
                  "location": 27,
                  "name": "q",
                },
              },
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "c2",
                      },
                    },
                    {
                      "String": {
                        "sval": "i",
                      },
                    },
                  ],
                  "location": 35,
                  "name": "q",
                },
              },
            ],
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "quadtable",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 44,
                            },
                            "location": 50,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 55,
                            },
                            "location": 53,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 66,
                            },
                            "location": 56,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 73 1`] = `
[
  "update quadtable set q.c1.r = 12 where f1 = 2",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "quadtable",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "c1",
                      },
                    },
                    {
                      "String": {
                        "sval": "r",
                      },
                    },
                  ],
                  "location": 21,
                  "name": "q",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 12,
                      },
                      "location": 30,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "f1",
                        },
                      },
                    ],
                    "location": 39,
                  },
                },
                "location": 42,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 2,
                    },
                    "location": 44,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 75 1`] = `
[
  "update quadtable set q.c1 = 12",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "quadtable",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "c1",
                      },
                    },
                  ],
                  "location": 21,
                  "name": "q",
                  "val": {
                    "A_Const": {
                      "ival": {
                        "ival": 12,
                      },
                      "location": 28,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 86 1`] = `
[
  "insert into people select ('Jim', f1, null)::fullname, current_date from pp",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "people",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 73,
                      "relname": "pp",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 26,
                      "val": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "location": 27,
                                    "sval": {
                                      "sval": "Jim",
                                    },
                                  },
                                },
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "f1",
                                        },
                                      },
                                    ],
                                    "location": 34,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 38,
                                  },
                                },
                              ],
                              "location": 26,
                              "row_format": "COERCE_IMPLICIT_CAST",
                            },
                          },
                          "location": 43,
                          "typeName": {
                            "location": 45,
                            "names": [
                              {
                                "String": {
                                  "sval": "fullname",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "SQLValueFunction": {
                          "location": 55,
                          "op": "SVFOP_CURRENT_DATE",
                          "typmod": -1,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 88 1`] = `
[
  "select (fn).first, substr((fn).last, 1, 20), length((fn).last) from people",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 68,
                  "relname": "people",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "fn",
                              },
                            },
                          ],
                          "location": 8,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "first",
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Indirection": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "fn",
                                    },
                                  },
                                ],
                                "location": 27,
                              },
                            },
                            "indirection": [
                              {
                                "String": {
                                  "sval": "last",
                                },
                              },
                            ],
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 37,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 20,
                            },
                            "location": 40,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "substr",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 45,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "A_Indirection": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "fn",
                                    },
                                  },
                                ],
                                "location": 53,
                              },
                            },
                            "indirection": [
                              {
                                "String": {
                                  "sval": "last",
                                },
                              },
                            ],
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "length",
                          },
                        },
                      ],
                      "location": 45,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 91 1`] = `
[
  "update people set fn.first = 'Jack'",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "people",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "indirection": [
                    {
                      "String": {
                        "sval": "first",
                      },
                    },
                  ],
                  "location": 18,
                  "name": "fn",
                  "val": {
                    "A_Const": {
                      "location": 29,
                      "sval": {
                        "sval": "Jack",
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 101 1`] = `
[
  " -- the NULL is not examined
select ROW(11,'ABC') < ROW(11,'DEF') as true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 36,
                  "name": "true",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 11,
                                },
                                "location": 40,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 43,
                                "sval": {
                                  "sval": "ABC",
                                },
                              },
                            },
                          ],
                          "location": 36,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 50,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 11,
                                },
                                "location": 56,
                              },
                            },
                            {
                              "A_Const": {
                                "location": 59,
                                "sval": {
                                  "sval": "DEF",
                                },
                              },
                            },
                          ],
                          "location": 52,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 113 1`] = `
[
  "select ROW('ABC','DEF') ~<=~ ROW('DEF','ABC') as true",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "true",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "location": 11,
                                "sval": {
                                  "sval": "ABC",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 17,
                                "sval": {
                                  "sval": "DEF",
                                },
                              },
                            },
                          ],
                          "location": 7,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 24,
                      "name": [
                        {
                          "String": {
                            "sval": "~<=~",
                          },
                        },
                      ],
                      "rexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "location": 33,
                                "sval": {
                                  "sval": "DEF",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 39,
                                "sval": {
                                  "sval": "ABC",
                                },
                              },
                            },
                          ],
                          "location": 29,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 118 1`] = `
[
  "select ROW(1,2) = ROW(1,2::int8)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 11,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 2,
                                },
                                "location": 13,
                              },
                            },
                          ],
                          "location": 7,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 16,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 22,
                              },
                            },
                            {
                              "TypeCast": {
                                "arg": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 24,
                                  },
                                },
                                "location": 25,
                                "typeName": {
                                  "location": 27,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "int8",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "location": 18,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 123 1`] = `
[
  "select unique1, unique2 from tenk1
where (unique1, unique2) < any (select ten, ten from tenk1 where hundred < 3)
      and unique1 <= 20
order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 29,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 146,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique2",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "SubLink": {
                      "location": 60,
                      "operName": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "subLinkType": "ANY_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 88,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 74,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 74,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 79,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 79,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "hundred",
                                      },
                                    },
                                  ],
                                  "location": 100,
                                },
                              },
                              "location": 108,
                              "name": [
                                {
                                  "String": {
                                    "sval": "<",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 110,
                                },
                              },
                            },
                          },
                        },
                      },
                      "testexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "unique1",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "unique2",
                                    },
                                  },
                                ],
                                "location": 51,
                              },
                            },
                          ],
                          "location": 41,
                          "row_format": "COERCE_IMPLICIT_CAST",
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unique1",
                              },
                            },
                          ],
                          "location": 123,
                        },
                      },
                      "location": 131,
                      "name": [
                        {
                          "String": {
                            "sval": "<=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 20,
                          },
                          "location": 134,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 119,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 129 1`] = `
[
  "explain (costs off)
select thousand, tenthous from tenk1
where (thousand, tenthous) >= (997, 5000)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 51,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 108,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 118,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 64,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 74,
                            },
                          },
                        ],
                        "location": 63,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    "location": 84,
                    "name": [
                      {
                        "String": {
                          "sval": ">=",
                        },
                      },
                    ],
                    "rexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 997,
                              },
                              "location": 88,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 5000,
                              },
                              "location": 93,
                            },
                          },
                        ],
                        "location": 87,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 134 1`] = `
[
  "select thousand, tenthous from tenk1
where (thousand, tenthous) >= (997, 5000)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 31,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 88,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 98,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 44,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 54,
                        },
                      },
                    ],
                    "location": 43,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
                "location": 64,
                "name": [
                  {
                    "String": {
                      "sval": ">=",
                    },
                  },
                ],
                "rexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 997,
                          },
                          "location": 68,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 5000,
                          },
                          "location": 73,
                        },
                      },
                    ],
                    "location": 67,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 138 1`] = `
[
  "explain (costs off)
select thousand, tenthous, four from tenk1
where (thousand, tenthous, four) > (998, 5000, 3)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 57,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 122,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 132,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 47,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "four",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 70,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 80,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "four",
                                  },
                                },
                              ],
                              "location": 90,
                            },
                          },
                        ],
                        "location": 69,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    "location": 96,
                    "name": [
                      {
                        "String": {
                          "sval": ">",
                        },
                      },
                    ],
                    "rexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 998,
                              },
                              "location": 99,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 5000,
                              },
                              "location": 104,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 3,
                              },
                              "location": 110,
                            },
                          },
                        ],
                        "location": 98,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 143 1`] = `
[
  "select thousand, tenthous, four from tenk1
where (thousand, tenthous, four) > (998, 5000, 3)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 37,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 102,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 112,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 27,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 27,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 50,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 60,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "four",
                              },
                            },
                          ],
                          "location": 70,
                        },
                      },
                    ],
                    "location": 49,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
                "location": 76,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 998,
                          },
                          "location": 79,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 5000,
                          },
                          "location": 84,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 3,
                          },
                          "location": 90,
                        },
                      },
                    ],
                    "location": 78,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 147 1`] = `
[
  "explain (costs off)
select thousand, tenthous from tenk1
where (998, 5000) < (thousand, tenthous)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 51,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 107,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 117,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 998,
                              },
                              "location": 64,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 5000,
                              },
                              "location": 69,
                            },
                          },
                        ],
                        "location": 63,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    "location": 75,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 78,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "tenthous",
                                  },
                                },
                              ],
                              "location": 88,
                            },
                          },
                        ],
                        "location": 77,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 152 1`] = `
[
  "select thousand, tenthous from tenk1
where (998, 5000) < (thousand, tenthous)
order by thousand, tenthous",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 31,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 87,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 97,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "tenthous",
                          },
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 998,
                          },
                          "location": 44,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 5000,
                          },
                          "location": 49,
                        },
                      },
                    ],
                    "location": 43,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
                "location": 55,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 58,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "tenthous",
                              },
                            },
                          ],
                          "location": 68,
                        },
                      },
                    ],
                    "location": 57,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 156 1`] = `
[
  "explain (costs off)
select thousand, hundred from tenk1
where (998, 5000) < (thousand, hundred)
order by thousand, hundred",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 50,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "hundred",
                              },
                            },
                          ],
                          "location": 115,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "hundred",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 998,
                              },
                              "location": 63,
                            },
                          },
                          {
                            "A_Const": {
                              "ival": {
                                "ival": 5000,
                              },
                              "location": 68,
                            },
                          },
                        ],
                        "location": 62,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    "location": 74,
                    "name": [
                      {
                        "String": {
                          "sval": "<",
                        },
                      },
                    ],
                    "rexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "thousand",
                                  },
                                },
                              ],
                              "location": 77,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "hundred",
                                  },
                                },
                              ],
                              "location": 87,
                            },
                          },
                        ],
                        "location": 76,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 161 1`] = `
[
  "select thousand, hundred from tenk1
where (998, 5000) < (thousand, hundred)
order by thousand, hundred",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 30,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 85,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "hundred",
                          },
                        },
                      ],
                      "location": 95,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "thousand",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "hundred",
                          },
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 998,
                          },
                          "location": 43,
                        },
                      },
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 5000,
                          },
                          "location": 48,
                        },
                      },
                    ],
                    "location": 42,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
                "location": 54,
                "name": [
                  {
                    "String": {
                      "sval": "<",
                    },
                  },
                ],
                "rexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "thousand",
                              },
                            },
                          ],
                          "location": 57,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "hundred",
                              },
                            },
                          ],
                          "location": 67,
                        },
                      },
                    ],
                    "location": 56,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 166 1`] = `
[
  "create temp table test_table (a text, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "test_table",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 173 1`] = `
[
  "explain (costs off)
select a,b from test_table where (a,b) > ('a','a') order by a,b",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 36,
                      "relname": "test_table",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 80,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 82,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_OP",
                    "lexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 54,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 56,
                            },
                          },
                        ],
                        "location": 53,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    "location": 59,
                    "name": [
                      {
                        "String": {
                          "sval": ">",
                        },
                      },
                    ],
                    "rexpr": {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Const": {
                              "location": 62,
                              "sval": {
                                "sval": "a",
                              },
                            },
                          },
                          {
                            "A_Const": {
                              "location": 66,
                              "sval": {
                                "sval": "a",
                              },
                            },
                          },
                        ],
                        "location": 61,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 176 1`] = `
[
  "select a,b from test_table where (a,b) > ('a','a') order by a,b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 16,
                  "relname": "test_table",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 60,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 62,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    ],
                    "location": 33,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
                "location": 39,
                "name": [
                  {
                    "String": {
                      "sval": ">",
                    },
                  },
                ],
                "rexpr": {
                  "RowExpr": {
                    "args": [
                      {
                        "A_Const": {
                          "location": 42,
                          "sval": {
                            "sval": "a",
                          },
                        },
                      },
                      {
                        "A_Const": {
                          "location": 46,
                          "sval": {
                            "sval": "a",
                          },
                        },
                      },
                    ],
                    "location": 41,
                    "row_format": "COERCE_IMPLICIT_CAST",
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 178 1`] = `
[
  "reset enable_sort",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "kind": "VAR_RESET",
            "name": "enable_sort",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 181 1`] = `
[
  "select * from int8_tbl i8 where i8 in (row(123,456))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i8",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_IN",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "i8",
                        },
                      },
                    ],
                    "location": 32,
                  },
                },
                "location": 35,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "List": {
                    "items": [
                      {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 123,
                                },
                                "location": 43,
                              },
                            },
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 456,
                                },
                                "location": 47,
                              },
                            },
                          ],
                          "location": 39,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    ],
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 181 2`] = `
[
  "  -- fail, type mismatch

explain (costs off)
select * from int8_tbl i8
where i8 in (row(123,456)::int8_tbl, '(4567890123456789,123)')",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 35,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i8",
                      },
                      "inh": true,
                      "location": 60,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 53,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 53,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "A_Expr": {
                    "kind": "AEXPR_IN",
                    "lexpr": {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "i8",
                            },
                          },
                        ],
                        "location": 78,
                      },
                    },
                    "location": 81,
                    "name": [
                      {
                        "String": {
                          "sval": "=",
                        },
                      },
                    ],
                    "rexpr": {
                      "List": {
                        "items": [
                          {
                            "TypeCast": {
                              "arg": {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 123,
                                        },
                                        "location": 89,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 456,
                                        },
                                        "location": 93,
                                      },
                                    },
                                  ],
                                  "location": 85,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                              "location": 97,
                              "typeName": {
                                "location": 99,
                                "names": [
                                  {
                                    "String": {
                                      "sval": "int8_tbl",
                                    },
                                  },
                                ],
                                "typemod": -1,
                              },
                            },
                          },
                          {
                            "A_Const": {
                              "location": 109,
                              "sval": {
                                "sval": "(4567890123456789,123)",
                              },
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 187 1`] = `
[
  "select * from int8_tbl i8
where i8 in (row(123,456)::int8_tbl, '(4567890123456789,123)')",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i8",
                  },
                  "inh": true,
                  "location": 14,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_IN",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "i8",
                        },
                      },
                    ],
                    "location": 32,
                  },
                },
                "location": 35,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "List": {
                    "items": [
                      {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 123,
                                    },
                                    "location": 43,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 456,
                                    },
                                    "location": 47,
                                  },
                                },
                              ],
                              "location": 39,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 51,
                          "typeName": {
                            "location": 53,
                            "names": [
                              {
                                "String": {
                                  "sval": "int8_tbl",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      {
                        "A_Const": {
                          "location": 63,
                          "sval": {
                            "sval": "(4567890123456789,123)",
                          },
                        },
                      },
                    ],
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 191 1`] = `
[
  "select (row(1, 2.0)).f1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 12,
                              },
                            },
                            {
                              "A_Const": {
                                "fval": {
                                  "fval": "2.0",
                                },
                                "location": 15,
                              },
                            },
                          ],
                          "location": 8,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "f1",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 193 1`] = `
[
  "  -- fail
select (row(1, 2.0)).*",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 22,
                              },
                            },
                            {
                              "A_Const": {
                                "fval": {
                                  "fval": "2.0",
                                },
                                "location": 25,
                              },
                            },
                          ],
                          "location": 18,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 196 1`] = `
[
  "  -- fail
select (r).* from (select row(1, 2.0) as r) ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 36,
                            "name": "r",
                            "val": {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 40,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "fval": {
                                        "fval": "2.0",
                                      },
                                      "location": 43,
                                    },
                                  },
                                ],
                                "location": 36,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 18,
                        },
                      },
                      "indirection": [
                        {
                          "A_Star": {},
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 200 1`] = `
[
  "select ROW()",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "RowExpr": {
                      "location": 7,
                      "row_format": "COERCE_EXPLICIT_CALL",
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 205 1`] = `
[
  "select array[ row(1,2), row(3,4), row(5,6) ]",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_ArrayExpr": {
                      "elements": [
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 18,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 20,
                                },
                              },
                            ],
                            "location": 14,
                            "row_format": "COERCE_EXPLICIT_CALL",
                          },
                        },
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 28,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 4,
                                  },
                                  "location": 30,
                                },
                              },
                            ],
                            "location": 24,
                            "row_format": "COERCE_EXPLICIT_CALL",
                          },
                        },
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 38,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 6,
                                  },
                                  "location": 40,
                                },
                              },
                            ],
                            "location": 34,
                            "row_format": "COERCE_EXPLICIT_CALL",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 208 1`] = `
[
  "select row(1,1.1) = any (array[ row(7,7.7), row(1,1.1), row(0,0.0) ])",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP_ANY",
                      "lexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 11,
                              },
                            },
                            {
                              "A_Const": {
                                "fval": {
                                  "fval": "1.1",
                                },
                                "location": 13,
                              },
                            },
                          ],
                          "location": 7,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 18,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_ArrayExpr": {
                          "elements": [
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 7,
                                      },
                                      "location": 36,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "fval": {
                                        "fval": "7.7",
                                      },
                                      "location": 38,
                                    },
                                  },
                                ],
                                "location": 32,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 48,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "fval": {
                                        "fval": "1.1",
                                      },
                                      "location": 50,
                                    },
                                  },
                                ],
                                "location": 44,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {},
                                      "location": 60,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "fval": {
                                        "fval": "0.0",
                                      },
                                      "location": 62,
                                    },
                                  },
                                ],
                                "location": 56,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                          ],
                          "location": 25,
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 212 1`] = `
[
  "create type cantcompare as (p point, r float8)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "p",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "point",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "r",
                  "is_local": true,
                  "location": 37,
                  "typeName": {
                    "location": 39,
                    "names": [
                      {
                        "String": {
                          "sval": "float8",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "cantcompare",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 216 1`] = `
[
  " -- fail, but should complain about cantcompare

--
-- Tests for record_{eq,cmp}
--

create type testtype1 as (a int, b int)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 111,
                  "typeName": {
                    "location": 113,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 118,
                  "typeName": {
                    "location": 120,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 97,
              "relname": "testtype1",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 225 1`] = `
[
  "select row(1, 2)::testtype1 < row(1, 3)::testtype1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 11,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 14,
                                  },
                                },
                              ],
                              "location": 7,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 16,
                          "typeName": {
                            "location": 18,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype1",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 28,
                      "name": [
                        {
                          "String": {
                            "sval": "<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 34,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 37,
                                  },
                                },
                              ],
                              "location": 30,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 39,
                          "typeName": {
                            "location": 41,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype1",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 244 1`] = `
[
  "create type testtype3 as (a int, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "testtype3",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 252 1`] = `
[
  "create type testtype6 as (a int, b point)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "point",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "testtype6",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 256 1`] = `
[
  "drop type testtype1, testtype3, testtype5, testtype6",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "TypeName": {
                  "location": 10,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype1",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 21,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype3",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 32,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype5",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 43,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype6",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
            ],
            "removeType": "OBJECT_TYPE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 265 1`] = `
[
  "select row(1, 2)::testtype1 *< row(1, 3)::testtype1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 11,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 14,
                                  },
                                },
                              ],
                              "location": 7,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 16,
                          "typeName": {
                            "location": 18,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype1",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 28,
                      "name": [
                        {
                          "String": {
                            "sval": "*<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 35,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 38,
                                  },
                                },
                              ],
                              "location": 31,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 40,
                          "typeName": {
                            "location": 42,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype1",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 285 1`] = `
[
  "create type testtype2 as (a smallint, b bool)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int2",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "bool",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "testtype2",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 285 2`] = `
[
  "  -- byval different sizes
select row(1, true)::testtype2 *< row(2, true)::testtype2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 34,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 38,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "boolval": {
                                      "boolval": true,
                                    },
                                    "location": 41,
                                  },
                                },
                              ],
                              "location": 34,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 46,
                          "typeName": {
                            "location": 48,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype2",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 58,
                      "name": [
                        {
                          "String": {
                            "sval": "*<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 65,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "boolval": {
                                      "boolval": true,
                                    },
                                    "location": 68,
                                  },
                                },
                              ],
                              "location": 61,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 73,
                          "typeName": {
                            "location": 75,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype2",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 291 1`] = `
[
  "  -- variable length
select row(1, 'abc')::testtype3 *< row(1, 'abd')::testtype3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 28,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 32,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 35,
                                    "sval": {
                                      "sval": "abc",
                                    },
                                  },
                                },
                              ],
                              "location": 28,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 41,
                          "typeName": {
                            "location": 43,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype3",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 53,
                      "name": [
                        {
                          "String": {
                            "sval": "*<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 60,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 63,
                                    "sval": {
                                      "sval": "abd",
                                    },
                                  },
                                },
                              ],
                              "location": 56,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 69,
                          "typeName": {
                            "location": 71,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype3",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 297 1`] = `
[
  "create type testtype4 as (a int, b point)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 35,
                    "names": [
                      {
                        "String": {
                          "sval": "point",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "testtype4",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 297 2`] = `
[
  "  -- by ref, fixed length
select row(1, '(1,2)')::testtype4 *< row(1, '(1,3)')::testtype4",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 33,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 37,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 40,
                                    "sval": {
                                      "sval": "(1,2)",
                                    },
                                  },
                                },
                              ],
                              "location": 33,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 48,
                          "typeName": {
                            "location": 50,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype4",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 60,
                      "name": [
                        {
                          "String": {
                            "sval": "*<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 67,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 70,
                                    "sval": {
                                      "sval": "(1,3)",
                                    },
                                  },
                                },
                              ],
                              "location": 63,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 78,
                          "typeName": {
                            "location": 80,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype4",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 302 1`] = `
[
  "select row(1, 2)::testtype1 *< row(1, 'abc')::testtype3",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 11,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 2,
                                    },
                                    "location": 14,
                                  },
                                },
                              ],
                              "location": 7,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 16,
                          "typeName": {
                            "location": 18,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype1",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "location": 28,
                      "name": [
                        {
                          "String": {
                            "sval": "*<",
                          },
                        },
                      ],
                      "rexpr": {
                        "TypeCast": {
                          "arg": {
                            "RowExpr": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 35,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "location": 38,
                                    "sval": {
                                      "sval": "abc",
                                    },
                                  },
                                },
                              ],
                              "location": 31,
                              "row_format": "COERCE_EXPLICIT_CALL",
                            },
                          },
                          "location": 44,
                          "typeName": {
                            "location": 46,
                            "names": [
                              {
                                "String": {
                                  "sval": "testtype3",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 315 1`] = `
[
  "select q.a, q.b = row(2), q.c = array[row(3)], q.d = row(row(4)) from
    unnest(array[row(1, row(2), array[row(3)], row(row(4))),
                 row(2, row(3), array[row(4)], row(row(5)))])
      as q(a int, b record, c record[], d record)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "q",
                  },
                  "coldeflist": [
                    {
                      "ColumnDef": {
                        "colname": "a",
                        "is_local": true,
                        "location": 204,
                        "typeName": {
                          "location": 206,
                          "names": [
                            {
                              "String": {
                                "sval": "pg_catalog",
                              },
                            },
                            {
                              "String": {
                                "sval": "int4",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                      },
                    },
                    {
                      "ColumnDef": {
                        "colname": "b",
                        "is_local": true,
                        "location": 211,
                        "typeName": {
                          "location": 213,
                          "names": [
                            {
                              "String": {
                                "sval": "record",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                      },
                    },
                    {
                      "ColumnDef": {
                        "colname": "c",
                        "is_local": true,
                        "location": 221,
                        "typeName": {
                          "arrayBounds": [
                            {
                              "Integer": {},
                            },
                          ],
                          "location": 223,
                          "names": [
                            {
                              "String": {
                                "sval": "record",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                      },
                    },
                    {
                      "ColumnDef": {
                        "colname": "d",
                        "is_local": true,
                        "location": 233,
                        "typeName": {
                          "location": 235,
                          "names": [
                            {
                              "String": {
                                "sval": "record",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                      },
                    },
                  ],
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_ArrayExpr": {
                                    "elements": [
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 91,
                                              },
                                            },
                                            {
                                              "RowExpr": {
                                                "args": [
                                                  {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 2,
                                                      },
                                                      "location": 98,
                                                    },
                                                  },
                                                ],
                                                "location": 94,
                                                "row_format": "COERCE_EXPLICIT_CALL",
                                              },
                                            },
                                            {
                                              "A_ArrayExpr": {
                                                "elements": [
                                                  {
                                                    "RowExpr": {
                                                      "args": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 3,
                                                            },
                                                            "location": 112,
                                                          },
                                                        },
                                                      ],
                                                      "location": 108,
                                                      "row_format": "COERCE_EXPLICIT_CALL",
                                                    },
                                                  },
                                                ],
                                                "location": 102,
                                              },
                                            },
                                            {
                                              "RowExpr": {
                                                "args": [
                                                  {
                                                    "RowExpr": {
                                                      "args": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 4,
                                                            },
                                                            "location": 125,
                                                          },
                                                        },
                                                      ],
                                                      "location": 121,
                                                      "row_format": "COERCE_EXPLICIT_CALL",
                                                    },
                                                  },
                                                ],
                                                "location": 117,
                                                "row_format": "COERCE_EXPLICIT_CALL",
                                              },
                                            },
                                          ],
                                          "location": 87,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                      {
                                        "RowExpr": {
                                          "args": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 152,
                                              },
                                            },
                                            {
                                              "RowExpr": {
                                                "args": [
                                                  {
                                                    "A_Const": {
                                                      "ival": {
                                                        "ival": 3,
                                                      },
                                                      "location": 159,
                                                    },
                                                  },
                                                ],
                                                "location": 155,
                                                "row_format": "COERCE_EXPLICIT_CALL",
                                              },
                                            },
                                            {
                                              "A_ArrayExpr": {
                                                "elements": [
                                                  {
                                                    "RowExpr": {
                                                      "args": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 4,
                                                            },
                                                            "location": 173,
                                                          },
                                                        },
                                                      ],
                                                      "location": 169,
                                                      "row_format": "COERCE_EXPLICIT_CALL",
                                                    },
                                                  },
                                                ],
                                                "location": 163,
                                              },
                                            },
                                            {
                                              "RowExpr": {
                                                "args": [
                                                  {
                                                    "RowExpr": {
                                                      "args": [
                                                        {
                                                          "A_Const": {
                                                            "ival": {
                                                              "ival": 5,
                                                            },
                                                            "location": 186,
                                                          },
                                                        },
                                                      ],
                                                      "location": 182,
                                                      "row_format": "COERCE_EXPLICIT_CALL",
                                                    },
                                                  },
                                                ],
                                                "location": 178,
                                                "row_format": "COERCE_EXPLICIT_CALL",
                                              },
                                            },
                                          ],
                                          "location": 148,
                                          "row_format": "COERCE_EXPLICIT_CALL",
                                        },
                                      },
                                    ],
                                    "location": 81,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "unnest",
                                  },
                                },
                              ],
                              "location": 74,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q",
                              },
                            },
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 12,
                        },
                      },
                      "location": 16,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "ival": {
                                  "ival": 2,
                                },
                                "location": 22,
                              },
                            },
                          ],
                          "location": 18,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 26,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q",
                              },
                            },
                            {
                              "String": {
                                "sval": "c",
                              },
                            },
                          ],
                          "location": 26,
                        },
                      },
                      "location": 30,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_ArrayExpr": {
                          "elements": [
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 3,
                                      },
                                      "location": 42,
                                    },
                                  },
                                ],
                                "location": 38,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 47,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q",
                              },
                            },
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                          ],
                          "location": 47,
                        },
                      },
                      "location": 51,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "RowExpr": {
                          "args": [
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 4,
                                      },
                                      "location": 61,
                                    },
                                  },
                                ],
                                "location": 57,
                                "row_format": "COERCE_EXPLICIT_CALL",
                              },
                            },
                          ],
                          "location": 53,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 320 1`] = `
[
  "drop type testtype1, testtype2, testtype3, testtype4, testtype5, testtype6",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "TypeName": {
                  "location": 10,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype1",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 21,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype2",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 32,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype3",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 43,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype4",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 54,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype5",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
              {
                "TypeName": {
                  "location": 65,
                  "names": [
                    {
                      "String": {
                        "sval": "testtype6",
                      },
                    },
                  ],
                  "typemod": -1,
                },
              },
            ],
            "removeType": "OBJECT_TYPE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 329 1`] = `
[
  "CREATE TABLE price (
    id SERIAL PRIMARY KEY,
    active BOOLEAN NOT NULL,
    price NUMERIC
)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "price",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_PRIMARY",
                        "location": 35,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 25,
                  "typeName": {
                    "location": 28,
                    "names": [
                      {
                        "String": {
                          "sval": "serial",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "active",
                  "constraints": [
                    {
                      "Constraint": {
                        "contype": "CONSTR_NOTNULL",
                        "location": 67,
                      },
                    },
                  ],
                  "is_local": true,
                  "location": 52,
                  "typeName": {
                    "location": 59,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bool",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "price",
                  "is_local": true,
                  "location": 81,
                  "typeName": {
                    "location": 87,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "numeric",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 335 1`] = `
[
  "CREATE TYPE price_input AS (
    id INTEGER,
    price NUMERIC
)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 33,
                  "typeName": {
                    "location": 36,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "price",
                  "is_local": true,
                  "location": 49,
                  "typeName": {
                    "location": 55,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "numeric",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "price_input",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 340 1`] = `
[
  "CREATE TYPE price_key AS (
    id INTEGER
)",
  {
    "stmts": [
      {
        "stmt": {
          "CompositeTypeStmt": {
            "coldeflist": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 31,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
            "typevar": {
              "location": 12,
              "relname": "price_key",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 344 1`] = `
[
  "CREATE FUNCTION price_key_from_table(price) RETURNS price_key AS $$
    SELECT $1.id
$$ LANGUAGE SQL",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "price_key_from_table",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
    SELECT $1.id
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 62,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 88,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "price",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "returnType": {
              "location": 52,
              "names": [
                {
                  "String": {
                    "sval": "price_key",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 348 1`] = `
[
  "CREATE FUNCTION price_key_from_input(price_input) RETURNS price_key AS $$
    SELECT $1.id
$$ LANGUAGE SQL",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "price_key_from_input",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
    SELECT $1.id
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 68,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 94,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 37,
                    "names": [
                      {
                        "String": {
                          "sval": "price_input",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "returnType": {
              "location": 58,
              "names": [
                {
                  "String": {
                    "sval": "price_key",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 352 1`] = `
[
  "insert into price values (1,false,42), (10,false,100), (11,true,17.99)",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "price",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 26,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {},
                            "location": 28,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 42,
                            },
                            "location": 34,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 10,
                            },
                            "location": 40,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {},
                            "location": 43,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 100,
                            },
                            "location": 49,
                          },
                        },
                      ],
                    },
                  },
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 11,
                            },
                            "location": 56,
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {
                              "boolval": true,
                            },
                            "location": 59,
                          },
                        },
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "17.99",
                            },
                            "location": 64,
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 354 1`] = `
[
  "UPDATE price
    SET active = true, price = input_prices.price
    FROM unnest(ARRAY[(10, 123.00), (11, 99.99)]::price_input[]) input_prices
    WHERE price_key_from_table(price.*) = price_key_from_input(input_prices.*)",
  {
    "stmts": [
      {
        "stmt": {
          "UpdateStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "input_prices",
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "TypeCast": {
                                    "arg": {
                                      "A_ArrayExpr": {
                                        "elements": [
                                          {
                                            "RowExpr": {
                                              "args": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 10,
                                                    },
                                                    "location": 86,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "fval": {
                                                      "fval": "123.00",
                                                    },
                                                    "location": 90,
                                                  },
                                                },
                                              ],
                                              "location": 85,
                                              "row_format": "COERCE_IMPLICIT_CAST",
                                            },
                                          },
                                          {
                                            "RowExpr": {
                                              "args": [
                                                {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 11,
                                                    },
                                                    "location": 100,
                                                  },
                                                },
                                                {
                                                  "A_Const": {
                                                    "fval": {
                                                      "fval": "99.99",
                                                    },
                                                    "location": 104,
                                                  },
                                                },
                                              ],
                                              "location": 99,
                                              "row_format": "COERCE_IMPLICIT_CAST",
                                            },
                                          },
                                        ],
                                        "location": 79,
                                      },
                                    },
                                    "location": 111,
                                    "typeName": {
                                      "arrayBounds": [
                                        {
                                          "Integer": {},
                                        },
                                      ],
                                      "location": 113,
                                      "names": [
                                        {
                                          "String": {
                                            "sval": "price_input",
                                          },
                                        },
                                      ],
                                      "typemod": -1,
                                    },
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "unnest",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "relation": {
              "inh": true,
              "location": 7,
              "relname": "price",
              "relpersistence": "p",
            },
            "targetList": [
              {
                "ResTarget": {
                  "location": 21,
                  "name": "active",
                  "val": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 30,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 36,
                  "name": "price",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "input_prices",
                          },
                        },
                        {
                          "String": {
                            "sval": "price",
                          },
                        },
                      ],
                      "location": 44,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "FuncCall": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "price",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 172,
                        },
                      },
                    ],
                    "funcformat": "COERCE_EXPLICIT_CALL",
                    "funcname": [
                      {
                        "String": {
                          "sval": "price_key_from_table",
                        },
                      },
                    ],
                    "location": 151,
                  },
                },
                "location": 181,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "FuncCall": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "input_prices",
                              },
                            },
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 204,
                        },
                      },
                    ],
                    "funcformat": "COERCE_EXPLICIT_CALL",
                    "funcname": [
                      {
                        "String": {
                          "sval": "price_key_from_input",
                        },
                      },
                    ],
                    "location": 183,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 359 1`] = `
[
  "select * from price",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 14,
                  "relname": "price",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 361 1`] = `
[
  "rollback",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_ROLLBACK",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 370 1`] = `
[
  "create function fcompos1(v compos) returns void as $$
insert into compos values (v);  -- fail
$$ language sql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "fcompos1",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
insert into compos values (v);  -- fail
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 48,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 97,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "compos",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "v",
                },
              },
            ],
            "returnType": {
              "location": 43,
              "names": [
                {
                  "String": {
                    "sval": "void",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 378 1`] = `
[
  "create function fcompos2(v compos) returns void as $$
select fcompos1(v);
$$ language sql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "fcompos2",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
select fcompos1(v);
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 48,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 77,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "compos",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "v",
                },
              },
            ],
            "returnType": {
              "location": 43,
              "names": [
                {
                  "String": {
                    "sval": "void",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 382 1`] = `
[
  "create function fcompos3(v compos) returns void as $$
select fcompos1(fcompos3.v.*);
$$ language sql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "fcompos3",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
select fcompos1(fcompos3.v.*);
",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 48,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 88,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 27,
                    "names": [
                      {
                        "String": {
                          "sval": "compos",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "v",
                },
              },
            ],
            "returnType": {
              "location": 43,
              "names": [
                {
                  "String": {
                    "sval": "void",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 386 1`] = `
[
  "select fcompos1(row(1,'one'))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 20,
                                },
                              },
                              {
                                "A_Const": {
                                  "location": 22,
                                  "sval": {
                                    "sval": "one",
                                  },
                                },
                              },
                            ],
                            "location": 16,
                            "row_format": "COERCE_EXPLICIT_CALL",
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "fcompos1",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 396 1`] = `
[
  "select cast (fullname as text) from fullname",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 36,
                  "relname": "fullname",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "fullname",
                              },
                            },
                          ],
                          "location": 13,
                        },
                      },
                      "location": 7,
                      "typeName": {
                        "location": 25,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 398 1`] = `
[
  "  -- error
select fullname.text from fullname",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 37,
                  "relname": "fullname",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "fullname",
                          },
                        },
                        {
                          "String": {
                            "sval": "text",
                          },
                        },
                      ],
                      "location": 18,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 399 1`] = `
[
  "  -- error
-- same, but RECORD instead of named composite type:
select cast (row('Jim', 'Beam') as text)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 71,
                  "val": {
                    "TypeCast": {
                      "arg": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "location": 81,
                                "sval": {
                                  "sval": "Jim",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 88,
                                "sval": {
                                  "sval": "Beam",
                                },
                              },
                            },
                          ],
                          "location": 77,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "location": 71,
                      "typeName": {
                        "location": 99,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 403 1`] = `
[
  "  -- error
select (row('Jim', 'Beam')).text",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 18,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "RowExpr": {
                          "args": [
                            {
                              "A_Const": {
                                "location": 23,
                                "sval": {
                                  "sval": "Jim",
                                },
                              },
                            },
                            {
                              "A_Const": {
                                "location": 30,
                                "sval": {
                                  "sval": "Beam",
                                },
                              },
                            },
                          ],
                          "location": 19,
                          "row_format": "COERCE_EXPLICIT_CALL",
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "text",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 404 1`] = `
[
  "  -- error

--
-- Check the equivalence of functional and column notation
--
insert into fullname values ('Joe', 'Blow')",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 89,
              "relname": "fullname",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "valuesLists": [
                  {
                    "List": {
                      "items": [
                        {
                          "A_Const": {
                            "location": 106,
                            "sval": {
                              "sval": "Joe",
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 113,
                            "sval": {
                              "sval": "Blow",
                            },
                          },
                        },
                      ],
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 411 1`] = `
[
  "select f.last from fullname f",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "f",
                  },
                  "inh": true,
                  "location": 19,
                  "relname": "fullname",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "last",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 414 1`] = `
[
  "create function longname(fullname) returns text language sql
as $$select $1.first || ' ' || $1.last$$",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "longname",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "sql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 48,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "select $1.first || ' ' || $1.last",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 61,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "fullname",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                },
              },
            ],
            "returnType": {
              "location": 43,
              "names": [
                {
                  "String": {
                    "sval": "text",
                  },
                },
              ],
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 417 1`] = `
[
  "select f.longname from fullname f",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "f",
                  },
                  "inh": true,
                  "location": 23,
                  "relname": "fullname",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "f",
                          },
                        },
                        {
                          "String": {
                            "sval": "longname",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 421 1`] = `
[
  "alter table fullname add column longname text",
  {
    "stmts": [
      {
        "stmt": {
          "AlterTableStmt": {
            "cmds": [
              {
                "AlterTableCmd": {
                  "behavior": "DROP_RESTRICT",
                  "def": {
                    "ColumnDef": {
                      "colname": "longname",
                      "is_local": true,
                      "location": 32,
                      "typeName": {
                        "location": 41,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "subtype": "AT_AddColumn",
                },
              },
            ],
            "objtype": "OBJECT_TABLE",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "fullname",
              "relpersistence": "p",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 433 1`] = `
[
  "select row_to_json(i) from int8_tbl i(x,y)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "i",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                      {
                        "String": {
                          "sval": "y",
                        },
                      },
                    ],
                  },
                  "inh": true,
                  "location": 27,
                  "relname": "int8_tbl",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "i",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "row_to_json",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 436 1`] = `
[
  "select row_to_json(ss) from
  (select q1, q2 from int8_tbl) as ss",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 50,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 38,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 38,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 42,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q2",
                                    },
                                  },
                                ],
                                "location": 42,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ss",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "row_to_json",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 449 1`] = `
[
  "explain (costs off)
select row_to_json(q) from
  (select thousand, tenthous from tenk1
   where thousand = 42 and tenthous < 2000 offset 0) q",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "q",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 81,
                                "relname": "tenk1",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOffset": {
                            "A_Const": {
                              "ival": {},
                              "location": 137,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_COUNT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 57,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "thousand",
                                        },
                                      },
                                    ],
                                    "location": 57,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 67,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "tenthous",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                              },
                            },
                          ],
                          "whereClause": {
                            "BoolExpr": {
                              "args": [
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "thousand",
                                            },
                                          },
                                        ],
                                        "location": 96,
                                      },
                                    },
                                    "location": 105,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "=",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 42,
                                        },
                                        "location": 107,
                                      },
                                    },
                                  },
                                },
                                {
                                  "A_Expr": {
                                    "kind": "AEXPR_OP",
                                    "lexpr": {
                                      "ColumnRef": {
                                        "fields": [
                                          {
                                            "String": {
                                              "sval": "tenthous",
                                            },
                                          },
                                        ],
                                        "location": 114,
                                      },
                                    },
                                    "location": 123,
                                    "name": [
                                      {
                                        "String": {
                                          "sval": "<",
                                        },
                                      },
                                    ],
                                    "rexpr": {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2000,
                                        },
                                        "location": 125,
                                      },
                                    },
                                  },
                                },
                              ],
                              "boolop": "AND_EXPR",
                              "location": 110,
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q",
                                    },
                                  },
                                ],
                                "location": 39,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "row_to_json",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 463 1`] = `
[
  "create temp table tt1 as select * from int8_tbl limit 2",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 18,
                "relname": "tt1",
                "relpersistence": "t",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 39,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitCount": {
                  "A_Const": {
                    "ival": {
                      "ival": 2,
                    },
                    "location": 54,
                  },
                },
                "limitOption": "LIMIT_OPTION_COUNT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 469 1`] = `
[
  "create temp table tt3 () inherits(tt2)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "inhRelations": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 34,
                  "relname": "tt2",
                  "relpersistence": "p",
                },
              },
            ],
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "tt3",
              "relpersistence": "t",
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 478 1`] = `
[
  "select r, r is null as isnull, r is not null as isnotnull
from (values (1,row(1,2)), (1,row(null,null)), (1,null),
             (null,row(1,2)), (null,row(null,null)), (null,null) ) r(a,b)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "r",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 72,
                                },
                              },
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 78,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 80,
                                      },
                                    },
                                  ],
                                  "location": 74,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 86,
                                },
                              },
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 92,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 97,
                                      },
                                    },
                                  ],
                                  "location": 88,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 106,
                                },
                              },
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 108,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 129,
                                },
                              },
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 138,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 140,
                                      },
                                    },
                                  ],
                                  "location": 134,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 146,
                                },
                              },
                              {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 155,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 160,
                                      },
                                    },
                                  ],
                                  "location": 151,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 169,
                                },
                              },
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 174,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "r",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "name": "isnull",
                  "val": {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 10,
                        },
                      },
                      "location": 12,
                      "nulltesttype": "IS_NULL",
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 31,
                  "name": "isnotnull",
                  "val": {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 31,
                        },
                      },
                      "location": 33,
                      "nulltesttype": "IS_NOT_NULL",
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 486 1`] = `
[
  "explain (verbose, costs off)
with r(a,b) as materialized
  (values (1,row(1,2)), (1,row(null,null)), (1,null),
          (null,row(1,2)), (null,row(null,null)), (null,null) )
select r, r is null as isnull, r is not null as isnotnull from r",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 238,
                      "relname": "r",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 182,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 182,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 185,
                      "name": "isnull",
                      "val": {
                        "NullTest": {
                          "arg": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "r",
                                  },
                                },
                              ],
                              "location": 185,
                            },
                          },
                          "location": 187,
                          "nulltesttype": "IS_NULL",
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 206,
                      "name": "isnotnull",
                      "val": {
                        "NullTest": {
                          "arg": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "r",
                                  },
                                },
                              ],
                              "location": 206,
                            },
                          },
                          "location": 208,
                          "nulltesttype": "IS_NOT_NULL",
                        },
                      },
                    },
                  },
                ],
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "r",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "valuesLists": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 68,
                                      },
                                    },
                                    {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 74,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 76,
                                            },
                                          },
                                        ],
                                        "location": 70,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 82,
                                      },
                                    },
                                    {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "A_Const": {
                                              "isnull": true,
                                              "location": 88,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "isnull": true,
                                              "location": 93,
                                            },
                                          },
                                        ],
                                        "location": 84,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 102,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 104,
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 122,
                                      },
                                    },
                                    {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 1,
                                              },
                                              "location": 131,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "ival": {
                                                "ival": 2,
                                              },
                                              "location": 133,
                                            },
                                          },
                                        ],
                                        "location": 127,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 139,
                                      },
                                    },
                                    {
                                      "RowExpr": {
                                        "args": [
                                          {
                                            "A_Const": {
                                              "isnull": true,
                                              "location": 148,
                                            },
                                          },
                                          {
                                            "A_Const": {
                                              "isnull": true,
                                              "location": 153,
                                            },
                                          },
                                        ],
                                        "location": 144,
                                        "row_format": "COERCE_EXPLICIT_CALL",
                                      },
                                    },
                                  ],
                                },
                              },
                              {
                                "List": {
                                  "items": [
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 162,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "isnull": true,
                                        "location": 167,
                                      },
                                    },
                                  ],
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 492 1`] = `
[
  "with r(a,b) as materialized
  (values (1,row(1,2)), (1,row(null,null)), (1,null),
          (null,row(1,2)), (null,row(null,null)), (null,null) )
select r, r is null as isnull, r is not null as isnotnull from r",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 209,
                  "relname": "r",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 153,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "r",
                          },
                        },
                      ],
                      "location": 153,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 156,
                  "name": "isnull",
                  "val": {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 156,
                        },
                      },
                      "location": 158,
                      "nulltesttype": "IS_NULL",
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 177,
                  "name": "isnotnull",
                  "val": {
                    "NullTest": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "r",
                              },
                            },
                          ],
                          "location": 177,
                        },
                      },
                      "location": 179,
                      "nulltesttype": "IS_NOT_NULL",
                    },
                  },
                },
              },
            ],
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "r",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "valuesLists": [
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 39,
                                  },
                                },
                                {
                                  "RowExpr": {
                                    "args": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 45,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 2,
                                          },
                                          "location": 47,
                                        },
                                      },
                                    ],
                                    "location": 41,
                                    "row_format": "COERCE_EXPLICIT_CALL",
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 53,
                                  },
                                },
                                {
                                  "RowExpr": {
                                    "args": [
                                      {
                                        "A_Const": {
                                          "isnull": true,
                                          "location": 59,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "isnull": true,
                                          "location": 64,
                                        },
                                      },
                                    ],
                                    "location": 55,
                                    "row_format": "COERCE_EXPLICIT_CALL",
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 73,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 75,
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 93,
                                  },
                                },
                                {
                                  "RowExpr": {
                                    "args": [
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 1,
                                          },
                                          "location": 102,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "ival": {
                                            "ival": 2,
                                          },
                                          "location": 104,
                                        },
                                      },
                                    ],
                                    "location": 98,
                                    "row_format": "COERCE_EXPLICIT_CALL",
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 110,
                                  },
                                },
                                {
                                  "RowExpr": {
                                    "args": [
                                      {
                                        "A_Const": {
                                          "isnull": true,
                                          "location": 119,
                                        },
                                      },
                                      {
                                        "A_Const": {
                                          "isnull": true,
                                          "location": 124,
                                        },
                                      },
                                    ],
                                    "location": 115,
                                    "row_format": "COERCE_EXPLICIT_CALL",
                                  },
                                },
                              ],
                            },
                          },
                          {
                            "List": {
                              "items": [
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 133,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "isnull": true,
                                    "location": 138,
                                  },
                                },
                              ],
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 500 1`] = `
[
  "explain (verbose, costs off)
with cte(c) as materialized (select row(1, 2)),
     cte2(c) as (select * from cte)
select * from cte2 as t
where (select * from (select c as c1) s
       where (select (c1).f1 > 0)) is not null",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 127,
                      "relname": "cte2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 120,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 120,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "SubLink": {
                        "location": 143,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "s",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 166,
                                            "name": "c1",
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "c",
                                                    },
                                                  },
                                                ],
                                                "location": 166,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 151,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 151,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "SubLink": {
                                "location": 190,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 198,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "A_Indirection": {
                                                  "arg": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "c1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 199,
                                                    },
                                                  },
                                                  "indirection": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                },
                                              },
                                              "location": 206,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": ">",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {},
                                                  "location": 208,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 212,
                    "nulltesttype": "IS_NOT_NULL",
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "cte",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 65,
                                  "val": {
                                    "RowExpr": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 69,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 72,
                                          },
                                        },
                                      ],
                                      "location": 65,
                                      "row_format": "COERCE_EXPLICIT_CALL",
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 34,
                      },
                    },
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "cte2",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 108,
                                  "relname": "cte",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 101,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 101,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 82,
                      },
                    },
                  ],
                  "location": 29,
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 507 1`] = `
[
  "with cte(c) as materialized (select row(1, 2)),
     cte2(c) as (select * from cte)
select * from cte2 as t
where (select * from (select c as c1) s
       where (select (c1).f1 > 0)) is not null",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "inh": true,
                  "location": 98,
                  "relname": "cte2",
                  "relpersistence": "p",
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 91,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 91,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "NullTest": {
                "arg": {
                  "SubLink": {
                    "location": 114,
                    "subLinkType": "EXPR_SUBLINK",
                    "subselect": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeSubselect": {
                              "alias": {
                                "aliasname": "s",
                              },
                              "subquery": {
                                "SelectStmt": {
                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                  "op": "SETOP_NONE",
                                  "targetList": [
                                    {
                                      "ResTarget": {
                                        "location": 137,
                                        "name": "c1",
                                        "val": {
                                          "ColumnRef": {
                                            "fields": [
                                              {
                                                "String": {
                                                  "sval": "c",
                                                },
                                              },
                                            ],
                                            "location": 137,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              },
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 122,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 122,
                                },
                              },
                            },
                          },
                        ],
                        "whereClause": {
                          "SubLink": {
                            "location": 161,
                            "subLinkType": "EXPR_SUBLINK",
                            "subselect": {
                              "SelectStmt": {
                                "limitOption": "LIMIT_OPTION_DEFAULT",
                                "op": "SETOP_NONE",
                                "targetList": [
                                  {
                                    "ResTarget": {
                                      "location": 169,
                                      "val": {
                                        "A_Expr": {
                                          "kind": "AEXPR_OP",
                                          "lexpr": {
                                            "A_Indirection": {
                                              "arg": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "c1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 170,
                                                },
                                              },
                                              "indirection": [
                                                {
                                                  "String": {
                                                    "sval": "f1",
                                                  },
                                                },
                                              ],
                                            },
                                          },
                                          "location": 177,
                                          "name": [
                                            {
                                              "String": {
                                                "sval": ">",
                                              },
                                            },
                                          ],
                                          "rexpr": {
                                            "A_Const": {
                                              "ival": {},
                                              "location": 179,
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                        },
                      },
                    },
                  },
                },
                "location": 183,
                "nulltesttype": "IS_NOT_NULL",
              },
            },
            "withClause": {
              "ctes": [
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeAlways",
                    "ctename": "cte",
                    "ctequery": {
                      "SelectStmt": {
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 36,
                              "val": {
                                "RowExpr": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 40,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 2,
                                        },
                                        "location": 43,
                                      },
                                    },
                                  ],
                                  "location": 36,
                                  "row_format": "COERCE_EXPLICIT_CALL",
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 5,
                  },
                },
                {
                  "CommonTableExpr": {
                    "aliascolnames": [
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                    "ctematerialized": "CTEMaterializeDefault",
                    "ctename": "cte2",
                    "ctequery": {
                      "SelectStmt": {
                        "fromClause": [
                          {
                            "RangeVar": {
                              "inh": true,
                              "location": 79,
                              "relname": "cte",
                              "relpersistence": "p",
                            },
                          },
                        ],
                        "limitOption": "LIMIT_OPTION_DEFAULT",
                        "op": "SETOP_NONE",
                        "targetList": [
                          {
                            "ResTarget": {
                              "location": 72,
                              "val": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "A_Star": {},
                                    },
                                  ],
                                  "location": 72,
                                },
                              },
                            },
                          },
                        ],
                      },
                    },
                    "location": 53,
                  },
                },
              ],
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 514 1`] = `
[
  "create view composite_v as
with cte(c) as materialized (select row(1, 2)),
     cte2(c) as (select * from cte)
select 1 as one from cte2 as t
where (select * from (select c as c1) s
       where (select (c1).f1 > 0)) is not null",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t",
                      },
                      "inh": true,
                      "location": 132,
                      "relname": "cte2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 118,
                      "name": "one",
                      "val": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 118,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "NullTest": {
                    "arg": {
                      "SubLink": {
                        "location": 148,
                        "subLinkType": "EXPR_SUBLINK",
                        "subselect": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeSubselect": {
                                  "alias": {
                                    "aliasname": "s",
                                  },
                                  "subquery": {
                                    "SelectStmt": {
                                      "limitOption": "LIMIT_OPTION_DEFAULT",
                                      "op": "SETOP_NONE",
                                      "targetList": [
                                        {
                                          "ResTarget": {
                                            "location": 171,
                                            "name": "c1",
                                            "val": {
                                              "ColumnRef": {
                                                "fields": [
                                                  {
                                                    "String": {
                                                      "sval": "c",
                                                    },
                                                  },
                                                ],
                                                "location": 171,
                                              },
                                            },
                                          },
                                        },
                                      ],
                                    },
                                  },
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 156,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 156,
                                    },
                                  },
                                },
                              },
                            ],
                            "whereClause": {
                              "SubLink": {
                                "location": 195,
                                "subLinkType": "EXPR_SUBLINK",
                                "subselect": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "targetList": [
                                      {
                                        "ResTarget": {
                                          "location": 203,
                                          "val": {
                                            "A_Expr": {
                                              "kind": "AEXPR_OP",
                                              "lexpr": {
                                                "A_Indirection": {
                                                  "arg": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "c1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 204,
                                                    },
                                                  },
                                                  "indirection": [
                                                    {
                                                      "String": {
                                                        "sval": "f1",
                                                      },
                                                    },
                                                  ],
                                                },
                                              },
                                              "location": 211,
                                              "name": [
                                                {
                                                  "String": {
                                                    "sval": ">",
                                                  },
                                                },
                                              ],
                                              "rexpr": {
                                                "A_Const": {
                                                  "ival": {},
                                                  "location": 213,
                                                },
                                              },
                                            },
                                          },
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          },
                        },
                      },
                    },
                    "location": 217,
                    "nulltesttype": "IS_NOT_NULL",
                  },
                },
                "withClause": {
                  "ctes": [
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeAlways",
                        "ctename": "cte",
                        "ctequery": {
                          "SelectStmt": {
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 63,
                                  "val": {
                                    "RowExpr": {
                                      "args": [
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 1,
                                            },
                                            "location": 67,
                                          },
                                        },
                                        {
                                          "A_Const": {
                                            "ival": {
                                              "ival": 2,
                                            },
                                            "location": 70,
                                          },
                                        },
                                      ],
                                      "location": 63,
                                      "row_format": "COERCE_EXPLICIT_CALL",
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 32,
                      },
                    },
                    {
                      "CommonTableExpr": {
                        "aliascolnames": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "ctematerialized": "CTEMaterializeDefault",
                        "ctename": "cte2",
                        "ctequery": {
                          "SelectStmt": {
                            "fromClause": [
                              {
                                "RangeVar": {
                                  "inh": true,
                                  "location": 106,
                                  "relname": "cte",
                                  "relpersistence": "p",
                                },
                              },
                            ],
                            "limitOption": "LIMIT_OPTION_DEFAULT",
                            "op": "SETOP_NONE",
                            "targetList": [
                              {
                                "ResTarget": {
                                  "location": 99,
                                  "val": {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "A_Star": {},
                                        },
                                      ],
                                      "location": 99,
                                    },
                                  },
                                },
                              },
                            ],
                          },
                        },
                        "location": 80,
                      },
                    },
                  ],
                  "location": 27,
                },
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "composite_v",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 526 1`] = `
[
  "CREATE TABLE compositetable(a text, b text)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "compositetable",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 28,
                  "typeName": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 36,
                  "typeName": {
                    "location": 38,
                    "names": [
                      {
                        "String": {
                          "sval": "text",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 530 1`] = `
[
  "SELECT d.a FROM (SELECT compositetable AS d FROM compositetable) s",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 49,
                            "relname": "compositetable",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 24,
                            "name": "d",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "compositetable",
                                    },
                                  },
                                ],
                                "location": 24,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "d",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 532 1`] = `
[
  "SELECT (d).a, (d).b FROM (SELECT compositetable AS d FROM compositetable) s",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 58,
                            "relname": "compositetable",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 33,
                            "name": "d",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "compositetable",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                          ],
                          "location": 8,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 14,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                          ],
                          "location": 15,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 534 1`] = `
[
  "SELECT (d).ctid FROM (SELECT compositetable AS d FROM compositetable) s",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 54,
                            "relname": "compositetable",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 29,
                            "name": "d",
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "compositetable",
                                    },
                                  },
                                ],
                                "location": 29,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "d",
                              },
                            },
                          ],
                          "location": 8,
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "ctid",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 537 1`] = `
[
  "SELECT (NULL::compositetable).nonexistent",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "TypeCast": {
                          "arg": {
                            "A_Const": {
                              "isnull": true,
                              "location": 8,
                            },
                          },
                          "location": 12,
                          "typeName": {
                            "location": 14,
                            "names": [
                              {
                                "String": {
                                  "sval": "compositetable",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "nonexistent",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 539 1`] = `
[
  "SELECT (NULL::compositetable).a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "TypeCast": {
                          "arg": {
                            "A_Const": {
                              "isnull": true,
                              "location": 8,
                            },
                          },
                          "location": 12,
                          "typeName": {
                            "location": 14,
                            "names": [
                              {
                                "String": {
                                  "sval": "compositetable",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 541 1`] = `
[
  "SELECT (NULL::compositetable).oid",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Indirection": {
                      "arg": {
                        "TypeCast": {
                          "arg": {
                            "A_Const": {
                              "isnull": true,
                              "location": 8,
                            },
                          },
                          "location": 12,
                          "typeName": {
                            "location": 14,
                            "names": [
                              {
                                "String": {
                                  "sval": "compositetable",
                                },
                              },
                            ],
                            "typemod": -1,
                          },
                        },
                      },
                      "indirection": [
                        {
                          "String": {
                            "sval": "oid",
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`rowtypes.sql > line 543 1`] = `
[
  "DROP TABLE compositetable",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "compositetable",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
