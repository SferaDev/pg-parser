// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`groupingsets.sql > line 13 1`] = `
[
  "create temp table gstest2 (a integer, b integer, c integer, d integer,
                           e integer, f integer, g integer, h integer)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "gstest2",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 27,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "c",
                  "is_local": true,
                  "location": 49,
                  "typeName": {
                    "location": 51,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "d",
                  "is_local": true,
                  "location": 60,
                  "typeName": {
                    "location": 62,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "e",
                  "is_local": true,
                  "location": 98,
                  "typeName": {
                    "location": 100,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "f",
                  "is_local": true,
                  "location": 109,
                  "typeName": {
                    "location": 111,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "g",
                  "is_local": true,
                  "location": 120,
                  "typeName": {
                    "location": 122,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "h",
                  "is_local": true,
                  "location": 131,
                  "typeName": {
                    "location": 133,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 18 1`] = `
[
  "create temp table gstest4(id integer, v integer,
                          unhashable_col bit(4), unsortable_col xid)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "gstest4",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "id",
                  "is_local": true,
                  "location": 26,
                  "typeName": {
                    "location": 29,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "v",
                  "is_local": true,
                  "location": 38,
                  "typeName": {
                    "location": 40,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "unhashable_col",
                  "is_local": true,
                  "location": 75,
                  "typeName": {
                    "location": 90,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "bit",
                        },
                      },
                    ],
                    "typemod": -1,
                    "typmods": [
                      {
                        "A_Const": {
                          "ival": {
                            "ival": 4,
                          },
                          "location": 94,
                        },
                      },
                    ],
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "unsortable_col",
                  "is_local": true,
                  "location": 98,
                  "typeName": {
                    "location": 113,
                    "names": [
                      {
                        "String": {
                          "sval": "xid",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 21 1`] = `
[
  "values (1,1,b'0000','1'), (2,2,b'0001','1'),
       (3,4,b'0010','2'), (4,8,b'0011','2'),
       (5,16,b'0000','2'), (6,32,b'0001','2'),
       (7,64,b'0010','1'), (8,128,b'0011','1')",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "valuesLists": [
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 8,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 1,
                        },
                        "location": 10,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0000",
                        },
                        "location": 12,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 20,
                        "sval": {
                          "sval": "1",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 2,
                        },
                        "location": 27,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 2,
                        },
                        "location": 29,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0001",
                        },
                        "location": 31,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 39,
                        "sval": {
                          "sval": "1",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 3,
                        },
                        "location": 53,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 4,
                        },
                        "location": 55,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0010",
                        },
                        "location": 57,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 65,
                        "sval": {
                          "sval": "2",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 4,
                        },
                        "location": 72,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 8,
                        },
                        "location": 74,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0011",
                        },
                        "location": 76,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 84,
                        "sval": {
                          "sval": "2",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 5,
                        },
                        "location": 98,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 16,
                        },
                        "location": 100,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0000",
                        },
                        "location": 103,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 111,
                        "sval": {
                          "sval": "2",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 6,
                        },
                        "location": 118,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 32,
                        },
                        "location": 120,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0001",
                        },
                        "location": 123,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 131,
                        "sval": {
                          "sval": "2",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 7,
                        },
                        "location": 145,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 64,
                        },
                        "location": 147,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0010",
                        },
                        "location": 150,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 158,
                        "sval": {
                          "sval": "1",
                        },
                      },
                    },
                  ],
                },
              },
              {
                "List": {
                  "items": [
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 8,
                        },
                        "location": 165,
                      },
                    },
                    {
                      "A_Const": {
                        "ival": {
                          "ival": 128,
                        },
                        "location": 167,
                      },
                    },
                    {
                      "A_Const": {
                        "bsval": {
                          "bsval": "b0011",
                        },
                        "location": 171,
                      },
                    },
                    {
                      "A_Const": {
                        "location": 179,
                        "sval": {
                          "sval": "1",
                        },
                      },
                    },
                  ],
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 26 1`] = `
[
  "create temp table gstest_empty (a integer, b integer, v integer)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 18,
              "relname": "gstest_empty",
              "relpersistence": "t",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "a",
                  "is_local": true,
                  "location": 32,
                  "typeName": {
                    "location": 34,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "b",
                  "is_local": true,
                  "location": 43,
                  "typeName": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "v",
                  "is_local": true,
                  "location": 54,
                  "typeName": {
                    "location": 56,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 28 1`] = `
[
  "create function gstest_data(v integer, out a integer, out b integer)
  returns setof record
  as $f$
    begin
      return query select v, i from generate_series(1,3) i;
    end;
  $f$ language plpgsql",
  {
    "stmts": [
      {
        "stmt": {
          "CreateFunctionStmt": {
            "funcname": [
              {
                "String": {
                  "sval": "gstest_data",
                },
              },
            ],
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "List": {
                      "items": [
                        {
                          "String": {
                            "sval": "
    begin
      return query select v, i from generate_series(1,3) i;
    end;
  ",
                          },
                        },
                      ],
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "as",
                  "location": 94,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "plpgsql",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "language",
                  "location": 186,
                },
              },
            ],
            "parameters": [
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 30,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_DEFAULT",
                  "name": "v",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 45,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_OUT",
                  "name": "a",
                },
              },
              {
                "FunctionParameter": {
                  "argType": {
                    "location": 60,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                  "mode": "FUNC_PARAM_OUT",
                  "name": "b",
                },
              },
            ],
            "returnType": {
              "location": 85,
              "names": [
                {
                  "String": {
                    "sval": "record",
                  },
                },
              ],
              "setof": true,
              "typemod": -1,
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 38 1`] = `
[
  "  -- test hashing explicitly later

-- simple rollup with multiple plain aggregates, with and without ordering
-- (and with ordering differing from grouping)

select a, b, grouping(a,b), sum(v), count(*), max(v)
  from gstest1 group by rollup (a,b)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 219,
                  "relname": "gstest1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 244,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 246,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 236,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 166,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 166,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 169,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 169,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 172,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 181,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 183,
                          },
                        },
                      ],
                      "location": 172,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 187,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 191,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 187,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 195,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 195,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 205,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 209,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 205,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 53 1`] = `
[
  "select a, b, grouping(a,b),
       array_agg(v order by v),
       string_agg(v::text, ':' order by v desc),
       percentile_disc(0.5) within group (order by v),
       rank(1,2,12) within group (order by a,b,v)
  from gstest1 group by rollup (a,b) order by a,b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 221,
                  "relname": "gstest1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 246,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 248,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 238,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 260,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 262,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 24,
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 35,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 56,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                      ],
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 45,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "array_agg",
                          },
                        },
                      ],
                      "location": 35,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 67,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 100,
                              },
                            },
                            "sortby_dir": "SORTBY_DESC",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                      ],
                      "args": [
                        {
                          "TypeCast": {
                            "arg": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 78,
                              },
                            },
                            "location": 79,
                            "typeName": {
                              "location": 81,
                              "names": [
                                {
                                  "String": {
                                    "sval": "text",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "location": 87,
                            "sval": {
                              "sval": ":",
                            },
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "string_agg",
                          },
                        },
                      ],
                      "location": 67,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 116,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 160,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                      ],
                      "agg_within_group": true,
                      "args": [
                        {
                          "A_Const": {
                            "fval": {
                              "fval": "0.5",
                            },
                            "location": 132,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "percentile_disc",
                          },
                        },
                      ],
                      "location": 116,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 171,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 207,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 209,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 211,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                          },
                        },
                      ],
                      "agg_within_group": true,
                      "args": [
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 1,
                            },
                            "location": 176,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 2,
                            },
                            "location": 178,
                          },
                        },
                        {
                          "A_Const": {
                            "ival": {
                              "ival": 12,
                            },
                            "location": 180,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "rank",
                          },
                        },
                      ],
                      "location": 171,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 61 1`] = `
[
  "select grouping(a), a, array_agg(b),
       rank(a) within group (order by b nulls first),
       rank(a) within group (order by b nulls last)
  from (values (1,1),(1,4),(1,5),(3,1),(3,2)) v(a,b)
 group by rollup (a) order by a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 159,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 161,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 165,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 4,
                                  },
                                  "location": 167,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 171,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 5,
                                  },
                                  "location": 173,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 177,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 179,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 183,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 185,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 214,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 206,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 226,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 16,
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 33,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "array_agg",
                          },
                        },
                      ],
                      "location": 23,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 44,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 75,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_FIRST",
                          },
                        },
                      ],
                      "agg_within_group": true,
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 49,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "rank",
                          },
                        },
                      ],
                      "location": 44,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 98,
                  "val": {
                    "FuncCall": {
                      "agg_order": [
                        {
                          "SortBy": {
                            "location": -1,
                            "node": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 129,
                              },
                            },
                            "sortby_dir": "SORTBY_DEFAULT",
                            "sortby_nulls": "SORTBY_NULLS_LAST",
                          },
                        },
                      ],
                      "agg_within_group": true,
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 103,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "rank",
                          },
                        },
                      ],
                      "location": 98,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 68 1`] = `
[
  "select a, b, sum(c), sum(sum(c)) over (order by a,b) as rsum
  from gstest2 group by rollup (a,b) order by rsum, a, b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 68,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 95,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 85,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "rsum",
                          },
                        },
                      ],
                      "location": 107,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 113,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 116,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 17,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 21,
                  "name": "rsum",
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "FuncCall": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 29,
                                },
                              },
                            ],
                            "funcformat": "COERCE_EXPLICIT_CALL",
                            "funcname": [
                              {
                                "String": {
                                  "sval": "sum",
                                },
                              },
                            ],
                            "location": 25,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 21,
                      "over": {
                        "frameOptions": 1058,
                        "location": 38,
                        "orderClause": [
                          {
                            "SortBy": {
                              "location": -1,
                              "node": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 48,
                                },
                              },
                              "sortby_dir": "SORTBY_DEFAULT",
                              "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                            },
                          },
                          {
                            "SortBy": {
                              "location": -1,
                              "node": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 50,
                                },
                              },
                              "sortby_dir": "SORTBY_DEFAULT",
                              "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 72 1`] = `
[
  "select sum(c) from gstest2
  group by grouping sets((), grouping sets((), grouping sets(())))
  order by 1 desc",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 19,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 52,
                      },
                    },
                    {
                      "GroupingSet": {
                        "content": [
                          {
                            "GroupingSet": {
                              "kind": "GROUPING_SET_EMPTY",
                              "location": 70,
                            },
                          },
                          {
                            "GroupingSet": {
                              "content": [
                                {
                                  "GroupingSet": {
                                    "kind": "GROUPING_SET_EMPTY",
                                    "location": 88,
                                  },
                                },
                              ],
                              "kind": "GROUPING_SET_SETS",
                              "location": 74,
                            },
                          },
                        ],
                        "kind": "GROUPING_SET_SETS",
                        "location": 56,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 38,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 105,
                    },
                  },
                  "sortby_dir": "SORTBY_DESC",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 11,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 101 1`] = `
[
  "select a, b, sum(v), count(*) from gstest_empty group by grouping sets ((a,b),a)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 35,
                  "relname": "gstest_empty",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 73,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 75,
                            },
                          },
                        ],
                        "location": 72,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 78,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 57,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 17,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 21,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 21,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 107 1`] = `
[
  "select t1.a, t2.b, sum(t1.v), count(*) from gstest_empty t1, gstest_empty t2
 group by grouping sets ((t1.a,t2.b),())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                  },
                  "inh": true,
                  "location": 44,
                  "relname": "gstest_empty",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t2",
                  },
                  "inh": true,
                  "location": 61,
                  "relname": "gstest_empty",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 103,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 108,
                            },
                          },
                        ],
                        "location": 102,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 114,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 87,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 23,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 30,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 30,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 111 1`] = `
[
  "select t1.a, t2.b, grouping(t1.a, t2.b), sum(t1.v), max(t2.a)
  from gstest1 t1, gstest2 t2
 group by grouping sets ((t1.a, t2.b), ())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t1",
                  },
                  "inh": true,
                  "location": 69,
                  "relname": "gstest1",
                  "relpersistence": "p",
                },
              },
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "t2",
                  },
                  "inh": true,
                  "location": 81,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 118,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 124,
                            },
                          },
                        ],
                        "location": 117,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 131,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 102,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 28,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 34,
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 41,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 45,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 41,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 56,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 115 1`] = `
[
  "select t1.a, t2.b, grouping(t1.a, t2.b), sum(t1.v), max(t2.a)
  from gstest1 t1 join gstest2 t2 on (t1.a=t2.a)
 group by grouping sets ((t1.a, t2.b), ())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 69,
                      "relname": "gstest1",
                      "relpersistence": "p",
                    },
                  },
                  "quals": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t1",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 100,
                        },
                      },
                      "location": 104,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "t2",
                              },
                            },
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 105,
                        },
                      },
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 85,
                      "relname": "gstest2",
                      "relpersistence": "p",
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t1",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 137,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "t2",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 143,
                            },
                          },
                        ],
                        "location": 136,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 150,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 121,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t1",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "t2",
                          },
                        },
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 28,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 34,
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 41,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 45,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 41,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 56,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 119 1`] = `
[
  "select a, b, grouping(a, b), sum(t1.v), max(t2.c)
  from gstest1 t1 join gstest2 t2 using (a,b)
 group by grouping sets ((a, b), ())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t1",
                      },
                      "inh": true,
                      "location": 57,
                      "relname": "gstest1",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "t2",
                      },
                      "inh": true,
                      "location": 73,
                      "relname": "gstest2",
                      "relpersistence": "p",
                    },
                  },
                  "usingClause": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                    {
                      "String": {
                        "sval": "b",
                      },
                    },
                  ],
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 122,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 125,
                            },
                          },
                        ],
                        "location": 121,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 129,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 106,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 25,
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 29,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t1",
                                },
                              },
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 33,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 29,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 40,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "t2",
                                },
                              },
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 44,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 40,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 124 1`] = `
[
  "select a, d, grouping(a,b,c)
  from gstest3
 group by grouping sets ((a,b), (a,c))",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 36,
                  "relname": "gstest3",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 70,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 72,
                            },
                          },
                        ],
                        "location": 69,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 77,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 79,
                            },
                          },
                        ],
                        "location": 76,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 54,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "d",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 24,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 26,
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 130 1`] = `
[
  "explain (costs off)
select g as alias1, g as alias2
  from generate_series(1,3) g
 group by alias1, rollup(alias2)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 75,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 3,
                                        },
                                        "location": 77,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 59,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "alias1",
                          },
                        },
                      ],
                      "location": 92,
                    },
                  },
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "alias2",
                                },
                              },
                            ],
                            "location": 107,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_ROLLUP",
                      "location": 100,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "name": "alias1",
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "name": "alias2",
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 135 1`] = `
[
  "select g as alias1, g as alias2
  from generate_series(1,3) g
 group by alias1, rollup(alias2)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "g",
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 55,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 3,
                                    },
                                    "location": 57,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 39,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "alias1",
                      },
                    },
                  ],
                  "location": 72,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "alias2",
                            },
                          },
                        ],
                        "location": 87,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 80,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "alias1",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "g",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 20,
                  "name": "alias2",
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "g",
                          },
                        },
                      ],
                      "location": 20,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 140 1`] = `
[
  "select four, x
  from (select four, ten, 'foo'::text as x from tenk1) as t
  group by grouping sets (four, x)
  having x = 'foo'",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 63,
                            "relname": "tenk1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 30,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "four",
                                    },
                                  },
                                ],
                                "location": 30,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 36,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ten",
                                    },
                                  },
                                ],
                                "location": 36,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 41,
                            "name": "x",
                            "val": {
                              "TypeCast": {
                                "arg": {
                                  "A_Const": {
                                    "location": 41,
                                    "sval": {
                                      "sval": "foo",
                                    },
                                  },
                                },
                                "location": 46,
                                "typeName": {
                                  "location": 48,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "text",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "four",
                            },
                          },
                        ],
                        "location": 101,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 107,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 86,
                },
              },
            ],
            "havingClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                    "location": 119,
                  },
                },
                "location": 121,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "location": 123,
                    "sval": {
                      "sval": "foo",
                    },
                  },
                },
              },
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 145 1`] = `
[
  "select four, x || 'x'
  from (select four, ten, 'foo'::text as x from tenk1) as t
  group by grouping sets (four, x)
  order by four",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 70,
                            "relname": "tenk1",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 37,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "four",
                                    },
                                  },
                                ],
                                "location": 37,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 43,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ten",
                                    },
                                  },
                                ],
                                "location": 43,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 48,
                            "name": "x",
                            "val": {
                              "TypeCast": {
                                "arg": {
                                  "A_Const": {
                                    "location": 48,
                                    "sval": {
                                      "sval": "foo",
                                    },
                                  },
                                },
                                "location": 53,
                                "typeName": {
                                  "location": 55,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "text",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "four",
                            },
                          },
                        ],
                        "location": 108,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 114,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 93,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 128,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 13,
                        },
                      },
                      "location": 15,
                      "name": [
                        {
                          "String": {
                            "sval": "||",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "location": 18,
                          "sval": {
                            "sval": "x",
                          },
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 150 1`] = `
[
  "select (x+y)*1, sum(z)
 from (select 1 as x, 2 as y, 3 as z) s
 group by grouping sets (x+y, x)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 37,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 37,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 45,
                            "name": "y",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 2,
                                },
                                "location": 45,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 53,
                            "name": "z",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 3,
                                },
                                "location": 53,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 88,
                          },
                        },
                        "location": 89,
                        "name": [
                          {
                            "String": {
                              "sval": "+",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "y",
                                },
                              },
                            ],
                            "location": 90,
                          },
                        },
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 73,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 8,
                            },
                          },
                          "location": 9,
                          "name": [
                            {
                              "String": {
                                "sval": "+",
                              },
                            },
                          ],
                          "rexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "y",
                                  },
                                },
                              ],
                              "location": 10,
                            },
                          },
                        },
                      },
                      "location": 12,
                      "name": [
                        {
                          "String": {
                            "sval": "*",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 13,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "z",
                                },
                              },
                            ],
                            "location": 20,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 154 1`] = `
[
  "select x, not x as not_x, q2 from
  (select *, q1 = 1 as x from int8_tbl i1) as t
  group by grouping sets(x, q2)
  order by x, q2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i1",
                            },
                            "inh": true,
                            "location": 64,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 44,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "A_Star": {},
                                  },
                                ],
                                "location": 44,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 47,
                            "name": "x",
                            "val": {
                              "A_Expr": {
                                "kind": "AEXPR_OP",
                                "lexpr": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 47,
                                  },
                                },
                                "location": 50,
                                "name": [
                                  {
                                    "String": {
                                      "sval": "=",
                                    },
                                  },
                                ],
                                "rexpr": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 52,
                                  },
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "x",
                            },
                          },
                        ],
                        "location": 107,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "q2",
                            },
                          },
                        ],
                        "location": 110,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 93,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 125,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 128,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "name": "not_x",
                  "val": {
                    "BoolExpr": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 14,
                          },
                        },
                      ],
                      "boolop": "NOT_EXPR",
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 26,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "q2",
                          },
                        },
                      ],
                      "location": 26,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 160 1`] = `
[
  "explain (verbose, costs off)
select * from (
  select 1 as x, q1, sum(q2)
  from int8_tbl i1
  group by grouping sets(1, 2)
) ss
where x = 1 and q1 = 123",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "alias": {
                                  "aliasname": "i1",
                                },
                                "inh": true,
                                "location": 81,
                                "relname": "int8_tbl",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "groupClause": [
                            {
                              "GroupingSet": {
                                "content": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 118,
                                    },
                                  },
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 121,
                                    },
                                  },
                                ],
                                "kind": "GROUPING_SET_SETS",
                                "location": 104,
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 54,
                                "name": "x",
                                "val": {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1,
                                    },
                                    "location": 54,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "q1",
                                        },
                                      },
                                    ],
                                    "location": 62,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 66,
                                "val": {
                                  "FuncCall": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "q2",
                                              },
                                            },
                                          ],
                                          "location": 70,
                                        },
                                      },
                                    ],
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "sum",
                                        },
                                      },
                                    ],
                                    "location": 66,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
                "whereClause": {
                  "BoolExpr": {
                    "args": [
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "x",
                                  },
                                },
                              ],
                              "location": 135,
                            },
                          },
                          "location": 137,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 139,
                            },
                          },
                        },
                      },
                      {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "q1",
                                  },
                                },
                              ],
                              "location": 145,
                            },
                          },
                          "location": 148,
                          "name": [
                            {
                              "String": {
                                "sval": "=",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 123,
                              },
                              "location": 150,
                            },
                          },
                        },
                      },
                    ],
                    "boolop": "AND_EXPR",
                    "location": 141,
                  },
                },
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 168 1`] = `
[
  "select * from (
  select 1 as x, q1, sum(q2)
  from int8_tbl i1
  group by grouping sets(1, 2)
) ss
where x = 1 and q1 = 123",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "ss",
                  },
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "alias": {
                              "aliasname": "i1",
                            },
                            "inh": true,
                            "location": 52,
                            "relname": "int8_tbl",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "GroupingSet": {
                            "content": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 89,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 92,
                                },
                              },
                            ],
                            "kind": "GROUPING_SET_SETS",
                            "location": 75,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 25,
                            "name": "x",
                            "val": {
                              "A_Const": {
                                "ival": {
                                  "ival": 1,
                                },
                                "location": 25,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 33,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "q1",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 37,
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "q2",
                                          },
                                        },
                                      ],
                                      "location": 41,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "sum",
                                    },
                                  },
                                ],
                                "location": 37,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
            "whereClause": {
              "BoolExpr": {
                "args": [
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "x",
                              },
                            },
                          ],
                          "location": 106,
                        },
                      },
                      "location": 108,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1,
                          },
                          "location": 110,
                        },
                      },
                    },
                  },
                  {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "q1",
                              },
                            },
                          ],
                          "location": 116,
                        },
                      },
                      "location": 119,
                      "name": [
                        {
                          "String": {
                            "sval": "=",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 123,
                          },
                          "location": 121,
                        },
                      },
                    },
                  },
                ],
                "boolop": "AND_EXPR",
                "location": 112,
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 176 1`] = `
[
  "explain (verbose, costs off)
select grouping(ss.x)
from int8_tbl i1
cross join lateral (select (select i1.q1) as x) ss
group by ss.x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i1",
                          },
                          "inh": true,
                          "location": 56,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 95,
                                    "name": "x",
                                    "val": {
                                      "SubLink": {
                                        "location": 95,
                                        "subLinkType": "EXPR_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 103,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "i1",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "q1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 103,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 128,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "GroupingFunc": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "ss",
                                    },
                                  },
                                  {
                                    "String": {
                                      "sval": "x",
                                    },
                                  },
                                ],
                                "location": 45,
                              },
                            },
                          ],
                          "location": 36,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 182 1`] = `
[
  "select grouping(ss.x)
from int8_tbl i1
cross join lateral (select (select i1.q1) as x) ss
group by ss.x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i1",
                      },
                      "inh": true,
                      "location": 27,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 66,
                                "name": "x",
                                "val": {
                                  "SubLink": {
                                    "location": 66,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 74,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "i1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "q1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 74,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "ss",
                      },
                    },
                    {
                      "String": {
                        "sval": "x",
                      },
                    },
                  ],
                  "location": 99,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ss",
                                },
                              },
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 16,
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 187 1`] = `
[
  "explain (verbose, costs off)
select (select grouping(ss.x))
from int8_tbl i1
cross join lateral (select (select i1.q1) as x) ss
group by ss.x",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "verbose",
                  "location": 9,
                },
              },
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 18,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "JoinExpr": {
                      "jointype": "JOIN_INNER",
                      "larg": {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "i1",
                          },
                          "inh": true,
                          "location": 65,
                          "relname": "int8_tbl",
                          "relpersistence": "p",
                        },
                      },
                      "rarg": {
                        "RangeSubselect": {
                          "alias": {
                            "aliasname": "ss",
                          },
                          "lateral": true,
                          "subquery": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 104,
                                    "name": "x",
                                    "val": {
                                      "SubLink": {
                                        "location": 104,
                                        "subLinkType": "EXPR_SUBLINK",
                                        "subselect": {
                                          "SelectStmt": {
                                            "limitOption": "LIMIT_OPTION_DEFAULT",
                                            "op": "SETOP_NONE",
                                            "targetList": [
                                              {
                                                "ResTarget": {
                                                  "location": 112,
                                                  "val": {
                                                    "ColumnRef": {
                                                      "fields": [
                                                        {
                                                          "String": {
                                                            "sval": "i1",
                                                          },
                                                        },
                                                        {
                                                          "String": {
                                                            "sval": "q1",
                                                          },
                                                        },
                                                      ],
                                                      "location": 112,
                                                    },
                                                  },
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ss",
                          },
                        },
                        {
                          "String": {
                            "sval": "x",
                          },
                        },
                      ],
                      "location": 137,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 36,
                      "val": {
                        "SubLink": {
                          "location": 36,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 44,
                                    "val": {
                                      "GroupingFunc": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "ss",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "x",
                                                  },
                                                },
                                              ],
                                              "location": 53,
                                            },
                                          },
                                        ],
                                        "location": 44,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 193 1`] = `
[
  "select (select grouping(ss.x))
from int8_tbl i1
cross join lateral (select (select i1.q1) as x) ss
group by ss.x",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_INNER",
                  "larg": {
                    "RangeVar": {
                      "alias": {
                        "aliasname": "i1",
                      },
                      "inh": true,
                      "location": 36,
                      "relname": "int8_tbl",
                      "relpersistence": "p",
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "ss",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 75,
                                "name": "x",
                                "val": {
                                  "SubLink": {
                                    "location": 75,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 83,
                                              "val": {
                                                "ColumnRef": {
                                                  "fields": [
                                                    {
                                                      "String": {
                                                        "sval": "i1",
                                                      },
                                                    },
                                                    {
                                                      "String": {
                                                        "sval": "q1",
                                                      },
                                                    },
                                                  ],
                                                  "location": 83,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "ss",
                      },
                    },
                    {
                      "String": {
                        "sval": "x",
                      },
                    },
                  ],
                  "location": 108,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 15,
                                "val": {
                                  "GroupingFunc": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "ss",
                                              },
                                            },
                                            {
                                              "String": {
                                                "sval": "x",
                                              },
                                            },
                                          ],
                                          "location": 24,
                                        },
                                      },
                                    ],
                                    "location": 15,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 204 1`] = `
[
  "select *
  from (values (1),(2)) v(x),
       lateral (select a, b, sum(v.x) from gstest_data(v.x) group by rollup (a,b)) s",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 25,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 29,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeFunction": {
                            "functions": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "FuncCall": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "v",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "x",
                                                  },
                                                },
                                              ],
                                              "location": 94,
                                            },
                                          },
                                        ],
                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                        "funcname": [
                                          {
                                            "String": {
                                              "sval": "gstest_data",
                                            },
                                          },
                                        ],
                                        "location": 82,
                                      },
                                    },
                                    {},
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "GroupingSet": {
                            "content": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 116,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 118,
                                },
                              },
                            ],
                            "kind": "GROUPING_SET_ROLLUP",
                            "location": 108,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 62,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 62,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 65,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 65,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 68,
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "v",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "x",
                                          },
                                        },
                                      ],
                                      "location": 72,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "sum",
                                    },
                                  },
                                ],
                                "location": 68,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 209 1`] = `
[
  "explain (costs off)
  select min(unique1) from tenk1 GROUP BY ()",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 47,
                      "relname": "tenk1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "kind": "GROUPING_SET_EMPTY",
                      "location": 62,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "unique1",
                                    },
                                  },
                                ],
                                "location": 33,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "min",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 213 1`] = `
[
  "CREATE VIEW gstest_view AS select a, b, grouping(a,b), sum(c), count(*), max(c)
  from gstest2 group by rollup ((a,b,c),(c,d))",
  {
    "stmts": [
      {
        "stmt": {
          "ViewStmt": {
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 87,
                      "relname": "gstest2",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 113,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 115,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 117,
                                },
                              },
                            ],
                            "location": 112,
                            "row_format": "COERCE_IMPLICIT_CAST",
                          },
                        },
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 121,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "d",
                                      },
                                    },
                                  ],
                                  "location": 123,
                                },
                              },
                            ],
                            "location": 120,
                            "row_format": "COERCE_IMPLICIT_CAST",
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_ROLLUP",
                      "location": 104,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 37,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 37,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "GroupingFunc": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 49,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 51,
                              },
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "c",
                                    },
                                  },
                                ],
                                "location": 59,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 55,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 63,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 63,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 73,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "c",
                                    },
                                  },
                                ],
                                "location": 77,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "max",
                              },
                            },
                          ],
                          "location": 73,
                        },
                      },
                    },
                  },
                ],
              },
            },
            "view": {
              "inh": true,
              "location": 12,
              "relname": "gstest_view",
              "relpersistence": "p",
            },
            "withCheckOption": "NO_CHECK_OPTION",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 216 1`] = `
[
  "select pg_get_viewdef('gstest_view'::regclass, true)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "TypeCast": {
                            "arg": {
                              "A_Const": {
                                "location": 22,
                                "sval": {
                                  "sval": "gstest_view",
                                },
                              },
                            },
                            "location": 35,
                            "typeName": {
                              "location": 37,
                              "names": [
                                {
                                  "String": {
                                    "sval": "regclass",
                                  },
                                },
                              ],
                              "typemod": -1,
                            },
                          },
                        },
                        {
                          "A_Const": {
                            "boolval": {
                              "boolval": true,
                            },
                            "location": 47,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "pg_get_viewdef",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 219 1`] = `
[
  "select(select (select grouping(a,b) from (values (1)) v2(c)) from (values (1,2)) v1(a,b) group by (a,b)) from (values(6,7)) v3(e,f) GROUP BY ROLLUP(e,f)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v3",
                    "colnames": [
                      {
                        "String": {
                          "sval": "e",
                        },
                      },
                      {
                        "String": {
                          "sval": "f",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 6,
                                  },
                                  "location": 118,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 7,
                                  },
                                  "location": 120,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "e",
                            },
                          },
                        ],
                        "location": 148,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "f",
                            },
                          },
                        ],
                        "location": 150,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 141,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 6,
                  "val": {
                    "SubLink": {
                      "location": 6,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeSubselect": {
                                "alias": {
                                  "aliasname": "v1",
                                  "colnames": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                },
                                "subquery": {
                                  "SelectStmt": {
                                    "limitOption": "LIMIT_OPTION_DEFAULT",
                                    "op": "SETOP_NONE",
                                    "valuesLists": [
                                      {
                                        "List": {
                                          "items": [
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 1,
                                                },
                                                "location": 75,
                                              },
                                            },
                                            {
                                              "A_Const": {
                                                "ival": {
                                                  "ival": 2,
                                                },
                                                "location": 77,
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    ],
                                  },
                                },
                              },
                            },
                          ],
                          "groupClause": [
                            {
                              "RowExpr": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "a",
                                          },
                                        },
                                      ],
                                      "location": 99,
                                    },
                                  },
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "b",
                                          },
                                        },
                                      ],
                                      "location": 101,
                                    },
                                  },
                                ],
                                "location": 98,
                                "row_format": "COERCE_IMPLICIT_CAST",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 14,
                                "val": {
                                  "SubLink": {
                                    "location": 14,
                                    "subLinkType": "EXPR_SUBLINK",
                                    "subselect": {
                                      "SelectStmt": {
                                        "fromClause": [
                                          {
                                            "RangeSubselect": {
                                              "alias": {
                                                "aliasname": "v2",
                                                "colnames": [
                                                  {
                                                    "String": {
                                                      "sval": "c",
                                                    },
                                                  },
                                                ],
                                              },
                                              "subquery": {
                                                "SelectStmt": {
                                                  "limitOption": "LIMIT_OPTION_DEFAULT",
                                                  "op": "SETOP_NONE",
                                                  "valuesLists": [
                                                    {
                                                      "List": {
                                                        "items": [
                                                          {
                                                            "A_Const": {
                                                              "ival": {
                                                                "ival": 1,
                                                              },
                                                              "location": 50,
                                                            },
                                                          },
                                                        ],
                                                      },
                                                    },
                                                  ],
                                                },
                                              },
                                            },
                                          },
                                        ],
                                        "limitOption": "LIMIT_OPTION_DEFAULT",
                                        "op": "SETOP_NONE",
                                        "targetList": [
                                          {
                                            "ResTarget": {
                                              "location": 22,
                                              "val": {
                                                "GroupingFunc": {
                                                  "args": [
                                                    {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "a",
                                                            },
                                                          },
                                                        ],
                                                        "location": 31,
                                                      },
                                                    },
                                                    {
                                                      "ColumnRef": {
                                                        "fields": [
                                                          {
                                                            "String": {
                                                              "sval": "b",
                                                            },
                                                          },
                                                        ],
                                                        "location": 33,
                                                      },
                                                    },
                                                  ],
                                                  "location": 22,
                                                },
                                              },
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 224 1`] = `
[
  "select a, b, c, d from gstest2 group by rollup(a,b),grouping sets(c,d)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 23,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 47,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 49,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 40,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 66,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "d",
                            },
                          },
                        ],
                        "location": 68,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 52,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "d",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 228 1`] = `
[
  "select a, b, grouping(a,b), sum(v), count(*), max(v)
  from gstest1 group by grouping sets ((a,b),(a+1,b+1),(a+2,b+2)) order by 3,6",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 60,
                  "relname": "gstest1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 93,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 95,
                            },
                          },
                        ],
                        "location": 92,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 99,
                                },
                              },
                              "location": 100,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 101,
                                },
                              },
                            },
                          },
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 103,
                                },
                              },
                              "location": 104,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 105,
                                },
                              },
                            },
                          },
                        ],
                        "location": 98,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 109,
                                },
                              },
                              "location": 110,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 111,
                                },
                              },
                            },
                          },
                          {
                            "A_Expr": {
                              "kind": "AEXPR_OP",
                              "lexpr": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 113,
                                },
                              },
                              "location": 114,
                              "name": [
                                {
                                  "String": {
                                    "sval": "+",
                                  },
                                },
                              ],
                              "rexpr": {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 115,
                                },
                              },
                            },
                          },
                        ],
                        "location": 108,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 77,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 3,
                      },
                      "location": 128,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 6,
                      },
                      "location": 130,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 24,
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 28,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 32,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 28,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 36,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 36,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 46,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 50,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 240 1`] = `
[
  "explain (costs off)
select * from gstest1 group by grouping sets((a,b,v),(v)) order by v,b,a",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 34,
                      "relname": "gstest1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "RowExpr": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 66,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 68,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "v",
                                      },
                                    },
                                  ],
                                  "location": 70,
                                },
                              },
                            ],
                            "location": 65,
                            "row_format": "COERCE_IMPLICIT_CAST",
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 74,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_SETS",
                      "location": 51,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "sortClause": [
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "v",
                              },
                            },
                          ],
                          "location": 87,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 89,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                  {
                    "SortBy": {
                      "location": -1,
                      "node": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 91,
                        },
                      },
                      "sortby_dir": "SORTBY_DEFAULT",
                      "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                    },
                  },
                ],
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "A_Star": {},
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 244 1`] = `
[
  "select (select grouping(a,b) from gstest2) from gstest2 group by a,b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 48,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "a",
                      },
                    },
                  ],
                  "location": 65,
                },
              },
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "b",
                      },
                    },
                  ],
                  "location": 67,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "SubLink": {
                      "location": 7,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 34,
                                "relname": "gstest2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 15,
                                "val": {
                                  "GroupingFunc": {
                                    "args": [
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "a",
                                              },
                                            },
                                          ],
                                          "location": 24,
                                        },
                                      },
                                      {
                                        "ColumnRef": {
                                          "fields": [
                                            {
                                              "String": {
                                                "sval": "b",
                                              },
                                            },
                                          ],
                                          "location": 26,
                                        },
                                      },
                                    ],
                                    "location": 15,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 247 1`] = `
[
  "select a, b, sum(c), count(*) from gstest2 group by grouping sets (rollup(a,b),a)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 35,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "GroupingSet": {
                        "content": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 74,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 76,
                            },
                          },
                        ],
                        "kind": "GROUPING_SET_ROLLUP",
                        "location": 67,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 79,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 52,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 17,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 21,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 21,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 250 1`] = `
[
  "select ten, sum(distinct four) from onek a
group by grouping sets((ten,four),(ten))
having exists (select 1 from onek b where sum(distinct a.four) = b.four)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 36,
                  "relname": "onek",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "ten",
                                  },
                                },
                              ],
                              "location": 67,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "four",
                                  },
                                },
                              ],
                              "location": 71,
                            },
                          },
                        ],
                        "location": 66,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 78,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 52,
                },
              },
            ],
            "havingClause": {
              "SubLink": {
                "location": 91,
                "subLinkType": "EXISTS_SUBLINK",
                "subselect": {
                  "SelectStmt": {
                    "fromClause": [
                      {
                        "RangeVar": {
                          "alias": {
                            "aliasname": "b",
                          },
                          "inh": true,
                          "location": 113,
                          "relname": "onek",
                          "relpersistence": "p",
                        },
                      },
                    ],
                    "limitOption": "LIMIT_OPTION_DEFAULT",
                    "op": "SETOP_NONE",
                    "targetList": [
                      {
                        "ResTarget": {
                          "location": 106,
                          "val": {
                            "A_Const": {
                              "ival": {
                                "ival": 1,
                              },
                              "location": 106,
                            },
                          },
                        },
                      },
                    ],
                    "whereClause": {
                      "A_Expr": {
                        "kind": "AEXPR_OP",
                        "lexpr": {
                          "FuncCall": {
                            "agg_distinct": true,
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "four",
                                      },
                                    },
                                  ],
                                  "location": 139,
                                },
                              },
                            ],
                            "funcformat": "COERCE_EXPLICIT_CALL",
                            "funcname": [
                              {
                                "String": {
                                  "sval": "sum",
                                },
                              },
                            ],
                            "location": 126,
                          },
                        },
                        "location": 147,
                        "name": [
                          {
                            "String": {
                              "sval": "=",
                            },
                          },
                        ],
                        "rexpr": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 149,
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ten",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "FuncCall": {
                      "agg_distinct": true,
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 25,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 255 1`] = `
[
  "select a,count(*) from gstest2 group by rollup(a) order by a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 23,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 47,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 40,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 59,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 258 1`] = `
[
  "  select a,count(*) from gstest2 group by rollup(a) having a is distinct from 1 order by a",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 25,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 49,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 42,
                },
              },
            ],
            "havingClause": {
              "A_Expr": {
                "kind": "AEXPR_DISTINCT",
                "lexpr": {
                  "ColumnRef": {
                    "fields": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                    "location": 59,
                  },
                },
                "location": 61,
                "name": [
                  {
                    "String": {
                      "sval": "=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {
                      "ival": 1,
                    },
                    "location": 78,
                  },
                },
              },
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 89,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 11,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 11,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 260 1`] = `
[
  "select v.c, (select count(*) from gstest2 group by () having v.c)
  from (values (false),(true)) v(c) order by v.c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "boolval": {},
                                  "location": 82,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "boolval": {
                                    "boolval": true,
                                  },
                                  "location": 90,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 111,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "SubLink": {
                      "location": 12,
                      "subLinkType": "EXPR_SUBLINK",
                      "subselect": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 34,
                                "relname": "gstest2",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "groupClause": [
                            {
                              "GroupingSet": {
                                "kind": "GROUPING_SET_EMPTY",
                                "location": 51,
                              },
                            },
                          ],
                          "havingClause": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v",
                                  },
                                },
                                {
                                  "String": {
                                    "sval": "c",
                                  },
                                },
                              ],
                              "location": 61,
                            },
                          },
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 20,
                                "val": {
                                  "FuncCall": {
                                    "agg_star": true,
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "count",
                                        },
                                      },
                                    ],
                                    "location": 20,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 267 1`] = `
[
  "select ten, grouping(ten) from onek
group by grouping sets(ten) having grouping(ten) >= 0
order by 2,1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 31,
                  "relname": "onek",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 59,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 45,
                },
              },
            ],
            "havingClause": {
              "A_Expr": {
                "kind": "AEXPR_OP",
                "lexpr": {
                  "GroupingFunc": {
                    "args": [
                      {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "ten",
                              },
                            },
                          ],
                          "location": 80,
                        },
                      },
                    ],
                    "location": 71,
                  },
                },
                "location": 85,
                "name": [
                  {
                    "String": {
                      "sval": ">=",
                    },
                  },
                ],
                "rexpr": {
                  "A_Const": {
                    "ival": {},
                    "location": 88,
                  },
                },
              },
            },
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 99,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 101,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ten",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ten",
                                },
                              },
                            ],
                            "location": 21,
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 284 1`] = `
[
  "select ten, sum(distinct four) filter (where four::text ~ '123') from onek a
group by rollup(ten)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "alias": {
                    "aliasname": "a",
                  },
                  "inh": true,
                  "location": 70,
                  "relname": "onek",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 86,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ten",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "FuncCall": {
                      "agg_distinct": true,
                      "agg_filter": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "TypeCast": {
                              "arg": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "four",
                                      },
                                    },
                                  ],
                                  "location": 45,
                                },
                              },
                              "location": 49,
                              "typeName": {
                                "location": 51,
                                "names": [
                                  {
                                    "String": {
                                      "sval": "text",
                                    },
                                  },
                                ],
                                "typemod": -1,
                              },
                            },
                          },
                          "location": 56,
                          "name": [
                            {
                              "String": {
                                "sval": "~",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "location": 58,
                              "sval": {
                                "sval": "123",
                              },
                            },
                          },
                        },
                      },
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 25,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 288 1`] = `
[
  "select * from (values (1),(2)) v(a) left join lateral (select v.a, four, ten, count(*) from onek group by cube(four,ten)) s on true order by v.a,four,ten",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 23,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 27,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 127,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 92,
                                "relname": "onek",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "groupClause": [
                            {
                              "GroupingSet": {
                                "content": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "four",
                                          },
                                        },
                                      ],
                                      "location": 111,
                                    },
                                  },
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "ten",
                                          },
                                        },
                                      ],
                                      "location": 116,
                                    },
                                  },
                                ],
                                "kind": "GROUPING_SET_CUBE",
                                "location": 106,
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 62,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 67,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "four",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 73,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 73,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 78,
                                "val": {
                                  "FuncCall": {
                                    "agg_star": true,
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "count",
                                        },
                                      },
                                    ],
                                    "location": 78,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 141,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 145,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ten",
                          },
                        },
                      ],
                      "location": 150,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 292 1`] = `
[
  "select sum(ten) from onek group by two, rollup(four::text) order by 1",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 21,
                  "relname": "onek",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "ColumnRef": {
                  "fields": [
                    {
                      "String": {
                        "sval": "two",
                      },
                    },
                  ],
                  "location": 35,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "TypeCast": {
                        "arg": {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 47,
                          },
                        },
                        "location": 51,
                        "typeName": {
                          "location": 53,
                          "names": [
                            {
                              "String": {
                                "sval": "text",
                              },
                            },
                          ],
                          "typemod": -1,
                        },
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 40,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 68,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ten",
                                },
                              },
                            ],
                            "location": 11,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 311 1`] = `
[
  "select a, b, grouping(a,b), sum(v), count(*), max(v)
  from gstest1 group by cube(a,b) order by 3,1,2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 60,
                  "relname": "gstest1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 82,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 84,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_CUBE",
                  "location": 77,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 3,
                      },
                      "location": 96,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 98,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 100,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 22,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 24,
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 28,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 32,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 28,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 36,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 36,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 46,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 50,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "max",
                          },
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 317 1`] = `
[
  "explain (costs off)
  select a, b, grouping(a,b), array_agg(v order by v)
    from gstest1 group by cube(a,b)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 83,
                      "relname": "gstest1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "a",
                                },
                              },
                            ],
                            "location": 105,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "b",
                                },
                              },
                            ],
                            "location": 107,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_CUBE",
                      "location": 100,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "a",
                              },
                            },
                          ],
                          "location": 29,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 32,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "b",
                              },
                            },
                          ],
                          "location": 32,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "GroupingFunc": {
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 44,
                              },
                            },
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 46,
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 50,
                      "val": {
                        "FuncCall": {
                          "agg_order": [
                            {
                              "SortBy": {
                                "location": -1,
                                "node": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                    ],
                                    "location": 71,
                                  },
                                },
                                "sortby_dir": "SORTBY_DEFAULT",
                                "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                              },
                            },
                          ],
                          "args": [
                            {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "v",
                                    },
                                  },
                                ],
                                "location": 60,
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "array_agg",
                              },
                            },
                          ],
                          "location": 50,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 322 1`] = `
[
  "select unsortable_col, count(*)
  from gstest4 group by grouping sets ((unsortable_col),(unsortable_col))
  order by unsortable_col::text",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 39,
                  "relname": "gstest4",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unsortable_col",
                            },
                          },
                        ],
                        "location": 72,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unsortable_col",
                            },
                          },
                        ],
                        "location": 89,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 56,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "TypeCast": {
                      "arg": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "unsortable_col",
                              },
                            },
                          ],
                          "location": 117,
                        },
                      },
                      "location": 131,
                      "typeName": {
                        "location": 133,
                        "names": [
                          {
                            "String": {
                              "sval": "text",
                            },
                          },
                        ],
                        "typemod": -1,
                      },
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unsortable_col",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 23,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 327 1`] = `
[
  "select unhashable_col, unsortable_col,
       grouping(unhashable_col, unsortable_col),
       count(*), sum(v)
  from gstest4 group by grouping sets ((unhashable_col),(unsortable_col))
 order by 3, 5",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 119,
                  "relname": "gstest4",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unhashable_col",
                            },
                          },
                        ],
                        "location": 152,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unsortable_col",
                            },
                          },
                        ],
                        "location": 169,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 136,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 3,
                      },
                      "location": 196,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 5,
                      },
                      "location": 199,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unhashable_col",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unsortable_col",
                          },
                        },
                      ],
                      "location": 23,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 46,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "unhashable_col",
                                },
                              },
                            ],
                            "location": 55,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "unsortable_col",
                                },
                              },
                            ],
                            "location": 71,
                          },
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 95,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 95,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 105,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 109,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 105,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 339 1`] = `
[
  "select unhashable_col, unsortable_col,
       grouping(unhashable_col, unsortable_col),
       count(*), sum(v)
  from gstest4 group by grouping sets ((v,unhashable_col),(v,unsortable_col))
 order by 3,5",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 119,
                  "relname": "gstest4",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v",
                                  },
                                },
                              ],
                              "location": 152,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unhashable_col",
                                  },
                                },
                              ],
                              "location": 154,
                            },
                          },
                        ],
                        "location": 151,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "v",
                                  },
                                },
                              ],
                              "location": 171,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "unsortable_col",
                                  },
                                },
                              ],
                              "location": 173,
                            },
                          },
                        ],
                        "location": 170,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 136,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 3,
                      },
                      "location": 200,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 5,
                      },
                      "location": 202,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unhashable_col",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unsortable_col",
                          },
                        },
                      ],
                      "location": 23,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 46,
                  "val": {
                    "GroupingFunc": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "unhashable_col",
                                },
                              },
                            ],
                            "location": 55,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "unsortable_col",
                                },
                              },
                            ],
                            "location": 71,
                          },
                        },
                      ],
                      "location": 46,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 95,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 95,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 105,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 109,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 105,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 358 1`] = `
[
  "  select a, b, sum(v), count(*) from gstest_empty group by grouping sets ((a,b),(),(),())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 37,
                  "relname": "gstest_empty",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "RowExpr": {
                        "args": [
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "a",
                                  },
                                },
                              ],
                              "location": 75,
                            },
                          },
                          {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "b",
                                  },
                                },
                              ],
                              "location": 77,
                            },
                          },
                        ],
                        "location": 74,
                        "row_format": "COERCE_IMPLICIT_CAST",
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 80,
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 83,
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 86,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 59,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 23,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 361 1`] = `
[
  "  select sum(v), count(*) from gstest_empty group by grouping sets ((),(),())",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 31,
                  "relname": "gstest_empty",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 68,
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 71,
                      },
                    },
                    {
                      "GroupingSet": {
                        "kind": "GROUPING_SET_EMPTY",
                        "location": 74,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 53,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                            ],
                            "location": 13,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 17,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 17,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 379 1`] = `
[
  "  select a, b, sum(v.x)
    from (values (1),(2)) v(x), gstest_data(v.x)
   group by grouping sets (a,b)
   order by 3, 1, 2",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 42,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 46,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeFunction": {
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                    ],
                                    "location": 68,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "gstest_data",
                                  },
                                },
                              ],
                              "location": 56,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 100,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 102,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 85,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 3,
                      },
                      "location": 117,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 1,
                      },
                      "location": 120,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "A_Const": {
                      "ival": {
                        "ival": 2,
                      },
                      "location": 123,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 387 1`] = `
[
  "  select *
    from (values (1),(2)) v(x),
         lateral (select a, b, sum(v.x) from gstest_data(v.x) group by grouping sets (a,b)) s",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 29,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 33,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeFunction": {
                            "functions": [
                              {
                                "List": {
                                  "items": [
                                    {
                                      "FuncCall": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "v",
                                                  },
                                                },
                                                {
                                                  "String": {
                                                    "sval": "x",
                                                  },
                                                },
                                              ],
                                              "location": 100,
                                            },
                                          },
                                        ],
                                        "funcformat": "COERCE_EXPLICIT_CALL",
                                        "funcname": [
                                          {
                                            "String": {
                                              "sval": "gstest_data",
                                            },
                                          },
                                        ],
                                        "location": 88,
                                      },
                                    },
                                    {},
                                  ],
                                },
                              },
                            ],
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "GroupingSet": {
                            "content": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 129,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 131,
                                },
                              },
                            ],
                            "kind": "GROUPING_SET_SETS",
                            "location": 114,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 68,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 68,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 71,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "b",
                                    },
                                  },
                                ],
                                "location": 71,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 74,
                            "val": {
                              "FuncCall": {
                                "args": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "v",
                                          },
                                        },
                                        {
                                          "String": {
                                            "sval": "x",
                                          },
                                        },
                                      ],
                                      "location": 78,
                                    },
                                  },
                                ],
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "sum",
                                    },
                                  },
                                ],
                                "location": 74,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 400 1`] = `
[
  "  select a, b, sum(c), sum(sum(c)) over (order by a,b) as rsum
    from gstest2 group by cube (a,b) order by rsum, a, b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 72,
                  "relname": "gstest2",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 95,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 97,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_CUBE",
                  "location": 89,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "rsum",
                          },
                        },
                      ],
                      "location": 109,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 115,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 118,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "c",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 23,
                  "name": "rsum",
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "FuncCall": {
                            "args": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "c",
                                      },
                                    },
                                  ],
                                  "location": 31,
                                },
                              },
                            ],
                            "funcformat": "COERCE_EXPLICIT_CALL",
                            "funcname": [
                              {
                                "String": {
                                  "sval": "sum",
                                },
                              },
                            ],
                            "location": 27,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 23,
                      "over": {
                        "frameOptions": 1058,
                        "location": 40,
                        "orderClause": [
                          {
                            "SortBy": {
                              "location": -1,
                              "node": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "a",
                                      },
                                    },
                                  ],
                                  "location": 50,
                                },
                              },
                              "sortby_dir": "SORTBY_DEFAULT",
                              "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                            },
                          },
                          {
                            "SortBy": {
                              "location": -1,
                              "node": {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "b",
                                      },
                                    },
                                  ],
                                  "location": 52,
                                },
                              },
                              "sortby_dir": "SORTBY_DEFAULT",
                              "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                            },
                          },
                        ],
                      },
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 406 1`] = `
[
  "  select a, b, sum(v.x)
    from (values (1),(2)) v(x), gstest_data(v.x)
   group by cube (a,b) order by a,b",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "x",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 42,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 46,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeFunction": {
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "x",
                                        },
                                      },
                                    ],
                                    "location": 68,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "gstest_data",
                                  },
                                },
                              ],
                              "location": 56,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 91,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 93,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_CUBE",
                  "location": 85,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 105,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 107,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 12,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 12,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 15,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v",
                                },
                              },
                              {
                                "String": {
                                  "sval": "x",
                                },
                              },
                            ],
                            "location": 19,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "sum",
                          },
                        },
                      ],
                      "location": 15,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 413 1`] = `
[
  "BEGIN",
  {
    "stmts": [
      {
        "stmt": {
          "TransactionStmt": {
            "kind": "TRANS_STMT_BEGIN",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 428 1`] = `
[
  "select * from (values (1),(2)) v(a) left join lateral (select v.a, four, ten, count(*) from onek group by grouping sets(four,ten)) s on true order by v.a,four,ten",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "JoinExpr": {
                  "jointype": "JOIN_LEFT",
                  "larg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 1,
                                      },
                                      "location": 23,
                                    },
                                  },
                                ],
                              },
                            },
                            {
                              "List": {
                                "items": [
                                  {
                                    "A_Const": {
                                      "ival": {
                                        "ival": 2,
                                      },
                                      "location": 27,
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                  "quals": {
                    "A_Const": {
                      "boolval": {
                        "boolval": true,
                      },
                      "location": 136,
                    },
                  },
                  "rarg": {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "s",
                      },
                      "lateral": true,
                      "subquery": {
                        "SelectStmt": {
                          "fromClause": [
                            {
                              "RangeVar": {
                                "inh": true,
                                "location": 92,
                                "relname": "onek",
                                "relpersistence": "p",
                              },
                            },
                          ],
                          "groupClause": [
                            {
                              "GroupingSet": {
                                "content": [
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "four",
                                          },
                                        },
                                      ],
                                      "location": 120,
                                    },
                                  },
                                  {
                                    "ColumnRef": {
                                      "fields": [
                                        {
                                          "String": {
                                            "sval": "ten",
                                          },
                                        },
                                      ],
                                      "location": 125,
                                    },
                                  },
                                ],
                                "kind": "GROUPING_SET_SETS",
                                "location": 106,
                              },
                            },
                          ],
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "targetList": [
                            {
                              "ResTarget": {
                                "location": 62,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "v",
                                        },
                                      },
                                      {
                                        "String": {
                                          "sval": "a",
                                        },
                                      },
                                    ],
                                    "location": 62,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 67,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "four",
                                        },
                                      },
                                    ],
                                    "location": 67,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 73,
                                "val": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "ten",
                                        },
                                      },
                                    ],
                                    "location": 73,
                                  },
                                },
                              },
                            },
                            {
                              "ResTarget": {
                                "location": 78,
                                "val": {
                                  "FuncCall": {
                                    "agg_star": true,
                                    "funcformat": "COERCE_EXPLICIT_CALL",
                                    "funcname": [
                                      {
                                        "String": {
                                          "sval": "count",
                                        },
                                      },
                                    ],
                                    "location": 78,
                                  },
                                },
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 150,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "four",
                          },
                        },
                      ],
                      "location": 154,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "ten",
                          },
                        },
                      ],
                      "location": 159,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 437 1`] = `
[
  "  select unique1,
         count(two), count(four), count(ten),
         count(hundred), count(thousand), count(twothousand),
         count(*)
    from tenk1 group by grouping sets (unique1,twothousand,thousand,hundred,ten,four,two)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 153,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 183,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "twothousand",
                            },
                          },
                        ],
                        "location": 191,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "thousand",
                            },
                          },
                        ],
                        "location": 203,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "hundred",
                            },
                          },
                        ],
                        "location": 212,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 220,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "four",
                            },
                          },
                        ],
                        "location": 224,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "two",
                            },
                          },
                        ],
                        "location": 229,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 168,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 27,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "two",
                                },
                              },
                            ],
                            "location": 33,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 27,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 39,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 45,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 39,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ten",
                                },
                              },
                            ],
                            "location": 58,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 73,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "hundred",
                                },
                              },
                            ],
                            "location": 79,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 73,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 89,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "thousand",
                                },
                              },
                            ],
                            "location": 95,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 89,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 106,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "twothousand",
                                },
                              },
                            ],
                            "location": 112,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 106,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 135,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 135,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 443 1`] = `
[
  "  select unique1,
         count(two), count(four), count(ten),
         count(hundred), count(thousand), count(twothousand),
         count(*)
    from tenk1 group by grouping sets (unique1,hundred,ten,four,two)",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeVar": {
                  "inh": true,
                  "location": 153,
                  "relname": "tenk1",
                  "relpersistence": "p",
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "unique1",
                            },
                          },
                        ],
                        "location": 183,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "hundred",
                            },
                          },
                        ],
                        "location": 191,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "ten",
                            },
                          },
                        ],
                        "location": 199,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "four",
                            },
                          },
                        ],
                        "location": 203,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "two",
                            },
                          },
                        ],
                        "location": 208,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_SETS",
                  "location": 168,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 9,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "unique1",
                          },
                        },
                      ],
                      "location": 9,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 27,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "two",
                                },
                              },
                            ],
                            "location": 33,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 27,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 39,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "four",
                                },
                              },
                            ],
                            "location": 45,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 39,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "ten",
                                },
                              },
                            ],
                            "location": 58,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 73,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "hundred",
                                },
                              },
                            ],
                            "location": 79,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 73,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 89,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "thousand",
                                },
                              },
                            ],
                            "location": 95,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 89,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 106,
                  "val": {
                    "FuncCall": {
                      "args": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "twothousand",
                                },
                              },
                            ],
                            "location": 112,
                          },
                        },
                      ],
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 106,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 135,
                  "val": {
                    "FuncCall": {
                      "agg_star": true,
                      "funcformat": "COERCE_EXPLICIT_CALL",
                      "funcname": [
                        {
                          "String": {
                            "sval": "count",
                          },
                        },
                      ],
                      "location": 135,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 449 1`] = `
[
  "set work_mem = '384kB'",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 15,
                  "sval": {
                    "sval": "384kB",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "work_mem",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 469 1`] = `
[
  "create table bug_16784(i int, j int)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateStmt": {
            "oncommit": "ONCOMMIT_NOOP",
            "relation": {
              "inh": true,
              "location": 13,
              "relname": "bug_16784",
              "relpersistence": "p",
            },
            "tableElts": [
              {
                "ColumnDef": {
                  "colname": "i",
                  "is_local": true,
                  "location": 23,
                  "typeName": {
                    "location": 25,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
              {
                "ColumnDef": {
                  "colname": "j",
                  "is_local": true,
                  "location": 30,
                  "typeName": {
                    "location": 32,
                    "names": [
                      {
                        "String": {
                          "sval": "pg_catalog",
                        },
                      },
                      {
                        "String": {
                          "sval": "int4",
                        },
                      },
                    ],
                    "typemod": -1,
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 474 1`] = `
[
  "insert into bug_16784 select g/10, g from generate_series(1,40) g",
  {
    "stmts": [
      {
        "stmt": {
          "InsertStmt": {
            "override": "OVERRIDING_NOT_SET",
            "relation": {
              "inh": true,
              "location": 12,
              "relname": "bug_16784",
              "relpersistence": "p",
            },
            "selectStmt": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeFunction": {
                      "alias": {
                        "aliasname": "g",
                      },
                      "functions": [
                        {
                          "List": {
                            "items": [
                              {
                                "FuncCall": {
                                  "args": [
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 1,
                                        },
                                        "location": 58,
                                      },
                                    },
                                    {
                                      "A_Const": {
                                        "ival": {
                                          "ival": 40,
                                        },
                                        "location": 60,
                                      },
                                    },
                                  ],
                                  "funcformat": "COERCE_EXPLICIT_CALL",
                                  "funcname": [
                                    {
                                      "String": {
                                        "sval": "generate_series",
                                      },
                                    },
                                  ],
                                  "location": 42,
                                },
                              },
                              {},
                            ],
                          },
                        },
                      ],
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 29,
                      "val": {
                        "A_Expr": {
                          "kind": "AEXPR_OP",
                          "lexpr": {
                            "ColumnRef": {
                              "fields": [
                                {
                                  "String": {
                                    "sval": "g",
                                  },
                                },
                              ],
                              "location": 29,
                            },
                          },
                          "location": 30,
                          "name": [
                            {
                              "String": {
                                "sval": "/",
                              },
                            },
                          ],
                          "rexpr": {
                            "A_Const": {
                              "ival": {
                                "ival": 10,
                              },
                              "location": 31,
                            },
                          },
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 35,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 35,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 479 1`] = `
[
  "select * from
  (values (1),(2)) v(a),
  lateral (select a, i, j, count(*) from
             bug_16784 group by cube(i,j)) s
  order by v.a, i, j",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "v",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 25,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 29,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "s",
                  },
                  "lateral": true,
                  "subquery": {
                    "SelectStmt": {
                      "fromClause": [
                        {
                          "RangeVar": {
                            "inh": true,
                            "location": 93,
                            "relname": "bug_16784",
                            "relpersistence": "p",
                          },
                        },
                      ],
                      "groupClause": [
                        {
                          "GroupingSet": {
                            "content": [
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "i",
                                      },
                                    },
                                  ],
                                  "location": 117,
                                },
                              },
                              {
                                "ColumnRef": {
                                  "fields": [
                                    {
                                      "String": {
                                        "sval": "j",
                                      },
                                    },
                                  ],
                                  "location": 119,
                                },
                              },
                            ],
                            "kind": "GROUPING_SET_CUBE",
                            "location": 112,
                          },
                        },
                      ],
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "targetList": [
                        {
                          "ResTarget": {
                            "location": 57,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "a",
                                    },
                                  },
                                ],
                                "location": 57,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 60,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "i",
                                    },
                                  },
                                ],
                                "location": 60,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 63,
                            "val": {
                              "ColumnRef": {
                                "fields": [
                                  {
                                    "String": {
                                      "sval": "j",
                                    },
                                  },
                                ],
                                "location": 63,
                              },
                            },
                          },
                        },
                        {
                          "ResTarget": {
                            "location": 66,
                            "val": {
                              "FuncCall": {
                                "agg_star": true,
                                "funcformat": "COERCE_EXPLICIT_CALL",
                                "funcname": [
                                  {
                                    "String": {
                                      "sval": "count",
                                    },
                                  },
                                ],
                                "location": 66,
                              },
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v",
                          },
                        },
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 136,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "i",
                          },
                        },
                      ],
                      "location": 141,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "j",
                          },
                        },
                      ],
                      "location": 144,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "A_Star": {},
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 492 1`] = `
[
  "select g%1000 as g1000, g%100 as g100, g%10 as g10, g
   from generate_series(0,1999) g",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeFunction": {
                  "alias": {
                    "aliasname": "g",
                  },
                  "functions": [
                    {
                      "List": {
                        "items": [
                          {
                            "FuncCall": {
                              "args": [
                                {
                                  "A_Const": {
                                    "ival": {},
                                    "location": 78,
                                  },
                                },
                                {
                                  "A_Const": {
                                    "ival": {
                                      "ival": 1999,
                                    },
                                    "location": 80,
                                  },
                                },
                              ],
                              "funcformat": "COERCE_EXPLICIT_CALL",
                              "funcname": [
                                {
                                  "String": {
                                    "sval": "generate_series",
                                  },
                                },
                              ],
                              "location": 62,
                            },
                          },
                          {},
                        ],
                      },
                    },
                  ],
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "name": "g1000",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 7,
                        },
                      },
                      "location": 8,
                      "name": [
                        {
                          "String": {
                            "sval": "%",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 1000,
                          },
                          "location": 9,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 24,
                  "name": "g100",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 24,
                        },
                      },
                      "location": 25,
                      "name": [
                        {
                          "String": {
                            "sval": "%",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 100,
                          },
                          "location": 26,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 39,
                  "name": "g10",
                  "val": {
                    "A_Expr": {
                      "kind": "AEXPR_OP",
                      "lexpr": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                      "location": 40,
                      "name": [
                        {
                          "String": {
                            "sval": "%",
                          },
                        },
                      ],
                      "rexpr": {
                        "A_Const": {
                          "ival": {
                            "ival": 10,
                          },
                          "location": 41,
                        },
                      },
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 52,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "g",
                          },
                        },
                      ],
                      "location": 52,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 495 1`] = `
[
  "analyze gs_data_1",
  {
    "stmts": [
      {
        "stmt": {
          "VacuumStmt": {
            "rels": [
              {
                "VacuumRelation": {
                  "relation": {
                    "inh": true,
                    "location": 8,
                    "relname": "gs_data_1",
                    "relpersistence": "p",
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 507 1`] = `
[
  "explain (costs off)
select g100, g10, sum(g::numeric), count(*), max(g::text)
from gs_data_1 group by cube (g1000, g100,g10)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 83,
                      "relname": "gs_data_1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g1000",
                                },
                              },
                            ],
                            "location": 108,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g100",
                                },
                              },
                            ],
                            "location": 115,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g10",
                                },
                              },
                            ],
                            "location": 120,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_CUBE",
                      "location": 102,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g100",
                              },
                            },
                          ],
                          "location": 27,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g10",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 38,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 42,
                                  },
                                },
                                "location": 43,
                                "typeName": {
                                  "location": 45,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "pg_catalog",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "numeric",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 38,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 55,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 55,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 65,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 69,
                                  },
                                },
                                "location": 70,
                                "typeName": {
                                  "location": 72,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "text",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "max",
                              },
                            },
                          ],
                          "location": 65,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 511 1`] = `
[
  "create table gs_group_1 as
select g100, g10, sum(g::numeric), count(*), max(g::text)
from gs_data_1 group by cube (g1000, g100,g10)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "gs_group_1",
                "relpersistence": "p",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 90,
                      "relname": "gs_data_1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g1000",
                                },
                              },
                            ],
                            "location": 115,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g100",
                                },
                              },
                            ],
                            "location": 122,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g10",
                                },
                              },
                            ],
                            "location": 127,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_CUBE",
                      "location": 109,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 34,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g100",
                              },
                            },
                          ],
                          "location": 34,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 40,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g10",
                              },
                            },
                          ],
                          "location": 40,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 45,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 49,
                                  },
                                },
                                "location": 50,
                                "typeName": {
                                  "location": 52,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "pg_catalog",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "numeric",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 45,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 62,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 62,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 72,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 76,
                                  },
                                },
                                "location": 77,
                                "typeName": {
                                  "location": 79,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "text",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "max",
                              },
                            },
                          ],
                          "location": 72,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 524 1`] = `
[
  "create table gs_hash_1 as
select g100, g10, sum(g::numeric), count(*), max(g::text)
from gs_data_1 group by cube (g1000, g100,g10)",
  {
    "stmts": [
      {
        "stmt": {
          "CreateTableAsStmt": {
            "into": {
              "onCommit": "ONCOMMIT_NOOP",
              "rel": {
                "inh": true,
                "location": 13,
                "relname": "gs_hash_1",
                "relpersistence": "p",
              },
            },
            "objtype": "OBJECT_TABLE",
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeVar": {
                      "inh": true,
                      "location": 89,
                      "relname": "gs_data_1",
                      "relpersistence": "p",
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g1000",
                                },
                              },
                            ],
                            "location": 114,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g100",
                                },
                              },
                            ],
                            "location": 121,
                          },
                        },
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "g10",
                                },
                              },
                            ],
                            "location": 126,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_CUBE",
                      "location": 108,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 33,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g100",
                              },
                            },
                          ],
                          "location": 33,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 39,
                      "val": {
                        "ColumnRef": {
                          "fields": [
                            {
                              "String": {
                                "sval": "g10",
                              },
                            },
                          ],
                          "location": 39,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 44,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 48,
                                  },
                                },
                                "location": 49,
                                "typeName": {
                                  "location": 51,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "pg_catalog",
                                      },
                                    },
                                    {
                                      "String": {
                                        "sval": "numeric",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "sum",
                              },
                            },
                          ],
                          "location": 44,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 61,
                      "val": {
                        "FuncCall": {
                          "agg_star": true,
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "count",
                              },
                            },
                          ],
                          "location": 61,
                        },
                      },
                    },
                  },
                  {
                    "ResTarget": {
                      "location": 71,
                      "val": {
                        "FuncCall": {
                          "args": [
                            {
                              "TypeCast": {
                                "arg": {
                                  "ColumnRef": {
                                    "fields": [
                                      {
                                        "String": {
                                          "sval": "g",
                                        },
                                      },
                                    ],
                                    "location": 75,
                                  },
                                },
                                "location": 76,
                                "typeName": {
                                  "location": 78,
                                  "names": [
                                    {
                                      "String": {
                                        "sval": "text",
                                      },
                                    },
                                  ],
                                  "typemod": -1,
                                },
                              },
                            },
                          ],
                          "funcformat": "COERCE_EXPLICIT_CALL",
                          "funcname": [
                            {
                              "String": {
                                "sval": "max",
                              },
                            },
                          ],
                          "location": 71,
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 528 1`] = `
[
  "set enable_sort = true",
  {
    "stmts": [
      {
        "stmt": {
          "VariableSetStmt": {
            "args": [
              {
                "A_Const": {
                  "location": 18,
                  "sval": {
                    "sval": "true",
                  },
                },
              },
            ],
            "kind": "VAR_SET_VALUE",
            "name": "enable_sort",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 538 1`] = `
[
  "drop table gs_group_1",
  {
    "stmts": [
      {
        "stmt": {
          "DropStmt": {
            "behavior": "DROP_RESTRICT",
            "objects": [
              {
                "List": {
                  "items": [
                    {
                      "String": {
                        "sval": "gs_group_1",
                      },
                    },
                  ],
                },
              },
            ],
            "removeType": "OBJECT_TABLE",
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 544 1`] = `
[
  "select a, b, c
from (values (1, 2, 3), (4, null, 6), (7, 8, 9)) as t (a, b, c)
group by all rollup(a, b), rollup(a, c)
order by a, b, c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 29,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 32,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 35,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 4,
                                  },
                                  "location": 40,
                                },
                              },
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 43,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 6,
                                  },
                                  "location": 49,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 7,
                                  },
                                  "location": 54,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 8,
                                  },
                                  "location": 57,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 9,
                                  },
                                  "location": 60,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 99,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 102,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 92,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 113,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 116,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 106,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 128,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 131,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 134,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 556 1`] = `
[
  "select a, b, c
from (values (1, 2, 3), (4, null, 6), (7, 8, 9)) as t (a, b, c)
group by distinct rollup(a, b), rollup(a, c)
order by a, b, c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 29,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 32,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 35,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 4,
                                  },
                                  "location": 40,
                                },
                              },
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 43,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 6,
                                  },
                                  "location": 49,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 7,
                                  },
                                  "location": 54,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 8,
                                  },
                                  "location": 57,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 9,
                                  },
                                  "location": 60,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 104,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 107,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 97,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 118,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 121,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 111,
                },
              },
            ],
            "groupDistinct": true,
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 133,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 136,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 139,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 7,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 7,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 10,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 10,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 13,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 13,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 562 1`] = `
[
  "select distinct a, b, c
from (values (1, 2, 3), (4, null, 6), (7, 8, 9)) as t (a, b, c)
group by rollup(a, b), rollup(a, c)
order by a, b, c",
  {
    "stmts": [
      {
        "stmt": {
          "SelectStmt": {
            "distinctClause": [
              {},
            ],
            "fromClause": [
              {
                "RangeSubselect": {
                  "alias": {
                    "aliasname": "t",
                    "colnames": [
                      {
                        "String": {
                          "sval": "a",
                        },
                      },
                      {
                        "String": {
                          "sval": "b",
                        },
                      },
                      {
                        "String": {
                          "sval": "c",
                        },
                      },
                    ],
                  },
                  "subquery": {
                    "SelectStmt": {
                      "limitOption": "LIMIT_OPTION_DEFAULT",
                      "op": "SETOP_NONE",
                      "valuesLists": [
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 1,
                                  },
                                  "location": 38,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 2,
                                  },
                                  "location": 41,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 3,
                                  },
                                  "location": 44,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 4,
                                  },
                                  "location": 49,
                                },
                              },
                              {
                                "A_Const": {
                                  "isnull": true,
                                  "location": 52,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 6,
                                  },
                                  "location": 58,
                                },
                              },
                            ],
                          },
                        },
                        {
                          "List": {
                            "items": [
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 7,
                                  },
                                  "location": 63,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 8,
                                  },
                                  "location": 66,
                                },
                              },
                              {
                                "A_Const": {
                                  "ival": {
                                    "ival": 9,
                                  },
                                  "location": 69,
                                },
                              },
                            ],
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
            "groupClause": [
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 104,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "b",
                            },
                          },
                        ],
                        "location": 107,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 97,
                },
              },
              {
                "GroupingSet": {
                  "content": [
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "a",
                            },
                          },
                        ],
                        "location": 118,
                      },
                    },
                    {
                      "ColumnRef": {
                        "fields": [
                          {
                            "String": {
                              "sval": "c",
                            },
                          },
                        ],
                        "location": 121,
                      },
                    },
                  ],
                  "kind": "GROUPING_SET_ROLLUP",
                  "location": 111,
                },
              },
            ],
            "limitOption": "LIMIT_OPTION_DEFAULT",
            "op": "SETOP_NONE",
            "sortClause": [
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 133,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 136,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
              {
                "SortBy": {
                  "location": -1,
                  "node": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 139,
                    },
                  },
                  "sortby_dir": "SORTBY_DEFAULT",
                  "sortby_nulls": "SORTBY_NULLS_DEFAULT",
                },
              },
            ],
            "targetList": [
              {
                "ResTarget": {
                  "location": 16,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "a",
                          },
                        },
                      ],
                      "location": 16,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 19,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "b",
                          },
                        },
                      ],
                      "location": 19,
                    },
                  },
                },
              },
              {
                "ResTarget": {
                  "location": 22,
                  "val": {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "c",
                          },
                        },
                      ],
                      "location": 22,
                    },
                  },
                },
              },
            ],
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 568 1`] = `
[
  "explain (costs off)
select (select grouping(v1)) from (values ((select 1))) v(v1) group by cube(v1)",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "v1",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "SubLink": {
                                      "location": 63,
                                      "subLinkType": "EXPR_SUBLINK",
                                      "subselect": {
                                        "SelectStmt": {
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 71,
                                                "val": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 71,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "GroupingSet": {
                      "content": [
                        {
                          "ColumnRef": {
                            "fields": [
                              {
                                "String": {
                                  "sval": "v1",
                                },
                              },
                            ],
                            "location": 96,
                          },
                        },
                      ],
                      "kind": "GROUPING_SET_CUBE",
                      "location": 91,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "SubLink": {
                          "location": 27,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 35,
                                    "val": {
                                      "GroupingFunc": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "v1",
                                                  },
                                                },
                                              ],
                                              "location": 44,
                                            },
                                          },
                                        ],
                                        "location": 35,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;

exports[`groupingsets.sql > line 572 1`] = `
[
  "explain (costs off)
select (select grouping(v1)) from (values ((select 1))) v(v1) group by v1",
  {
    "stmts": [
      {
        "stmt": {
          "ExplainStmt": {
            "options": [
              {
                "DefElem": {
                  "arg": {
                    "String": {
                      "sval": "off",
                    },
                  },
                  "defaction": "DEFELEM_UNSPEC",
                  "defname": "costs",
                  "location": 9,
                },
              },
            ],
            "query": {
              "SelectStmt": {
                "fromClause": [
                  {
                    "RangeSubselect": {
                      "alias": {
                        "aliasname": "v",
                        "colnames": [
                          {
                            "String": {
                              "sval": "v1",
                            },
                          },
                        ],
                      },
                      "subquery": {
                        "SelectStmt": {
                          "limitOption": "LIMIT_OPTION_DEFAULT",
                          "op": "SETOP_NONE",
                          "valuesLists": [
                            {
                              "List": {
                                "items": [
                                  {
                                    "SubLink": {
                                      "location": 63,
                                      "subLinkType": "EXPR_SUBLINK",
                                      "subselect": {
                                        "SelectStmt": {
                                          "limitOption": "LIMIT_OPTION_DEFAULT",
                                          "op": "SETOP_NONE",
                                          "targetList": [
                                            {
                                              "ResTarget": {
                                                "location": 71,
                                                "val": {
                                                  "A_Const": {
                                                    "ival": {
                                                      "ival": 1,
                                                    },
                                                    "location": 71,
                                                  },
                                                },
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
                "groupClause": [
                  {
                    "ColumnRef": {
                      "fields": [
                        {
                          "String": {
                            "sval": "v1",
                          },
                        },
                      ],
                      "location": 91,
                    },
                  },
                ],
                "limitOption": "LIMIT_OPTION_DEFAULT",
                "op": "SETOP_NONE",
                "targetList": [
                  {
                    "ResTarget": {
                      "location": 27,
                      "val": {
                        "SubLink": {
                          "location": 27,
                          "subLinkType": "EXPR_SUBLINK",
                          "subselect": {
                            "SelectStmt": {
                              "limitOption": "LIMIT_OPTION_DEFAULT",
                              "op": "SETOP_NONE",
                              "targetList": [
                                {
                                  "ResTarget": {
                                    "location": 35,
                                    "val": {
                                      "GroupingFunc": {
                                        "args": [
                                          {
                                            "ColumnRef": {
                                              "fields": [
                                                {
                                                  "String": {
                                                    "sval": "v1",
                                                  },
                                                },
                                              ],
                                              "location": 44,
                                            },
                                          },
                                        ],
                                        "location": 35,
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                      },
                    },
                  },
                ],
              },
            },
          },
        },
      },
    ],
    "version": 160001,
  },
]
`;
